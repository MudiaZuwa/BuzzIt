/*! For license information please see main.672dec9f.js.LICENSE.txt */
(()=>{var e={740:e=>{"use strict";e.exports=function(e,t,n,r,i,s,a,o){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,s,a,o],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},197:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.default)((function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=null;return t.forEach((function(e){if(null==i){var t=e.apply(void 0,n);null!=t&&(i=t)}})),i}))};var r,i=n(534),s=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},534:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,i,s,a){var o=i||"<<anonymous>>",l=a||r;if(null==n[r])return t?new Error("Required "+s+" `"+l+"` was not specified in `"+o+"`."):null;for(var c=arguments.length,u=Array(c>6?c-6:0),d=6;d<c;d++)u[d-6]=arguments[d];return e.apply(void 0,[n,r,o,s,l].concat(u))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,a){if(a!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),I=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),j=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,A=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function $(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=$(e.type,!1);case 11:return e=$(e.type.render,!1);case 1:return e=$(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case x:return"Portal";case E:return"Profiler";case C:return"StrictMode";case N:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case j:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return A({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function J(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return A({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,ke=null,Ce=null;function Ee(e){if(e=_i(e)){if("function"!==typeof xe)throw Error(s(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Se(e){ke?Ce?Ce.push(e):Ce=[e]:ke=e}function Ie(){if(ke){var e=ke,t=Ce;if(Ce=ke=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Te(e,t){return e(t)}function Ne(){}var Pe=!1;function Re(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Te(e,t,n)}finally{Pe=!1,(null!==ke||null!==Ce)&&(Ne(),Ie())}}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Oe=!1}function Le(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Ae=null,Fe=!1,Ue=null,$e={onError:function(e){Me=!0,Ae=e}};function ze(e,t,n,r,i,s,a,o,l){Me=!1,Ae=null,Le.apply($e,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(s(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return He(i),e;if(a===r)return He(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Qe=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=dt(o):0!==(s&=a)&&(r=dt(s))}else 0!==(a=n&~i)?r=dt(a):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,kt,Ct,Et,St=!1,It=[],Tt=null,Nt=null,Pt=null,Rt=new Map,jt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function At(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Et(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function $t(){St=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==Nt&&Ft(Nt)&&(Nt=null),null!==Pt&&Ft(Pt)&&(Pt=null),Rt.forEach(Ut),jt.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,$t)))}function Bt(e){function t(t){return zt(t,e)}if(0<It.length){zt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&zt(Tt,e),null!==Nt&&zt(Nt,e),null!==Pt&&zt(Pt,e),Rt.forEach(t),jt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)At(n),null===n.blockedOn&&Ot.shift()}var Wt=b.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,r){var i=_t,s=Wt.transition;Wt.transition=null;try{_t=1,Gt(e,t,n,r)}finally{_t=i,Wt.transition=s}}function Vt(e,t,n,r){var i=_t,s=Wt.transition;Wt.transition=null;try{_t=4,Gt(e,t,n,r)}finally{_t=i,Wt.transition=s}}function Gt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Kt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Mt(Tt,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Pt=Mt(Pt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,jt.set(s,Mt(jt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=_i(i);if(null!==s&&wt(s),null===(s=Yt(e,t,n,r))&&Hr(e,t,r,Kt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Kt=null;function Yt(e,t,n,r){if(Kt=null,null!==(e=yi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return A(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=A({},cn,{view:0,detail:0}),hn=sn(dn),fn=A({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),mn=sn(A({},fn,{dataTransfer:0})),gn=sn(A({},dn,{relatedTarget:0})),vn=sn(A({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=A({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=sn(yn),bn=sn(A({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function En(){return Cn}var Sn=A({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=sn(Sn),Tn=sn(A({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(A({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Pn=sn(A({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=A({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jn=sn(Rn),On=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,An=u&&(!Dn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Un=!1;function $n(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function qn(e,t,n,r){Se(r),0<(t=Vr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vn=null,Gn=null;function Kn(e){Fr(e,0)}function Yn(e){if(G(bi(e)))return e}function Qn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Vn&&(Vn.detachEvent("onpropertychange",nr),Gn=Vn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];qn(t,Gn,e,we(e)),Re(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Vn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function sr(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,_r=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Vr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},Cr={};function Er(e){if(kr[e])return kr[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return kr[e]=n[t];return e}u&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Sr=Er("animationend"),Ir=Er("animationiteration"),Tr=Er("animationstart"),Nr=Er("transitionend"),Pr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(e,t){Pr.set(e,t),l(t,[e])}for(var Or=0;Or<Rr.length;Or++){var Dr=Rr[Or];jr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}jr(Sr,"onAnimationEnd"),jr(Ir,"onAnimationIteration"),jr(Tr,"onAnimationStart"),jr("dblclick","onDoubleClick"),jr("focusin","onFocus"),jr("focusout","onBlur"),jr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Ar(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Ae;Me=!1,Ae=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Ar(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Ar(i,o,c),s=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function $r(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||$r(t,!1,e),$r(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,$r("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Qt(t)){case 1:var i=qt;break;case 4:i=Vt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=yi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Re((function(){var r=s,i=we(n),a=[];e:{var o=Pr.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case Sr:case Ir:case Tr:l=vn;break;case Nr:l=Pn;break;case"scroll":l=hn;break;case"wheel":l=jn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=je(p,h))&&u.push(qr(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:bi(l),f=null==c?o:bi(c),(o=new u(m,p+"leave",l,n,i)).target=d,o.relatedTarget=f,m=null,yi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=h;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)h=Gr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Kr(a,o,l,u,!1),null!==c&&null!==d&&Kr(a,d,c,u,!0)}if("select"===(l=(o=r?bi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Qn;else if(Hn(o))if(Xn)g=ar;else{g=ir;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?qn(a,g,n,i):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?bi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,br(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(a,n,i)}var y;if(Dn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Bn?$n(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(An&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Bn&&(y=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(v=Vr(r,_)).length&&(_=new bn(_,e,null,n,i),a.push({event:_,listeners:v}),y?_.data=y:null!==(y=zn(n))&&(_.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&$n(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return An&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Vr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Fr(a,t)}))}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=je(e,n))&&r.unshift(qr(e,s,i)),null!=(s=je(e,t))&&r.push(qr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=je(n,s))&&a.unshift(qr(n,l,o)):i||null!=(l=je(n,s))&&a.push(qr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Qr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wi(e){return e[fi]||null}var xi=[],ki=-1;function Ci(e){return{current:e}}function Ei(e){0>ki||(e.current=xi[ki],xi[ki]=null,ki--)}function Si(e,t){ki++,xi[ki]=e.current,e.current=t}var Ii={},Ti=Ci(Ii),Ni=Ci(!1),Pi=Ii;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function ji(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ei(Ni),Ei(Ti)}function Di(e,t,n){if(Ti.current!==Ii)throw Error(s(168));Si(Ti,t),Si(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,W(e)||"Unknown",i));return A({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Pi=Ti.current,Si(Ti,e),Si(Ni,Ni.current),!0}function Ai(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ni),Ei(Ti),Si(Ti,e)):Ei(Ni),Si(Ni,n)}var Fi=null,Ui=!1,$i=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function Bi(){if(!$i&&null!==Fi){$i=!0;var e=0,t=_t;try{var n=Fi;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Ui=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ge(Ze,Bi),i}finally{_t=t,$i=!1}}return null}var Wi=[],Hi=0,qi=null,Vi=0,Gi=[],Ki=0,Yi=null,Qi=1,Xi="";function Ji(e,t){Wi[Hi++]=Vi,Wi[Hi++]=qi,qi=e,Vi=t}function Zi(e,t,n){Gi[Ki++]=Qi,Gi[Ki++]=Xi,Gi[Ki++]=Yi,Yi=e;var r=Qi;e=Xi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Qi=1<<32-at(t)+i|n<<i|r,Xi=s+e}else Qi=1<<s|n<<i|r,Xi=e}function es(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ts(e){for(;e===qi;)qi=Wi[--Hi],Wi[Hi]=null,Vi=Wi[--Hi],Wi[Hi]=null;for(;e===Yi;)Yi=Gi[--Ki],Gi[Ki]=null,Xi=Gi[--Ki],Gi[Ki]=null,Qi=Gi[--Ki],Gi[Ki]=null}var ns=null,rs=null,is=!1,ss=null;function as(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Qi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&os(e,t)?as(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)as(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function _s(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Ac(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===j&&ys(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ac(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case x:return(t=Fc(t,e.mode,n)).return=e,t;case j:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?u(e,t,n,r):null;case j:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:d(e,t,n,r,null);vs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case j:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function m(i,s,o,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(i,d,o[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),s=a(v,s,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===o.length)return n(i,d),is&&Ji(i,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(i,o[m],l))&&(s=a(d,s,m),null===u?c=d:u.sibling=d,u=d);return is&&Ji(i,m),c}for(d=r(i,d);m<o.length;m++)null!==(g=p(d,i,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),is&&Ji(i,m),c}function g(i,o,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var _=f(i,m,y.value,c);if(null===_){null===m&&(m=v);break}e&&m&&null===_.alternate&&t(i,m),o=a(_,o,g),null===d?u=_:d.sibling=_,d=_,m=v}if(y.done)return n(i,m),is&&Ji(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return is&&Ji(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),is&&Ji(i,g),u}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===k){if(7===u.tag){n(r,u.sibling),(s=i(u,a.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===j&&ys(c)===u.type){n(r,u.sibling),(s=i(u,a.props)).ref=gs(r,u,a),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===k?((s=Lc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Dc(a.type,a.key,a.props,null,r.mode,l)).ref=gs(r,s,a),l.return=r,r=l)}return o(r);case x:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(a,r.mode,l)).return=r,r=s}return o(r);case j:return e(r,s,(u=a._init)(a._payload),l)}if(te(a))return m(r,s,a,l);if(L(a))return g(r,s,a,l);vs(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Ac(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var bs=_s(!0),ws=_s(!1),xs=Ci(null),ks=null,Cs=null,Es=null;function Ss(){Es=Cs=ks=null}function Is(e){var t=xs.current;Ei(xs),e._currentValue=t}function Ts(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ns(e,t){ks=e,Es=Cs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_o=!0),e.firstContext=null)}function Ps(e){var t=e._currentValue;if(Es!==e)if(e={context:e,memoizedValue:t,next:null},null===Cs){if(null===ks)throw Error(s(308));Cs=e,ks.dependencies={lanes:0,firstContext:e}}else Cs=Cs.next=e;return t}var Rs=null;function js(e){null===Rs?Rs=[e]:Rs.push(e)}function Os(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,js(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ds(e,r)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function As(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ds(e,n)}return null===(i=r.interleaved)?(t.next=t,js(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ds(e,n)}function $s(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;Ls=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=A({},d,h);break e;case 2:Ls=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ml|=a,e.lanes=a,e.memoizedState=d}}function Ws(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Hs={},qs=Ci(Hs),Vs=Ci(Hs),Gs=Ci(Hs);function Ks(e){if(e===Hs)throw Error(s(174));return e}function Ys(e,t){switch(Si(Gs,t),Si(Vs,e),Si(qs,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(qs),Si(qs,t)}function Qs(){Ei(qs),Ei(Vs),Ei(Gs)}function Xs(e){Ks(Gs.current);var t=Ks(qs.current),n=le(t,e.type);t!==n&&(Si(Vs,e),Si(qs,n))}function Js(e){Vs.current===e&&(Ei(qs),Ei(Vs))}var Zs=Ci(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=b.ReactCurrentDispatcher,ia=b.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ca=!1,ua=!1,da=0,ha=0;function fa(){throw Error(s(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,i,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Ja:Za,e=n(r,i),ua){a=0;do{if(ua=!1,da=0,25<=a)throw Error(s(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,i)}while(ua)}if(ra.current=Xa,t=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ca=!1,t)throw Error(s(300));return e}function ga(){var e=0!==da;return da=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function ya(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function _a(e,t){return"function"===typeof t?t(e):t}function ba(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=oa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((sa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,aa.lanes|=d,Ml|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(_o=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,aa.lanes|=a,Ml|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(_o=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function xa(){}function ka(e,t){var n=aa,r=ya(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,_o=!0),r=r.queue,La(Sa.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Pa(9,Ea.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(s(349));0!==(30&sa)||Ca(n,t,i)}return i}function Ca(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ea(e,t,n,r){t.value=n,t.getSnapshot=r,Ia(t)&&Ta(e)}function Sa(e,t,n){return n((function(){Ia(t)&&Ta(e)}))}function Ia(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ta(e){var t=Ds(e,1);null!==t&&nc(t,e,1,-1)}function Na(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:e},t.queue=e,e=e.dispatch=Ga.bind(null,aa,e),[t.memoizedState,e]}function Pa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ra(){return ya().memoizedState}function ja(e,t,n,r){var i=va();aa.flags|=e,i.memoizedState=Pa(1|t,n,void 0,void 0===r?null:r)}function Oa(e,t,n,r){var i=ya();r=void 0===r?null:r;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==r&&pa(r,a.deps))return void(i.memoizedState=Pa(t,n,s,r))}aa.flags|=e,i.memoizedState=Pa(1|t,n,s,r)}function Da(e,t){return ja(8390656,8,e,t)}function La(e,t){return Oa(2048,8,e,t)}function Ma(e,t){return Oa(4,2,e,t)}function Aa(e,t){return Oa(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ua(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4,4,Fa.bind(null,t,e),n)}function $a(){}function za(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ba(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wa(e,t,n){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,_o=!0),e.memoizedState=n):(or(n,t)||(n=mt(),aa.lanes|=n,Ml|=n,e.baseState=!0),t)}function Ha(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{_t=n,ia.transition=r}}function qa(){return ya().memoizedState}function Va(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ka(e))Ya(t,n);else if(null!==(n=Os(e,t,n,r))){nc(n,e,r,ec()),Qa(n,t,r)}}function Ga(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ka(e))Ya(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,js(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Os(e,t,i,r))&&(nc(n,e,r,i=ec()),Qa(n,t,r))}}function Ka(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ya(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Xa={readContext:Ps,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Ja={readContext:Ps,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Ps,useEffect:Da,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ja(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ja(4194308,4,e,t)},useInsertionEffect:function(e,t){return ja(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Va.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Na,useDebugValue:$a,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Na(!1),t=e[0];return e=Ha.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,i=va();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nl)throw Error(s(349));0!==(30&sa)||Ca(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Da(Sa.bind(null,r,a,e),[e]),r.flags|=2048,Pa(9,Ea.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Nl.identifierPrefix;if(is){var n=Xi;t=":"+t+"R"+(n=(Qi&~(1<<32-at(Qi)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Ps,useCallback:za,useContext:Ps,useEffect:La,useImperativeHandle:Ua,useInsertionEffect:Ma,useLayoutEffect:Aa,useMemo:Ba,useReducer:ba,useRef:Ra,useState:function(){return ba(_a)},useDebugValue:$a,useDeferredValue:function(e){return Wa(ya(),oa.memoizedState,e)},useTransition:function(){return[ba(_a)[0],ya().memoizedState]},useMutableSource:xa,useSyncExternalStore:ka,useId:qa,unstable_isNewReconciler:!1},eo={readContext:Ps,useCallback:za,useContext:Ps,useEffect:La,useImperativeHandle:Ua,useInsertionEffect:Ma,useLayoutEffect:Aa,useMemo:Ba,useReducer:wa,useRef:Ra,useState:function(){return wa(_a)},useDebugValue:$a,useDeferredValue:function(e){var t=ya();return null===oa?t.memoizedState=e:Wa(t,oa.memoizedState,e)},useTransition:function(){return[wa(_a)[0],ya().memoizedState]},useMutableSource:xa,useSyncExternalStore:ka,useId:qa,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=A({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:A({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nc(t,e,i,r),$s(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,i))&&(nc(t,e,i,r),$s(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Us(e,i,r))&&(nc(t,e,r,n),$s(t,e,r))}};function io(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function so(e,t,n){var r=!1,i=Ii,s=t.contextType;return"object"===typeof s&&null!==s?s=Ps(s):(i=ji(t)?Pi:Ti.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ii),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ms(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ps(s):(s=ji(t)?Pi:Ti.current,i.context=Ri(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,ql=r),uo(0,t)},n}function po(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Vl?Vl=new Set([this]):Vl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var yo=b.ReactCurrentOwner,_o=!1;function bo(e,t,n,r){t.child=null===e?ws(t,null,n,r):bs(t,e.child,n,r)}function wo(e,t,n,r,i){n=n.render;var s=t.ref;return Ns(t,i),r=ma(e,t,n,r,s,i),n=ga(),null===e||_o?(is&&n&&es(t),t.flags|=1,bo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function xo(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||jc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ko(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Ho(e,t,i)}return t.flags|=1,(e=Oc(s,r)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(_o=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ho(e,t,i);0!==(131072&e.flags)&&(_o=!0)}}return So(e,t,n,r,i)}function Co(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Ol,jl),jl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Ol,jl),jl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Si(Ol,jl),jl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Si(Ol,jl),jl|=r;return bo(e,t,i,n),t.child}function Eo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function So(e,t,n,r,i){var s=ji(n)?Pi:Ti.current;return s=Ri(t,s),Ns(t,i),n=ma(e,t,n,r,s,i),r=ga(),null===e||_o?(is&&r&&es(t),t.flags|=1,bo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function Io(e,t,n,r,i){if(ji(n)){var s=!0;Mi(t)}else s=!1;if(Ns(t,i),null===t.stateNode)Wo(e,t),so(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ps(c):c=Ri(t,c=ji(n)?Pi:Ti.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Ls=!1;var h=t.memoizedState;a.state=h,Bs(t,r,a,i),l=t.memoizedState,o!==r||h!==l||Ni.current||Ls?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Ls||io(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,As(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ps(l):l=Ri(t,l=ji(n)?Pi:Ti.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ao(t,a,r,l),Ls=!1,h=t.memoizedState,a.state=h,Bs(t,r,a,i);var p=t.memoizedState;o!==d||h!==p||Ni.current||Ls?("function"===typeof f&&(no(t,n,f,r),p=t.memoizedState),(c=Ls||io(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return To(e,t,n,r,s,i)}function To(e,t,n,r,i,s){Eo(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Ai(t,n,!1),Ho(e,t,s);r=t.stateNode,yo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,o,s)):bo(e,t,o,s),t.memoizedState=r.state,i&&Ai(t,n,!0),t.child}function No(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Ys(e,t.containerInfo)}function Po(e,t,n,r,i){return fs(),ps(i),t.flags|=256,bo(e,t,n,r),t.child}var Ro,jo,Oo,Do,Lo={dehydrated:null,treeContext:null,retryLane:0};function Mo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ao(e,t,n){var r,i=t.pendingProps,a=Zs.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Si(Zs,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Mc(l,i,0,null),e=Lc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Mo(n),t.memoizedState=Lo,e):Fo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,Uo(e,t,o,r=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(a=Lc(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,o),t.child.memoizedState=Mo(o),t.memoizedState=Lo,a);if(0===(1&t.mode))return Uo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Uo(e,t,o,r=co(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),_o||l){if(null!==(r=Nl)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ds(e,i),nc(r,e,i,-1))}return mc(),Uo(e,t,o,r=co(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Gi[Ki++]=Qi,Gi[Ki++]=Xi,Gi[Ki++]=Yi,Qi=e.id,Xi=e.overflow,Yi=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Oc(r,o):(o=Lc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Mo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Lo,i}return e=(o=e.child).sibling,i=Oc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fo(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uo(e,t,n,r){return null!==r&&ps(r),bs(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function $o(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ts(e.return,t,n)}function zo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Bo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(bo(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$o(e,n,t);else if(19===e.tag)$o(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ea(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zo(t,!0,n,null,s);break;case"together":zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qo(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Vo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Go(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vo(t),null;case 1:case 17:return ji(t.type)&&Oi(),Vo(t),null;case 3:return r=t.stateNode,Qs(),Ei(Ni),Ei(Ti),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),jo(e,t),Vo(t),null;case 5:Js(t);var i=Ks(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)Oo(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Vo(t),null}if(e=Ks(qs.current),ds(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Q(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":ie(r,a),Ur("invalid",r)}for(var l in ye(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":V(r),Z(r,a,!0);break;case"textarea":V(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Ro(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":Q(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=A({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(a in ye(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",e):null!=u&&_(e,a,u,l))}switch(n){case"input":V(e),Z(e,r,!1);break;case"textarea":V(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Vo(t),null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Ks(Gs.current),Ks(qs.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Vo(t),null;case 13:if(Ei(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),fs(),t.flags|=98560,a=!1;else if(a=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[hi]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Vo(t),a=!1}else null!==ss&&(ac(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Dl&&(Dl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Vo(t),null);case 4:return Qs(),jo(e,t),null===e&&Br(t.stateNode.containerInfo),Vo(t),null;case 10:return Is(t.type._context),Vo(t),null;case 19:if(Ei(Zs),null===(a=t.memoizedState))return Vo(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)qo(a,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,qo(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>Bl&&(t.flags|=128,r=!0,qo(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!is)return Vo(t),null}else 2*Xe()-a.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,qo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=Zs.current,Si(Zs,r?1&n|2:1&n),t):(Vo(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&jl)&&(Vo(t),6&t.subtreeFlags&&(t.flags|=8192)):Vo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ko(e,t){switch(ts(t),t.tag){case 1:return ji(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qs(),Ei(Ni),Ei(Ti),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Js(t),null;case 13:if(Ei(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(Zs),null;case 4:return Qs(),null;case 10:return Is(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ro=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},jo=function(){},Oo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ks(qs.current);var s,a=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),a=[];break;case"select":i=A({},i,{value:void 0}),r=A({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Do=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yo=!1,Qo=!1,Xo="function"===typeof WeakSet?WeakSet:Set,Jo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Cc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Qo||Zo(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&el(n,t,a),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Qo&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Cc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Qo=(r=Qo)||null!==n.memoizedState,hl(e,t,n),Qo=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xo),t.forEach((function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(a,o,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Cc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Cc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Cc(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Cc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(i,a),_e(l,o);var u=_e(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):_(i,d,h,u)}switch(l){case"input":J(i,a);break;case"textarea":se(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(g){Cc(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Cc(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Cc(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Xe())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qo=(u=Qo)||d,ml(t,e),Qo=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Jo=e,d=e.child;null!==d;){for(h=Jo=d;null!==Jo;){switch(p=(f=Jo).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zo(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Cc(r,n,g)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==p?(p.return=f,Jo=p):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Cc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Cc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,ol(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(s(161))}}catch(o){Cc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Jo=e,_l(e,t,n)}function _l(e,t,n){for(var r=0!==(1&e.mode);null!==Jo;){var i=Jo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Yo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Qo;o=Yo;var c=Qo;if(Yo=a,(Qo=l)&&!c)for(Jo=i;null!==Jo;)l=(a=Jo).child,22===a.tag&&null!==a.memoizedState?xl(i):null!==l?(l.return=a,Jo=l):xl(i);for(;null!==s;)Jo=s,_l(s,t,n),s=s.sibling;Jo=i,Yo=o,Qo=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Jo=s):bl(e)}}function bl(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ws(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ws(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(s(163))}Qo||512&t.flags&&il(t)}catch(f){Cc(t,t.return,f)}}if(t===e){Jo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jo=n;break}Jo=t.return}}function wl(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jo=n;break}Jo=t.return}}function xl(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Cc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Cc(t,i,l)}}var s=t.return;try{il(t)}catch(l){Cc(t,s,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Cc(t,a,l)}}}catch(l){Cc(t,t.return,l)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var kl,Cl=Math.ceil,El=b.ReactCurrentDispatcher,Sl=b.ReactCurrentOwner,Il=b.ReactCurrentBatchConfig,Tl=0,Nl=null,Pl=null,Rl=0,jl=0,Ol=Ci(0),Dl=0,Ll=null,Ml=0,Al=0,Fl=0,Ul=null,$l=null,zl=0,Bl=1/0,Wl=null,Hl=!1,ql=null,Vl=null,Gl=!1,Kl=null,Yl=0,Ql=0,Xl=null,Jl=-1,Zl=0;function ec(){return 0!==(6&Tl)?Xe():-1!==Jl?Jl:Jl=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Rl?Rl&-Rl:null!==ms.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nc(e,t,n,r){if(50<Ql)throw Ql=0,Xl=null,Error(s(185));vt(e,n,r),0!==(2&Tl)&&e===Nl||(e===Nl&&(0===(2&Tl)&&(Al|=n),4===Dl&&oc(e,Rl)),rc(e,r),1===n&&0===Tl&&0===(1&t.mode)&&(Bl=Xe()+500,Ui&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ht(e,e===Nl?Rl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Ui=!0,zi(e)}(lc.bind(null,e)):zi(lc.bind(null,e)),ai((function(){0===(6&Tl)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Jl=-1,Zl=0,0!==(6&Tl))throw Error(s(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Nl?Rl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Tl;Tl|=2;var a=pc();for(Nl===e&&Rl===t||(Wl=null,Bl=Xe()+500,hc(e,t));;)try{yc();break}catch(l){fc(e,l)}Ss(),El.current=a,Tl=i,null!==Pl?t=0:(Nl=null,Rl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ll,hc(e,0),oc(e,r),rc(e,Xe()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(a=pt(e))&&(r=a,t=sc(e,a))),1===t))throw n=Ll,hc(e,0),oc(e,r),rc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,$l,Wl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=zl+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,$l,Wl),t);break}wc(e,$l,Wl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,$l,Wl),r);break}wc(e,$l,Wl);break;default:throw Error(s(329))}}}return rc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=$l,$l=n,null!==t&&ac(t)),e}function ac(e){null===$l?$l=e:$l.push.apply($l,e)}function oc(e,t){for(t&=~Fl,t&=~Al,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Tl))throw Error(s(327));xc();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ll,hc(e,0),oc(e,t),rc(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,$l,Wl),rc(e,Xe()),null}function cc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(Bl=Xe()+500,Ui&&Bi())}}function uc(e){null!==Kl&&0===Kl.tag&&0===(6&Tl)&&xc();var t=Tl;Tl|=1;var n=Il.transition,r=_t;try{if(Il.transition=null,_t=1,e)return e()}finally{_t=r,Il.transition=n,0===(6&(Tl=t))&&Bi()}}function dc(){jl=Ol.current,Ei(Ol)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:Qs(),Ei(Ni),Ei(Ti),na();break;case 5:Js(r);break;case 4:Qs();break;case 13:case 19:Ei(Zs);break;case 10:Is(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Nl=e,Pl=e=Oc(e.current,null),Rl=jl=t,Dl=0,Ll=null,Fl=Al=Ml=0,$l=Ul=null,null!==Rs){for(t=0;t<Rs.length;t++)if(null!==(r=(n=Rs[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Rs=null}return e}function fc(e,t){for(;;){var n=Pl;try{if(Ss(),ra.current=Xa,ca){for(var r=aa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ca=!1}if(sa=0,la=oa=aa=null,ua=!1,da=0,Sl.current=null,null===n||null===n.return){Dl=1,Ll=t,Pl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Rl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&mo(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(a,u,t),mc();break e}c=Error(s(426))}else if(is&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),ps(lo(c,l));break e}}a=c=lo(c,l),4!==Dl&&(Dl=2),null===Ul?Ul=[a]:Ul.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zs(a,fo(0,c,t));break e;case 1:l=c;var y=a.type,_=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Vl||!Vl.has(_)))){a.flags|=65536,t&=-t,a.lanes|=t,zs(a,po(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(b){t=b,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function pc(){var e=El.current;return El.current=Xa,null===e?Xa:e}function mc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Nl||0===(268435455&Ml)&&0===(268435455&Al)||oc(Nl,Rl)}function gc(e,t){var n=Tl;Tl|=2;var r=pc();for(Nl===e&&Rl===t||(Wl=null,hc(e,t));;)try{vc();break}catch(i){fc(e,i)}if(Ss(),Tl=n,El.current=r,null!==Pl)throw Error(s(261));return Nl=null,Rl=0,Dl}function vc(){for(;null!==Pl;)_c(Pl)}function yc(){for(;null!==Pl&&!Ye();)_c(Pl)}function _c(e){var t=kl(e.alternate,e,jl);e.memoizedProps=e.pendingProps,null===t?bc(e):Pl=t,Sl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Go(n,t,jl)))return void(Pl=n)}else{if(null!==(n=Ko(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Dl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Dl&&(Dl=5)}function wc(e,t,n){var r=_t,i=Il.transition;try{Il.transition=null,_t=1,function(e,t,n,r){do{xc()}while(null!==Kl);if(0!==(6&Tl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Nl&&(Pl=Nl=null,Rl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Nc(tt,(function(){return xc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Il.transition,Il.transition=null;var o=_t;_t=1;var l=Tl;Tl|=4,Sl.current=null,function(e,t){if(ei=Ht,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=o),f===a&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(w){Cc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Qe(),Tl=l,_t=o,Il.transition=a}else e.current=n;if(Gl&&(Gl=!1,Kl=e,Yl=i),a=e.pendingLanes,0===a&&(Vl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=ql,ql=null,e;0!==(1&Yl)&&0!==e.tag&&xc(),a=e.pendingLanes,0!==(1&a)?e===Xl?Ql++:(Ql=0,Xl=e):Ql=0,Bi()}(e,t,n,r)}finally{Il.transition=i,_t=r}return null}function xc(){if(null!==Kl){var e=bt(Yl),t=Il.transition,n=_t;try{if(Il.transition=null,_t=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Yl=0,0!==(6&Tl))throw Error(s(331));var i=Tl;for(Tl|=4,Jo=e.current;null!==Jo;){var a=Jo,o=a.child;if(0!==(16&Jo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Jo=u;null!==Jo;){var d=Jo;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Jo=h;else for(;null!==Jo;){var f=(d=Jo).sibling,p=d.return;if(sl(d),d===u){Jo=null;break}if(null!==f){f.return=p,Jo=f;break}Jo=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Jo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(a=Jo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Jo=y;break e}Jo=a.return}}var _=e.current;for(Jo=_;null!==Jo;){var b=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Jo=b;else e:for(o=_;null!==Jo;){if(0!==(2048&(l=Jo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(x){Cc(l,l.return,x)}if(l===o){Jo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Jo=w;break e}Jo=l.return}}if(Tl=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{_t=n,Il.transition=t}}return!1}function kc(e,t,n){e=Us(e,t=fo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Cc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Vl||!Vl.has(r))){t=Us(t,e=po(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Rl&n)===n&&(4===Dl||3===Dl&&(130023424&Rl)===Rl&&500>Xe()-zl?hc(e,0):Fl|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ds(e,t))&&(vt(e,t,n),rc(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Sc(e,n)}function Nc(e,t){return Ge(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Pc(e,t,n,r)}function jc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)jc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Lc(n.children,i,a,t);case C:o=8,i|=8;break;case E:return(e=Rc(12,n,t,2|i)).elementType=E,e.lanes=a,e;case N:return(e=Rc(13,n,t,i)).elementType=N,e.lanes=a,e;case P:return(e=Rc(19,n,t,i)).elementType=P,e.lanes=a,e;case O:return Mc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case I:o=9;break e;case T:o=11;break e;case R:o=14;break e;case j:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Rc(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Lc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Ac(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $c(e,t,n,r,i,s,a,o,l){return e=new Uc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Rc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function zc(e){if(!e)return Ii;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ji(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(ji(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,s,a,o,l){return(e=$c(n,r,!0,e,0,s,0,o,l)).context=zc(null),n=e.current,(s=Fs(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,s=ec(),a=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Us(i,t,a))&&(nc(e,i,a,s),$s(e,i,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Vc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)_o=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _o=!1,function(e,t,n){switch(t.tag){case 3:No(t),fs();break;case 5:Xs(t);break;case 1:ji(t.type)&&Mi(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(xs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ao(e,t,n):(Si(Zs,1&Zs.current),null!==(e=Ho(e,t,n))?e.sibling:null);Si(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,Co(e,t,n)}return Ho(e,t,n)}(e,t,n);_o=0!==(131072&e.flags)}else _o=!1,is&&0!==(1048576&t.flags)&&Zi(t,Vi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wo(e,t),e=t.pendingProps;var i=Ri(t,Ti.current);Ns(t,n),i=ma(null,t,r,e,i,n);var a=ga();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ji(r)?(a=!0,Mi(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=To(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),bo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return jc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===R)return 14}return 2}(r),e=to(r,e),i){case 0:t=So(null,t,r,e,n);break e;case 1:t=Io(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=xo(null,t,r,to(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,So(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,Io(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(No(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,As(e,t),Bs(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Po(e,t,r,n,i=lo(Error(s(423)),t));break e}if(r!==i){t=Po(e,t,r,n,i=lo(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=ws(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ho(e,t,n);break e}bo(e,t,r,n)}t=t.child}return t;case 5:return Xs(t),null===e&&cs(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),Eo(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ao(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):bo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Si(xs,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Ni.current){t=Ho(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ts(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ts(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}bo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ns(t,n),r=r(i=Ps(i)),t.flags|=1,bo(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),xo(e,t,r,i=to(r.type,i),n);case 15:return ko(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),Wo(e,t),t.tag=1,ji(r)?(e=!0,Mi(t)):e=!1,Ns(t,n),so(t,r,i),oo(t,r,i,n),To(null,t,r,!0,e,n);case 19:return Bo(e,t,n);case 22:return Co(e,t,n)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Hc(a);o.call(e)}}Wc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hc(a);s.call(e)}}var a=Bc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=a,e[pi]=a.current,Br(8===e.nodeType?e.parentNode:e),uc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=$c(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),uc((function(){Wc(t,l,n,r)})),l}(n,t,e,i,r);return Hc(a)}Yc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},Yc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Wc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&At(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Xe()),0===(6&Tl)&&(Bl=Xe()+500,Bi()))}break;case 13:uc((function(){var t=Ds(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Vc(e,1)}},xt=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)nc(t,e,134217728,ec());Vc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=Ds(e,t);if(null!==n)nc(n,e,t,ec());Vc(e,t)}},Ct=function(){return _t},Et=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(s(90));G(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cc,Ne=uc;var eu={usingClientEntryPoint:!1,Events:[_i,bi,wi,Se,Ie,cc]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(s(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=$c(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,a,o),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=_.prototype=new y;b.constructor=_,m(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,k={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)x.call(t,i)&&!C.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:k.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+T(l,0):s,w(a)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),N(a,t,i,"",(function(e){return e}))):null!=a&&(S(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(I,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+T(o=e[c],c);l+=N(o,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=N(o=o.value,t,i,u=s+T(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var j={current:null},O={transition:null},D={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:O,ReactCurrentOwner:k};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=_,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!C.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return j.current.useCallback(e,t)},t.useContext=function(e){return j.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return j.current.useDeferredValue(e)},t.useEffect=function(e,t){return j.current.useEffect(e,t)},t.useId=function(){return j.current.useId()},t.useImperativeHandle=function(e,t,n){return j.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return j.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return j.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return j.current.useMemo(e,t)},t.useReducer=function(e,t,n){return j.current.useReducer(e,t,n)},t.useRef=function(e){return j.current.useRef(e)},t.useState=function(e){return j.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return j.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return j.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,O(x);else{var t=r(u);null!==t&&D(w,t.startTime-e)}}function x(e,n){m=!1,g&&(g=!1,y(S),S=-1),p=!0;var s=f;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&D(w,d.startTime-n),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,C=!1,E=null,S=-1,I=5,T=-1;function N(){return!(t.unstable_now()-T<I)}function P(){if(null!==E){var e=t.unstable_now();T=e;var n=!0;try{n=E(!0,e)}finally{n?k():(C=!1,E=null)}}else C=!1}if("function"===typeof _)k=function(){_(P)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,j=R.port2;R.port1.onmessage=P,k=function(){j.postMessage(null)}}else k=function(){v(P,0)};function O(e){E=e,C||(C=!0,k())}function D(e,n){S=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,O(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(y(S),S=-1):g=!0,D(w,s-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,O(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},440:e=>{"use strict";var t=function(){};e.exports=t},139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,s(n)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(s,a),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=n(43),t=n.t(e,2),r=n(391),i=n(139),s=n.n(i),a=n(579);const o=["xxl","xl","lg","md","sm","xs"],l="xs",c=e.createContext({prefixes:{},breakpoints:o,minBreakpoint:l}),{Consumer:u,Provider:d}=c;function h(t,n){const{prefixes:r}=(0,e.useContext)(c);return t||r[n]||n}function f(){const{breakpoints:t}=(0,e.useContext)(c);return t}function p(){const{minBreakpoint:t}=(0,e.useContext)(c);return t}function m(){const{dir:t}=(0,e.useContext)(c);return"rtl"===t}const g=e.forwardRef(((e,t)=>{let{bsPrefix:n,fluid:r=!1,as:i="div",className:o,...l}=e;const c=h(n,"container"),u="string"===typeof r?`-${r}`:"-fluid";return(0,a.jsx)(i,{ref:t,...l,className:s()(o,r?`${c}${u}`:c)})}));g.displayName="Container";const v=g,y=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i="div",...o}=e;const l=h(n,"row"),c=f(),u=p(),d=`${l}-cols`,m=[];return c.forEach((e=>{const t=o[e];let n;delete o[e],null!=t&&"object"===typeof t?({cols:n}=t):n=t;const r=e!==u?`-${e}`:"";null!=n&&m.push(`${d}${r}-${n}`)})),(0,a.jsx)(i,{ref:t,...o,className:s()(r,l,...m)})}));y.displayName="Row";const _=y;const b=e.forwardRef(((e,t)=>{const[{className:n,...r},{as:i="div",bsPrefix:o,spans:l}]=function(e){let{as:t,bsPrefix:n,className:r,...i}=e;n=h(n,"col");const a=f(),o=p(),l=[],c=[];return a.forEach((e=>{const t=i[e];let r,s,a;delete i[e],"object"===typeof t&&null!=t?({span:r,offset:s,order:a}=t):r=t;const u=e!==o?`-${e}`:"";r&&l.push(!0===r?`${n}${u}`:`${n}${u}-${r}`),null!=a&&c.push(`order${u}-${a}`),null!=s&&c.push(`offset${u}-${s}`)})),[{...i,className:s()(r,...l,...c)},{as:t,bsPrefix:n,spans:l}]}(e);return(0,a.jsx)(i,{...r,ref:t,className:s()(n,!l.length&&o)})}));b.displayName="Col";const w=b,x=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=h(r,"card-body"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));x.displayName="CardBody";const k=x,C=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=h(r,"card-footer"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));C.displayName="CardFooter";const E=C,S=e.createContext(null);S.displayName="CardHeaderContext";const I=S,T=e.forwardRef(((t,n)=>{let{bsPrefix:r,className:i,as:o="div",...l}=t;const c=h(r,"card-header"),u=(0,e.useMemo)((()=>({cardHeaderBsPrefix:c})),[c]);return(0,a.jsx)(I.Provider,{value:u,children:(0,a.jsx)(o,{ref:n,...l,className:s()(i,c)})})}));T.displayName="CardHeader";const N=T,P=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,variant:i,as:o="img",...l}=e;const c=h(n,"card-img");return(0,a.jsx)(o,{ref:t,className:s()(i?`${c}-${i}`:c,r),...l})}));P.displayName="CardImg";const R=P,j=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=h(r,"card-img-overlay"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));j.displayName="CardImgOverlay";const O=j,D=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="a",...o}=e;return r=h(r,"card-link"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));D.displayName="CardLink";const L=D,M=t=>e.forwardRef(((e,n)=>(0,a.jsx)("div",{...e,ref:n,className:s()(e.className,t)}))),A=M("h6"),F=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=A,...o}=e;return r=h(r,"card-subtitle"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));F.displayName="CardSubtitle";const U=F,$=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="p",...o}=e;return r=h(r,"card-text"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));$.displayName="CardText";const z=$,B=M("h5"),W=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=B,...o}=e;return r=h(r,"card-title"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));W.displayName="CardTitle";const H=W,q=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,bg:i,text:o,border:l,body:c=!1,children:u,as:d="div",...f}=e;const p=h(n,"card");return(0,a.jsx)(d,{ref:t,...f,className:s()(r,p,i&&`bg-${i}`,o&&`text-${o}`,l&&`border-${l}`),children:c?(0,a.jsx)(k,{children:u}):u})}));q.displayName="Card";const V=Object.assign(q,{Img:R,Title:H,Subtitle:U,Body:k,Link:L,Text:z,Header:N,Footer:E,ImgOverlay:O});var G=n(173),K=n.n(G);K().string,K().bool,K().bool,K().bool,K().bool;const Y=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,fluid:i=!1,rounded:o=!1,roundedCircle:l=!1,thumbnail:c=!1,...u}=e;return n=h(n,"img"),(0,a.jsx)("img",{ref:t,...u,className:s()(r,i&&`${n}-fluid`,o&&"rounded",l&&"rounded-circle",c&&`${n}-thumbnail`)})}));Y.displayName="Image";const Q=Y;const X=function(t){const n=(0,e.useRef)(t);return(0,e.useEffect)((()=>{n.current=t}),[t]),n};function J(t){const n=X(t);return(0,e.useCallback)((function(){return n.current&&n.current(...arguments)}),[n])}const Z=function(t,n){const r=(0,e.useRef)(!0);(0,e.useEffect)((()=>{if(!r.current)return t();r.current=!1}),n)};function ee(){const t=(0,e.useRef)(!0),n=(0,e.useRef)((()=>t.current));return(0,e.useEffect)((()=>(t.current=!0,()=>{t.current=!1})),[]),n.current}function te(t){const n=function(t){const n=(0,e.useRef)(t);return n.current=t,n}(t);(0,e.useEffect)((()=>()=>n.current()),[])}const ne=2**31-1;function re(e,t,n){const r=n-Date.now();e.current=r<=ne?setTimeout(t,r):setTimeout((()=>re(e,t,n)),ne)}function ie(){const t=ee(),n=(0,e.useRef)();return te((()=>clearTimeout(n.current))),(0,e.useMemo)((()=>{const e=()=>clearTimeout(n.current);return{set:function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t()&&(e(),i<=ne?n.current=setTimeout(r,i):re(n,r,Date.now()+i))},clear:e,handleRef:n}}),[])}const se="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,ae="undefined"!==typeof document||se?e.useLayoutEffect:e.useEffect;new WeakMap;const oe=["as","disabled"];function le(e){let{tagName:t,disabled:n,href:r,target:i,rel:s,role:a,onClick:o,tabIndex:l=0,type:c}=e;t||(t=null!=r||null!=i||null!=s?"a":"button");const u={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},u];const d=e=>{(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==o||o(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=a?a:"button",disabled:void 0,tabIndex:n?void 0:l,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?s:void 0,onClick:d,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),d(e))}},u]}const ce=e.forwardRef(((e,t)=>{let{as:n,disabled:r}=e,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,oe);const[s,{tagName:o}]=le(Object.assign({tagName:n,disabled:r},i));return(0,a.jsx)(o,Object.assign({},i,s,{ref:t}))}));ce.displayName="Button";const ue=ce,de=["onKeyDown"];const he=e.forwardRef(((e,t)=>{let{onKeyDown:n}=e,r=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,de);const[i]=le(Object.assign({tagName:"a"},r)),s=J((e=>{i.onKeyDown(e),null==n||n(e)}));return(o=r.href)&&"#"!==o.trim()&&"button"!==r.role?(0,a.jsx)("a",Object.assign({ref:t},r,{onKeyDown:n})):(0,a.jsx)("a",Object.assign({ref:t},r,i,{onKeyDown:s}));var o}));he.displayName="Anchor";const fe=he;function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pe.apply(null,arguments)}function me(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}n(740);function ge(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function ve(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function ye(t,n){return Object.keys(n).reduce((function(r,i){var s,a=r,o=a[ge(i)],l=a[i],c=me(a,[ge(i),i].map(ve)),u=n[i],d=function(t,n,r){var i=(0,e.useRef)(void 0!==t),s=(0,e.useState)(n),a=s[0],o=s[1],l=void 0!==t,c=i.current;return i.current=l,!l&&c&&a!==n&&o(n),[l?t:a,(0,e.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r&&r.apply(void 0,[e].concat(n)),o(e)}),[r])]}(l,o,t[u]),h=d[0],f=d[1];return pe({},c,((s={})[i]=h,s[u]=f,s))}),t)}function _e(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function be(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function we(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}_e.__suppressDeprecationWarning=!0,be.__suppressDeprecationWarning=!0,we.__suppressDeprecationWarning=!0;const xe=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=h(r,"carousel-caption"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));xe.displayName="CarouselCaption";const ke=xe,Ce=e.forwardRef(((e,t)=>{let{as:n="div",bsPrefix:r,className:i,...o}=e;const l=s()(i,h(r,"carousel-item"));return(0,a.jsx)(n,{ref:t,...o,className:l})}));Ce.displayName="CarouselItem";const Ee=Ce;function Se(t,n){let r=0;return e.Children.map(t,(t=>e.isValidElement(t)?n(t,r++):t))}function Ie(t,n){let r=0;e.Children.forEach(t,(t=>{e.isValidElement(t)&&n(t,r++)}))}function Te(e){return e&&e.ownerDocument||document}function Ne(e,t){return function(e){var t=Te(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var Pe=/([A-Z])/g;var Re=/^ms-/;function je(e){return function(e){return e.replace(Pe,"-$1").toLowerCase()}(e).replace(Re,"-ms-")}var Oe=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const De=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(je(t))||Ne(e).getPropertyValue(je(t));Object.keys(t).forEach((function(i){var s=t[i];s||0===s?!function(e){return!(!e||!Oe.test(e))}(i)?n+=je(i)+": "+s+";":r+=i+"("+s+") ":e.style.removeProperty(je(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n},Le=!("undefined"===typeof window||!window.document||!window.document.createElement);var Me=!1,Ae=!1;try{var Fe={get passive(){return Me=!0},get once(){return Ae=Me=!0}};Le&&(window.addEventListener("test",Fe,Fe),window.removeEventListener("test",Fe,!0))}catch(jk){}const Ue=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!Ae){var i=r.once,s=r.capture,a=n;!Ae&&i&&(a=n.__once||function e(r){this.removeEventListener(t,e,s),n.call(this,r)},n.__once=a),e.addEventListener(t,a,Me?r:s)}e.addEventListener(t,n,r)};const $e=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};const ze=function(e,t,n,r){return Ue(e,t,n,r),function(){$e(e,t,n,r)}};function Be(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),s=ze(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),s()}}function We(e,t,n,r){null==n&&(n=function(e){var t=De(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=Be(e,n,r),s=ze(e,"transitionend",t);return function(){i(),s()}}function He(e,t){const n=De(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function qe(e,t){const n=He(e,"transitionDuration"),r=He(e,"transitionDelay"),i=We(e,(n=>{n.target===e&&(i(),t(n))}),n+r)}function Ve(e){e.offsetHeight}function Ge(e,t){return Ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ge(e,t)}var Ke=n(950),Ye=n.t(Ke,2);const Qe=!1,Xe=e.createContext(null);var Je="unmounted",Ze="exited",et="entering",tt="entered",nt="exiting",rt=function(t){var n,r;function i(e,n){var r;r=t.call(this,e,n)||this;var i,s=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?s?(i=Ze,r.appearStatus=et):i=tt:i=e.unmountOnExit||e.mountOnEnter?Je:Ze,r.state={status:i},r.nextCallback=null,r}r=t,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,Ge(n,r),i.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Je?{status:Ze}:null};var s=i.prototype;return s.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},s.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==et&&n!==tt&&(t=et):n!==et&&n!==tt||(t=nt)}this.updateStatus(!1,t)},s.componentWillUnmount=function(){this.cancelNextCallback()},s.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},s.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===et){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:Ke.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ze&&this.setState({status:Je})},s.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[Ke.findDOMNode(this),r],s=i[0],a=i[1],o=this.getTimeouts(),l=r?o.appear:o.enter;!e&&!n||Qe?this.safeSetState({status:tt},(function(){t.props.onEntered(s)})):(this.props.onEnter(s,a),this.safeSetState({status:et},(function(){t.props.onEntering(s,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:tt},(function(){t.props.onEntered(s,a)}))}))})))},s.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:Ke.findDOMNode(this);t&&!Qe?(this.props.onExit(r),this.safeSetState({status:nt},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Ze},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:Ze},(function(){e.props.onExited(r)}))},s.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},s.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},s.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},s.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:Ke.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],s=i[0],a=i[1];this.props.addEndListener(s,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},s.render=function(){var t=this.state.status;if(t===Je)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,me(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e.createElement(Xe.Provider,{value:null},"function"===typeof r?r(t,i):e.cloneElement(e.Children.only(r),i))},i}(e.Component);function it(){}rt.contextType=Xe,rt.propTypes={},rt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:it,onEntering:it,onEntered:it,onExit:it,onExiting:it,onExited:it},rt.UNMOUNTED=Je,rt.EXITED=Ze,rt.ENTERING=et,rt.ENTERED=tt,rt.EXITING=nt;const st=rt,at=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const ot=function(t,n){return(0,e.useMemo)((()=>function(e,t){const n=at(e),r=at(t);return e=>{n&&n(e),r&&r(e)}}(t,n)),[t,n])};const lt=e.forwardRef(((t,n)=>{let{onEnter:r,onEntering:i,onEntered:s,onExit:o,onExiting:l,onExited:c,addEndListener:u,children:d,childRef:h,...f}=t;const p=(0,e.useRef)(null),m=ot(p,h),g=e=>{var t;m((t=e)&&"setState"in t?Ke.findDOMNode(t):null!=t?t:null)},v=e=>t=>{e&&p.current&&e(p.current,t)},y=(0,e.useCallback)(v(r),[r]),_=(0,e.useCallback)(v(i),[i]),b=(0,e.useCallback)(v(s),[s]),w=(0,e.useCallback)(v(o),[o]),x=(0,e.useCallback)(v(l),[l]),k=(0,e.useCallback)(v(c),[c]),C=(0,e.useCallback)(v(u),[u]);return(0,a.jsx)(st,{ref:n,...f,onEnter:y,onEntered:b,onEntering:_,onExit:w,onExited:k,onExiting:x,addEndListener:C,nodeRef:p,children:"function"===typeof d?(e,t)=>d(e,{...t,ref:g}):e.cloneElement(d,{ref:g})})})),ct=lt;const ut=e.forwardRef(((t,n)=>{let{defaultActiveIndex:r=0,...i}=t;const{as:o="div",bsPrefix:l,slide:c=!0,fade:u=!1,controls:d=!0,indicators:f=!0,indicatorLabels:p=[],activeIndex:g,onSelect:v,onSlide:y,onSlid:_,interval:b=5e3,keyboard:w=!0,onKeyDown:x,pause:k="hover",onMouseOver:C,onMouseOut:E,wrap:S=!0,touch:I=!0,onTouchStart:T,onTouchMove:N,onTouchEnd:P,prevIcon:R=(0,a.jsx)("span",{"aria-hidden":"true",className:"carousel-control-prev-icon"}),prevLabel:j="Previous",nextIcon:O=(0,a.jsx)("span",{"aria-hidden":"true",className:"carousel-control-next-icon"}),nextLabel:D="Next",variant:L,className:M,children:A,...F}=ye({defaultActiveIndex:r,...i},{activeIndex:"onSelect"}),U=h(l,"carousel"),$=m(),z=(0,e.useRef)(null),[B,W]=(0,e.useState)("next"),[H,q]=(0,e.useState)(!1),[V,G]=(0,e.useState)(!1),[K,Y]=(0,e.useState)(g||0);(0,e.useEffect)((()=>{V||g===K||(z.current?W(z.current):W((g||0)>K?"next":"prev"),c&&G(!0),Y(g||0))}),[g,V,K,c]),(0,e.useEffect)((()=>{z.current&&(z.current=null)}));let Q,ee=0;Ie(A,((e,t)=>{++ee,t===g&&(Q=e.props.interval)}));const te=X(Q),ne=(0,e.useCallback)((e=>{if(V)return;let t=K-1;if(t<0){if(!S)return;t=ee-1}z.current="prev",null==v||v(t,e)}),[V,K,v,S,ee]),re=J((e=>{if(V)return;let t=K+1;if(t>=ee){if(!S)return;t=0}z.current="next",null==v||v(t,e)})),se=(0,e.useRef)();(0,e.useImperativeHandle)(n,(()=>({element:se.current,prev:ne,next:re})));const ae=J((()=>{!document.hidden&&function(e){if(!e||!e.style||!e.parentNode||!e.parentNode.style)return!1;const t=getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility&&"none"!==getComputedStyle(e.parentNode).display}(se.current)&&($?ne():re())})),oe="next"===B?"start":"end";Z((()=>{c||(null==y||y(K,oe),null==_||_(K,oe))}),[K]);const le=`${U}-item-${B}`,ce=`${U}-item-${oe}`,ue=(0,e.useCallback)((e=>{Ve(e),null==y||y(K,oe)}),[y,K,oe]),de=(0,e.useCallback)((()=>{G(!1),null==_||_(K,oe)}),[_,K,oe]),he=(0,e.useCallback)((e=>{if(w&&!/input|textarea/i.test(e.target.tagName))switch(e.key){case"ArrowLeft":return e.preventDefault(),void($?re(e):ne(e));case"ArrowRight":return e.preventDefault(),void($?ne(e):re(e))}null==x||x(e)}),[w,x,ne,re,$]),pe=(0,e.useCallback)((e=>{"hover"===k&&q(!0),null==C||C(e)}),[k,C]),me=(0,e.useCallback)((e=>{q(!1),null==E||E(e)}),[E]),ge=(0,e.useRef)(0),ve=(0,e.useRef)(0),_e=ie(),be=(0,e.useCallback)((e=>{ge.current=e.touches[0].clientX,ve.current=0,"hover"===k&&q(!0),null==T||T(e)}),[k,T]),we=(0,e.useCallback)((e=>{e.touches&&e.touches.length>1?ve.current=0:ve.current=e.touches[0].clientX-ge.current,null==N||N(e)}),[N]),xe=(0,e.useCallback)((e=>{if(I){const t=ve.current;Math.abs(t)>40&&(t>0?ne(e):re(e))}"hover"===k&&_e.set((()=>{q(!1)}),b||void 0),null==P||P(e)}),[I,k,ne,re,_e,b,P]),ke=null!=b&&!H&&!V,Ce=(0,e.useRef)();(0,e.useEffect)((()=>{var e,t;if(!ke)return;const n=$?ne:re;return Ce.current=window.setInterval(document.visibilityState?ae:n,null!=(e=null!=(t=te.current)?t:b)?e:void 0),()=>{null!==Ce.current&&clearInterval(Ce.current)}}),[ke,ne,re,te,b,ae,$]);const Ee=(0,e.useMemo)((()=>f&&Array.from({length:ee},((e,t)=>e=>{null==v||v(t,e)}))),[f,ee,v]);return(0,a.jsxs)(o,{ref:se,...F,onKeyDown:he,onMouseOver:pe,onMouseOut:me,onTouchStart:be,onTouchMove:we,onTouchEnd:xe,className:s()(M,U,c&&"slide",u&&`${U}-fade`,L&&`${U}-${L}`),children:[f&&(0,a.jsx)("div",{className:`${U}-indicators`,children:Se(A,((e,t)=>(0,a.jsx)("button",{type:"button","data-bs-target":"","aria-label":null!=p&&p.length?p[t]:`Slide ${t+1}`,className:t===K?"active":void 0,onClick:Ee?Ee[t]:void 0,"aria-current":t===K},t)))}),(0,a.jsx)("div",{className:`${U}-inner`,children:Se(A,((t,n)=>{const r=n===K;return c?(0,a.jsx)(ct,{in:r,onEnter:r?ue:void 0,onEntered:r?de:void 0,addEndListener:qe,children:(n,i)=>e.cloneElement(t,{...i,className:s()(t.props.className,r&&"entered"!==n&&le,("entered"===n||"exiting"===n)&&"active",("entering"===n||"exiting"===n)&&ce)})}):e.cloneElement(t,{className:s()(t.props.className,r&&"active")})}))}),d&&(0,a.jsxs)(a.Fragment,{children:[(S||0!==g)&&(0,a.jsxs)(fe,{className:`${U}-control-prev`,onClick:ne,children:[R,j&&(0,a.jsx)("span",{className:"visually-hidden",children:j})]}),(S||g!==ee-1)&&(0,a.jsxs)(fe,{className:`${U}-control-next`,onClick:re,children:[O,D&&(0,a.jsx)("span",{className:"visually-hidden",children:D})]})]})]})}));ut.displayName="Carousel";const dt=Object.assign(ut,{Caption:ke,Item:Ee}),ht=e.forwardRef(((e,t)=>{let{as:n,bsPrefix:r,variant:i="primary",size:o,active:l=!1,disabled:c=!1,className:u,...d}=e;const f=h(r,"btn"),[p,{tagName:m}]=le({tagName:n,disabled:c,...d}),g=m;return(0,a.jsx)(g,{...p,...d,ref:t,disabled:c,className:s()(u,f,l&&"active",i&&`${f}-${i}`,o&&`${f}-${o}`,d.href&&c&&"disabled")})}));ht.displayName="Button";const ft=ht;function pt(){return pt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pt.apply(this,arguments)}var mt;!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(mt||(mt={}));const gt="popstate";function vt(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function yt(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(jk){}}}function _t(e,t){return{usr:e.state,key:e.key,idx:t}}function bt(e,t,n,r){return void 0===n&&(n=null),pt({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?xt(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function wt(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function xt(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function kt(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=mt.Pop,l=null,c=u();function u(){return(a.state||{idx:null}).idx}function d(){o=mt.Pop;let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:f.location,delta:t})}function h(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:wt(e);return n=n.replace(/ $/,"%20"),vt(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==c&&(c=0,a.replaceState(pt({},a.state,{idx:c}),""));let f={get action(){return o},get location(){return e(i,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(gt,d),l=e,()=>{i.removeEventListener(gt,d),l=null}},createHref:e=>t(i,e),createURL:h,encodeLocation(e){let t=h(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o=mt.Push;let r=bt(f.location,e,t);n&&n(r,e),c=u()+1;let d=_t(r,c),h=f.createHref(r);try{a.pushState(d,"",h)}catch(xs){if(xs instanceof DOMException&&"DataCloneError"===xs.name)throw xs;i.location.assign(h)}s&&l&&l({action:o,location:f.location,delta:1})},replace:function(e,t){o=mt.Replace;let r=bt(f.location,e,t);n&&n(r,e),c=u();let i=_t(r,c),d=f.createHref(r);a.replaceState(i,"",d),s&&l&&l({action:o,location:f.location,delta:0})},go:e=>a.go(e)};return f}var Ct;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(Ct||(Ct={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function Et(e,t,n){return void 0===n&&(n="/"),St(e,t,n,!1)}function St(e,t,n,r){let i=$t(("string"===typeof t?xt(t):t).pathname||"/",n);if(null==i)return null;let s=It(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let e=Ut(i);a=At(s[o],e,r)}return a}function It(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(vt(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=qt([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(vt(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),It(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:Mt(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of Tt(e.path))i(e,t,r);else i(e,t)})),t}function Tt(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=Tt(r.join("/")),o=[];return o.push(...a.map((e=>""===e?s:[s,e].join("/")))),i&&o.push(...a),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const Nt=/^:[\w-]+$/,Pt=3,Rt=2,jt=1,Ot=10,Dt=-2,Lt=e=>"*"===e;function Mt(e,t){let n=e.split("/"),r=n.length;return n.some(Lt)&&(r+=Dt),t&&(r+=Rt),n.filter((e=>!Lt(e))).reduce(((e,t)=>e+(Nt.test(t)?Pt:""===t?jt:Ot)),r)}function At(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=Ft({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=Ft({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:qt([s,u.pathname]),pathnameBase:Vt(qt([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=qt([s,u.pathnameBase]))}return a}function Ft(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);yt("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:a,pattern:e}}function Ut(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(xs){return yt(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+xs+")."),e}}function $t(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function zt(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Bt(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function Wt(e,t){let n=Bt(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function Ht(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=xt(e):(i=pt({},e),vt(!i.pathname||!i.pathname.includes("?"),zt("?","pathname","search",i)),vt(!i.pathname||!i.pathname.includes("#"),zt("#","pathname","hash",i)),vt(!i.search||!i.search.includes("#"),zt("#","search","hash",i)));let s,a=""===e||""===i.pathname,o=a?"/":i.pathname;if(null==o)s=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?xt(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:Gt(r),hash:Kt(i)}}(i,s),c=o&&"/"!==o&&o.endsWith("/"),u=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const qt=e=>e.join("/").replace(/\/\/+/g,"/"),Vt=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Gt=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Kt=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function Yt(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const Qt=["post","put","patch","delete"],Xt=(new Set(Qt),["get",...Qt]);new Set(Xt),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Jt(){return Jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jt.apply(this,arguments)}const Zt=e.createContext(null);const en=e.createContext(null);const tn=e.createContext(null);const nn=e.createContext(null);const rn=e.createContext({outlet:null,matches:[],isDataRoute:!1});const sn=e.createContext(null);function an(){return null!=e.useContext(nn)}function on(){return an()||vt(!1),e.useContext(nn).location}function ln(t){e.useContext(tn).static||e.useLayoutEffect(t)}function cn(){let{isDataRoute:t}=e.useContext(rn);return t?function(){let{router:t}=bn(yn.UseNavigateStable),n=xn(_n.UseNavigateStable),r=e.useRef(!1);ln((()=>{r.current=!0}));let i=e.useCallback((function(e,i){void 0===i&&(i={}),r.current&&("number"===typeof e?t.navigate(e):t.navigate(e,Jt({fromRouteId:n},i)))}),[t,n]);return i}():function(){an()||vt(!1);let t=e.useContext(Zt),{basename:n,future:r,navigator:i}=e.useContext(tn),{matches:s}=e.useContext(rn),{pathname:a}=on(),o=JSON.stringify(Wt(s,r.v7_relativeSplatPath)),l=e.useRef(!1);ln((()=>{l.current=!0}));let c=e.useCallback((function(e,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof e)return void i.go(e);let s=Ht(e,JSON.parse(o),a,"path"===r.relative);null==t&&"/"!==n&&(s.pathname="/"===s.pathname?n:qt([n,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[n,i,o,a,t]);return c}()}function un(){let{matches:t}=e.useContext(rn),n=t[t.length-1];return n?n.params:{}}function dn(t,n){let{relative:r}=void 0===n?{}:n,{future:i}=e.useContext(tn),{matches:s}=e.useContext(rn),{pathname:a}=on(),o=JSON.stringify(Wt(s,i.v7_relativeSplatPath));return e.useMemo((()=>Ht(t,JSON.parse(o),a,"path"===r)),[t,o,a,r])}function hn(t,n,r,i){an()||vt(!1);let{navigator:s}=e.useContext(tn),{matches:a}=e.useContext(rn),o=a[a.length-1],l=o?o.params:{},c=(o&&o.pathname,o?o.pathnameBase:"/");o&&o.route;let u,d=on();if(n){var h;let e="string"===typeof n?xt(n):n;"/"===c||(null==(h=e.pathname)?void 0:h.startsWith(c))||vt(!1),u=e}else u=d;let f=u.pathname||"/",p=f;if("/"!==c){let e=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let m=Et(t,{pathname:p});let g=vn(m&&m.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:qt([c,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:qt([c,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,r,i);return n&&g?e.createElement(nn.Provider,{value:{location:Jt({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:mt.Pop}},g):g}function fn(){let t=function(){var t;let n=e.useContext(sn),r=wn(_n.UseRouteError),i=xn(_n.UseRouteError);if(void 0!==n)return n;return null==(t=r.errors)?void 0:t[i]}(),n=Yt(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:s},r):null,null)}const pn=e.createElement(fn,null);class mn extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?e.createElement(rn.Provider,{value:this.props.routeContext},e.createElement(sn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function gn(t){let{routeContext:n,match:r,children:i}=t,s=e.useContext(Zt);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(rn.Provider,{value:n},i)}function vn(t,n,r,i){var s;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==t){var a;if(!r)return null;if(r.errors)t=r.matches;else{if(!(null!=(a=i)&&a.v7_partialHydration&&0===n.length&&!r.initialized&&r.matches.length>0))return null;t=r.matches}}let o=t,l=null==(s=r)?void 0:s.errors;if(null!=l){let e=o.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||vt(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,u=-1;if(r&&i&&i.v7_partialHydration)for(let e=0;e<o.length;e++){let t=o[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(u=e),t.route.id){let{loaderData:e,errors:n}=r,i=t.route.loader&&void 0===e[t.route.id]&&(!n||void 0===n[t.route.id]);if(t.route.lazy||i){c=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight(((t,i,s)=>{let a,d=!1,h=null,f=null;var p;r&&(a=l&&i.route.id?l[i.route.id]:void 0,h=i.route.errorElement||pn,c&&(u<0&&0===s?(p="route-fallback",!1||kn[p]||(kn[p]=!0),d=!0,f=null):u===s&&(d=!0,f=i.route.hydrateFallbackElement||null)));let m=n.concat(o.slice(0,s+1)),g=()=>{let n;return n=a?h:d?f:i.route.Component?e.createElement(i.route.Component,null):i.route.element?i.route.element:t,e.createElement(gn,{match:i,routeContext:{outlet:t,matches:m,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?e.createElement(mn,{location:r.location,revalidation:r.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var yn=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(yn||{}),_n=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(_n||{});function bn(t){let n=e.useContext(Zt);return n||vt(!1),n}function wn(t){let n=e.useContext(en);return n||vt(!1),n}function xn(t){let n=function(){let t=e.useContext(rn);return t||vt(!1),t}(),r=n.matches[n.matches.length-1];return r.route.id||vt(!1),r.route.id}const kn={};t.startTransition;function Cn(e){vt(!1)}function En(t){let{basename:n="/",children:r=null,location:i,navigationType:s=mt.Pop,navigator:a,static:o=!1,future:l}=t;an()&&vt(!1);let c=n.replace(/^\/*/,"/"),u=e.useMemo((()=>({basename:c,navigator:a,static:o,future:Jt({v7_relativeSplatPath:!1},l)})),[c,l,a,o]);"string"===typeof i&&(i=xt(i));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=i,g=e.useMemo((()=>{let e=$t(d,c);return null==e?null:{location:{pathname:e,search:h,hash:f,state:p,key:m},navigationType:s}}),[c,d,h,f,p,m,s]);return null==g?null:e.createElement(tn.Provider,{value:u},e.createElement(nn.Provider,{children:r,value:g}))}function Sn(e){let{children:t,location:n}=e;return hn(In(t),n)}new Promise((()=>{}));e.Component;function In(t,n){void 0===n&&(n=[]);let r=[];return e.Children.forEach(t,((t,i)=>{if(!e.isValidElement(t))return;let s=[...n,i];if(t.type===e.Fragment)return void r.push.apply(r,In(t.props.children,s));t.type!==Cn&&vt(!1),t.props.index&&t.props.children&&vt(!1);let a={id:t.props.id||s.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(a.children=In(t.props.children,s)),r.push(a)})),r}function Tn(){return Tn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tn.apply(this,arguments)}function Nn(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Pn=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(jk){}new Map;const Rn=t.startTransition;Ye.flushSync,t.useId;function jn(t){let{basename:n,children:r,future:i,window:s}=t,a=e.useRef();null==a.current&&(a.current=function(e){return void 0===e&&(e={}),kt((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return bt("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:wt(t)}),null,e)}({window:s,v5Compat:!0}));let o=a.current,[l,c]=e.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},d=e.useCallback((e=>{u&&Rn?Rn((()=>c(e))):c(e)}),[c,u]);return e.useLayoutEffect((()=>o.listen(d)),[o,d]),e.createElement(En,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:o,future:i})}const On="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Dn=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ln=e.forwardRef((function(t,n){let r,{onClick:i,relative:s,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,unstable_viewTransition:h}=t,f=Nn(t,Pn),{basename:p}=e.useContext(tn),m=!1;if("string"===typeof u&&Dn.test(u)&&(r=u,On))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=$t(t.pathname,p);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:m=!0}catch(jk){}let g=function(t,n){let{relative:r}=void 0===n?{}:n;an()||vt(!1);let{basename:i,navigator:s}=e.useContext(tn),{hash:a,pathname:o,search:l}=dn(t,{relative:r}),c=o;return"/"!==i&&(c="/"===o?i:qt([i,o])),s.createHref({pathname:c,search:l,hash:a})}(u,{relative:s}),v=function(t,n){let{target:r,replace:i,state:s,preventScrollReset:a,relative:o,unstable_viewTransition:l}=void 0===n?{}:n,c=cn(),u=on(),d=dn(t,{relative:o});return e.useCallback((e=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,r)){e.preventDefault();let n=void 0!==i?i:wt(u)===wt(d);c(t,{replace:n,state:s,preventScrollReset:a,relative:o,unstable_viewTransition:l})}}),[u,c,d,i,s,r,t,a,o,l])}(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,unstable_viewTransition:h});return e.createElement("a",Tn({},f,{href:r||g,onClick:m||a?i:function(e){i&&i(e),e.defaultPrevented||v(e)},ref:n,target:c}))}));var Mn,An;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Mn||(Mn={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(An||(An={}));const Fn=!1,Un=!1,$n="${JSCORE_VERSION}",zn=function(e,t){if(!e)throw Bn(t)},Bn=function(e){return new Error("Firebase Database ("+$n+") INTERNAL ASSERT FAILED: "+e)},Wn=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Hn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Wn(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new qn;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class qn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vn=function(e){const t=Wn(e);return Hn.encodeByteArray(t,!0)},Gn=function(e){return Vn(e).replace(/\./g,"")},Kn=function(e){try{return Hn.decodeString(e,!0)}catch(jk){console.error("base64Decode failed: ",jk)}return null};function Yn(e){return Qn(void 0,e)}function Qn(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Qn(e[n],t[n]));return e}const Xn=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Jn=()=>{try{return Xn()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/MudiaZuwa/BuzzIt.git",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(jk){return}const t=e&&Kn(e[1]);return t&&JSON.parse(t)})()}catch(jk){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${jk}`)}},Zn=e=>{var t,n;return null===(n=null===(t=Jn())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},er=e=>{const t=Zn(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},tr=()=>{var e;return null===(e=Jn())||void 0===e?void 0:e.config},nr=e=>{var t;return null===(t=Jn())||void 0===t?void 0:t[`_${e}`]};class rr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function ir(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Gn(JSON.stringify({alg:"none",type:"JWT"})),Gn(JSON.stringify(s)),""].join(".")}function sr(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ar(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sr())}function or(){var e;const t=null===(e=Jn())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(jk){return!1}}function lr(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function cr(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function ur(){return!0===Fn||!0===Un}function dr(){try{return"object"===typeof indexedDB}catch(jk){return!1}}function hr(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(xs){t(xs)}}))}class fr extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,fr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pr.prototype.create)}}class pr{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(mr,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new fr(n,s,t)}}const mr=/\{\$([^}]+)}/g;function gr(e){return JSON.parse(e)}function vr(e){return JSON.stringify(e)}const yr=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=gr(Kn(s[0])||""),n=gr(Kn(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(jk){}return{header:t,claims:n,data:r,signature:i}};function _r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function br(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function wr(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function xr(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function kr(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Cr(n)&&Cr(s)){if(!kr(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Cr(e){return null!==e&&"object"===typeof e}function Er(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Sr(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Ir(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Tr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],a=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^a&(o^l),i=1518500249):(r=a^o^l,i=1859775393):u<60?(r=a&o|l&(a|o),i=2400959708):(r=a^o^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=o,o=4294967295&(a<<30|a>>>2),a=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class Nr{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Pr),void 0===r.error&&(r.error=Pr),void 0===r.complete&&(r.complete=Pr);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(jk){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(jk){"undefined"!==typeof console&&console.error&&console.error(jk)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Pr(){}function Rr(e,t){return`${e} failed: ${t} argument `}const jr=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Or(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}function Dr(e){return e&&e._delegate?e._delegate:e}class Lr{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Mr="[DEFAULT]";class Ar{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new rr;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(jk){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(jk){if(r)return null;throw jk}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Mr})}catch(jk){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(jk){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mr;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mr;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mr;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Mr?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mr;return this.component?this.component.multipleInstances?e:Mr:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Fr{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ar(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Ur=[];var $r;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}($r||($r={}));const zr={debug:$r.DEBUG,verbose:$r.VERBOSE,info:$r.INFO,warn:$r.WARN,error:$r.ERROR,silent:$r.SILENT},Br=$r.INFO,Wr={[$r.DEBUG]:"log",[$r.VERBOSE]:"log",[$r.INFO]:"info",[$r.WARN]:"warn",[$r.ERROR]:"error"},Hr=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Wr[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...s)};class qr{constructor(e){this.name=e,this._logLevel=Br,this._logHandler=Hr,this._userLogHandler=null,Ur.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $r))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?zr[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,$r.DEBUG,...t),this._logHandler(this,$r.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,$r.VERBOSE,...t),this._logHandler(this,$r.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,$r.INFO,...t),this._logHandler(this,$r.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,$r.WARN,...t),this._logHandler(this,$r.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,$r.ERROR,...t),this._logHandler(this,$r.ERROR,...t)}}let Vr,Gr;const Kr=new WeakMap,Yr=new WeakMap,Qr=new WeakMap,Xr=new WeakMap,Jr=new WeakMap;let Zr={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Yr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Qr.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ni(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ei(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Gr||(Gr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ri(this),n),ni(Kr.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ni(e.apply(ri(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(ri(this),t,...r);return Qr.set(s,t.sort?t.sort():[t]),ni(s)}}function ti(e){return"function"===typeof e?ei(e):(e instanceof IDBTransaction&&function(e){if(Yr.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Yr.set(e,t)}(e),t=e,(Vr||(Vr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Zr):e);var t}function ni(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ni(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Kr.set(t,e)})).catch((()=>{})),Jr.set(t,e),t}(e);if(Xr.has(e))return Xr.get(e);const t=ti(e);return t!==e&&(Xr.set(e,t),Jr.set(t,e)),t}const ri=e=>Jr.get(e);const ii=["get","getKey","getAll","getAllKeys","count"],si=["put","add","delete","clear"],ai=new Map;function oi(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ai.get(t))return ai.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=si.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ii.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return ai.set(t,s),s}Zr=(e=>({...e,get:(t,n,r)=>oi(t,n)||e.get(t,n,r),has:(t,n)=>!!oi(t,n)||e.has(t,n)}))(Zr);class li{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const ci="@firebase/app",ui="0.9.13",di=new qr("@firebase/app"),hi="@firebase/app-compat",fi="@firebase/analytics-compat",pi="@firebase/analytics",mi="@firebase/app-check-compat",gi="@firebase/app-check",vi="@firebase/auth",yi="@firebase/auth-compat",_i="@firebase/database",bi="@firebase/database-compat",wi="@firebase/functions",xi="@firebase/functions-compat",ki="@firebase/installations",Ci="@firebase/installations-compat",Ei="@firebase/messaging",Si="@firebase/messaging-compat",Ii="@firebase/performance",Ti="@firebase/performance-compat",Ni="@firebase/remote-config",Pi="@firebase/remote-config-compat",Ri="@firebase/storage",ji="@firebase/storage-compat",Oi="@firebase/firestore",Di="@firebase/firestore-compat",Li="firebase",Mi="[DEFAULT]",Ai={[ci]:"fire-core",[hi]:"fire-core-compat",[pi]:"fire-analytics",[fi]:"fire-analytics-compat",[gi]:"fire-app-check",[mi]:"fire-app-check-compat",[vi]:"fire-auth",[yi]:"fire-auth-compat",[_i]:"fire-rtdb",[bi]:"fire-rtdb-compat",[wi]:"fire-fn",[xi]:"fire-fn-compat",[ki]:"fire-iid",[Ci]:"fire-iid-compat",[Ei]:"fire-fcm",[Si]:"fire-fcm-compat",[Ii]:"fire-perf",[Ti]:"fire-perf-compat",[Ni]:"fire-rc",[Pi]:"fire-rc-compat",[Ri]:"fire-gcs",[ji]:"fire-gcs-compat",[Oi]:"fire-fst",[Di]:"fire-fst-compat","fire-js":"fire-js",[Li]:"fire-js-all"},Fi=new Map,Ui=new Map;function $i(e,t){try{e.container.addComponent(t)}catch(jk){di.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,jk)}}function zi(e){const t=e.name;if(Ui.has(t))return di.debug(`There were multiple attempts to register component ${t}.`),!1;Ui.set(t,e);for(const n of Fi.values())$i(n,e);return!0}function Bi(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Wi=new pr("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Hi{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Lr("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Wi.create("app-deleted",{appName:this._name})}}const qi="9.23.0";function Vi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Mi,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Wi.create("bad-app-name",{appName:String(i)});if(n||(n=tr()),!n)throw Wi.create("no-options");const s=Fi.get(i);if(s){if(kr(n,s.options)&&kr(r,s.config))return s;throw Wi.create("duplicate-app",{appName:i})}const a=new Fr(i);for(const l of Ui.values())a.addComponent(l);const o=new Hi(n,r,a);return Fi.set(i,o),o}function Gi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mi;const t=Fi.get(e);if(!t&&e===Mi&&tr())return Vi();if(!t)throw Wi.create("no-app",{appName:e});return t}function Ki(e,t,n){var r;let i=null!==(r=Ai[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void di.warn(e.join(" "))}zi(new Lr(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const Yi="firebase-heartbeat-store";let Qi=null;function Xi(){return Qi||(Qi=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=ni(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(ni(a.result),e.oldVersion,e.newVersion,ni(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Yi)}}).catch((e=>{throw Wi.create("idb-open",{originalErrorMessage:e.message})}))),Qi}async function Ji(e,t){try{const n=(await Xi()).transaction(Yi,"readwrite"),r=n.objectStore(Yi);await r.put(t,Zi(e)),await n.done}catch(jk){if(jk instanceof fr)di.warn(jk.message);else{const t=Wi.create("idb-set",{originalErrorMessage:null===jk||void 0===jk?void 0:jk.message});di.warn(t.message)}}}function Zi(e){return`${e.name}!${e.options.appId}`}class es{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ns(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=ts();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=ts(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),rs(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),rs(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=Gn(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function ts(){return(new Date).toISOString().substring(0,10)}class ns{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!dr()&&hr().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Xi();return await t.transaction(Yi).objectStore(Yi).get(Zi(e))}catch(jk){if(jk instanceof fr)di.warn(jk.message);else{const t=Wi.create("idb-get",{originalErrorMessage:null===jk||void 0===jk?void 0:jk.message});di.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ji(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Ji(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function rs(e){return Gn(JSON.stringify({version:2,heartbeats:e})).length}var is;is="",zi(new Lr("platform-logger",(e=>new li(e)),"PRIVATE")),zi(new Lr("heartbeat",(e=>new es(e)),"PRIVATE")),Ki(ci,ui,is),Ki(ci,ui,"esm2017"),Ki("fire-js","");const ss="@firebase/database",as="0.14.4";let os="";class ls{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),vr(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:gr(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class cs{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return _r(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const us=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new ls(t)}}catch(jk){}return new cs},ds=us("localStorage"),hs=us("sessionStorage"),fs=new qr("@firebase/database"),ps=function(){let e=1;return function(){return e++}}(),ms=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,zn(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Tr;n.update(t);const r=n.digest();return Hn.encodeByteArray(r)},gs=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=gs.apply(null,n):e+="object"===typeof n?vr(n):n,e+=" "}return e};let vs=null,ys=!0;const _s=function(e,t){zn(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(fs.logLevel=$r.VERBOSE,vs=fs.log.bind(fs),t&&hs.set("logging_enabled",!0)):"function"===typeof e?vs=e:(vs=null,hs.remove("logging_enabled"))},bs=function(){if(!0===ys&&(ys=!1,null===vs&&!0===hs.get("logging_enabled")&&_s(!0)),vs){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=gs.apply(null,t);vs(r)}},ws=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];bs(e,...n)}},xs=function(){const e="FIREBASE INTERNAL ERROR: "+gs(...arguments);fs.error(e)},ks=function(){const e=`FIREBASE FATAL ERROR: ${gs(...arguments)}`;throw fs.error(e),new Error(e)},Cs=function(){const e="FIREBASE WARNING: "+gs(...arguments);fs.warn(e)},Es=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Ss="[MIN_NAME]",Is="[MAX_NAME]",Ts=function(e,t){if(e===t)return 0;if(e===Ss||t===Is)return-1;if(t===Ss||e===Is)return 1;{const n=Ms(e),r=Ms(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},Ns=function(e,t){return e===t?0:e<t?-1:1},Ps=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+vr(t))},Rs=function(e){if("object"!==typeof e||null===e)return vr(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=vr(t[r]),n+=":",n+=Rs(e[t[r]]);return n+="}",n},js=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Os(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Ds=function(e){zn(!Es(e),"Invalid JSON number");const t=1023;let n,r,i,s,a;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const o=[];for(a=52;a;a-=1)o.push(i%2?1:0),i=Math.floor(i/2);for(a=11;a;a-=1)o.push(r%2?1:0),r=Math.floor(r/2);o.push(n?1:0),o.reverse();const l=o.join("");let c="";for(a=0;a<64;a+=8){let e=parseInt(l.substr(a,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const Ls=new RegExp("^-?(0*)\\d{1,10}$"),Ms=function(e){if(Ls.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},As=function(e){try{e()}catch(jk){setTimeout((()=>{const t=jk.stack||"";throw Cs("Exception was thrown by user callback.",t),jk}),Math.floor(0))}},Fs=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Us{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Cs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class $s{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(bs("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Cs(e)}}class zs{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}zs.OWNER="owner";const Bs="5",Ws=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Hs="ac",qs="websocket",Vs="long_polling";class Gs{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ds.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ds.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function Ks(e,t,n){let r;if(zn("string"===typeof t,"typeof type must == string"),zn("object"===typeof n,"typeof params must == object"),t===qs)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Vs)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return Os(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class Ys{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;_r(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Yn(this.counters_)}}const Qs={},Xs={};function Js(e){const t=e.toString();return Qs[t]||(Qs[t]=new Ys),Qs[t]}class Zs{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&As((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const ea="start";class ta{constructor(e,t,n,r,i,s,a){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ws(e),this.stats_=Js(t),this.urlFn=e=>(this.appCheckToken&&(e[Hs]=this.appCheckToken),Ks(t,Vs,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Zs(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(ur()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new na((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,a,o,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===ea)n.id=s,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[ea]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=Bs,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Hs]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&Ws.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ta.forceAllow_=!0}static forceDisallow(){ta.forceDisallow_=!0}static isAvailable(){return!ur()&&(!!ta.forceAllow_||!ta.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=vr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Vn(t),r=js(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(ur())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=vr(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class na{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,ur())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=ps(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=na.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(jk){bs("frame writing exception"),jk.stack&&bs(jk.stack),bs(jk)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||bs("No IE domain setting required")}catch(jk){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){ur()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{bs("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(jk){}}),Math.floor(1))}}let ra=null;"undefined"!==typeof MozWebSocket?ra=MozWebSocket:"undefined"!==typeof WebSocket&&(ra=WebSocket);class ia{constructor(e,t,n,r,i,s,a){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ws(this.connId),this.stats_=Js(t),this.connURL=ia.connectionURL_(t,s,a,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=Bs,!ur()&&"undefined"!==typeof location&&location.hostname&&Ws.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[Hs]=r),i&&(s.p=i),Ks(e,qs,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ds.set("previous_websocket_failure",!0);try{let e;if(ur()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/${Bs}/${os}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"/MudiaZuwa/BuzzIt.git",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new ra(this.connURL,[],e)}catch(jk){this.log_("Error instantiating WebSocket.");const t=jk.message||jk.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){ia.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==ra&&!ia.forceDisallow_}static previouslyFailed(){return ds.isInMemoryStorage||!0===ds.get("previous_websocket_failure")}markConnectionHealthy(){ds.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=gr(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(zn(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=vr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=js(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(jk){this.log_("Exception thrown from WebSocket.send():",jk.message||jk.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ia.responsesRequiredToBeHealthy=2,ia.healthyTimeout=3e4;class sa{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ta,ia]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=ia&&ia.isAvailable();let n=t&&!ia.previouslyFailed();if(e.webSocketOnly&&(t||Cs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[ia];else{const e=this.transports_=[];for(const t of sa.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);sa.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}sa.globalTransportInitialized_=!1;class aa{constructor(e,t,n,r,i,s,a,o,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=o,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ws("c:"+this.id+":"),this.transportManager_=new sa(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Fs((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Ps("t",e),n=Ps("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Ps("t",e),n=Ps("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Ps("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?xs("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):xs("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Bs!==n&&Cs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),Fs((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Fs((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ds.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class oa{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class la{constructor(e){this.allowedEvents_=e,this.listeners_={},zn(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){zn(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class ca extends la{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||ar()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new ca}getInitialEvent(e){return zn("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class ua{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function da(){return new ua("")}function ha(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function fa(e){return e.pieces_.length-e.pieceNum_}function pa(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ua(e.pieces_,t)}function ma(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ga(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function va(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ua(t,0)}function ya(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof ua)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new ua(n,0)}function _a(e){return e.pieceNum_>=e.pieces_.length}function ba(e,t){const n=ha(e),r=ha(t);if(null===n)return t;if(n===r)return ba(pa(e),pa(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function wa(e,t){const n=ga(e,0),r=ga(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=Ts(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function xa(e,t){if(fa(e)!==fa(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function ka(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(fa(e)>fa(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class Ca{constructor(e,t){this.errorPrefix_=t,this.parts_=ga(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=jr(this.parts_[n]);Ea(this)}}function Ea(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Sa(e))}function Sa(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Ia extends la{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new Ia}getInitialEvent(e){return zn("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Ta=1e3;class Na extends oa{constructor(e,t,n,r,i,s,a,o){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.authOverride_=o,this.id=Na.nextPersistentConnectionId_++,this.log_=ws("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ta,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,o&&!ur())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ia.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&ca.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(vr(i)),zn(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new rr,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),zn(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),zn(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,a=i.s;Na.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==a&&this.removeListen_(n,r),e.onComplete&&e.onComplete(a,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&_r(e,"w")){const n=br(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Cs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=yr(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=yr(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),zn(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+vr(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):xs("Unrecognized action received from server: "+vr(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){zn(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ta,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ta,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ta),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Na.nextConnectionId_++,i=this.lastSessionId;let s=!1,a=null;const o=function(){a?a.close():(s=!0,n())},l=function(e){zn(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:o,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[o,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?bs("getToken() completed but was canceled"):(bs("getToken() completed. Creating connection."),this.authToken_=o&&o.accessToken,this.appCheckToken_=l&&l.token,a=new aa(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{Cs(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(xs){this.log_("Failed to get token: "+xs),s||(this.repoInfo_.nodeAdmin&&Cs(xs),o())}}}interrupt(e){bs("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){bs("Resuming connection for reason: "+e),delete this.interruptReasons_[e],wr(this.interruptReasons_)&&(this.reconnectDelay_=Ta,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>Rs(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new ua(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){bs("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){bs("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";ur()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+os.replace(/\./g,"-")]=1,ar()?e["framework.cordova"]=1:cr()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=ca.getInstance().currentlyOnline();return wr(this.interruptReasons_)&&e}}Na.nextPersistentConnectionId_=0,Na.nextConnectionId_=0;class Pa{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Pa(e,t)}}class Ra{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Pa(Ss,e),r=new Pa(Ss,t);return 0!==this.compare(n,r)}minPost(){return Pa.MIN}}let ja;class Oa extends Ra{static get __EMPTY_NODE(){return ja}static set __EMPTY_NODE(e){ja=e}compare(e,t){return Ts(e.name,t.name)}isDefinedOn(e){throw Bn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Pa.MIN}maxPost(){return new Pa(Is,ja)}makePost(e,t){return zn("string"===typeof e,"KeyIndex indexValue must always be a string."),new Pa(e,ja)}toString(){return".key"}}const Da=new Oa;class La{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ma{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Ma.RED,this.left=null!=r?r:Aa.EMPTY_NODE,this.right=null!=i?i:Aa.EMPTY_NODE}copy(e,t,n,r,i){return new Ma(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Aa.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Aa.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ma.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ma.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ma.RED=!0,Ma.BLACK=!1;class Aa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Aa.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new Aa(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ma.BLACK,null,null))}remove(e){return new Aa(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ma.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new La(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new La(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new La(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new La(this.root_,null,this.comparator_,!0,e)}}function Fa(e,t){return Ts(e.name,t.name)}function Ua(e,t){return Ts(e,t)}let $a;Aa.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new Ma(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const za=function(e){return"number"===typeof e?"number:"+Ds(e):"string:"+e},Ba=function(e){if(e.isLeafNode()){const t=e.val();zn("string"===typeof t||"number"===typeof t||"object"===typeof t&&_r(t,".sv"),"Priority must be a string or number.")}else zn(e===$a||e.isEmpty(),"priority of unexpected type.");zn(e===$a||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Wa,Ha,qa;class Va{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Va.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,zn(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Ba(this.priorityNode_)}static set __childrenNodeConstructor(e){Wa=e}static get __childrenNodeConstructor(){return Wa}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Va(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:Va.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return _a(e)?this:".priority"===ha(e)?this.priorityNode_:Va.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Va.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=ha(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(zn(".priority"!==n||1===fa(e),".priority must be the last token in a path"),this.updateImmediateChild(n,Va.__childrenNodeConstructor.EMPTY_NODE.updateChild(pa(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+za(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Ds(this.value_):this.value_,this.lazyHash_=ms(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Va.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Va.__childrenNodeConstructor?-1:(zn(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=Va.VALUE_TYPE_ORDER.indexOf(t),i=Va.VALUE_TYPE_ORDER.indexOf(n);return zn(r>=0,"Unknown leaf type: "+t),zn(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}Va.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Ga=new class extends Ra{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Ts(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Pa.MIN}maxPost(){return new Pa(Is,new Va("[PRIORITY-POST]",qa))}makePost(e,t){const n=Ha(e);return new Pa(t,new Va("[PRIORITY-POST]",n))}toString(){return".priority"}},Ka=Math.log(2);class Ya{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Ka,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Qa=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let a,o;if(0===s)return null;if(1===s)return a=e[t],o=n?n(a):a,new Ma(o,a.node,Ma.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return a=e[l],o=n?n(a):a,new Ma(o,a.node,Ma.BLACK,c,u)}},s=function(t){let r=null,s=null,a=e.length;const o=function(t,r){const s=a-t,o=a;a-=t;const c=i(s+1,o),u=e[s],d=n?n(u):u;l(new Ma(d,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?o(r,Ma.BLACK):(o(r,Ma.BLACK),o(r,Ma.RED))}return s}(new Ya(e.length));return new Aa(r||t,s)};let Xa;const Ja={};class Za{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return zn(Ja&&Ga,"ChildrenNode.ts has not been loaded"),Xa=Xa||new Za({".priority":Ja},{".priority":Ga}),Xa}get(e){const t=br(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Aa?t:null}hasIndex(e){return _r(this.indexSet_,e.toString())}addIndex(e,t){zn(e!==Da,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(Pa.Wrap);let s,a=i.getNext();for(;a;)r=r||e.isDefinedOn(a.node),n.push(a),a=i.getNext();s=r?Qa(n,e.getCompare()):Ja;const o=e.toString(),l=Object.assign({},this.indexSet_);l[o]=e;const c=Object.assign({},this.indexes_);return c[o]=s,new Za(c,l)}addToIndexes(e,t){const n=xr(this.indexes_,((n,r)=>{const i=br(this.indexSet_,r);if(zn(i,"Missing index implementation for "+r),n===Ja){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(Pa.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),Qa(n,i.getCompare())}return Ja}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new Pa(e.name,r))),i.insert(e,e.node)}}));return new Za(n,this.indexSet_)}removeFromIndexes(e,t){const n=xr(this.indexes_,(n=>{if(n===Ja)return n;{const r=t.get(e.name);return r?n.remove(new Pa(e.name,r)):n}}));return new Za(n,this.indexSet_)}}let eo;class to{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Ba(this.priorityNode_),this.children_.isEmpty()&&zn(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return eo||(eo=new to(new Aa(Ua),null,Za.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||eo}updatePriority(e){return this.children_.isEmpty()?this:new to(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?eo:t}}getChild(e){const t=ha(e);return null===t?this:this.getImmediateChild(t).getChild(pa(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(zn(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new Pa(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?eo:this.priorityNode_;return new to(r,s,i)}}updateChild(e,t){const n=ha(e);if(null===n)return t;{zn(".priority"!==ha(e)||1===fa(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(pa(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(Ga,((s,a)=>{t[s]=a.val(e),n++,i&&to.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+za(this.getPriority().val())+":"),this.forEachChild(Ga,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":ms(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new Pa(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Pa(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Pa(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,Pa.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,Pa.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===no?-1:0}withIndex(e){if(e===Da||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new to(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Da||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Ga),n=t.getIterator(Ga);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===Da?null:this.indexMap_.get(e.toString())}}to.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const no=new class extends to{constructor(){super(new Aa(Ua),to.EMPTY_NODE,Za.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return to.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Pa,{MIN:{value:new Pa(Ss,to.EMPTY_NODE)},MAX:{value:new Pa(Is,no)}}),Oa.__EMPTY_NODE=to.EMPTY_NODE,Va.__childrenNodeConstructor=to,$a=no,function(e){qa=e}(no);function ro(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return to.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),zn(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new Va(e,ro(t))}if(e instanceof Array){let n=to.EMPTY_NODE;return Os(e,((t,r)=>{if(_r(e,t)&&"."!==t.substring(0,1)){const e=ro(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(ro(t))}{const n=[];let r=!1;if(Os(e,((e,t)=>{if("."!==e.substring(0,1)){const i=ro(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new Pa(e,i)))}})),0===n.length)return to.EMPTY_NODE;const i=Qa(n,Fa,(e=>e.name),Ua);if(r){const e=Qa(n,Ga.getCompare());return new to(i,ro(t),new Za({".priority":e},{".priority":Ga}))}return new to(i,ro(t),Za.Default)}}!function(e){Ha=e}(ro);class io extends Ra{constructor(e){super(),this.indexPath_=e,zn(!_a(e)&&".priority"!==ha(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Ts(e.name,t.name):i}makePost(e,t){const n=ro(e),r=to.EMPTY_NODE.updateChild(this.indexPath_,n);return new Pa(t,r)}maxPost(){const e=to.EMPTY_NODE.updateChild(this.indexPath_,no);return new Pa(Is,e)}toString(){return ga(this.indexPath_,0).join("/")}}const so=new class extends Ra{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Ts(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Pa.MIN}maxPost(){return Pa.MAX}makePost(e,t){const n=ro(e);return new Pa(t,n)}toString(){return".value"}};function ao(e){return{type:"value",snapshotNode:e}}function oo(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function lo(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function co(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class uo{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){zn(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(lo(t,a)):zn(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(oo(t,n)):s.trackChildChange(co(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Ga,((e,r)=>{t.hasChild(e)||n.trackChildChange(lo(e,r))})),t.isLeafNode()||t.forEachChild(Ga,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(co(t,r,i))}else n.trackChildChange(oo(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?to.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ho{constructor(e){this.indexedFilter_=new uo(e.getIndex()),this.index_=e.getIndex(),this.startPost_=ho.getStartPost_(e),this.endPost_=ho.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new Pa(t,n))||(n=to.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=to.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(to.EMPTY_NODE);const i=this;return t.forEachChild(Ga,((e,t)=>{i.matches(new Pa(e,t))||(r=r.updateImmediateChild(e,to.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class fo{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new ho(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new Pa(t,n))||(n=to.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=to.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=to.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(to.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,to.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const a=e;zn(a.numChildren()===this.limit_,"");const o=new Pa(t,n),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),c=this.rangedFilter_.matches(o);if(a.hasChild(t)){const e=a.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||a.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const d=null==u?1:s(u,o);if(c&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(co(t,n,e)),a.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(lo(t,e));const n=a.updateImmediateChild(t,to.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(oo(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,o)>=0?(null!=i&&(i.trackChildChange(lo(l.name,l.node)),i.trackChildChange(oo(t,n))),a.updateImmediateChild(t,n).updateImmediateChild(l.name,to.EMPTY_NODE)):e}}class po{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ga}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return zn(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return zn(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ss}hasEnd(){return this.endSet_}getIndexEndValue(){return zn(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return zn(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Is}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return zn(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ga}copy(){const e=new po;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function mo(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Ga?n="$priority":e.index_===so?n="$value":e.index_===Da?n="$key":(zn(e.index_ instanceof io,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=vr(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=vr(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+vr(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=vr(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+vr(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function go(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Ga&&(t.i=e.index_.toString()),t}class vo extends oa{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=ws("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(zn(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=vo.getListenId_(e,n),a={};this.listens_[s]=a;const o=mo(e._queryParams);this.restRequest_(i+".json",o,((e,t)=>{let o=t;if(404===e&&(o=null,e=null),null===e&&this.onDataUpdate_(i,o,!1,n),br(this.listens_,s)===a){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=vo.getListenId_(e,t);delete this.listens_[n]}get(e){const t=mo(e._queryParams),n=e._path.toString(),r=new rr;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Er(t);this.log_("Sending REST request for "+a);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+a+" received. status:",o.status,"response:",o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=gr(o.responseText)}catch(jk){Cs("Failed to parse JSON response for "+a+": "+o.responseText)}n(null,e)}else 401!==o.status&&404!==o.status&&Cs("Got unsuccessful REST response for "+a+" Status: "+o.status),n(o.status);n=null}},o.open("GET",a,!0),o.send()}))}}class yo{constructor(){this.rootNode_=to.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function _o(){return{value:null,children:new Map}}function bo(e,t,n){if(_a(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=ha(t);e.children.has(r)||e.children.set(r,_o());bo(e.children.get(r),t=pa(t),n)}}function wo(e,t){if(_a(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(Ga,((t,n)=>{bo(e,new ua(t),n)})),wo(e,t)}}if(e.children.size>0){const n=ha(t);if(t=pa(t),e.children.has(n)){wo(e.children.get(n),t)&&e.children.delete(n)}return 0===e.children.size}return!0}function xo(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{xo(r,new ua(t.toString()+"/"+e),n)}))}class ko{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Os(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Co{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new ko(e);const n=1e4+2e4*Math.random();Fs(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Os(e,((e,r)=>{r>0&&_r(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),Fs(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Eo;function So(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Eo||(Eo={}));class Io{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Eo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(_a(this.path)){if(null!=this.affectedTree.value)return zn(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ua(e));return new Io(da(),t,this.revert)}}return zn(ha(this.path)===e,"operationForChild called for unrelated child."),new Io(pa(this.path),this.affectedTree,this.revert)}}class To{constructor(e,t){this.source=e,this.path=t,this.type=Eo.LISTEN_COMPLETE}operationForChild(e){return _a(this.path)?new To(this.source,da()):new To(this.source,pa(this.path))}}class No{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Eo.OVERWRITE}operationForChild(e){return _a(this.path)?new No(this.source,da(),this.snap.getImmediateChild(e)):new No(this.source,pa(this.path),this.snap)}}class Po{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Eo.MERGE}operationForChild(e){if(_a(this.path)){const t=this.children.subtree(new ua(e));return t.isEmpty()?null:t.value?new No(this.source,da(),t.value):new Po(this.source,da(),t)}return zn(ha(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Po(this.source,pa(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ro{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(_a(e))return this.isFullyInitialized()&&!this.filtered_;const t=ha(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class jo{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Oo(e,t,n,r,i,s){const a=r.filter((e=>e.type===n));a.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Bn("Should only compare child_ events.");const r=new Pa(t.childName,t.snapshotNode),i=new Pa(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),a.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Do(e,t){return{eventCache:e,serverCache:t}}function Lo(e,t,n,r){return Do(new Ro(t,n,r),e.serverCache)}function Mo(e,t,n,r){return Do(e.eventCache,new Ro(t,n,r))}function Ao(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Fo(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Uo;class $o{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Uo||(Uo=new Aa(Ns)),Uo);this.value=e,this.children=t}static fromObject(e){let t=new $o(null);return Os(e,((e,n)=>{t=t.set(new ua(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:da(),value:this.value};if(_a(e))return null;{const n=ha(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(pa(e),t);if(null!=i){return{path:ya(new ua(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(_a(e))return this;{const t=ha(e),n=this.children.get(t);return null!==n?n.subtree(pa(e)):new $o(null)}}set(e,t){if(_a(e))return new $o(t,this.children);{const n=ha(e),r=(this.children.get(n)||new $o(null)).set(pa(e),t),i=this.children.insert(n,r);return new $o(this.value,i)}}remove(e){if(_a(e))return this.children.isEmpty()?new $o(null):new $o(null,this.children);{const t=ha(e),n=this.children.get(t);if(n){const r=n.remove(pa(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new $o(null):new $o(this.value,i)}return this}}get(e){if(_a(e))return this.value;{const t=ha(e),n=this.children.get(t);return n?n.get(pa(e)):null}}setTree(e,t){if(_a(e))return t;{const n=ha(e),r=(this.children.get(n)||new $o(null)).setTree(pa(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new $o(this.value,i)}}fold(e){return this.fold_(da(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(ya(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,da(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(_a(e))return null;{const r=ha(e),i=this.children.get(r);return i?i.findOnPath_(pa(e),ya(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,da(),t)}foreachOnPath_(e,t,n){if(_a(e))return this;{this.value&&n(t,this.value);const r=ha(e),i=this.children.get(r);return i?i.foreachOnPath_(pa(e),ya(t,r),n):new $o(null)}}foreach(e){this.foreach_(da(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(ya(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class zo{constructor(e){this.writeTree_=e}static empty(){return new zo(new $o(null))}}function Bo(e,t,n){if(_a(t))return new zo(new $o(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const a=ba(i,t);return s=s.updateChild(a,n),new zo(e.writeTree_.set(i,s))}{const r=new $o(n),i=e.writeTree_.setTree(t,r);return new zo(i)}}}function Wo(e,t,n){let r=e;return Os(n,((e,n)=>{r=Bo(r,ya(t,e),n)})),r}function Ho(e,t){if(_a(t))return zo.empty();{const n=e.writeTree_.setTree(t,new $o(null));return new zo(n)}}function qo(e,t){return null!=Vo(e,t)}function Vo(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(ba(n.path,t)):null}function Go(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ga,((e,n)=>{t.push(new Pa(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new Pa(e,n.value))})),t}function Ko(e,t){if(_a(t))return e;{const n=Vo(e,t);return new zo(null!=n?new $o(n):e.writeTree_.subtree(t))}}function Yo(e){return e.writeTree_.isEmpty()}function Qo(e,t){return Xo(da(),e.writeTree_,t)}function Xo(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(zn(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Xo(ya(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(ya(e,".priority"),r)),n}}function Jo(e,t){return dl(t,e)}function Zo(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));zn(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,a=e.allWrites.length-1;for(;i&&a>=0;){const t=e.allWrites[a];t.visible&&(a>=n&&el(t,r.path)?i=!1:ka(r.path,t.path)&&(s=!0)),a--}if(i){if(s)return function(e){e.visibleWrites=nl(e.allWrites,tl,da()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=Ho(e.visibleWrites,r.path);else{Os(r.children,(t=>{e.visibleWrites=Ho(e.visibleWrites,ya(r.path,t))}))}return!0}return!1}function el(e,t){if(e.snap)return ka(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&ka(ya(e.path,n),t))return!0;return!1}function tl(e){return e.visible}function nl(e,t,n){let r=zo.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)ka(n,e)?(t=ba(n,e),r=Bo(r,t,s.snap)):ka(e,n)&&(t=ba(e,n),r=Bo(r,da(),s.snap.getChild(t)));else{if(!s.children)throw Bn("WriteRecord should have .snap or .children");if(ka(n,e))t=ba(n,e),r=Wo(r,t,s.children);else if(ka(e,n))if(t=ba(e,n),_a(t))r=Wo(r,da(),s.children);else{const e=br(s.children,ha(t));if(e){const n=e.getChild(pa(t));r=Bo(r,da(),n)}}}}}return r}function rl(e,t,n,r,i){if(r||i){const s=Ko(e.visibleWrites,t);if(!i&&Yo(s))return n;if(i||null!=n||qo(s,da())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(ka(e.path,t)||ka(t,e.path))};return Qo(nl(e.allWrites,s,t),n||to.EMPTY_NODE)}return null}{const r=Vo(e.visibleWrites,t);if(null!=r)return r;{const r=Ko(e.visibleWrites,t);if(Yo(r))return n;if(null!=n||qo(r,da())){return Qo(r,n||to.EMPTY_NODE)}return null}}}function il(e,t,n,r){return rl(e.writeTree,e.treePath,t,n,r)}function sl(e,t){return function(e,t,n){let r=to.EMPTY_NODE;const i=Vo(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Ga,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=Ko(e.visibleWrites,t);return n.forEachChild(Ga,((e,t)=>{const n=Qo(Ko(i,new ua(e)),t);r=r.updateImmediateChild(e,n)})),Go(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return Go(Ko(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function al(e,t,n,r){return function(e,t,n,r,i){zn(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=ya(t,n);if(qo(e.visibleWrites,s))return null;{const t=Ko(e.visibleWrites,s);return Yo(t)?i.getChild(n):Qo(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function ol(e,t){return function(e,t){return Vo(e.visibleWrites,t)}(e.writeTree,ya(e.treePath,t))}function ll(e,t,n,r,i,s){return function(e,t,n,r,i,s,a){let o;const l=Ko(e.visibleWrites,t),c=Vo(l,da());if(null!=c)o=c;else{if(null==n)return[];o=Qo(l,n)}if(o=o.withIndex(a),o.isEmpty()||o.isLeafNode())return[];{const e=[],t=a.getCompare(),n=s?o.getReverseIteratorFrom(r,a):o.getIteratorFrom(r,a);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function cl(e,t,n){return function(e,t,n,r){const i=ya(t,n),s=Vo(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return Qo(Ko(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function ul(e,t){return dl(ya(e.treePath,t),e.writeTree)}function dl(e,t){return{treePath:e,writeTree:t}}class hl{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;zn("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),zn(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,co(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,lo(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,oo(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Bn("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,co(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const fl=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class pl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Ro(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return cl(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Fo(this.viewCache_),i=ll(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function ml(e,t,n,r,i){const s=new hl;let a,o;if(n.type===Eo.OVERWRITE){const l=n;l.source.fromUser?a=yl(e,t,l.path,l.snap,r,i,s):(zn(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered()&&!_a(l.path),a=vl(e,t,l.path,l.snap,r,i,o,s))}else if(n.type===Eo.MERGE){const l=n;l.source.fromUser?a=function(e,t,n,r,i,s,a){let o=t;return r.foreach(((r,l)=>{const c=ya(n,r);_l(t,ha(c))&&(o=yl(e,o,c,l,i,s,a))})),r.foreach(((r,l)=>{const c=ya(n,r);_l(t,ha(c))||(o=yl(e,o,c,l,i,s,a))})),o}(e,t,l.path,l.children,r,i,s):(zn(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered(),a=wl(e,t,l.path,l.children,r,i,o,s))}else if(n.type===Eo.ACK_USER_WRITE){const o=n;a=o.revert?function(e,t,n,r,i,s){let a;if(null!=ol(r,n))return t;{const o=new pl(r,t,i),l=t.eventCache.getNode();let c;if(_a(n)||".priority"===ha(n)){let n;if(t.serverCache.isFullyInitialized())n=il(r,Fo(t));else{const e=t.serverCache.getNode();zn(e instanceof to,"serverChildren would be complete if leaf node"),n=sl(r,e)}c=e.filter.updateFullNode(l,n,s)}else{const i=ha(n);let u=cl(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,pa(n),o,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,to.EMPTY_NODE,pa(n),o,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=il(r,Fo(t)),a.isLeafNode()&&(c=e.filter.updateFullNode(c,a,s)))}return a=t.serverCache.isFullyInitialized()||null!=ol(r,da()),Lo(t,c,a,e.filter.filtersNodes())}}(e,t,o.path,r,i,s):function(e,t,n,r,i,s,a){if(null!=ol(i,n))return t;const o=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(_a(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return vl(e,t,n,l.getNode().getChild(n),i,s,o,a);if(_a(n)){let r=new $o(null);return l.getNode().forEachChild(Da,((e,t)=>{r=r.set(new ua(e),t)})),wl(e,t,n,r,i,s,o,a)}return t}{let c=new $o(null);return r.foreach(((e,t)=>{const r=ya(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),wl(e,t,n,c,i,s,o,a)}}(e,t,o.path,o.affectedTree,r,i,s)}else{if(n.type!==Eo.LISTEN_COMPLETE)throw Bn("Unknown operation type: "+n.type);a=function(e,t,n,r,i){const s=t.serverCache,a=Mo(t,s.getNode(),s.isFullyInitialized()||_a(n),s.isFiltered());return gl(e,a,n,r,fl,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Ao(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(ao(Ao(t)))}}(t,a,l),{viewCache:a,changes:l}}function gl(e,t,n,r,i,s){const a=t.eventCache;if(null!=ol(r,n))return t;{let o,l;if(_a(n))if(zn(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Fo(t),i=sl(r,n instanceof to?n:to.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=il(r,Fo(t));o=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=ha(n);if(".priority"===c){zn(1===fa(n),"Can't have a priority with additional path components");const i=a.getNode();l=t.serverCache.getNode();const s=al(r,n,i,l);o=null!=s?e.filter.updatePriority(i,s):a.getNode()}else{const u=pa(n);let d;if(a.isCompleteForChild(c)){l=t.serverCache.getNode();const e=al(r,n,a.getNode(),l);d=null!=e?a.getNode().getImmediateChild(c).updateChild(u,e):a.getNode().getImmediateChild(c)}else d=cl(r,c,t.serverCache);o=null!=d?e.filter.updateChild(a.getNode(),c,d,u,i,s):a.getNode()}}return Lo(t,o,a.isFullyInitialized()||_a(n),e.filter.filtersNodes())}}function vl(e,t,n,r,i,s,a,o){const l=t.serverCache;let c;const u=a?e.filter:e.filter.getIndexedFilter();if(_a(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=ha(n);if(!l.isCompleteForPath(n)&&fa(n)>1)return t;const i=pa(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,fl,null)}const d=Mo(t,c,l.isFullyInitialized()||_a(n),u.filtersNodes());return gl(e,d,n,i,new pl(i,d,s),o)}function yl(e,t,n,r,i,s,a){const o=t.eventCache;let l,c;const u=new pl(i,t,s);if(_a(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,a),l=Lo(t,c,!0,e.filter.filtersNodes());else{const i=ha(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=Lo(t,c,o.isFullyInitialized(),o.isFiltered());else{const s=pa(n),c=o.getNode().getImmediateChild(i);let d;if(_a(s))d=r;else{const e=u.getCompleteChild(i);d=null!=e?".priority"===ma(s)&&e.getChild(va(s)).isEmpty()?e:e.updateChild(s,r):to.EMPTY_NODE}if(c.equals(d))l=t;else{l=Lo(t,e.filter.updateChild(o.getNode(),i,d,s,u,a),o.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function _l(e,t){return e.eventCache.isCompleteForChild(t)}function bl(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function wl(e,t,n,r,i,s,a,o){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=_a(n)?r:new $o(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=bl(0,t.serverCache.getNode().getImmediateChild(n),r);c=vl(e,c,new ua(n),l,i,s,a,o)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=bl(0,t.serverCache.getNode().getImmediateChild(n),r);c=vl(e,c,new ua(n),l,i,s,a,o)}})),c}class xl{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new uo(n.getIndex()),i=(s=n).loadsAllData()?new uo(s.getIndex()):s.hasLimit()?new fo(s):new ho(s);var s;this.processor_=function(e){return{filter:e}}(i);const a=t.serverCache,o=t.eventCache,l=r.updateFullNode(to.EMPTY_NODE,a.getNode(),null),c=i.updateFullNode(to.EMPTY_NODE,o.getNode(),null),u=new Ro(l,a.isFullyInitialized(),r.filtersNodes()),d=new Ro(c,o.isFullyInitialized(),i.filtersNodes());this.viewCache_=Do(d,u),this.eventGenerator_=new jo(this.query_)}get query(){return this.query_}}function kl(e,t){const n=Fo(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!_a(t)&&!n.getImmediateChild(ha(t)).isEmpty())?n.getChild(t):null}function Cl(e){return 0===e.eventRegistrations_.length}function El(e,t,n){const r=[];if(n){zn(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function Sl(e,t,n,r){t.type===Eo.MERGE&&null!==t.source.queryId&&(zn(Fo(e.viewCache_),"We should always have a full cache before handling merges"),zn(Ao(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=ml(e.processor_,i,t,n,r);var a,o;return a=e.processor_,o=s.viewCache,zn(o.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),zn(o.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),zn(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Il(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Il(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Oo(e,i,"child_removed",t,r,n),Oo(e,i,"child_added",t,r,n),Oo(e,i,"child_moved",s,r,n),Oo(e,i,"child_changed",t,r,n),Oo(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let Tl,Nl;class Pl{constructor(){this.views=new Map}}function Rl(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return zn(null!=s,"SyncTree gave us an op for an invalid query."),Sl(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(Sl(s,t,n,r));return i}}function jl(e,t,n,r,i){const s=t._queryIdentifier,a=e.views.get(s);if(!a){let e=il(n,i?r:null),s=!1;e?s=!0:r instanceof to?(e=sl(n,r),s=!1):(e=to.EMPTY_NODE,s=!1);const a=Do(new Ro(e,s,!1),new Ro(r,i,!1));return new xl(t,a)}return a}function Ol(e,t,n,r,i,s){const a=jl(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(Ga,((e,t)=>{r.push(oo(e,t))}));return n.isFullyInitialized()&&r.push(ao(n.getNode())),Il(e,r,n.getNode(),t)}(a,n)}function Dl(e,t,n,r){const i=t._queryIdentifier,s=[];let a=[];const o=Ul(e);if("default"===i)for(const[l,c]of e.views.entries())a=a.concat(El(c,n,r)),Cl(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(a=a.concat(El(t,n,r)),Cl(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return o&&!Ul(e)&&s.push(new(zn(Tl,"Reference.ts has not been loaded"),Tl)(t._repo,t._path)),{removed:s,events:a}}function Ll(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Ml(e,t){let n=null;for(const r of e.views.values())n=n||kl(r,t);return n}function Al(e,t){if(t._queryParams.loadsAllData())return $l(e);{const n=t._queryIdentifier;return e.views.get(n)}}function Fl(e,t){return null!=Al(e,t)}function Ul(e){return null!=$l(e)}function $l(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let zl=1;class Bl{constructor(e){this.listenProvider_=e,this.syncPointTree_=new $o(null),this.pendingWriteTree_={visibleWrites:zo.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Wl(e,t,n,r,i){return function(e,t,n,r,i){zn(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Bo(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Jl(e,new No({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Hl(e,t,n,r){!function(e,t,n,r){zn(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Wo(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=$o.fromObject(n);return Jl(e,new Po({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function ql(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Zo(e.pendingWriteTree_,t)){let t=new $o(null);return null!=r.snap?t=t.set(da(),!0):Os(r.children,(e=>{t=t.set(new ua(e),!0)})),Jl(e,new Io(r.path,t,n))}return[]}function Vl(e,t,n){return Jl(e,new No({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Gl(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,a=e.syncPointTree_.get(s);let o=[];if(a&&("default"===t._queryIdentifier||Fl(a,t))){const l=Dl(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(o=l.events,!i){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(s,((e,t)=>Ul(t)));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&Ul(t)){return[$l(t)]}{let e=[];return t&&(e=Ll(t)),Os(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=tc(e,r);e.listenProvider_.startListening(oc(i),nc(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(oc(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(rc(t));e.listenProvider_.stopListening(oc(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=rc(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return o}function Kl(e,t,n,r){const i=ic(e,r);if(null!=i){const r=sc(i),s=r.path,a=r.queryId,o=ba(s,t);return ac(e,s,new No(So(a),o,n))}return[]}function Yl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let s=null,a=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=ba(e,i);s=s||Ml(t,n),a=a||Ul(t)}));let o,l=e.syncPointTree_.get(i);if(l?(a=a||Ul(l),s=s||Ml(l,da())):(l=new Pl,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=s)o=!0;else{o=!1,s=to.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=Ml(t,da());n&&(s=s.updateImmediateChild(e,n))}))}const c=Fl(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=rc(t);zn(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=zl++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=Ol(l,t,n,Jo(e.pendingWriteTree_,i),s,o);if(!c&&!a&&!r){const n=Al(l,t);u=u.concat(function(e,t,n){const r=t._path,i=nc(e,t),s=tc(e,n),a=e.listenProvider_.startListening(oc(t),i,s.hashFn,s.onComplete),o=e.syncPointTree_.subtree(r);if(i)zn(!Ul(o.value),"If we're adding a query, it shouldn't be shadowed");else{const t=o.fold(((e,t,n)=>{if(!_a(e)&&t&&Ul(t))return[$l(t).query];{let e=[];return t&&(e=e.concat(Ll(t).map((e=>e.query)))),Os(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(oc(r),nc(e,r))}}return a}(e,t,n))}return u}function Ql(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=Ml(n,ba(e,t));if(r)return r}));return rl(r,t,i,n,!0)}function Xl(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const i=ba(e,n);r=r||Ml(t,i)}));let i=e.syncPointTree_.get(n);i?r=r||Ml(i,da()):(i=new Pl,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,a=s?new Ro(r,!0,!1):null;return function(e){return Ao(e.viewCache_)}(jl(i,t,Jo(e.pendingWriteTree_,t._path),s?a.getNode():to.EMPTY_NODE,s))}function Jl(e,t){return Zl(t,e.syncPointTree_,null,Jo(e.pendingWriteTree_,da()))}function Zl(e,t,n,r){if(_a(e.path))return ec(e,t,n,r);{const i=t.get(da());null==n&&null!=i&&(n=Ml(i,da()));let s=[];const a=ha(e.path),o=e.operationForChild(a),l=t.children.get(a);if(l&&o){const e=n?n.getImmediateChild(a):null,t=ul(r,a);s=s.concat(Zl(o,l,e,t))}return i&&(s=s.concat(Rl(i,e,r,n))),s}}function ec(e,t,n,r){const i=t.get(da());null==n&&null!=i&&(n=Ml(i,da()));let s=[];return t.children.inorderTraversal(((t,i)=>{const a=n?n.getImmediateChild(t):null,o=ul(r,t),l=e.operationForChild(t);l&&(s=s.concat(ec(l,i,a,o)))})),i&&(s=s.concat(Rl(i,e,r,n))),s}function tc(e,t){const n=t.query,r=nc(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||to.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=ic(e,n);if(r){const n=sc(r),i=n.path,s=n.queryId,a=ba(i,t);return ac(e,i,new To(So(s),a))}return[]}(e,n._path,r):function(e,t){return Jl(e,new To({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Gl(e,n,null,r)}}}}function nc(e,t){const n=rc(t);return e.queryToTagMap.get(n)}function rc(e){return e._path.toString()+"$"+e._queryIdentifier}function ic(e,t){return e.tagToQueryMap.get(t)}function sc(e){const t=e.indexOf("$");return zn(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ua(e.substr(0,t))}}function ac(e,t,n){const r=e.syncPointTree_.get(t);zn(r,"Missing sync point for query tag that we're tracking");return Rl(r,n,Jo(e.pendingWriteTree_,t),null)}function oc(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(zn(Nl,"Reference.ts has not been loaded"),Nl)(e._repo,e._path):e}class lc{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new lc(t)}node(){return this.node_}}class cc{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ya(this.path_,e);return new cc(this.syncTree_,t)}node(){return Ql(this.syncTree_,this.path_)}}const uc=function(e,t,n){return e&&"object"===typeof e?(zn(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?dc(e[".sv"],t,n):"object"===typeof e[".sv"]?hc(e[".sv"],t):void zn(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},dc=function(e,t,n){if("timestamp"===e)return n.timestamp;zn(!1,"Unexpected server value: "+e)},hc=function(e,t,n){e.hasOwnProperty("increment")||zn(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&zn(!1,"Unexpected increment value: "+r);const i=t.node();if(zn(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},fc=function(e,t,n,r){return mc(t,new cc(n,e),r)},pc=function(e,t,n){return mc(e,new lc(t),n)};function mc(e,t,n){const r=e.getPriority().val(),i=uc(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=uc(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new Va(s,ro(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new Va(i))),r.forEachChild(Ga,((e,r)=>{const i=mc(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class gc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function vc(e,t){let n=t instanceof ua?t:new ua(t),r=e,i=ha(n);for(;null!==i;){const e=br(r.node.children,i)||{children:{},childCount:0};r=new gc(i,r,e),n=pa(n),i=ha(n)}return r}function yc(e){return e.node.value}function _c(e,t){e.node.value=t,Cc(e)}function bc(e){return e.node.childCount>0}function wc(e,t){Os(e.node.children,((n,r)=>{t(new gc(n,e,r))}))}function xc(e,t,n,r){n&&!r&&t(e),wc(e,(e=>{xc(e,t,!0,r)})),n&&r&&t(e)}function kc(e){return new ua(null===e.parent?e.name:kc(e.parent)+"/"+e.name)}function Cc(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===yc(e)&&!bc(e)}(n),i=_r(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Cc(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Cc(e))}(e.parent,e.name,e)}const Ec=/[\[\].#$\/\u0000-\u001F\u007F]/,Sc=/[\[\].#$\u0000-\u001F\u007F]/,Ic=10485760,Tc=function(e){return"string"===typeof e&&0!==e.length&&!Ec.test(e)},Nc=function(e){return"string"===typeof e&&0!==e.length&&!Sc.test(e)},Pc=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!Es(e)||e&&"object"===typeof e&&_r(e,".sv")},Rc=function(e,t,n,r){r&&void 0===t||jc(Rr(e,"value"),t,n)},jc=function(e,t,n){const r=n instanceof ua?new Ca(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Sa(r));if("function"===typeof t)throw new Error(e+"contains a function "+Sa(r)+" with contents = "+t.toString());if(Es(t))throw new Error(e+"contains "+t.toString()+" "+Sa(r));if("string"===typeof t&&t.length>Ic/3&&jr(t)>Ic)throw new Error(e+"contains a string greater than "+Ic+" utf8 bytes "+Sa(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(Os(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!Tc(t)))throw new Error(e+" contains an invalid key ("+t+") "+Sa(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=jr(t),Ea(e)}(r,t),jc(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=jr(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+Sa(r)+" in addition to actual children.")}},Oc=function(e,t,n,r){if(r&&void 0===t)return;const i=Rr(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];Os(t,((e,t)=>{const r=new ua(e);if(jc(i,t,ya(n,r)),".priority"===ma(r)&&!Pc(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)})),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=ga(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!Tc(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(wa);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&ka(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},Dc=function(e,t,n){if(!n||void 0!==t){if(Es(t))throw new Error(Rr(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Pc(t))throw new Error(Rr(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Lc=function(e,t,n,r){if((!r||void 0!==n)&&!Nc(n))throw new Error(Rr(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Mc=function(e,t){if(".info"===ha(t))throw new Error(e+" failed = Can't modify data under /.info/")},Ac=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Tc(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Nc(e)}(n))throw new Error(Rr(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Fc{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Uc(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||xa(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function $c(e,t,n){Uc(e,n),Bc(e,(e=>xa(e,t)))}function zc(e,t,n){Uc(e,n),Bc(e,(e=>ka(e,t)||ka(t,e)))}function Bc(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(Wc(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Wc(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();vs&&bs("event: "+n.toString()),As(r)}}}const Hc="repo_interrupt";class qc{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Fc,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=_o(),this.transactionQueueTree_=new gc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Vc(e,t,n){if(e.stats_=Js(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new vo(e.repoInfo_,((t,n,r,i)=>{Yc(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>Qc(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{vr(n)}catch(jk){throw new Error("Invalid authOverride provided: "+jk)}}e.persistentConnection_=new Na(e.repoInfo_,t,((t,n,r,i)=>{Yc(e,t,n,r,i)}),(t=>{Qc(e,t)}),(t=>{!function(e,t){Os(t,((t,n)=>{Xc(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return Xs[n]||(Xs[n]=t()),Xs[n]}(e.repoInfo_,(()=>new Co(e.stats_,e.server_))),e.infoData_=new yo,e.infoSyncTree_=new Bl({startListening:(t,n,r,i)=>{let s=[];const a=e.infoData_.getNode(t._path);return a.isEmpty()||(s=Vl(e.infoSyncTree_,t._path,a),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),Xc(e,"connected",!1),e.serverSyncTree_=new Bl({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);zc(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function Gc(e){const t=e.infoData_.getNode(new ua(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Kc(e){return(t=(t={timestamp:Gc(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Yc(e,t,n,r,i){e.dataUpdateCount++;const s=new ua(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(i)if(r){const t=xr(n,(e=>ro(e)));a=function(e,t,n,r){const i=ic(e,r);if(i){const r=sc(i),s=r.path,a=r.queryId,o=ba(s,t),l=$o.fromObject(n);return ac(e,s,new Po(So(a),o,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=ro(n);a=Kl(e.serverSyncTree_,s,t,i)}else if(r){const t=xr(n,(e=>ro(e)));a=function(e,t,n){const r=$o.fromObject(n);return Jl(e,new Po({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=ro(n);a=Vl(e.serverSyncTree_,s,t)}let o=s;a.length>0&&(o=lu(e,s)),zc(e.eventQueue_,o,a)}function Qc(e,t){Xc(e,"connected",t),!1===t&&function(e){iu(e,"onDisconnectEvents");const t=Kc(e),n=_o();xo(e.onDisconnect_,da(),((r,i)=>{const s=fc(r,i,e.serverSyncTree_,t);bo(n,r,s)}));let r=[];xo(n,da(),((t,n)=>{r=r.concat(Vl(e.serverSyncTree_,t,n));const i=fu(e,t);lu(e,i)})),e.onDisconnect_=_o(),zc(e.eventQueue_,da(),r)}(e)}function Xc(e,t,n){const r=new ua("/.info/"+t),i=ro(n);e.infoData_.updateSnapshot(r,i);const s=Vl(e.infoSyncTree_,r,i);zc(e.eventQueue_,r,s)}function Jc(e){return e.nextWriteId_++}function Zc(e,t,n,r,i){iu(e,"set",{path:t.toString(),value:n,priority:r});const s=Kc(e),a=ro(n,r),o=Ql(e.serverSyncTree_,t),l=pc(a,o,s),c=Jc(e),u=Wl(e.serverSyncTree_,t,l,c,!0);Uc(e.eventQueue_,u),e.server_.put(t.toString(),a.val(!0),((n,r)=>{const s="ok"===n;s||Cs("set at "+t+" failed: "+n);const a=ql(e.serverSyncTree_,c,!s);zc(e.eventQueue_,t,a),su(e,i,n,r)}));const d=fu(e,t);lu(e,d),zc(e.eventQueue_,d,[])}function eu(e,t,n){e.server_.onDisconnectCancel(t.toString(),((r,i)=>{"ok"===r&&wo(e.onDisconnect_,t),su(e,n,r,i)}))}function tu(e,t,n,r){const i=ro(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),((n,s)=>{"ok"===n&&bo(e.onDisconnect_,t,i),su(e,r,n,s)}))}function nu(e,t,n){let r;r=".info"===ha(t._path)?Gl(e.infoSyncTree_,t,n):Gl(e.serverSyncTree_,t,n),$c(e.eventQueue_,t._path,r)}function ru(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Hc)}function iu(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];bs(t,...r)}function su(e,t,n,r){t&&As((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}}))}function au(e,t,n){return Ql(e.serverSyncTree_,t,n)||to.EMPTY_NODE}function ou(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||hu(e,t),yc(t)){const n=uu(e,t);zn(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=au(e,t,r);let s=i;const a=i.hash();for(let c=0;c<n.length;c++){const e=n[c];zn(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=ba(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const o=s.val(!0),l=t;e.server_.put(l.toString(),o,(r=>{iu(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(ql(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();hu(e,vc(e.transactionQueueTree_,t)),ou(e,e.transactionQueueTree_),zc(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)As(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Cs("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}lu(e,t)}}),a)}(e,kc(t),n)}else bc(t)&&wc(t,(t=>{ou(e,t)}))}function lu(e,t){const n=cu(e,t),r=kc(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),a=s.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const s=t[l],c=ba(n,s.path);let u,d=!1;if(zn(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)d=!0,u=s.abortReason,i=i.concat(ql(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)d=!0,u="maxretry",i=i.concat(ql(e.serverSyncTree_,s.currentWriteId,!0));else{const n=au(e,s.path,a);s.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){jc("transaction failed: Data returned ",r,s.path);let t=ro(r);"object"===typeof r&&null!=r&&_r(r,".priority")||(t=t.updatePriority(n.getPriority()));const o=s.currentWriteId,l=Kc(e),c=pc(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=Jc(e),a.splice(a.indexOf(o),1),i=i.concat(Wl(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(ql(e.serverSyncTree_,o,!0))}else d=!0,u="nodata",i=i.concat(ql(e.serverSyncTree_,s.currentWriteId,!0))}zc(e.eventQueue_,n,i),i=[],d&&(t[l].status=2,o=t[l].unwatcher,setTimeout(o,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var o;hu(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)As(r[l]);ou(e,e.transactionQueueTree_)}(e,uu(e,n),r),r}function cu(e,t){let n,r=e.transactionQueueTree_;for(n=ha(t);null!==n&&void 0===yc(r);)r=vc(r,n),n=ha(t=pa(t));return r}function uu(e,t){const n=[];return du(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function du(e,t,n){const r=yc(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);wc(t,(t=>{du(e,t,n)}))}function hu(e,t){const n=yc(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,_c(t,n.length>0?n:void 0)}wc(t,(t=>{hu(e,t)}))}function fu(e,t){const n=kc(cu(e,t)),r=vc(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{pu(e,t)})),pu(e,r),xc(r,(t=>{pu(e,t)})),n}function pu(e,t){const n=yc(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(zn(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(zn(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(ql(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?_c(t,void 0):n.length=s+1,zc(e.eventQueue_,kc(t),i);for(let e=0;e<r.length;e++)As(r[e])}}const mu=function(e,t){const n=gu(e),r=n.namespace;"firebase.com"===n.domain&&ks(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||ks("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Cs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Gs(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new ua(n.pathString)}},gu=function(e){let t="",n="",r="",i="",s="",a=!0,o="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(o=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(jk){}t+="/"+e}return t}(e.substring(u,d)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Cs(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(a="https"===o||"wss"===o,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in h&&(s=h.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:a,scheme:o,pathString:i,namespace:s}},vu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",yu=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const s=new Array(8);for(i=7;i>=0;i--)s[i]=vu.charAt(n%64),n=Math.floor(n/64);zn(0===n,"Cannot push at time == 0");let a=s.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)a+=vu.charAt(t[i]);return zn(20===a.length,"nextPushId: Length should be 20."),a}}();class _u{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+vr(this.snapshot.exportVal())}}class bu{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class wu{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return zn(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class xu{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new rr;return eu(this._repo,this._path,e.wrapCallback((()=>{}))),e.promise}remove(){Mc("OnDisconnect.remove",this._path);const e=new rr;return tu(this._repo,this._path,null,e.wrapCallback((()=>{}))),e.promise}set(e){Mc("OnDisconnect.set",this._path),Rc("OnDisconnect.set",e,this._path,!1);const t=new rr;return tu(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}setWithPriority(e,t){Mc("OnDisconnect.setWithPriority",this._path),Rc("OnDisconnect.setWithPriority",e,this._path,!1),Dc("OnDisconnect.setWithPriority",t,!1);const n=new rr;return function(e,t,n,r,i){const s=ro(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),((n,r)=>{"ok"===n&&bo(e.onDisconnect_,t,s),su(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((()=>{}))),n.promise}update(e){Mc("OnDisconnect.update",this._path),Oc("OnDisconnect.update",e,this._path,!1);const t=new rr;return function(e,t,n,r){if(wr(n))return bs("onDisconnect().update() called with empty data.  Don't do anything."),void su(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,((i,s)=>{"ok"===i&&Os(n,((n,r)=>{const i=ro(r);bo(e.onDisconnect_,ya(t,n),i)})),su(0,r,i,s)}))}(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}}class ku{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return _a(this._path)?null:ma(this._path)}get ref(){return new Cu(this._repo,this._path)}get _queryIdentifier(){const e=go(this._queryParams),t=Rs(e);return"{}"===t?"default":t}get _queryObject(){return go(this._queryParams)}isEqual(e){if(!((e=Dr(e))instanceof ku))return!1;const t=this._repo===e._repo,n=xa(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class Cu extends ku{constructor(e,t){super(e,t,new po,!1)}get parent(){const e=va(this._path);return null===e?null:new Cu(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Eu{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new ua(e),n=Iu(this.ref,e);return new Eu(this._node.getChild(t),n,Ga)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new Eu(n,Iu(this.ref,t),Ga))))}hasChild(e){const t=new ua(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Su(e,t){return(e=Dr(e))._checkNotDeleted("ref"),void 0!==t?Iu(e._root,t):e._root}function Iu(e,t){var n,r,i,s;return null===ha((e=Dr(e))._path)?(n="child",r="path",s=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Lc(n,r,i,s)):Lc("child","path",t,!1),new Cu(e._repo,ya(e._path,t))}function Tu(e){return e=Dr(e),new xu(e._repo,e._path)}function Nu(e,t){e=Dr(e),Mc("push",e._path),Rc("push",t,e._path,!0);const n=Gc(e._repo),r=yu(n),i=Iu(e,r),s=Iu(e,r);let a;return a=null!=t?Pu(s,t).then((()=>s)):Promise.resolve(s),i.then=a.then.bind(a),i.catch=a.then.bind(a,void 0),i}function Pu(e,t){e=Dr(e),Mc("set",e._path),Rc("set",t,e._path,!1);const n=new rr;return Zc(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function Ru(e,t){Oc("update",t,e._path,!1);const n=new rr;return function(e,t,n,r){iu(e,"update",{path:t.toString(),value:n});let i=!0;const s=Kc(e),a={};if(Os(n,((n,r)=>{i=!1,a[n]=fc(ya(t,n),ro(r),e.serverSyncTree_,s)})),i)bs("update() called with empty data.  Don't do anything."),su(0,r,"ok",void 0);else{const i=Jc(e),s=Hl(e.serverSyncTree_,t,a,i);Uc(e.eventQueue_,s),e.server_.merge(t.toString(),n,((n,s)=>{const a="ok"===n;a||Cs("update at "+t+" failed: "+n);const o=ql(e.serverSyncTree_,i,!a),l=o.length>0?lu(e,t):t;zc(e.eventQueue_,l,o),su(0,r,n,s)})),Os(n,(n=>{const r=fu(e,ya(t,n));lu(e,r)})),zc(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}function ju(e){e=Dr(e);const t=new wu((()=>{})),n=new Ou(t);return function(e,t,n){const r=Xl(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((r=>{const i=ro(r).withIndex(t._queryParams.getIndex());let s;if(Yl(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=Vl(e.serverSyncTree_,t._path,i);else{const n=nc(e.serverSyncTree_,t);s=Kl(e.serverSyncTree_,t._path,i,n)}return zc(e.eventQueue_,t._path,s),Gl(e.serverSyncTree_,t,n,null,!0),i}),(n=>(iu(e,"get for query "+vr(t)+" failed: "+n),Promise.reject(new Error(n)))))}(e._repo,e,n).then((t=>new Eu(t,new Cu(e._repo,e._path),e._queryParams.getIndex())))}class Ou{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new _u("value",this,new Eu(e.snapshotNode,new Cu(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new bu(this,e,t):null}matches(e){return e instanceof Ou&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Du{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new bu(this,e,t):null}createEvent(e,t){zn(null!=e.childName,"Child events should have a childName.");const n=Iu(new Cu(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new _u(e.type,this,new Eu(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Du&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function Lu(e,t,n,r,i){let s;if("object"===typeof r&&(s=void 0,i=r),"function"===typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{nu(e._repo,e,o),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const a=new wu(n,s||void 0),o="value"===t?new Ou(a):new Du(t,a);return function(e,t,n){let r;r=".info"===ha(t._path)?Yl(e.infoSyncTree_,t,n):Yl(e.serverSyncTree_,t,n),$c(e.eventQueue_,t._path,r)}(e._repo,e,o),()=>nu(e._repo,e,o)}function Mu(e,t,n,r){return Lu(e,"value",t,n,r)}!function(e){zn(!Tl,"__referenceConstructor has already been defined"),Tl=e}(Cu),function(e){zn(!Nl,"__referenceConstructor has already been defined"),Nl=e}(Cu);const Au={};let Fu=!1;function Uu(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||ks("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),bs("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let a,o,l=mu(s,i),c=l.repoInfo;"undefined"!==typeof process&&(o={NODE_ENV:"production",PUBLIC_URL:"/MudiaZuwa/BuzzIt.git",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),o?(a=!0,s=`http://${o}?ns=${c.namespace}`,l=mu(s,i),c=l.repoInfo):a=!l.repoInfo.secure;const u=i&&a?new zs(zs.OWNER):new $s(e.name,e.options,t);Ac("Invalid Firebase Database URL",l),_a(l.path)||ks("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,n,r){let i=Au[t.name];i||(i={},Au[t.name]=i);let s=i[e.toURLString()];s&&ks("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new qc(e,Fu,n,r),i[e.toURLString()]=s,s}(c,e,u,new Us(e.name,n));return new $u(d,e)}class $u{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Vc(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Cu(this._repo,da())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=Au[t];n&&n[e.key]===e||ks(`Database ${t}(${e.repoInfo_}) has already been deleted.`),ru(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&ks("Cannot call "+e+" on a deleted database.")}}function zu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gi(),t=arguments.length>1?arguments[1]:void 0;const n=Bi(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=er("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Dr(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&ks("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ks('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new zs(zs.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:ir(r.mockUserToken,e.app.options.projectId);s=new zs(t)}!function(e,t,n,r){e.repoInfo_=new Gs(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,s)}(n,...e)}return n}Na.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Na.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){os=e}(qi),zi(new Lr("database",((e,t)=>{let{instanceIdentifier:n}=t;return Uu(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Ki(ss,as,e),Ki(ss,as,"esm2017")}();const Bu=async(e,t)=>{const n=Su(zu(),e);try{await Ru(n,t),console.log("Data updated successfully.")}catch(xs){console.error("Error updating data:",xs)}},Wu=e=>{const t=e.match(/\.([a-zA-Z0-9]+)(\?.*)?$/),n=t?t[1].toLowerCase():"";return["mp4","webm","ogg"].includes(n)},Hu=e=>{switch(e.split(".").pop().toLowerCase()){case"mp4":default:return"video/mp4";case"webm":return"video/webm";case"ogg":return"video/ogg"}},qu=e=>{let{post:t,currentUserID:n}=e;const{profilePic:r,username:i,uid:s,date:o,postText:l,media:c,likes:u,reposts:d,comments:h}=t,f=u&&u.includes(n),p=d&&d.some((e=>e.userID===n));return(0,a.jsxs)(V,{className:"mb-4 post-card",children:[(0,a.jsx)(V.Header,{className:"d-flex align-items-center justify-content-between",children:(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)(Ln,{to:`/${s}`,children:(0,a.jsx)(Q,{src:r||"/images/defaultProfile.png",roundedCircle:!0,width:"40",height:"40",alt:`${i}'s profile picture`,className:"me-3",style:{cursor:"pointer"}})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(Ln,{to:`/${s}`,style:{textDecoration:"none",color:"inherit"},children:(0,a.jsx)("h6",{className:"mb-0",style:{cursor:"pointer"},children:i})}),(0,a.jsx)("small",{className:"text-muted",children:new Date(o).toLocaleString()})]})]})}),(0,a.jsx)(Ln,{to:`/${s}/${t.id}`,style:{textDecoration:"none",color:"inherit"},children:(0,a.jsxs)(V.Body,{children:[l&&(0,a.jsx)(V.Text,{children:l}),c&&c.length>0&&(0,a.jsx)(dt,{interval:null,indicators:!1,children:c.map(((e,t)=>(0,a.jsx)(dt.Item,{children:(0,a.jsx)("div",{style:{height:"250px",overflow:"hidden"},children:Wu(e)?(0,a.jsxs)("video",{controls:!0,width:"100%",height:"100%",className:"d-block w-100",style:{objectFit:"contain",margin:"auto"},children:[(0,a.jsx)("source",{src:e,type:Hu(e)}),"Your browser does not support the video tag."]}):(0,a.jsx)(V.Img,{variant:"top",src:e,alt:`Media ${t+1}`,style:{height:"100%",objectFit:"contain"}})})},t)))})]})}),(0,a.jsxs)(V.Footer,{className:"d-flex justify-content-between",children:[(0,a.jsxs)(ft,{variant:"outline-primary",onClick:async()=>{const e=`Posts/${t.id}`,r=`notifications/${s}/Activities/${t.id}`,i=Date.now(),a=f?u.filter((e=>e!==n)):[...u||[],n];await Bu(e,{likes:a}),n!==t.userId&&await Bu(r,{likes:a.map((e=>({uid:e,date:i})))})},children:[(0,a.jsx)("i",{className:"bi bi-heart"+(f?"-fill":"")})," ",u?u.length:0," ",(0,a.jsx)("span",{className:"d-none d-sm-inline",children:"Like"})]}),(0,a.jsxs)(ft,{variant:"outline-secondary",onClick:async()=>{const e=`Posts/${t.id}`,r=`notifications/${s}/Activities/${t.id}`,i={userID:n,date:Date.now()},a=p?d.filter((e=>e.userID!==n)):[...d||[],i];await Bu(e,{reposts:a}),n!==s&&await Bu(r,a)},children:[(0,a.jsx)("i",{className:"bi bi-repeat"+(p?"-1":"")}),d?d.length:0,(0,a.jsx)("span",{className:"d-none d-sm-inline",children:"Repost"})]}),(0,a.jsx)(Ln,{to:`/${s}/${t.id}`,style:{textDecoration:"none"},children:(0,a.jsxs)(ft,{variant:"outline-info",children:[(0,a.jsx)("i",{className:"bi bi-chat"})," ",h?h.length:0," ",(0,a.jsx)("span",{className:"d-none d-sm-inline",children:"Comment"})]})}),(0,a.jsxs)(ft,{variant:"outline-success",className:"ms-auto",onClick:()=>{const e=`${window.location.origin}/${s}/${t.id}`;navigator.share?navigator.share({title:`${i}'s Post`,text:"Check out this post!",url:e}).then((()=>{})).catch((e=>console.error("Error sharing post",e))):navigator.clipboard.writeText(e).then((()=>alert("Post URL copied to clipboard")),(e=>console.error("Failed to copy text: ",e)))},children:[(0,a.jsx)("i",{className:"bi bi-share"})," ",(0,a.jsx)("span",{className:"d-none d-sm-inline",children:"Share"})]})]})]})};var Vu;function Gu(e){if((!Vu&&0!==Vu||e)&&Le){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Vu=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Vu}function Ku(e){void 0===e&&(e=Te());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(jk){return e.body}}function Yu(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function Qu(e){return`data-rr-ui-${e}`}const Xu=Qu("modal-open");const Ju=class{constructor(){let{ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[n]:r.style[n]},e.scrollBarWidth&&(t[n]=`${parseInt(De(r,n)||"0",10)+e.scrollBarWidth}px`),r.setAttribute(Xu,""),De(r,t)}reset(){[...this.modals].forEach((e=>this.remove(e)))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(Xu),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}remove(e){const t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}},Zu=(0,e.createContext)(Le?window:void 0);Zu.Provider;function ed(){return(0,e.useContext)(Zu)}const td=(e,t)=>Le?null==e?(t||Te()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;const nd=function(t){let{children:n,in:r,onExited:i,mountOnEnter:s,unmountOnExit:a}=t;const o=(0,e.useRef)(null),l=(0,e.useRef)(r),c=J(i);(0,e.useEffect)((()=>{r?l.current=!0:c(o.current)}),[r,c]);const u=ot(o,n.ref),d=(0,e.cloneElement)(n,{ref:u});return r?d:a||!l.current&&s?null:d};function rd(){const t=e.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}const id=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];const sd=["component"];const ad=e.forwardRef(((t,n)=>{let{component:r}=t;const i=function(t){let{onEnter:n,onEntering:r,onEntered:i,onExit:s,onExiting:a,onExited:o,addEndListener:l,children:c}=t,u=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(t,id);const{major:d}=rd(),h=d>=19?c.props.ref:c.ref,f=(0,e.useRef)(null),p=ot(f,"function"===typeof c?null:h),m=e=>t=>{e&&f.current&&e(f.current,t)},g=(0,e.useCallback)(m(n),[n]),v=(0,e.useCallback)(m(r),[r]),y=(0,e.useCallback)(m(i),[i]),_=(0,e.useCallback)(m(s),[s]),b=(0,e.useCallback)(m(a),[a]),w=(0,e.useCallback)(m(o),[o]),x=(0,e.useCallback)(m(l),[l]);return Object.assign({},u,{nodeRef:f},n&&{onEnter:g},r&&{onEntering:v},i&&{onEntered:y},s&&{onExit:_},a&&{onExiting:b},o&&{onExited:w},l&&{addEndListener:x},{children:"function"===typeof c?(e,t)=>c(e,Object.assign({},t,{ref:p})):(0,e.cloneElement)(c,{ref:p})})}(function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(t,sd));return(0,a.jsx)(r,Object.assign({ref:n},i))})),od=ad;function ld(t){let{children:n,in:r,onExited:i,onEntered:s,transition:a}=t;const[o,l]=(0,e.useState)(!r);r&&o&&l(!1);const c=function(t){let{in:n,onTransition:r}=t;const i=(0,e.useRef)(null),s=(0,e.useRef)(!0),a=J(r);return ae((()=>{if(!i.current)return;let e=!1;return a({in:n,element:i.current,initial:s.current,isStale:()=>e}),()=>{e=!0}}),[n,a]),ae((()=>(s.current=!1,()=>{s.current=!0})),[]),i}({in:!!r,onTransition:e=>{Promise.resolve(a(e)).then((()=>{e.isStale()||(e.in?null==s||s(e.element,e.initial):(l(!0),null==i||i(e.element)))}),(t=>{throw e.in||l(!0),t}))}}),u=ot(c,n.ref);return o&&!r?null:(0,e.cloneElement)(n,{ref:u})}function cd(e,t,n){return e?(0,a.jsx)(od,Object.assign({},n,{component:e})):t?(0,a.jsx)(ld,Object.assign({},n,{transition:t})):(0,a.jsx)(nd,Object.assign({},n))}const ud=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let dd;function hd(t){const n=ed(),r=t||function(e){return dd||(dd=new Ju({ownerDocument:null==e?void 0:e.document})),dd}(n),i=(0,e.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>r.add(i.current),remove:()=>r.remove(i.current),isTopModal:()=>r.isTopModal(i.current),setDialogRef:(0,e.useCallback)((e=>{i.current.dialog=e}),[]),setBackdropRef:(0,e.useCallback)((e=>{i.current.backdrop=e}),[])})}const fd=(0,e.forwardRef)(((t,n)=>{let{show:r=!1,role:i="dialog",className:s,style:o,children:l,backdrop:c=!0,keyboard:u=!0,onBackdropClick:d,onEscapeKeyDown:h,transition:f,runTransition:p,backdropTransition:m,runBackdropTransition:g,autoFocus:v=!0,enforceFocus:y=!0,restoreFocus:_=!0,restoreFocusOptions:b,renderDialog:w,renderBackdrop:x=e=>(0,a.jsx)("div",Object.assign({},e)),manager:k,container:C,onShow:E,onHide:S=()=>{},onExit:I,onExited:T,onExiting:N,onEnter:P,onEntering:R,onEntered:j}=t,O=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(t,ud);const D=ed(),L=function(t,n){const r=ed(),[i,s]=(0,e.useState)((()=>td(t,null==r?void 0:r.document)));if(!i){const e=td(t);e&&s(e)}return(0,e.useEffect)((()=>{n&&i&&n(i)}),[n,i]),(0,e.useEffect)((()=>{const e=td(t);e!==i&&s(e)}),[t,i]),i}(C),M=hd(k),A=ee(),F=function(t){const n=(0,e.useRef)(null);return(0,e.useEffect)((()=>{n.current=t})),n.current}(r),[U,$]=(0,e.useState)(!r),z=(0,e.useRef)(null);(0,e.useImperativeHandle)(n,(()=>M),[M]),Le&&!F&&r&&(z.current=Ku(null==D?void 0:D.document)),r&&U&&$(!1);const B=J((()=>{if(M.add(),K.current=ze(document,"keydown",V),G.current=ze(document,"focus",(()=>setTimeout(H)),!0),E&&E(),v){var e,t;const n=Ku(null!=(e=null==(t=M.dialog)?void 0:t.ownerDocument)?e:null==D?void 0:D.document);M.dialog&&n&&!Yu(M.dialog,n)&&(z.current=n,M.dialog.focus())}})),W=J((()=>{var e;(M.remove(),null==K.current||K.current(),null==G.current||G.current(),_)&&(null==(e=z.current)||null==e.focus||e.focus(b),z.current=null)}));(0,e.useEffect)((()=>{r&&L&&B()}),[r,L,B]),(0,e.useEffect)((()=>{U&&W()}),[U,W]),te((()=>{W()}));const H=J((()=>{if(!y||!A()||!M.isTopModal())return;const e=Ku(null==D?void 0:D.document);M.dialog&&e&&!Yu(M.dialog,e)&&M.dialog.focus()})),q=J((e=>{e.target===e.currentTarget&&(null==d||d(e),!0===c&&S())})),V=J((e=>{u&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&M.isTopModal()&&(null==h||h(e),e.defaultPrevented||S())})),G=(0,e.useRef)(),K=(0,e.useRef)();if(!L)return null;const Y=Object.assign({role:i,ref:M.setDialogRef,"aria-modal":"dialog"===i||void 0},O,{style:o,className:s,tabIndex:-1});let Q=w?w(Y):(0,a.jsx)("div",Object.assign({},Y,{children:e.cloneElement(l,{role:"document"})}));Q=cd(f,p,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!r,onExit:I,onExiting:N,onExited:function(){$(!0),null==T||T(...arguments)},onEnter:P,onEntering:R,onEntered:j,children:Q});let X=null;return c&&(X=x({ref:M.setBackdropRef,onClick:q}),X=cd(m,g,{in:!!r,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:X})),(0,a.jsx)(a.Fragment,{children:Ke.createPortal((0,a.jsxs)(a.Fragment,{children:[X,Q]}),L)})}));fd.displayName="Modal";const pd=Object.assign(fd,{Manager:Ju});var md=Function.prototype.bind.call(Function.prototype.call,[].slice);function gd(e,t){return md(e.querySelectorAll(t))}function vd(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const yd=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",_d=".sticky-top",bd=".navbar-toggler";class wd extends Ju{adjustAndStore(e,t,n){const r=t.style[e];t.dataset[e]=r,De(t,{[e]:`${parseFloat(De(t,e))+n}px`})}restore(e,t){const n=t.dataset[e];void 0!==n&&(delete t.dataset[e],De(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();var n,r;if(r="modal-open",(n=t).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";gd(t,yd).forEach((t=>this.adjustAndStore(i,t,e.scrollBarWidth))),gd(t,_d).forEach((t=>this.adjustAndStore(s,t,-e.scrollBarWidth))),gd(t,bd).forEach((t=>this.adjustAndStore(s,t,e.scrollBarWidth)))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();var n,r;r="modal-open",(n=t).classList?n.classList.remove(r):"string"===typeof n.className?n.className=vd(n.className,r):n.setAttribute("class",vd(n.className&&n.className.baseVal||"",r));const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";gd(t,yd).forEach((e=>this.restore(i,e))),gd(t,_d).forEach((e=>this.restore(s,e))),gd(t,bd).forEach((e=>this.restore(s,e)))}}let xd;function kd(e){return xd||(xd=new wd(e)),xd}const Cd=wd,Ed={[et]:"show",[tt]:"show"},Sd=e.forwardRef(((t,n)=>{let{className:r,children:i,transitionClasses:o={},onEnter:l,...c}=t;const u={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...c},d=(0,e.useCallback)(((e,t)=>{Ve(e),null==l||l(e,t)}),[l]),{major:h}=rd(),f=h>=19?i.props.ref:i.ref;return(0,a.jsx)(ct,{ref:n,addEndListener:qe,...u,onEnter:d,childRef:f,children:(t,n)=>e.cloneElement(i,{...n,className:s()("fade",r,i.props.className,Ed[t],o[t])})})}));Sd.displayName="Fade";const Id=Sd,Td=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=h(r,"modal-body"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));Td.displayName="ModalBody";const Nd=Td,Pd=e.createContext({onHide(){}}),Rd=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,contentClassName:i,centered:o,size:l,fullscreen:c,children:u,scrollable:d,...f}=e;n=h(n,"modal");const p=`${n}-dialog`,m="string"===typeof c?`${n}-fullscreen-${c}`:`${n}-fullscreen`;return(0,a.jsx)("div",{...f,ref:t,className:s()(p,r,l&&`${n}-${l}`,o&&`${p}-centered`,d&&`${p}-scrollable`,c&&m),children:(0,a.jsx)("div",{className:s()(`${n}-content`,i),children:u})})}));Rd.displayName="ModalDialog";const jd=Rd,Od=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=h(r,"modal-footer"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));Od.displayName="ModalFooter";const Dd=Od,Ld={"aria-label":K().string,onClick:K().func,variant:K().oneOf(["white"])},Md=e.forwardRef(((e,t)=>{let{className:n,variant:r,"aria-label":i="Close",...o}=e;return(0,a.jsx)("button",{ref:t,type:"button",className:s()("btn-close",r&&`btn-close-${r}`,n),"aria-label":i,...o})}));Md.displayName="CloseButton",Md.propTypes=Ld;const Ad=Md,Fd=e.forwardRef(((t,n)=>{let{closeLabel:r="Close",closeVariant:i,closeButton:s=!1,onHide:o,children:l,...c}=t;const u=(0,e.useContext)(Pd),d=J((()=>{null==u||u.onHide(),null==o||o()}));return(0,a.jsxs)("div",{ref:n,...c,children:[l,s&&(0,a.jsx)(Ad,{"aria-label":r,variant:i,onClick:d})]})})),Ud=Fd,$d=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,closeLabel:i="Close",closeButton:o=!1,...l}=e;return n=h(n,"modal-header"),(0,a.jsx)(Ud,{ref:t,...l,className:s()(r,n),closeLabel:i,closeButton:o})}));$d.displayName="ModalHeader";const zd=$d,Bd=M("h4"),Wd=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=Bd,...o}=e;return r=h(r,"modal-title"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));Wd.displayName="ModalTitle";const Hd=Wd;function qd(e){return(0,a.jsx)(Id,{...e,timeout:null})}function Vd(e){return(0,a.jsx)(Id,{...e,timeout:null})}const Gd=e.forwardRef(((t,n)=>{let{bsPrefix:r,className:i,style:o,dialogClassName:l,contentClassName:c,children:u,dialogAs:d=jd,"data-bs-theme":f,"aria-labelledby":p,"aria-describedby":g,"aria-label":v,show:y=!1,animation:_=!0,backdrop:b=!0,keyboard:w=!0,onEscapeKeyDown:x,onShow:k,onHide:C,container:E,autoFocus:S=!0,enforceFocus:I=!0,restoreFocus:T=!0,restoreFocusOptions:N,onEntered:P,onExit:R,onExiting:j,onEnter:O,onEntering:D,onExited:L,backdropClassName:M,manager:A,...F}=t;const[U,$]=(0,e.useState)({}),[z,B]=(0,e.useState)(!1),W=(0,e.useRef)(!1),H=(0,e.useRef)(!1),q=(0,e.useRef)(null),[V,G]=(0,e.useState)(null),K=ot(n,G),Y=J(C),Q=m();r=h(r,"modal");const X=(0,e.useMemo)((()=>({onHide:Y})),[Y]);function Z(){return A||kd({isRTL:Q})}function ee(e){if(!Le)return;const t=Z().getScrollbarWidth()>0,n=e.scrollHeight>Te(e).documentElement.clientHeight;$({paddingRight:t&&!n?Gu():void 0,paddingLeft:!t&&n?Gu():void 0})}const ne=J((()=>{V&&ee(V.dialog)}));te((()=>{$e(window,"resize",ne),null==q.current||q.current()}));const re=()=>{W.current=!0},ie=e=>{W.current&&V&&e.target===V.dialog&&(H.current=!0),W.current=!1},se=()=>{B(!0),q.current=We(V.dialog,(()=>{B(!1)}))},ae=e=>{"static"!==b?H.current||e.target!==e.currentTarget?H.current=!1:null==C||C():(e=>{e.target===e.currentTarget&&se()})(e)},oe=(0,e.useCallback)((e=>(0,a.jsx)("div",{...e,className:s()(`${r}-backdrop`,M,!_&&"show")})),[_,M,r]),le={...o,...U};le.display="block";return(0,a.jsx)(Pd.Provider,{value:X,children:(0,a.jsx)(pd,{show:y,ref:K,backdrop:b,container:E,keyboard:!0,autoFocus:S,enforceFocus:I,restoreFocus:T,restoreFocusOptions:N,onEscapeKeyDown:e=>{w?null==x||x(e):(e.preventDefault(),"static"===b&&se())},onShow:k,onHide:C,onEnter:(e,t)=>{e&&ee(e),null==O||O(e,t)},onEntering:(e,t)=>{null==D||D(e,t),Ue(window,"resize",ne)},onEntered:P,onExit:e=>{null==q.current||q.current(),null==R||R(e)},onExiting:j,onExited:e=>{e&&(e.style.display=""),null==L||L(e),$e(window,"resize",ne)},manager:Z(),transition:_?qd:void 0,backdropTransition:_?Vd:void 0,renderBackdrop:oe,renderDialog:e=>(0,a.jsx)("div",{role:"dialog",...e,style:le,className:s()(i,r,z&&`${r}-static`,!_&&"show"),onClick:b?ae:void 0,onMouseUp:ie,"data-bs-theme":f,"aria-label":v,"aria-labelledby":p,"aria-describedby":g,children:(0,a.jsx)(d,{...F,onMouseDown:re,className:l,contentClassName:c,children:u})})})})}));Gd.displayName="Modal";const Kd=Object.assign(Gd,{Body:Nd,Header:zd,Title:Hd,Footer:Dd,Dialog:jd,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});n(197);const Yd=e.createContext(null);Yd.displayName="NavContext";const Qd=Yd,Xd=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},Jd=e.createContext(null),Zd=e.createContext(null),eh=["as","active","eventKey"];function th(t){let{key:n,onClick:r,active:i,id:s,role:a,disabled:o}=t;const l=(0,e.useContext)(Jd),c=(0,e.useContext)(Qd),u=(0,e.useContext)(Zd);let d=i;const h={role:a};if(c){a||"tablist"!==c.role||(h.role="tab");const e=c.getControllerId(null!=n?n:null),t=c.getControlledId(null!=n?n:null);h[Qu("event-key")]=n,h.id=e||s,d=null==i&&null!=n?c.activeKey===n:i,!d&&(null!=u&&u.unmountOnExit||null!=u&&u.mountOnEnter)||(h["aria-controls"]=t)}return"tab"===h.role&&(h["aria-selected"]=d,d||(h.tabIndex=-1),o&&(h.tabIndex=-1,h["aria-disabled"]=!0)),h.onClick=J((e=>{o||(null==r||r(e),null!=n&&l&&!e.isPropagationStopped()&&l(n,e))})),[h,{isActive:d}]}const nh=e.forwardRef(((e,t)=>{let{as:n=ue,active:r,eventKey:i}=e,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,eh);const[o,l]=th(Object.assign({key:Xd(i,s.href),active:r},s));return o[Qu("active")]=l.isActive,(0,a.jsx)(n,Object.assign({},s,o,{ref:t}))}));nh.displayName="NavItem";const rh=nh,ih=["as","onSelect","activeKey","role","onKeyDown"];const sh=()=>{},ah=Qu("event-key"),oh=e.forwardRef(((t,n)=>{let{as:r="div",onSelect:i,activeKey:s,role:o,onKeyDown:l}=t,c=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(t,ih);const u=function(){const[,t]=(0,e.useReducer)((e=>!e),!1);return t}(),d=(0,e.useRef)(!1),h=(0,e.useContext)(Jd),f=(0,e.useContext)(Zd);let p,m;f&&(o=o||"tablist",s=f.activeKey,p=f.getControlledId,m=f.getControllerId);const g=(0,e.useRef)(null),v=e=>{const t=g.current;if(!t)return null;const n=gd(t,`[${ah}]:not([aria-disabled=true])`),r=t.querySelector("[aria-selected=true]");if(!r||r!==document.activeElement)return null;const i=n.indexOf(r);if(-1===i)return null;let s=i+e;return s>=n.length&&(s=0),s<0&&(s=n.length-1),n[s]},y=(e,t)=>{null!=e&&(null==i||i(e,t),null==h||h(e,t))};(0,e.useEffect)((()=>{if(g.current&&d.current){const e=g.current.querySelector(`[${ah}][aria-selected=true]`);null==e||e.focus()}d.current=!1}));const _=ot(n,g);return(0,a.jsx)(Jd.Provider,{value:y,children:(0,a.jsx)(Qd.Provider,{value:{role:o,activeKey:Xd(s),getControlledId:p||sh,getControllerId:m||sh},children:(0,a.jsx)(r,Object.assign({},c,{onKeyDown:e=>{if(null==l||l(e),!f)return;let t;switch(e.key){case"ArrowLeft":case"ArrowUp":t=v(-1);break;case"ArrowRight":case"ArrowDown":t=v(1);break;default:return}var n;t&&(e.preventDefault(),y(t.dataset[(n="EventKey",`rrUi${n}`)]||null,e),d.current=!0,u())},ref:_,role:o}))})})}));oh.displayName="Nav";const lh=Object.assign(oh,{Item:rh}),ch=e.createContext(null);ch.displayName="NavbarContext";const uh=ch,dh=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=h(r,"nav-item"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));dh.displayName="NavItem";const hh=dh,fh=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i=fe,active:o,eventKey:l,disabled:c=!1,...u}=e;n=h(n,"nav-link");const[d,f]=th({key:Xd(l,u.href),active:o,disabled:c,...u});return(0,a.jsx)(i,{...u,...d,ref:t,disabled:c,className:s()(r,n,c&&"disabled",f.isActive&&"active")})}));fh.displayName="NavLink";const ph=fh,mh=e.forwardRef(((t,n)=>{const{as:r="div",bsPrefix:i,variant:o,fill:l=!1,justify:c=!1,navbar:u,navbarScroll:d,className:f,activeKey:p,...m}=ye(t,{activeKey:"onSelect"}),g=h(i,"nav");let v,y,_=!1;const b=(0,e.useContext)(uh),w=(0,e.useContext)(I);return b?(v=b.bsPrefix,_=null==u||u):w&&({cardHeaderBsPrefix:y}=w),(0,a.jsx)(lh,{as:r,ref:n,activeKey:p,className:s()(f,{[g]:!_,[`${v}-nav`]:_,[`${v}-nav-scroll`]:_&&d,[`${y}-${o}`]:!!y,[`${g}-${o}`]:!!o,[`${g}-fill`]:l,[`${g}-justified`]:c}),...m})}));mh.displayName="Nav";const gh=Object.assign(mh,{Item:hh,Link:ph}),vh={type:K().string,tooltip:K().bool,as:K().elementType},yh=e.forwardRef(((e,t)=>{let{as:n="div",className:r,type:i="valid",tooltip:o=!1,...l}=e;return(0,a.jsx)(n,{...l,ref:t,className:s()(r,`${i}-${o?"tooltip":"feedback"}`)})}));yh.displayName="Feedback",yh.propTypes=vh;const _h=yh,bh=e.createContext({}),wh=e.forwardRef(((t,n)=>{let{id:r,bsPrefix:i,className:o,type:l="checkbox",isValid:c=!1,isInvalid:u=!1,as:d="input",...f}=t;const{controlId:p}=(0,e.useContext)(bh);return i=h(i,"form-check-input"),(0,a.jsx)(d,{...f,ref:n,type:l,id:r||p,className:s()(o,i,c&&"is-valid",u&&"is-invalid")})}));wh.displayName="FormCheckInput";const xh=wh,kh=e.forwardRef(((t,n)=>{let{bsPrefix:r,className:i,htmlFor:o,...l}=t;const{controlId:c}=(0,e.useContext)(bh);return r=h(r,"form-check-label"),(0,a.jsx)("label",{...l,ref:n,htmlFor:o||c,className:s()(i,r)})}));kh.displayName="FormCheckLabel";const Ch=kh,Eh=e.forwardRef(((t,n)=>{let{id:r,bsPrefix:i,bsSwitchPrefix:o,inline:l=!1,reverse:c=!1,disabled:u=!1,isValid:d=!1,isInvalid:f=!1,feedbackTooltip:p=!1,feedback:m,feedbackType:g,className:v,style:y,title:_="",type:b="checkbox",label:w,children:x,as:k="input",...C}=t;i=h(i,"form-check"),o=h(o,"form-switch");const{controlId:E}=(0,e.useContext)(bh),S=(0,e.useMemo)((()=>({controlId:r||E})),[E,r]),I=!x&&null!=w&&!1!==w||function(t,n){return e.Children.toArray(t).some((t=>e.isValidElement(t)&&t.type===n))}(x,Ch),T=(0,a.jsx)(xh,{...C,type:"switch"===b?"checkbox":b,ref:n,isValid:d,isInvalid:f,disabled:u,as:k});return(0,a.jsx)(bh.Provider,{value:S,children:(0,a.jsx)("div",{style:y,className:s()(v,I&&i,l&&`${i}-inline`,c&&`${i}-reverse`,"switch"===b&&o),children:x||(0,a.jsxs)(a.Fragment,{children:[T,I&&(0,a.jsx)(Ch,{title:_,children:w}),m&&(0,a.jsx)(_h,{type:g,tooltip:p,children:m})]})})})}));Eh.displayName="FormCheck";const Sh=Object.assign(Eh,{Input:xh,Label:Ch});n(440);const Ih=e.forwardRef(((t,n)=>{let{bsPrefix:r,type:i,size:o,htmlSize:l,id:c,className:u,isValid:d=!1,isInvalid:f=!1,plaintext:p,readOnly:m,as:g="input",...v}=t;const{controlId:y}=(0,e.useContext)(bh);return r=h(r,"form-control"),(0,a.jsx)(g,{...v,type:i,size:l,ref:n,readOnly:m,id:c||y,className:s()(u,p?`${r}-plaintext`:r,o&&`${r}-${o}`,"color"===i&&`${r}-color`,d&&"is-valid",f&&"is-invalid")})}));Ih.displayName="FormControl";const Th=Object.assign(Ih,{Feedback:_h}),Nh=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=h(r,"form-floating"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));Nh.displayName="FormFloating";const Ph=Nh,Rh=e.forwardRef(((t,n)=>{let{controlId:r,as:i="div",...s}=t;const o=(0,e.useMemo)((()=>({controlId:r})),[r]);return(0,a.jsx)(bh.Provider,{value:o,children:(0,a.jsx)(i,{...s,ref:n})})}));Rh.displayName="FormGroup";const jh=Rh,Oh=e.forwardRef(((t,n)=>{let{as:r="label",bsPrefix:i,column:o=!1,visuallyHidden:l=!1,className:c,htmlFor:u,...d}=t;const{controlId:f}=(0,e.useContext)(bh);i=h(i,"form-label");let p="col-form-label";"string"===typeof o&&(p=`${p} ${p}-${o}`);const m=s()(c,i,l&&"visually-hidden",o&&p);return u=u||f,o?(0,a.jsx)(w,{ref:n,as:"label",className:m,htmlFor:u,...d}):(0,a.jsx)(r,{ref:n,className:m,htmlFor:u,...d})}));Oh.displayName="FormLabel";const Dh=Oh,Lh=e.forwardRef(((t,n)=>{let{bsPrefix:r,className:i,id:o,...l}=t;const{controlId:c}=(0,e.useContext)(bh);return r=h(r,"form-range"),(0,a.jsx)("input",{...l,type:"range",ref:n,className:s()(i,r),id:o||c})}));Lh.displayName="FormRange";const Mh=Lh,Ah=e.forwardRef(((t,n)=>{let{bsPrefix:r,size:i,htmlSize:o,className:l,isValid:c=!1,isInvalid:u=!1,id:d,...f}=t;const{controlId:p}=(0,e.useContext)(bh);return r=h(r,"form-select"),(0,a.jsx)("select",{...f,size:o,ref:n,className:s()(l,r,i&&`${r}-${i}`,c&&"is-valid",u&&"is-invalid"),id:d||p})}));Ah.displayName="FormSelect";const Fh=Ah,Uh=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i="small",muted:o,...l}=e;return n=h(n,"form-text"),(0,a.jsx)(i,{...l,ref:t,className:s()(r,n,o&&"text-muted")})}));Uh.displayName="FormText";const $h=Uh,zh=e.forwardRef(((e,t)=>(0,a.jsx)(Sh,{...e,ref:t,type:"switch"})));zh.displayName="Switch";const Bh=Object.assign(zh,{Input:Sh.Input,Label:Sh.Label}),Wh=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,children:i,controlId:o,label:l,...c}=e;return n=h(n,"form-floating"),(0,a.jsxs)(jh,{ref:t,className:s()(r,n),controlId:o,...c,children:[i,(0,a.jsx)("label",{htmlFor:o,children:l})]})}));Wh.displayName="FloatingLabel";const Hh=Wh,qh={_ref:K().any,validated:K().bool,as:K().elementType},Vh=e.forwardRef(((e,t)=>{let{className:n,validated:r,as:i="form",...o}=e;return(0,a.jsx)(i,{...o,ref:t,className:s()(n,r&&"was-validated")})}));Vh.displayName="Form",Vh.propTypes=qh;const Gh=Object.assign(Vh,{Group:jh,Control:Th,Floating:Ph,Check:Sh,Switch:Bh,Label:Dh,Text:$h,Range:Mh,Select:Fh,FloatingLabel:Hh}),Kh=M("h4");Kh.displayName="DivStyledAsH4";const Yh=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=Kh,...o}=e;return r=h(r,"alert-heading"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));Yh.displayName="AlertHeading";const Qh=Yh,Xh=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=fe,...o}=e;return r=h(r,"alert-link"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));Xh.displayName="AlertLink";const Jh=Xh,Zh=e.forwardRef(((e,t)=>{const{bsPrefix:n,show:r=!0,closeLabel:i="Close alert",closeVariant:o,className:l,children:c,variant:u="primary",onClose:d,dismissible:f,transition:p=Id,...m}=ye(e,{show:"onClose"}),g=h(n,"alert"),v=J((e=>{d&&d(!1,e)})),y=!0===p?Id:p,_=(0,a.jsxs)("div",{role:"alert",...y?void 0:m,ref:t,className:s()(l,g,u&&`${g}-${u}`,f&&`${g}-dismissible`),children:[f&&(0,a.jsx)(Ad,{onClick:v,"aria-label":i,variant:o}),c]});return y?(0,a.jsx)(y,{unmountOnExit:!0,...m,ref:void 0,in:r,children:_}):r?_:null}));Zh.displayName="Alert";const ef=Object.assign(Zh,{Link:Jh,Heading:Qh});Ki("firebase","9.23.0","app");let tf,nf;const rf=new WeakMap,sf=new WeakMap,af=new WeakMap,of=new WeakMap,lf=new WeakMap;let cf={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return sf.get(e);if("objectStoreNames"===t)return e.objectStoreNames||af.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hf(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function uf(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(nf||(nf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ff(this),n),hf(rf.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return hf(e.apply(ff(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(ff(this),t,...r);return af.set(s,t.sort?t.sort():[t]),hf(s)}}function df(e){return"function"===typeof e?uf(e):(e instanceof IDBTransaction&&function(e){if(sf.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));sf.set(e,t)}(e),t=e,(tf||(tf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,cf):e);var t}function hf(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(hf(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&rf.set(t,e)})).catch((()=>{})),lf.set(t,e),t}(e);if(of.has(e))return of.get(e);const t=df(e);return t!==e&&(of.set(e,t),lf.set(t,e)),t}const ff=e=>lf.get(e);const pf=["get","getKey","getAll","getAllKeys","count"],mf=["put","add","delete","clear"],gf=new Map;function vf(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(gf.get(t))return gf.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=mf.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!pf.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return gf.set(t,s),s}!function(e){cf=e(cf)}((e=>({...e,get:(t,n,r)=>vf(t,n)||e.get(t,n,r),has:(t,n)=>!!vf(t,n)||e.has(t,n)})));const yf="@firebase/installations",_f="0.6.4",bf=1e4,wf=`w:${_f}`,xf="FIS_v2",kf=36e5,Cf=new pr("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ef(e){return e instanceof fr&&e.code.includes("request-failed")}function Sf(e){let{projectId:t}=e;return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function If(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function Tf(e,t){const n=(await t.json()).error;return Cf.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Nf(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Pf(e,t){let{refreshToken:n}=t;const r=Nf(e);return r.append("Authorization",function(e){return`${xf} ${e}`}(n)),r}async function Rf(e){const t=await e();return t.status>=500&&t.status<600?e():t}function jf(e){return new Promise((t=>{setTimeout(t,e)}))}const Of=/^[cdef][\w-]{21}$/;function Df(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return Of.test(t)?t:""}catch(e){return""}}function Lf(e){return`${e.appName}!${e.appId}`}const Mf=new Map;function Af(e,t){const n=Lf(e);Ff(n,t),function(e,t){const n=$f();n&&n.postMessage({key:e,fid:t});zf()}(n,t)}function Ff(e,t){const n=Mf.get(e);if(n)for(const r of n)r(t)}let Uf=null;function $f(){return!Uf&&"BroadcastChannel"in self&&(Uf=new BroadcastChannel("[Firebase] FID Change"),Uf.onmessage=e=>{Ff(e.data.key,e.data.fid)}),Uf}function zf(){0===Mf.size&&Uf&&(Uf.close(),Uf=null)}const Bf="firebase-installations-store";let Wf=null;function Hf(){return Wf||(Wf=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=hf(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(hf(a.result),e.oldVersion,e.newVersion,hf(a.transaction))})),n&&a.addEventListener("blocked",(()=>n())),o.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),o}("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Bf)}})),Wf}async function qf(e,t){const n=Lf(e),r=(await Hf()).transaction(Bf,"readwrite"),i=r.objectStore(Bf),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||Af(e,t.fid),t}async function Vf(e){const t=Lf(e),n=(await Hf()).transaction(Bf,"readwrite");await n.objectStore(Bf).delete(t),await n.done}async function Gf(e,t){const n=Lf(e),r=(await Hf()).transaction(Bf,"readwrite"),i=r.objectStore(Bf),s=await i.get(n),a=t(s);return void 0===a?await i.delete(n):await i.put(a,n),await r.done,!a||s&&s.fid===a.fid||Af(e,a.fid),a}async function Kf(e){let t;const n=await Gf(e.appConfig,(n=>{const r=function(e){const t=e||{fid:Df(),registrationStatus:0};return Xf(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(Cf.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=Sf(n),a=Nf(n),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:i,authVersion:xf,appId:n.appId,sdkVersion:wf},c={method:"POST",headers:a,body:JSON.stringify(l)},u=await Rf((()=>fetch(s,c)));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:If(e.authToken)}}throw await Tf("Create Installation",u)}(e,t);return qf(e.appConfig,n)}catch(jk){throw Ef(jk)&&409===jk.customData.serverCode?await Vf(e.appConfig):await qf(e.appConfig,{fid:t.fid,registrationStatus:0}),jk}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Yf(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Yf(e){let t=await Qf(e.appConfig);for(;1===t.registrationStatus;)await jf(100),t=await Qf(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Kf(e);return n||t}return t}function Qf(e){return Gf(e,(e=>{if(!e)throw Cf.create("installation-not-found");return Xf(e)}))}function Xf(e){return 1===(t=e).registrationStatus&&t.registrationTime+bf<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Jf(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return`${Sf(e)}/${n}/authTokens:generate`}(n,t),s=Pf(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const o={installation:{sdkVersion:wf,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await Rf((()=>fetch(i,l)));if(c.ok){return If(await c.json())}throw await Tf("Generate Auth Token",c)}async function Zf(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await Gf(e.appConfig,(r=>{if(!tp(r))throw Cf.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+kf}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await ep(e.appConfig);for(;1===n.authToken.requestStatus;)await jf(100),n=await ep(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Zf(e,t):r}(e,n),r;{if(!navigator.onLine)throw Cf.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await Jf(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await qf(e.appConfig,r),n}catch(jk){if(!Ef(jk)||401!==jk.customData.serverCode&&404!==jk.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await qf(e.appConfig,n)}else await Vf(e.appConfig);throw jk}}(e,n),n}}));return t?await t:r.authToken}function ep(e){return Gf(e,(e=>{if(!tp(e))throw Cf.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+bf<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function tp(e){return void 0!==e&&2===e.registrationStatus}async function np(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await Kf(e);t&&await t}(n);return(await Zf(n,t)).token}function rp(e){return Cf.create("missing-app-config-values",{valueName:e})}const ip="installations",sp=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw rp("App Configuration");if(!e.name)throw rp("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw rp(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Bi(t,"heartbeat"),_delete:()=>Promise.resolve()}},ap=e=>{const t=Bi(e.getProvider("app").getImmediate(),ip).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await Kf(t);return r?r.catch(console.error):Zf(t).catch(console.error),n.fid}(t),getToken:e=>np(t,e)}};zi(new Lr(ip,sp,"PUBLIC")),zi(new Lr("installations-internal",ap,"PRIVATE")),Ki(yf,_f),Ki(yf,_f,"esm2017");const op="analytics",lp="https://www.googletagmanager.com/gtag/js",cp=new qr("@firebase/analytics"),up=new pr("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function dp(e){if(!e.startsWith(lp)){const t=up.create("invalid-gtag-resource",{gtagURL:e});return cp.warn(t.message),""}return e}function hp(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function fp(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:dp}),r=document.createElement("script"),i=`${lp}?l=${e}&id=${t}`;r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function pp(e,t,n,r){return async function(i){try{for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];if("event"===i){const[r,i]=a;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await hp(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(jk){cp.error(jk)}}(e,t,n,r,i)}else if("config"===i){const[i,s]=a;await async function(e,t,n,r,i,s){const a=r[i];try{if(a)await t[a];else{const e=(await hp(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(jk){cp.error(jk)}e("config",i,s)}(e,t,n,r,i,s)}else if("consent"===i){const[t]=a;e("consent","update",t)}else if("get"===i){const[t,n,r]=a;e("get",t,n,r)}else if("set"===i){const[t]=a;e("set",t)}else e(i,...a)}catch(jk){cp.error(jk)}}}const mp=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function gp(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function vp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:mp,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw up.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw up.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new _p;return setTimeout((async()=>{o.abort()}),void 0!==n?n:6e4),yp({appId:r,apiKey:i,measurementId:s},a,o,t)}async function yp(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:mp;var a;const{appId:o,measurementId:l}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(up.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(n,r)}catch(jk){if(l)return cp.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===jk||void 0===jk?void 0:jk.message}]`),{appId:o,measurementId:l};throw jk}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:gp(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),a=await fetch(s,i);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(o){}throw up.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return s.deleteThrottleMetadata(o),t}catch(jk){const r=jk;if(!function(e){if(!(e instanceof fr)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(r)){if(s.deleteThrottleMetadata(o),l)return cp.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===r||void 0===r?void 0:r.message}]`),{appId:o,measurementId:l};throw jk}const c=503===Number(null===(a=null===r||void 0===r?void 0:r.customData)||void 0===a?void 0:a.httpStatus)?Or(i,s.intervalMillis,30):Or(i,s.intervalMillis),u={throttleEndTimeMillis:Date.now()+c,backoffCount:i+1};return s.setThrottleMetadata(o,u),cp.debug(`Calling attemptFetch again in ${c} millis`),yp(e,u,n,s)}}class _p{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let bp,wp;function xp(e){wp=e}function kp(e){bp=e}async function Cp(e,t,n,r,i,s,a){var o;const l=vp(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&cp.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>cp.error(e))),t.push(l);const c=async function(){if(!dr())return cp.warn(up.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await hr()}catch(jk){return cp.warn(up.create("indexeddb-unavailable",{errorInfo:null===jk||void 0===jk?void 0:jk.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[u,d]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(lp)&&n.src.includes(e))return n;return null})(s)||fp(s,u.measurementId),wp&&(i("consent","default",wp),xp(void 0)),i("js",new Date);const h=null!==(o=null===a||void 0===a?void 0:a.config)&&void 0!==o?o:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),i("config",u.measurementId,h),bp&&(i("set",bp),kp(void 0)),u.measurementId}class Ep{constructor(e){this.app=e}_delete(){return delete Sp[this.app.options.appId],Promise.resolve()}}let Sp={},Ip=[];const Tp={};let Np,Pp,Rp="dataLayer",jp="gtag",Op=!1;function Dp(){const e=[];if(lr()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=up.create("invalid-analytics-context",{errorInfo:t});cp.warn(n.message)}}function Lp(e,t,n){Dp();const r=e.options.appId;if(!r)throw up.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw up.create("no-api-key");cp.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Sp[r])throw up.create("already-exists",{id:r});if(!Op){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Rp);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=pp(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(Sp,Ip,Tp,Rp,jp);Pp=e,Np=t,Op=!0}Sp[r]=Cp(e,Ip,Tp,t,Np,Rp,n);return new Ep(e)}function Mp(e,t,n,r){e=Dr(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(Pp,Sp[e.app.options.appId],t,n,r).catch((e=>cp.error(e)))}const Ap="@firebase/analytics",Fp="0.10.0";zi(new Lr(op,((e,t)=>{let{options:n}=t;return Lp(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),zi(new Lr("analytics-internal",(function(e){try{const t=e.getProvider(op).getImmediate();return{logEvent:(e,n,r)=>Mp(t,e,n,r)}}catch(jk){throw up.create("interop-component-reg-failed",{reason:jk})}}),"PRIVATE")),Ki(Ap,Fp),Ki(Ap,Fp,"esm2017");function Up(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function $p(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zp=$p,Bp=new pr("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Wp=new qr("@firebase/auth");function Hp(e){if(Wp.logLevel<=$r.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Wp.error(`Auth (${qi}): ${e}`,...n)}}function qp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Yp(e,...n)}function Vp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Yp(e,...n)}function Gp(e,t,n){const r=Object.assign(Object.assign({},zp()),{[t]:n});return new pr("auth","Firebase",r).create(t,{appName:e.name})}function Kp(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&qp(e,"argument-error"),Gp(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Yp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Bp.create(e,...n)}function Qp(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Yp(t,...r)}}function Xp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Hp(t),new Error(t)}function Jp(e,t){e||Xp(t)}function Zp(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function em(){return"http:"===tm()||"https:"===tm()}function tm(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class nm{constructor(e,t){this.shortDelay=e,this.longDelay=t,Jp(t>e,"Short delay should be less than long delay!"),this.isMobile=ar()||cr()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(em()||lr()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function rm(e,t){Jp(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class im{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Xp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Xp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Xp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const sm={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},am=new nm(3e4,6e4);function om(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function lm(e,t,n,r){return cm(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=Er(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode),im.fetch()(dm(e,e.config.apiHost,n,a),Object.assign({method:t,headers:o,referrerPolicy:"no-referrer"},i))}))}async function cm(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},sm),t);try{const t=new hm(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw fm(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw fm(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw fm(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw fm(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Gp(e,o,a);qp(e,o)}}catch(jk){if(jk instanceof fr)throw jk;qp(e,"network-request-failed",{message:String(jk)})}}async function um(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await lm(e,t,n,r,i);return"mfaPendingCredential"in s&&qp(e,"multi-factor-auth-required",{_serverResponse:s}),s}function dm(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?rm(e.config,i):`${e.config.apiScheme}://${i}`}class hm{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Vp(this.auth,"network-request-failed"))),am.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function fm(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Vp(e,t,r);return i.customData._tokenResponse=n,i}function pm(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(jk){}}function mm(e){return 1e3*Number(e)}function gm(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Hp("JWT malformed, contained fewer than 3 sections"),null;try{const e=Kn(n);return e?JSON.parse(e):(Hp("Failed to decode base64 JWT payload"),null)}catch(jk){return Hp("Caught error parsing JWT payload as JSON",null===jk||void 0===jk?void 0:jk.toString()),null}}async function vm(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(jk){throw jk instanceof fr&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(jk)&&e.auth.currentUser===e&&await e.auth.signOut(),jk}}class ym{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(jk){return void("auth/network-request-failed"===(null===jk||void 0===jk?void 0:jk.code)&&this.schedule(!0))}this.schedule()}}class _m{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=pm(this.lastLoginAt),this.creationTime=pm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function bm(e){var t;const n=e.auth,r=await e.getIdToken(),i=await vm(e,async function(e,t){return lm(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Qp(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=Up(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const o=(l=e.providerData,c=a,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new _m(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}class wm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Qp(e.idToken,"internal-error"),Qp("undefined"!==typeof e.idToken,"internal-error"),Qp("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=gm(e);return Qp(t,"internal-error"),Qp("undefined"!==typeof t.exp,"internal-error"),Qp("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Qp(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await cm(e,{},(async()=>{const n=Er({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=dm(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",im.fetch()(s,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new wm;return n&&(Qp("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Qp("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Qp("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wm,this.toJSON())}_performRefresh(){return Xp("not implemented")}}function xm(e,t){Qp("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class km{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Up(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ym(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new _m(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await vm(this,this.stsTokenManager.getToken(this.auth,e));return Qp(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Dr(e),r=await n.getIdToken(t),i=gm(r);Qp(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:pm(mm(i.auth_time)),issuedAtTime:pm(mm(i.iat)),expirationTime:pm(mm(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Dr(e);await bm(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Qp(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new km(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Qp(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await bm(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await vm(this,async function(e,t){return lm(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:_,isAnonymous:b,providerData:w,stsTokenManager:x}=t;Qp(y&&x,e,"internal-error");const k=wm.fromJSON(this.name,x);Qp("string"===typeof y,e,"internal-error"),xm(u,e.name),xm(d,e.name),Qp("boolean"===typeof _,e,"internal-error"),Qp("boolean"===typeof b,e,"internal-error"),xm(h,e.name),xm(f,e.name),xm(p,e.name),xm(m,e.name),xm(g,e.name),xm(v,e.name);const C=new km({uid:y,auth:e,email:d,emailVerified:_,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:v});return w&&Array.isArray(w)&&(C.providerData=w.map((e=>Object.assign({},e)))),m&&(C._redirectEventId=m),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new wm;r.updateFromServerResponse(t);const i=new km({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await bm(i),i}}const Cm=new Map;function Em(e){Jp(e instanceof Function,"Expected a class definition");let t=Cm.get(e);return t?(Jp(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Cm.set(e,t),t)}class Sm{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Sm.type="NONE";const Im=Sm;function Tm(e,t,n){return`firebase:${e}:${t}:${n}`}class Nm{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Tm(this.userKey,r.apiKey,i),this.fullPersistenceKey=Tm("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?km._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Nm(Em(Im),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Em(Im);const s=Tm(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){const n=km._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new Nm(i,e,n)):new Nm(i,e,n)}}function Pm(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Dm(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Rm(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Mm(t))return"Blackberry";if(Am(t))return"Webos";if(jm(t))return"Safari";if((t.includes("chrome/")||Om(t))&&!t.includes("edge/"))return"Chrome";if(Lm(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Rm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr();return/firefox\//i.test(e)}function jm(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Om(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr();return/crios\//i.test(e)}function Dm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr();return/iemobile/i.test(e)}function Lm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr();return/android/i.test(e)}function Mm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr();return/blackberry/i.test(e)}function Am(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr();return/webos/i.test(e)}function Fm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Um(){return function(){const e=sr();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function $m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr();return Fm(e)||Lm(e)||Am(e)||Mm(e)||/windows phone/i.test(e)||Dm(e)}function zm(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Pm(sr());break;case"Worker":t=`${Pm(sr())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${qi}/${r}`}async function Bm(e,t){return lm(e,"GET","/v2/recaptchaConfig",om(e,t))}function Wm(e){return void 0!==e&&void 0!==e.enterprise}class Hm{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some((e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState))}}function qm(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Vp("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Vm(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Gm{constructor(e){this.type="recaptcha-enterprise",this.auth=Xm(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Wm(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Bm(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Hm(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Wm(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));qm("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Km(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Gm(e);let s;try{s=await i.verify(n)}catch(xs){s=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}class Ym{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(jk){r(jk)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(jk){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===jk||void 0===jk?void 0:jk.message})}}}class Qm{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jm(this),this.idTokenSubscription=new Jm(this),this.beforeStateQueue=new Ym(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bp,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Em(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Nm.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(jk){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(jk){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(jk)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Qp(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(jk){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await bm(e)}catch(jk){if("auth/network-request-failed"!==(null===jk||void 0===jk?void 0:jk.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Dr(e):null;return t&&Qp(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Qp(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Em(e))}))}async initializeRecaptchaConfig(){const e=await Bm(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new Hm(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new Gm(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new pr("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Em(e)||this._popupRedirectResolver;Qp(t,this,"argument-error"),this.redirectPersistenceManager=await Nm.create(this,[Em(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Qp(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Qp(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zm(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Wp.logLevel<=$r.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Wp.warn(`Auth (${qi}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function Xm(e){return Dr(e)}class Jm{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Nr(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Qp(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Zm(e,t,n){const r=Xm(e);Qp(r._canInitEmulator,r,"emulator-config-failed"),Qp(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=eg(t),{host:a,port:o}=function(e){const t=eg(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:tg(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:tg(t)}}}(t),l=null===o?"":`:${o}`;r.config.emulator={url:`${s}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function eg(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function tg(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ng{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xp("not implemented")}_getIdTokenResponse(e){return Xp("not implemented")}_linkToIdToken(e,t){return Xp("not implemented")}_getReauthenticationResolver(e){return Xp("not implemented")}}async function rg(e,t){return lm(e,"POST","/v1/accounts:update",t)}async function ig(e,t){return um(e,"POST","/v1/accounts:signInWithPassword",om(e,t))}class sg extends ng{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new sg(e,t,"password")}static _fromEmailAndCode(e,t){return new sg(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await Km(e,n,"signInWithPassword");return ig(e,t)}return ig(e,n).catch((async t=>{if("auth/missing-recaptcha-token"===t.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await Km(e,n,"signInWithPassword");return ig(e,t)}return Promise.reject(t)}));case"emailLink":return async function(e,t){return um(e,"POST","/v1/accounts:signInWithEmailLink",om(e,t))}(e,{email:this._email,oobCode:this._password});default:qp(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return rg(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return um(e,"POST","/v1/accounts:signInWithEmailLink",om(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:qp(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ag(e,t){return um(e,"POST","/v1/accounts:signInWithIdp",om(e,t))}class og extends ng{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new og(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qp("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Up(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new og(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return ag(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ag(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ag(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Er(t)}return e}}const lg={USER_NOT_FOUND:"user-not-found"};class cg extends ng{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new cg({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new cg({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return um(e,"POST","/v1/accounts:signInWithPhoneNumber",om(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await um(e,"POST","/v1/accounts:signInWithPhoneNumber",om(e,t));if(n.temporaryProof)throw fm(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return um(e,"POST","/v1/accounts:signInWithPhoneNumber",om(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),lg)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new cg({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class ug{constructor(e){var t,n,r,i,s,a;const o=Sr(Ir(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Qp(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=Sr(Ir(e)).link,n=t?Sr(Ir(t)).deep_link_id:null,r=Sr(Ir(e)).deep_link_id;return(r?Sr(Ir(r)).link:null)||r||n||t||e}(e);try{return new ug(t)}catch(n){return null}}}class dg{constructor(){this.providerId=dg.PROVIDER_ID}static credential(e,t){return sg._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ug.parseLink(t);return Qp(n,"argument-error"),sg._fromEmailAndCode(e,n.code,n.tenantId)}}dg.PROVIDER_ID="password",dg.EMAIL_PASSWORD_SIGN_IN_METHOD="password",dg.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class hg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class fg extends hg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class pg extends fg{constructor(){super("facebook.com")}static credential(e){return og._fromParams({providerId:pg.PROVIDER_ID,signInMethod:pg.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pg.credentialFromTaggedObject(e)}static credentialFromError(e){return pg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return pg.credential(t.oauthAccessToken)}catch(n){return null}}}pg.FACEBOOK_SIGN_IN_METHOD="facebook.com",pg.PROVIDER_ID="facebook.com";class mg extends fg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return og._fromParams({providerId:mg.PROVIDER_ID,signInMethod:mg.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return mg.credentialFromTaggedObject(e)}static credentialFromError(e){return mg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return mg.credential(n,r)}catch(i){return null}}}mg.GOOGLE_SIGN_IN_METHOD="google.com",mg.PROVIDER_ID="google.com";class gg extends fg{constructor(){super("github.com")}static credential(e){return og._fromParams({providerId:gg.PROVIDER_ID,signInMethod:gg.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return gg.credentialFromTaggedObject(e)}static credentialFromError(e){return gg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return gg.credential(t.oauthAccessToken)}catch(n){return null}}}gg.GITHUB_SIGN_IN_METHOD="github.com",gg.PROVIDER_ID="github.com";class vg extends fg{constructor(){super("twitter.com")}static credential(e,t){return og._fromParams({providerId:vg.PROVIDER_ID,signInMethod:vg.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vg.credentialFromTaggedObject(e)}static credentialFromError(e){return vg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return vg.credential(n,r)}catch(i){return null}}}async function yg(e,t){return um(e,"POST","/v1/accounts:signUp",om(e,t))}vg.TWITTER_SIGN_IN_METHOD="twitter.com",vg.PROVIDER_ID="twitter.com";class _g{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await km._fromIdTokenResponse(e,n,r),s=bg(n);return new _g({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=bg(n);return new _g({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function bg(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class wg extends fr{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,wg.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new wg(e,t,n,r)}}function xg(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw wg._fromErrorAndOperation(e,n,t,r);throw n}))}async function kg(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await vm(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return _g._forOperation(e,"link",r)}async function Cg(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await vm(e,xg(r,i,t,e),n);Qp(s.idToken,r,"internal-error");const a=gm(s.idToken);Qp(a,r,"internal-error");const{sub:o}=a;return Qp(e.uid===o,r,"user-mismatch"),_g._forOperation(e,i,s)}catch(jk){throw"auth/user-not-found"===(null===jk||void 0===jk?void 0:jk.code)&&qp(r,"user-mismatch"),jk}}async function Eg(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await xg(e,r,t),s=await _g._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Sg(e,t){return Eg(Xm(e),t)}new WeakMap;const Ig="__sak";class Tg{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ig,"1"),this.storage.removeItem(Ig),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ng extends Tg{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=sr();return jm(e)||Fm(e)}()&&function(){try{return!(!window||window===window.top)}catch(jk){return!1}}(),this.fallbackToPolling=$m(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Um()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ng.type="LOCAL";const Pg=Ng;class Rg extends Tg{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Rg.type="SESSION";const jg=Rg;class Og{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Og(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map((async e=>e(t.origin,i))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Dg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Og.receivers=[];class Lg{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((a,o)=>{const l=Dg("",20);r.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Mg(){return window}function Ag(){return"undefined"!==typeof Mg().WorkerGlobalScope&&"function"===typeof Mg().importScripts}const Fg="firebaseLocalStorageDb",Ug="firebaseLocalStorage",$g="fbase_key";class zg{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Bg(e,t){return e.transaction([Ug],t?"readwrite":"readonly").objectStore(Ug)}function Wg(){const e=indexedDB.open(Fg,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Ug,{keyPath:$g})}catch(jk){n(jk)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Ug)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Fg);return new zg(e).toPromise()}(),t(await Wg()))}))}))}async function Hg(e,t,n){const r=Bg(e,!0).put({[$g]:t,value:n});return new zg(r).toPromise()}function qg(e,t){const n=Bg(e,!0).delete(t);return new zg(n).toPromise()}class Vg{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Wg()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(jk){if(t++>3)throw jk;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ag()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Og._getInstance(Ag()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Lg(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wg();return await Hg(e,Ig,"1"),await qg(e,Ig),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Hg(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Bg(e,!1).get(t),r=await new zg(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>qg(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Bg(e,!1).getAll();return new zg(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Vg.type="LOCAL";const Gg=Vg;Vm("rcb"),new nm(3e4,6e4);const Kg="recaptcha";async function Yg(e,t,n){var r;const i=await n.verify();try{let s;if(Qp("string"===typeof i,e,"argument-error"),Qp(n.type===Kg,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Qp("enroll"===t.type,e,"internal-error");const n=await function(e,t){return lm(e,"POST","/v2/accounts/mfaEnrollment:start",om(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Qp("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Qp(n,e,"missing-multi-factor-info");const a=await function(e,t){return lm(e,"POST","/v2/accounts/mfaSignIn:start",om(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return lm(e,"POST","/v1/accounts:sendVerificationCode",om(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Qg{constructor(e){this.providerId=Qg.PROVIDER_ID,this.auth=Xm(e)}verifyPhoneNumber(e,t){return Yg(this.auth,e,Dr(t))}static credential(e,t){return cg._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Qg.credentialFromTaggedObject(t)}static credentialFromError(e){return Qg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?cg._fromTokenResponse(n,r):null}}function Xg(e,t){return t?Em(t):(Qp(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Qg.PROVIDER_ID="phone",Qg.PHONE_SIGN_IN_METHOD="phone";class Jg extends ng{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ag(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ag(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ag(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Zg(e){return Eg(e.auth,new Jg(e),e.bypassAuthState)}function ev(e){const{auth:t,user:n}=e;return Qp(n,t,"internal-error"),Cg(n,new Jg(e),e.bypassAuthState)}async function tv(e){const{auth:t,user:n}=e;return Qp(n,t,"internal-error"),kg(n,new Jg(e),e.bypassAuthState)}class nv{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(jk){this.reject(jk)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(jk){this.reject(jk)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Zg;case"linkViaPopup":case"linkViaRedirect":return tv;case"reauthViaPopup":case"reauthViaRedirect":return ev;default:qp(this.auth,"internal-error")}}resolve(e){Jp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const rv=new nm(2e3,1e4);class iv extends nv{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,iv.currentPopupAction&&iv.currentPopupAction.cancel(),iv.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Qp(e,this.auth,"internal-error"),e}async onExecution(){Jp(1===this.filter.length,"Popup operations only handle one event");const e=Dg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Vp(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Vp(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,iv.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Vp(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,rv.get())};e()}}iv.currentPopupAction=null;const sv=new Map;class av extends nv{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=sv.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=cv(t),r=lv(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(jk){e=()=>Promise.reject(jk)}sv.set(this.auth._key(),e)}return this.bypassAuthState||sv.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function ov(e,t){sv.set(e._key(),t)}function lv(e){return Em(e._redirectPersistence)}function cv(e){return Tm("pendingRedirect",e.config.apiKey,e.name)}async function uv(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Xm(e),i=Xg(r,t),s=new av(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class dv{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fv(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!fv(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Vp(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(hv(e))}saveEventToCache(e){this.cachedEventUids.add(hv(e)),this.lastProcessedEventTime=Date.now()}}function hv(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function fv(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const pv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mv=/^https?/;async function gv(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return lm(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(vv(r))return}catch(n){}qp(e,"unauthorized-domain")}function vv(e){const t=Zp(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!mv.test(n))return!1;if(pv.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const yv=new nm(3e4,6e4);function _v(){const e=Mg().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let bv=null;function wv(e){return bv=bv||function(e){return new Promise(((t,n)=>{var r,i,s;function a(){_v(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{_v(),n(Vp(e,"network-request-failed"))},timeout:yv.get()})}if(null===(i=null===(r=Mg().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Mg().gapi)||void 0===s?void 0:s.load)){const t=Vm("iframefcb");return Mg()[t]=()=>{gapi.load?a():n(Vp(e,"network-request-failed"))},qm(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}a()}})).catch((e=>{throw bv=null,e}))}(e),bv}const xv=new nm(5e3,15e3),kv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ev(e){const t=e.config;Qp(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?rm(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:qi},i=Cv.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Er(r).slice(1)}`}const Sv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Iv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(jk){}}}function Tv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Sv),{width:r.toString(),height:i.toString(),top:s,left:a}),c=sr().toLowerCase();n&&(o=Om(c)?"_blank":n),Rm(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return Fm(arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new Iv(null);const d=window.open(t||"",o,u);Qp(d,e,"popup-blocked");try{d.focus()}catch(jk){}return new Iv(d)}const Nv="__/auth/handler",Pv="emulator/auth/handler",Rv=encodeURIComponent("fac");async function jv(e,t,n,r,i,s){Qp(e.config.authDomain,e,"auth-domain-config-required"),Qp(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:qi,eventId:i};if(t instanceof hg){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",wr(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof fg){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${Rv}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${Nv}`;return rm(t,Pv)}(e)}?${Er(o).slice(1)}${c}`}const Ov="webStorageSupport";const Dv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jg,this._completeRedirectFn=uv,this._overrideRedirectResult=ov}async _openPopup(e,t,n,r){var i;Jp(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Tv(e,await jv(e,t,n,Zp(),r),Dg())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Mg().location.href=e}(await jv(e,t,n,Zp(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Jp(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await wv(e),n=Mg().gapi;return Qp(n,e,"internal-error"),t.open({where:document.body,url:Ev(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:kv,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Vp(e,"network-request-failed"),s=Mg().setTimeout((()=>{r(i)}),xv.get());function a(){Mg().clearTimeout(s),n(t)}t.ping(a).then(a,(()=>{r(i)}))}))))}(e),n=new dv(e);return t.register("authEvent",(t=>{Qp(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ov,{type:Ov},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Ov];void 0!==i&&t(!!i),qp(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gv(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $m()||jm()||Fm()}};var Lv="@firebase/auth",Mv="0.23.2";class Av{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Qp(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Fv=nr("authIdTokenMaxAge")||300;let Uv=null;function $v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gi();const t=Bi(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Bi(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(kr(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;qp(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Dv,persistence:[Gg,Pg,jg]}),r=nr("authTokenSyncURL");if(r){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Fv)return;const r=null===t||void 0===t?void 0:t.token;Uv!==r&&(Uv=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Dr(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(e,t,n,r){Dr(e).onIdTokenChanged(t,n,r)}(n,(t=>e(t)))}var i;const s=Zn("auth");return s&&Zm(n,`http://${s}`),n}var zv;zv="Browser",zi(new Lr("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Qp(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:zv,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zm(zv)},c=new Qm(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Em);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),zi(new Lr("auth-internal",(e=>(e=>new Av(e))(Xm(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Ki(Lv,Mv,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(zv)),Ki(Lv,Mv,"esm2017");const Bv="firebasestorage.googleapis.com",Wv="storageBucket";class Hv extends fr{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Gv(e),`Firebase Storage: ${t} (${Gv(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Hv.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Gv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var qv,Vv;function Gv(e){return"storage/"+e}function Kv(){return new Hv(qv.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Yv(){return new Hv(qv.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Qv(){return new Hv(qv.CANCELED,"User canceled the upload/download.")}function Xv(){return new Hv(qv.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Jv(e){return new Hv(qv.INVALID_ARGUMENT,e)}function Zv(){return new Hv(qv.APP_DELETED,"The Firebase app was deleted.")}function ey(e,t){return new Hv(qv.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function ty(e){throw new Hv(qv.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(qv||(qv={}));class ny{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=ny.makeFromUrl(e,t)}catch(jk){return new ny(e,"")}if(""===n.path)return n;throw r=e,new Hv(qv.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${a}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===Bv?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new ny(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Hv(qv.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class ry{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function iy(e){return"string"===typeof e||e instanceof String}function sy(e){return ay()&&e instanceof Blob}function ay(){return"undefined"!==typeof Blob&&!or()}function oy(e,t,n,r){if(r<t)throw Jv(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Jv(`Invalid value for '${e}'. Expected ${n} or less.`)}function ly(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function cy(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function uy(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Vv||(Vv={}));class dy{constructor(e,t,n,r,i,s,a,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new hy(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Vv.NO_ERROR,i=n.getStatus();if(!t||uy(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Vv.ABORT;return void e(!1,new hy(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new hy(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());void 0!==e?n(e):n()}catch(jk){r(jk)}else if(null!==i){const e=Kv();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?Zv():Qv())}else{r(Yv())}};this.canceled_?t(0,new hy(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function h(){s&&clearTimeout(s)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===o?(o=2,s=0):s=1e3*(r+Math.random()),d(s)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==i?(e||(o=2),clearTimeout(i),d(0)):e||(o=1)))}return d(0),s=setTimeout((()=>{a=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class hy{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function fy(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function py(){const e=fy();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(ay())return new Blob(n);throw new Hv(qv.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function my(e){if("undefined"===typeof atob)throw t="base-64",new Hv(qv.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}const gy="raw",vy="base64",yy="base64url",_y="data_url";class by{constructor(e,t){this.data=e,this.contentType=t||null}}function wy(e,t){switch(e){case gy:return new by(xy(t));case vy:case yy:return new by(ky(e,t));case _y:return new by(function(e){const t=new Cy(e);return t.base64?ky(vy,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(jk){throw ey(_y,"Malformed data URL.")}return xy(t)}(t.rest)}(t),new Cy(t).contentType)}throw Kv()}function xy(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function ky(e,t){switch(e){case vy:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw ey(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case yy:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw ey(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=my(t)}catch(jk){if(jk.message.includes("polyfill"))throw jk;throw ey(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Cy{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw ey(_y,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Ey{constructor(e,t){let n=0,r="";sy(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(sy(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Ey(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Ey(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(ay()){const e=t.map((e=>e instanceof Ey?e.data_:e));return new Ey(py.apply(null,e))}{const e=t.map((e=>iy(e)?wy(gy,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new Ey(r,!0)}}uploadData(){return this.data_}}function Sy(e){let t;try{t=JSON.parse(e)}catch(jk){return null}return"object"!==typeof(n=t)||Array.isArray(n)?null:t;var n}function Iy(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Ty(e,t){return t}class Ny{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Ty}}let Py=null;function Ry(){if(Py)return Py;const e=[];e.push(new Ny("bucket")),e.push(new Ny("generation")),e.push(new Ny("metageneration")),e.push(new Ny("name","fullPath",!0));const t=new Ny("name");t.xform=function(e,t){return function(e){return!iy(e)||e.length<2?e:Iy(e)}(t)},e.push(t);const n=new Ny("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Ny("timeCreated")),e.push(new Ny("updated")),e.push(new Ny("md5Hash",null,!0)),e.push(new Ny("cacheControl",null,!0)),e.push(new Ny("contentDisposition",null,!0)),e.push(new Ny("contentEncoding",null,!0)),e.push(new Ny("contentLanguage",null,!0)),e.push(new Ny("contentType",null,!0)),e.push(new Ny("metadata","customMetadata",!0)),Py=e,Py}function jy(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new ny(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Oy(e,t,n){const r=Sy(t);if(null===r)return null;return jy(e,r,n)}function Dy(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class Ly{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function My(e){if(!e)throw Kv()}function Ay(e,t){return function(n,r){const i=Oy(e,r,t);return My(null!==i),i}}function Fy(e,t){return function(n,r){const i=Oy(e,r,t);return My(null!==i),function(e,t,n,r){const i=Sy(t);if(null===i)return null;if(!iy(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const a=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return ly("/b/"+a(i)+"/o/"+a(s),n,r)+cy({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Uy(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Hv(qv.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Hv(qv.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new Hv(qv.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Hv(qv.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function $y(e){const t=Uy(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new Hv(qv.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function zy(e,t,n){const r=ly(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new Ly(r,"GET",Ay(e,n),i);return s.errorHandler=$y(t),s}function By(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Wy(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+o;const l=By(t,r,i),c="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Dy(l,n)+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+o+"--",d=Ey.getBlob(c,r,u);if(null===d)throw Xv();const h={name:l.fullPath},f=ly(s,e.host,e._protocol),p=e.maxUploadRetryTime,m=new Ly(f,"POST",Ay(e,n),p);return m.urlParams=h,m.headers=a,m.body=d.uploadData(),m.errorHandler=Uy(t),m}class Hy{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function qy(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(jk){My(!1)}return My(!!n&&-1!==(t||["active"]).indexOf(n)),n}const Vy=262144;function Gy(e,t,n,r,i,s,a,o){const l=new Hy(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new Hv(qv.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const d=l.current,h=d+u;let f="";f=0===u?"finalize":c===u?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${l.current}`},m=r.slice(d,h);if(null===m)throw Xv();const g=t.maxUploadRetryTime,v=new Ly(n,"POST",(function(e,n){const i=qy(e,["active","final"]),a=l.current+u,o=r.size();let c;return c="final"===i?Ay(t,s)(e,n):null,new Hy(a,o,"final"===i,c)}),g);return v.headers=p,v.body=m.uploadData(),v.progressCallback=o||null,v.errorHandler=Uy(e),v}const Ky="running",Yy="paused",Qy="success",Xy="canceled",Jy="error";function Zy(e){switch(e){case"running":case"pausing":case"canceling":return Ky;case"paused":return Yy;case"success":return Qy;case"canceled":return Xy;default:return Jy}}class e_{constructor(e,t,n){if("function"===typeof e||null!=t||null!=n)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function t_(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}class n_{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Vv.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=Vv.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=Vv.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw ty("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ty("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ty("cannot .getStatus() before sending");try{return this.xhr_.status}catch(jk){return-1}}getResponse(){if(!this.sent_)throw ty("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ty("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class r_ extends n_{initXhr(){this.xhr_.responseType="text"}}function i_(){return new r_}class s_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=Ry(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(qv.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(uy(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=Yv()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(qv.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),a=By(t,r,i),o={name:a.fullPath},l=ly(s,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},u=Dy(a,n),d=e.maxUploadRetryTime,h=new Ly(l,"POST",(function(e){let t;qy(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(jk){My(!1)}return My(iy(t)),t}),d);return h.urlParams=o,h.headers=c,h.body=u,h.errorHandler=Uy(t),h}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,i_,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,s=new Ly(n,"POST",(function(e){const t=qy(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(jk){My(!1)}n||My(!1);const i=Number(n);return My(!isNaN(i)),new Hy(i,r.size(),"final"===t)}),i);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=Uy(t),s}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,i_,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=Vy*this._chunkMultiplier,t=new Hy(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let s;try{s=Gy(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(jk){return this._error=jk,void this._transition("error")}const a=this._ref.storage._makeRequest(s,i_,r,i,!1);this._request=a,a.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(Vy*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=zy(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,i_,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=Wy(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,i_,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Qv(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Zy(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new e_(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Zy(this._state)){case Qy:t_(this._resolve.bind(null,this.snapshot))();break;case Xy:case Jy:t_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Zy(this._state)){case Ky:case Yy:e.next&&t_(e.next.bind(e,this.snapshot))();break;case Qy:e.complete&&t_(e.complete.bind(e))();break;default:e.error&&t_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class a_{constructor(e,t){this._service=e,this._location=t instanceof ny?t:ny.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new a_(e,t)}get root(){const e=new ny(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Iy(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new ny(this._location.bucket,e);return new a_(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Hv(qv.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function o_(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=ly(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new Ly(r,"GET",Fy(e,n),i);return s.errorHandler=$y(t),s}(e.storage,e._location,Ry());return e.storage.makeRequestWithTokens(t,i_).then((e=>{if(null===e)throw new Hv(qv.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function l_(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new ny(e._location.bucket,n);return new a_(e.storage,r)}function c_(e,t){if(e instanceof h_){const n=e;if(null==n._bucket)throw new Hv(qv.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Wv+"' property when initializing the app?");const r=new a_(n,n._bucket);return null!=t?c_(r,t):r}return void 0!==t?l_(e,t):e}function u_(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof h_)return new a_(e,t);throw Jv("To use ref(service, url), the first argument must be a Storage instance.")}return c_(e,t)}function d_(e,t){const n=null===t||void 0===t?void 0:t[Wv];return null==n?null:ny.makeFromBucketSpec(n,e)}class h_{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=Bv,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?ny.makeFromBucketSpec(r,this._host):d_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=ny.makeFromBucketSpec(this._url,e):this._bucket=d_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){oy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){oy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new a_(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new ry(Zv());{const s=function(e,t,n,r,i,s){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=cy(e.urlParams),l=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new dy(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const f_="@firebase/storage",p_="0.11.2",m_="storage";function g_(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new s_(e,new Ey(t),n)}(e=Dr(e),t,n)}function v_(e){return o_(e=Dr(e))}function y_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gi(),t=arguments.length>1?arguments[1]:void 0;e=Dr(e);const n=Bi(e,m_).getImmediate({identifier:t}),r=er("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:ir(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}function __(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new h_(r,i,s,n,qi)}zi(new Lr(m_,__,"PUBLIC").setMultipleInstances(!0)),Ki(f_,p_,""),Ki(f_,p_,"esm2017");const b_=Vi({apiKey:"AIzaSyB0US8vBzOKJlpb1bkixDZQCB8ka1h1DiY",authDomain:"buzzit-45162.firebaseapp.com",projectId:"buzzit-45162",storageBucket:"buzzit-45162.appspot.com",messagingSenderId:"253955480738",appId:"1:253955480738:web:0c6a1788a784aff90b0bfb",measurementId:"G-XJP4GD0B21"}),w_=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gi();e=Dr(e);const t=Bi(e,op);t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Bi(e,op);if(n.isInitialized()){const e=n.getImmediate();if(kr(t,n.getOptions()))return e;throw up.create("already-initialized")}const r=n.initialize({options:t})}(e)}(b_),zu()),x_=e=>{let{e:t,inputRefs:n,setStates:r,createNewProfile:i}=e;t.preventDefault(),r.setIsPending(!0);const s=n.email.ref.current.value,a=n.password.ref.current.value,o=n.rePassword.ref.current.value,l=()=>{(async function(e,t,n){var r;const i=Xm(e),s={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let a;if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await Km(i,s,"signUpPassword");a=yg(i,e)}else a=yg(i,s).catch((async e=>{if("auth/missing-recaptcha-token"===e.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await Km(i,s,"signUpPassword");return yg(i,e)}return Promise.reject(e)}));const o=await a.catch((e=>Promise.reject(e))),l=await _g._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(l.user),l})($v(),s,a).then((e=>{const t=e.user;i(s,t.uid)})).catch((e=>{e.code;const t=e.message;r.setError(t),r.setIsPending(!1)}))};a!==o?(n.password.setError("Password does not Match"),r.setIsPending(!1)):(l(),r.setValidated(!0))},k_=(e,t)=>{const n=new mg;(async function(e,t,n){const r=Xm(e);Kp(e,t,hg);const i=Xg(r,n);return new iv(r,"signInViaPopup",t,i).executeNotNull()})($v(),n).then((n=>{mg.credentialFromResult(n).accessToken;const r=n.user;"function"===typeof e?e(r.email,r.uid):t(!0)})).catch((e=>{e.code,e.message,e.customData.email,mg.credentialFromError(e)}))},C_=t=>{let{setSuccess:n}=t;const[r,i]=(0,e.useState)(!1),[s,o]=(0,e.useState)(null),[l,c]=(0,e.useState)(null),[u,d]=(0,e.useState)(!1),h={email:{ref:(0,e.useRef)(),error:null},password:{ref:(0,e.useRef)(),error:s,setError:o},rePassword:{ref:(0,e.useRef)(),error:null}},f={setValidated:i,setError:c,setIsPending:d,setSuccess:n},p=(e,t)=>{const n={email:e,id:t,date:Date.now()};Pu(Su(zu(),`UsersDetails/${t}`),n).then((()=>{const t={email:e};localStorage.setItem("details",JSON.stringify(t)),f.setSuccess(!0),f.setIsPending(!1)})).catch((e=>{if("AbortError"===e.name);else{e.code;const t=e.message;f.setError(t),f.setIsPending(!1)}}))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(Gh,{className:"custom-form",onSubmit:e=>x_({e:e,inputRefs:h,setStates:f,createNewProfile:p}),children:[l&&(0,a.jsx)(ef,{variant:"danger",children:l}),(0,a.jsxs)(Gh.Group,{controlId:"signupEmail",className:"mb-3",children:[(0,a.jsx)(Gh.Label,{children:"Email address"}),(0,a.jsx)(Gh.Control,{type:"email",required:!0,placeholder:"Email Address",ref:h.email.ref,disabled:u}),(0,a.jsx)(Gh.Control.Feedback,{type:"invalid",children:"Enter a Valid Email"})]}),(0,a.jsxs)(Gh.Group,{controlId:"signupPassword",className:"mb-3",children:[(0,a.jsx)(Gh.Label,{children:"Password"}),(0,a.jsx)(Gh.Control,{type:"password",placeholder:"Create a password",required:!0,ref:h.password.ref,isInvalid:s,disabled:u})]}),(0,a.jsxs)(Gh.Group,{className:"mb-3",children:[(0,a.jsx)(Gh.Label,{children:"Confirm Password"}),(0,a.jsx)(Gh.Control,{type:"password",required:!0,placeholder:"Re-Enter Password",ref:h.rePassword.ref,isInvalid:s,disabled:u}),(0,a.jsx)(Gh.Control.Feedback,{type:"invalid",children:s||"Re-enter password to confirm"})]}),(0,a.jsx)(ft,{variant:"success",type:"submit",className:"w-100 mb-2",children:"Sign Up"})]}),(0,a.jsxs)("div",{className:"text-center mt-3",children:[(0,a.jsx)("p",{children:"or"}),(0,a.jsxs)(ft,{variant:"outline-primary",className:"w-100",onClick:()=>{k_(p)},children:[(0,a.jsx)("i",{className:"bi bi-google me-2"})," Sign in with Google"]})]})]})},E_=e=>{let{e:t,setStates:n,inputRefs:r}=e;t.preventDefault(),n.setIsPending(!0);const i=r.email.ref.current.value,s=r.password.ref.current.value;var a,o,l;n.setValidated(!0),(a=$v(),o=i,l=s,Sg(Dr(a),dg.credential(o,l))).then((e=>{e.user,n.setSuccess(!0),n.setIsPending(!1)})).catch((e=>{e.code;const t=e.message;n.setError(t),console.log(t),n.setIsPending(!1)}))},S_=t=>{let{setSuccess:n}=t;const[r,i]=(0,e.useState)(!1),[s,o]=(0,e.useState)(null),[l,c]=(0,e.useState)(null),[u,d]=(0,e.useState)(!1),h={email:{ref:(0,e.useRef)(),error:null},password:{ref:(0,e.useRef)(),error:s,setError:o}},f={setValidated:i,setError:c,setIsPending:d,setSuccess:n};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(Gh,{className:"custom-form",onSubmit:e=>E_({e:e,inputRefs:h,setStates:f}),children:[(0,a.jsxs)(Gh.Group,{className:"mb-3",children:[(0,a.jsx)(Gh.Label,{children:"Email Address"}),(0,a.jsx)(Gh.Control,{type:"email",required:!0,placeholder:"Email Address",ref:h.email.ref,disabled:u}),(0,a.jsx)(Gh.Control.Feedback,{type:"invalid",children:"Enter a Valid Email"})]}),(0,a.jsxs)(Gh.Group,{className:"mb-3",children:[(0,a.jsx)(Gh.Label,{children:"Password"}),(0,a.jsx)(Gh.Control,{name:"password",type:"password",required:!0,placeholder:"Password",ref:h.password.ref,isInvalid:s,disabled:u}),(0,a.jsx)(Gh.Control.Feedback,{type:"invalid",children:s||"Enter a valid password"})]}),(0,a.jsx)(ft,{variant:"primary",type:"submit",className:"w-100",children:"Login"})]}),(0,a.jsxs)("div",{className:"text-center mt-3",children:[(0,a.jsx)("p",{children:"or"}),(0,a.jsxs)(ft,{variant:"outline-primary",className:"w-100",onClick:()=>{k_(null,n)},children:[(0,a.jsx)("i",{className:"bi bi-google me-2"})," Sign in with Google"]})]})]})},I_=t=>{let{show:n,handleClose:r,handleProfileEdit:i,returnOnClose:s}=t;const[o,l]=(0,e.useState)(!0),[c,u]=(0,e.useState)(!1),d=cn();(0,e.useEffect)((()=>{c&&(o||i(),r())}),[c]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(Kd,{show:n,onHide:()=>{!c&&s&&d("/"),r()},children:[(0,a.jsx)(Kd.Header,{closeButton:!0,children:(0,a.jsx)(Kd.Title,{children:o?"Login":"Sign Up"})}),(0,a.jsxs)(Kd.Body,{children:[(0,a.jsxs)(gh,{variant:"tabs",defaultActiveKey:o?"login":"signup",className:"mb-3",children:[(0,a.jsx)(gh.Item,{children:(0,a.jsx)(gh.Link,{eventKey:"login",active:o,onClick:()=>l(!0),children:"Login"})}),(0,a.jsx)(gh.Item,{children:(0,a.jsx)(gh.Link,{eventKey:"signup",active:!o,onClick:()=>l(!1),children:"Sign Up"})})]}),o?(0,a.jsx)(S_,{setSuccess:u}):(0,a.jsx)(C_,{setSuccess:u})]})]})})},T_=async(e,t,n)=>{const r=y_();try{const a=[];for(const o of e){const e=(i=r,s=`${t}/${n}/${o.name}`,u_(i=Dr(i),s)),l=await g_(e,o),c=await v_(l.ref);a.push(c)}return a}catch(xs){throw console.error("Error uploading files:",xs),xs}var i,s},N_=async(e,t,n)=>{const r=e.uid,i=e.postText;let s=n?e.media[0]:e.media;const a=()=>{const e=Nu(Su(zu(),"Posts"));Pu(e,{postText:i,media:s,likes:[],reposts:[],comments:[],uid:r,id:e.key,date:Date.now()}).then((()=>{t.setSuccess(!0),t.setIsPending(!1)})).catch((e=>{if("AbortError"===e.name);else{const n=e.message;t.setError(n),t.setIsPending(!1)}}))},o=async()=>{const e=`Posts/${n.postId}`,a={postText:i,media:s||"",likes:[],uid:r,date:Date.now()};try{if(r!==n.userId){const e=[...n.comments.map((e=>({uid:e.uid,date:e.date}))),{uid:r,date:a.date}];await Promise.all([Bu(`notifications/${n.userId}/Activities/${n.postId}`,{comments:e}),Bu(`notifications/${n.userId}`,{viewed:!1})])}await Bu(e,{comments:[...n.comments||[],a]}),t.setSuccess(!0),t.setIsPending(!1)}catch(xs){const n=xs.message;t.setError(n),t.setIsPending(!1)}};await(async()=>{if(s){const e=n?"Comments":"Posts";try{const t=await T_(s,e,r);s=t,n?await o():a()}catch(xs){console.error("Upload failed:",xs),t.setError("Upload failed:",xs)}}else n?await o():a()})()},P_=()=>{const[t,n]=(0,e.useState)(!1),[r,i]=(0,e.useState)(!0),[s,a]=(0,e.useState)(null);return(0,e.useEffect)((()=>{const e=function(e,t,n,r){return Dr(e).onAuthStateChanged(t,n,r)}($v(),(e=>{e?(n(!0),a(e.uid)):(n(!1),a(null)),i(!1)}));return()=>e()}),[]),{loggedIn:t,isPending:r,uid:s}},R_=t=>{let{handleClose:n,commentDetails:r}=t;const[i,s]=(0,e.useState)(""),[o,l]=(0,e.useState)([]),{uid:c}=P_(),[u,d]=(0,e.useState)(!1),[h,f]=(0,e.useState)(null),[p,m]=(0,e.useState)(!1),g={setError:f,setIsPending:d,setSuccess:m};return(0,e.useEffect)((()=>{p&&("function"===typeof n&&n(),s(""),l([]),m(!1))}),[p]),(0,a.jsxs)(Gh,{onSubmit:e=>{e.preventDefault(),c&&(""!==i||o.length>0)&&(d(!0),N_({postText:i,uid:c,media:o},g,r))},children:[h&&(0,a.jsx)(ef,{variant:"danger",children:h}),(0,a.jsx)(Gh.Group,{children:(0,a.jsx)(Gh.Control,{as:"textarea",rows:3,placeholder:"What's on your mind?",value:i,onChange:e=>s(e.target.value),disabled:u})}),o.length>0&&(0,a.jsx)(dt,{interval:null,indicators:!1,children:o.map(((e,t)=>(0,a.jsx)(dt.Item,{children:(0,a.jsxs)("div",{className:"position-relative ",children:[e.type.startsWith("image/")?(0,a.jsx)("img",{src:URL.createObjectURL(e),alt:"Selected",className:"media-preview",style:{width:"100%",height:"250px",objectFit:"contain"}}):(0,a.jsx)("video",{src:URL.createObjectURL(e),controls:!0,className:"media-preview",style:{width:"100%",height:"250px",objectFit:"cover"}}),(0,a.jsx)("label",{htmlFor:"cover-photo-upload",className:"position-absolute top-50 start-50 translate-middle",style:{cursor:"pointer",backgroundColor:"rgba(255, 255, 255, 0.7)",borderRadius:"50%",padding:"10px",textAlign:"center",width:"50px",height:"50px"},onClick:()=>{return t=e.name,void l((e=>e.filter((e=>e.name!==t))));var t},children:(0,a.jsx)("i",{className:"bi bi-x-circle",style:{fontSize:"1.5rem"}})})]})},t)))}),(0,a.jsx)("input",{type:"file",onChange:e=>{const t=Array.from(e.target.files);l((e=>[...e,...t]))},className:"file-input",style:{display:"none"},id:"file-upload",accept:"image/*,video/*",multiple:!r,disabled:u}),(0,a.jsx)("label",{htmlFor:"file-upload",className:"file-upload-label",children:(0,a.jsx)("i",{className:"bi bi-image"})}),(0,a.jsx)("div",{className:"d-flex justify-content-end mt-3",children:(0,a.jsx)(ft,{variant:"success",type:"submit",disabled:u,children:"Post"})})]})},j_=e=>{let{show:t,handleClose:n}=e;return(0,a.jsxs)(Kd,{show:t,onHide:n,centered:!0,children:[(0,a.jsx)(Kd.Header,{closeButton:!0,children:(0,a.jsx)(Kd.Title,{children:"Create Post"})}),(0,a.jsx)(Kd.Body,{children:(0,a.jsx)(R_,{handleClose:n})})]})},O_=(e,t)=>{const n=e.uid,r=e.name,i=e.about,s=e.dob;let a=e.coverPhoto,o=e.profilePhoto;(async()=>{const l=await(async()=>{if(a)try{return(await T_([a],"CoverPhotos",n))[0]}catch(xs){return console.error("Upload failed:",xs),t.setError("Upload failed: "+xs.message),null}return null})(),c=await(async()=>{if(o)try{return(await T_([o],"ProfilePhotos",n))[0]}catch(xs){return console.error("Upload failed:",xs),t.setError("Upload failed: "+xs.message),null}return null})();await(async(a,o)=>{const l=`UsersDetails/${n}`,c={name:r,about:i,dob:s,...a&&{coverPhoto:a},...o&&{profilePhoto:o}};a&&(c.previousCoverPhotos=[...e.previousCoverPhotos||[],a]),o&&(c.previousProfilePhotos=[...e.previousProfilePhotos||[],o]),await Bu(l,c),t.setSuccess(!0)})(l,c)})()},D_=t=>{let{show:n,handleClose:r,currentUserDetails:i}=t;const[s,o]=(0,e.useState)(""),[l,c]=(0,e.useState)(""),[u,d]=(0,e.useState)(""),[h,f]=(0,e.useState)(""),[p,m]=(0,e.useState)(""),[g,v]=(0,e.useState)(""),[y,_]=(0,e.useState)(""),[b,w]=(0,e.useState)(!1),[x,k]=(0,e.useState)(!1),[C,E]=(0,e.useState)(!1),[S,I]=(0,e.useState)(null),[T,N]=(0,e.useState)(!1),{uid:P}=P_();i||(i={coverPhoto:null,profilePhoto:null,name:"",about:"",dob:""});const R={setError:I,setIsPending:w,setSuccess:N};(0,e.useEffect)((()=>{T&&(r(),w(!1),N(!1))}),[T]),(0,e.useEffect)((()=>{n&&i&&(d(i.profilePhoto),f(i.coverPhoto),m(i.name),v(i.about),_(i.dob),E(!1),k(!1),I(null),N(!1),w(!1))}),[n,i]);return(0,a.jsxs)(Kd,{show:n,onHide:r,children:[S&&(0,a.jsx)(ef,{variant:"danger",children:S}),(0,a.jsxs)(Kd.Header,{className:"d-flex justify-content-between",children:[(0,a.jsx)(ft,{variant:"close",onClick:r,className:"m-0",disabled:b}),(0,a.jsx)(Kd.Title,{children:"Edit Profile"}),(0,a.jsx)(ft,{variant:"primary",onClick:()=>{if(p&&y){const e={uid:P,name:p,about:g,dob:y,coverPhoto:s,profilePhoto:l};w(!0),k(!1),E(!1),I(null),O_(e,R)}else p||E(!0),y||k(!0)},disabled:b,children:"Save"})]}),(0,a.jsxs)(Kd.Body,{children:[(0,a.jsxs)("div",{className:"position-relative mb-4",children:[(0,a.jsx)(Q,{src:h||"/images/defaultCover.png",fluid:!0,style:{height:"200px",width:"100%",objectFit:"cover"},alt:"Cover"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];t&&(o(t),f(URL.createObjectURL(t)))},style:{display:"none"},id:"cover-photo-upload",disabled:b}),(0,a.jsx)("label",{htmlFor:"cover-photo-upload",className:"position-absolute top-50 start-50 translate-middle",style:{cursor:"pointer",backgroundColor:"rgba(255, 255, 255, 0.7)",borderRadius:"50%",padding:"10px",textAlign:"center",width:"50px",height:"50px"},children:(0,a.jsx)("i",{className:"bi bi-camera",style:{fontSize:"1.5rem"}})})]}),(0,a.jsx)("div",{className:"d-flex align-items-center mb-4 position-relative",children:(0,a.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,a.jsx)(Q,{src:u||"/images/defaultProfile.png",roundedCircle:!0,style:{height:"100px",width:"100px",marginRight:"20px",position:"relative"},alt:"Profile"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];t&&(c(t),d(URL.createObjectURL(t)))},style:{display:"none"},id:"profile-photo-upload",disabled:b}),(0,a.jsx)("label",{htmlFor:"profile-photo-upload",className:"d-flex align-items-center justify-content-center",style:{cursor:"pointer",backgroundColor:"rgba(255, 255, 255, 0.7)",borderRadius:"50%",padding:"10px",width:"40px",height:"40px",position:"absolute",top:"50%",left:"50%",transform:"translate(-75%, -50%)"},children:(0,a.jsx)("i",{className:"bi bi-camera",style:{fontSize:"1.5rem"}})})]})}),(0,a.jsxs)(Gh.Group,{controlId:"formName",className:"mb-3",children:[(0,a.jsx)(Gh.Label,{children:"Name"}),(0,a.jsx)(Gh.Control,{type:"text",value:p,onChange:e=>m(e.target.value),placeholder:"Enter your name",isInvalid:C,disabled:b}),(0,a.jsx)(Gh.Control.Feedback,{type:"invalid",children:"Please Enter Your Name"})]}),(0,a.jsxs)(Gh.Group,{controlId:"formAbout",className:"mb-3",children:[(0,a.jsx)(Gh.Label,{children:"About"}),(0,a.jsx)(Gh.Control,{as:"textarea",rows:3,value:g,onChange:e=>v(e.target.value),placeholder:"Tell us about yourself",disabled:b})]}),(0,a.jsxs)(Gh.Group,{controlId:"formDOB",className:"mb-3",children:[(0,a.jsx)(Gh.Label,{children:"Date of Birth"}),(0,a.jsx)(Gh.Control,{type:"date",value:y,onChange:e=>_(e.target.value),isInvalid:x,disabled:b}),(0,a.jsx)(Gh.Control.Feedback,{type:"invalid",children:"Please Select Your Date of Birth"})]})]})]})},L_=async e=>{const t=Su(zu(),e);try{const e=await ju(t);return e.exists()?e.val():(console.log("No data available at this node."),null)}catch(xs){return console.error("Error fetching data:",xs),null}},M_=async()=>{const e=$v();try{await function(e){return Dr(e).signOut()}(e),console.log("User signed out successfully")}catch(xs){console.error("Error signing out:",xs.message)}},A_=(e,t)=>{const n=Su(zu(),e),r=Mu(n,(n=>{n.exists()?t(n.val()):(console.log(`No data available at ${e}`),t(null))}),(e=>{console.error("Error fetching data from node:",e),t(null,e)}));return()=>function(e,t,n){let r=null;const i=n?new wu(n):null;"value"===t?r=new Ou(i):t&&(r=new Du(t,i)),nu(e._repo,e,r)}(n,"value",r)},F_=e=>new Promise(((t,n)=>{A_(`notifications/${e}`,(e=>{e&&t(e)}))})),U_=t=>{let{loggedIn:n,uid:r}=t;const[i,s]=(0,e.useState)(!1),[o,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)(!1),d=()=>u(!0),h=()=>{n?M_():l(!0)};(0,e.useEffect)((()=>{n&&f()}),[n]);const f=()=>{L_(`UsersDetails/${r}`).then((e=>{e&&(e.name||d())})).catch((e=>{console.error("Error:",e)})),F_(r)};return(0,a.jsxs)(w,{md:2,className:"d-none d-md-block bg-light vh-100 p-3",children:[(0,a.jsx)("h2",{className:"mb-4",children:"BuzzIt"}),(0,a.jsx)(Ln,{to:"/",className:"d-flex align-items-center mb-3",children:(0,a.jsxs)(ft,{variant:"link",className:"d-flex align-items-center",children:[(0,a.jsx)("i",{className:"bi bi-house-door-fill me-2"})," Home"]})}),(0,a.jsx)(Ln,{to:"/notifications",className:"d-flex align-items-center mb-3",children:(0,a.jsxs)(ft,{variant:"link",className:"d-flex align-items-center ",children:[(0,a.jsx)("i",{className:"bi bi-bell-fill me-2"})," Notification"]})}),(0,a.jsx)(Ln,{to:"/messages",className:"d-flex align-items-center mb-3",children:(0,a.jsxs)(ft,{variant:"link",className:"d-flex align-items-center ",children:[(0,a.jsx)("i",{className:"bi bi-envelope-fill me-2"})," Messages"]})}),n&&r?(0,a.jsx)(Ln,{to:`/${r}`,className:"d-flex align-items-center mb-3",children:(0,a.jsxs)(ft,{variant:"link",className:"d-flex align-items-center",children:[(0,a.jsx)("i",{className:"bi bi-person-fill me-2"})," Profile"]})}):(0,a.jsxs)(ft,{variant:"link",className:"d-flex align-items-center mb-3",onClick:h,children:[(0,a.jsx)("i",{className:"bi bi-person-fill me-2"})," Profile"]}),(0,a.jsx)(Ln,{to:"/Games",className:"d-flex align-items-center mb-3",children:(0,a.jsxs)(ft,{variant:"link",className:"d-flex align-items-center",children:[(0,a.jsx)("i",{className:"bi bi-controller me-2"})," Games"]})}),(0,a.jsxs)(ft,{variant:"link",className:"d-flex align-items-center mb-3",children:[(0,a.jsx)("i",{className:"bi bi-gear-fill me-2"})," Settings"]}),(0,a.jsxs)(ft,{variant:"primary",className:"d-flex align-items-center mb-3",onClick:()=>s(!0),children:[(0,a.jsx)("i",{className:"bi bi-plus-lg me-2"})," Post"]}),(0,a.jsxs)(ft,{variant:"link",className:"d-flex align-items-center mb-3",onClick:h,children:[(0,a.jsx)("i",{className:"bi bi-box-arrow-in-right me-2"})," ",n?"Logout":"Login/Sign-up"]}),o&&(0,a.jsx)(I_,{show:o,handleClose:()=>l(!1),handleProfileEdit:d}),i&&(0,a.jsx)(j_,{show:i,handleClose:()=>s(!1)}),(0,a.jsx)(D_,{show:c,handleClose:()=>u(!1)})]})},$_=()=>(0,a.jsx)("div",{className:"",children:(0,a.jsxs)(Gh,{className:"d-flex",children:[(0,a.jsx)(Th,{type:"search",placeholder:"Search","aria-label":"Search"}),(0,a.jsx)(ft,{variant:"outline-success",children:(0,a.jsx)("i",{className:"bi bi-search"})})]})}),z_=()=>(0,a.jsx)(w,{md:3,className:"d-none d-md-block bg-light vh-100 p-3",children:(0,a.jsx)($_,{})}),B_=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i,...o}=e;n=h(n,"navbar-brand");const l=i||(o.href?"a":"span");return(0,a.jsx)(l,{...o,ref:t,className:s()(r,n)})}));B_.displayName="NavbarBrand";const W_=B_;const H_=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e=>null!=e)).reduce(((e,t)=>{if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),null)},q_={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function V_(e,t){const n=t[`offset${e[0].toUpperCase()}${e.slice(1)}`],r=q_[e];return n+parseInt(De(t,r[0]),10)+parseInt(De(t,r[1]),10)}const G_={[Ze]:"collapse",[nt]:"collapsing",[et]:"collapsing",[tt]:"collapse show"},K_=e.forwardRef(((t,n)=>{let{onEnter:r,onEntering:i,onEntered:o,onExit:l,onExiting:c,className:u,children:d,dimension:h="height",in:f=!1,timeout:p=300,mountOnEnter:m=!1,unmountOnExit:g=!1,appear:v=!1,getDimensionValue:y=V_,..._}=t;const b="function"===typeof h?h():h,w=(0,e.useMemo)((()=>H_((e=>{e.style[b]="0"}),r)),[b,r]),x=(0,e.useMemo)((()=>H_((e=>{const t=`scroll${b[0].toUpperCase()}${b.slice(1)}`;e.style[b]=`${e[t]}px`}),i)),[b,i]),k=(0,e.useMemo)((()=>H_((e=>{e.style[b]=null}),o)),[b,o]),C=(0,e.useMemo)((()=>H_((e=>{e.style[b]=`${y(b,e)}px`,Ve(e)}),l)),[l,y,b]),E=(0,e.useMemo)((()=>H_((e=>{e.style[b]=null}),c)),[b,c]);return(0,a.jsx)(ct,{ref:n,addEndListener:qe,..._,"aria-expanded":_.role?f:null,onEnter:w,onEntering:x,onEntered:k,onExit:C,onExiting:E,childRef:d.ref,in:f,timeout:p,mountOnEnter:m,unmountOnExit:g,appear:v,children:(t,n)=>e.cloneElement(d,{...n,className:s()(u,d.props.className,G_[t],"width"===b&&"collapse-horizontal")})})})),Y_=K_,Q_=e.forwardRef(((t,n)=>{let{children:r,bsPrefix:i,...s}=t;i=h(i,"navbar-collapse");const o=(0,e.useContext)(uh);return(0,a.jsx)(Y_,{in:!(!o||!o.expanded),...s,children:(0,a.jsx)("div",{ref:n,className:i,children:r})})}));Q_.displayName="NavbarCollapse";const X_=Q_,J_=e.forwardRef(((t,n)=>{let{bsPrefix:r,className:i,children:o,label:l="Toggle navigation",as:c="button",onClick:u,...d}=t;r=h(r,"navbar-toggler");const{onToggle:f,expanded:p}=(0,e.useContext)(uh)||{},m=J((e=>{u&&u(e),f&&f()}));return"button"===c&&(d.type="button"),(0,a.jsx)(c,{...d,ref:n,onClick:m,"aria-label":l,className:s()(i,r,!p&&"collapsed"),children:o||(0,a.jsx)("span",{className:`${r}-icon`})})}));J_.displayName="NavbarToggle";const Z_=J_,eb=new WeakMap,tb=(e,t)=>{if(!e||!t)return;const n=eb.get(t)||new Map;eb.set(t,n);let r=n.get(e);return r||(r=t.matchMedia(e),r.refCount=0,n.set(r.media,r)),r};function nb(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined"===typeof window?void 0:window;const r=tb(t,n),[i,s]=(0,e.useState)((()=>!!r&&r.matches));return ae((()=>{let e=tb(t,n);if(!e)return s(!1);let r=eb.get(n);const i=()=>{s(e.matches)};return e.refCount++,e.addListener(i),i(),()=>{e.removeListener(i),e.refCount--,e.refCount<=0&&(null==r||r.delete(e.media)),e=void 0}}),[t]),i}const rb=function(t){const n=Object.keys(t);function r(e,t){return e===t?t:e?`${e} and ${t}`:t}function i(e){const r=function(e){return n[Math.min(n.indexOf(e)+1,n.length-1)]}(e);let i=t[r];return i="number"===typeof i?i-.2+"px":`calc(${i} - 0.2px)`,`(max-width: ${i})`}return function(n,s,a){let o;"object"===typeof n?(o=n,a=s,s=!0):(s=s||!0,o={[n]:s});let l=(0,e.useMemo)((()=>Object.entries(o).reduce(((e,n)=>{let[s,a]=n;return"up"!==a&&!0!==a||(e=r(e,function(e){let n=t[e];return"number"===typeof n&&(n=`${n}px`),`(min-width: ${n})`}(s))),"down"!==a&&!0!==a||(e=r(e,i(s))),e}),"")),[JSON.stringify(o)]);return nb(l,a)}}({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),ib=rb,sb=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=h(r,"offcanvas-body"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));sb.displayName="OffcanvasBody";const ab=sb,ob={[et]:"show",[tt]:"show"},lb=e.forwardRef(((t,n)=>{let{bsPrefix:r,className:i,children:o,in:l=!1,mountOnEnter:c=!1,unmountOnExit:u=!1,appear:d=!1,...f}=t;return r=h(r,"offcanvas"),(0,a.jsx)(ct,{ref:n,addEndListener:qe,in:l,mountOnEnter:c,unmountOnExit:u,appear:d,...f,childRef:o.ref,children:(t,n)=>e.cloneElement(o,{...n,className:s()(i,o.props.className,(t===et||t===nt)&&`${r}-toggling`,ob[t])})})}));lb.displayName="OffcanvasToggling";const cb=lb,ub=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,closeLabel:i="Close",closeButton:o=!1,...l}=e;return n=h(n,"offcanvas-header"),(0,a.jsx)(Ud,{ref:t,...l,className:s()(r,n),closeLabel:i,closeButton:o})}));ub.displayName="OffcanvasHeader";const db=ub,hb=M("h5"),fb=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=hb,...o}=e;return r=h(r,"offcanvas-title"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));fb.displayName="OffcanvasTitle";const pb=fb;function mb(e){return(0,a.jsx)(cb,{...e})}function gb(e){return(0,a.jsx)(Id,{...e})}const vb=e.forwardRef(((t,n)=>{let{bsPrefix:r,className:i,children:o,"aria-labelledby":l,placement:c="start",responsive:u,show:d=!1,backdrop:f=!0,keyboard:p=!0,scroll:m=!1,onEscapeKeyDown:g,onShow:v,onHide:y,container:_,autoFocus:b=!0,enforceFocus:w=!0,restoreFocus:x=!0,restoreFocusOptions:k,onEntered:C,onExit:E,onExiting:S,onEnter:I,onEntering:T,onExited:N,backdropClassName:P,manager:R,renderStaticNode:j=!1,...O}=t;const D=(0,e.useRef)();r=h(r,"offcanvas");const[L,M]=(0,e.useState)(!1),A=J(y),F=ib(u||"xs","up");(0,e.useEffect)((()=>{M(u?d&&!F:d)}),[d,u,F]);const U=(0,e.useMemo)((()=>({onHide:A})),[A]);const $=(0,e.useCallback)((e=>(0,a.jsx)("div",{...e,className:s()(`${r}-backdrop`,P)})),[P,r]),z=e=>(0,a.jsx)("div",{...e,...O,className:s()(i,u?`${r}-${u}`:r,`${r}-${c}`),"aria-labelledby":l,children:o});return(0,a.jsxs)(a.Fragment,{children:[!L&&(u||j)&&z({}),(0,a.jsx)(Pd.Provider,{value:U,children:(0,a.jsx)(pd,{show:L,ref:n,backdrop:f,container:_,keyboard:p,autoFocus:b,enforceFocus:w&&!m,restoreFocus:x,restoreFocusOptions:k,onEscapeKeyDown:g,onShow:v,onHide:A,onEnter:function(e){e&&(e.style.visibility="visible");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==I||I(e,...n)},onEntering:T,onEntered:C,onExit:E,onExiting:S,onExited:function(e){e&&(e.style.visibility="");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==N||N(...n)},manager:R||(m?(D.current||(D.current=new Cd({handleContainerOverflow:!1})),D.current):kd()),transition:mb,backdropTransition:gb,renderBackdrop:$,renderDialog:z})})]})}));vb.displayName="Offcanvas";const yb=Object.assign(vb,{Body:ab,Header:db,Title:pb}),_b=e.forwardRef(((t,n)=>{let{onHide:r,...i}=t;const s=(0,e.useContext)(uh),o=J((()=>{null==s||null==s.onToggle||s.onToggle(),null==r||r()}));return(0,a.jsx)(yb,{ref:n,show:!(null==s||!s.expanded),...i,renderStaticNode:!0,onHide:o})}));_b.displayName="NavbarOffcanvas";const bb=_b,wb=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="span",...o}=e;return r=h(r,"navbar-text"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));wb.displayName="NavbarText";const xb=wb,kb=e.forwardRef(((t,n)=>{const{bsPrefix:r,expand:i=!0,variant:o="light",bg:l,fixed:c,sticky:u,className:d,as:f="nav",expanded:p,onToggle:m,onSelect:g,collapseOnSelect:v=!1,...y}=ye(t,{expanded:"onToggle"}),_=h(r,"navbar"),b=(0,e.useCallback)((function(){null==g||g(...arguments),v&&p&&(null==m||m(!1))}),[g,v,p,m]);void 0===y.role&&"nav"!==f&&(y.role="navigation");let w=`${_}-expand`;"string"===typeof i&&(w=`${w}-${i}`);const x=(0,e.useMemo)((()=>({onToggle:()=>null==m?void 0:m(!p),bsPrefix:_,expanded:!!p,expand:i})),[_,p,i,m]);return(0,a.jsx)(uh.Provider,{value:x,children:(0,a.jsx)(Jd.Provider,{value:b,children:(0,a.jsx)(f,{ref:n,...y,className:s()(d,_,i&&w,o&&`${_}-${o}`,l&&`bg-${l}`,u&&`sticky-${u}`,c&&`fixed-${c}`)})})})}));kb.displayName="Navbar";const Cb=Object.assign(kb,{Brand:W_,Collapse:X_,Offcanvas:bb,Text:xb,Toggle:Z_}),Eb=e=>{let{uid:t}=e;return(0,a.jsx)(Cb,{fixed:"bottom",bg:"light",className:"d-md-none justify-content-between mx-auto px-0",style:{marginTop:"50px"},children:(0,a.jsx)(v,{children:(0,a.jsxs)(gh,{className:"d-flex w-100 justify-content-between",children:[(0,a.jsx)(gh.Link,{as:Ln,to:"/",children:(0,a.jsx)("i",{className:"bi bi-house-door-fill",style:{fontSize:"1.5rem"}})}),(0,a.jsx)(gh.Link,{as:Ln,to:"/search",children:(0,a.jsx)("i",{className:"bi bi-search",style:{fontSize:"1.5rem"}})}),(0,a.jsx)(gh.Link,{as:Ln,to:`/${t}`,children:(0,a.jsx)("i",{className:"bi bi-people-fill",style:{fontSize:"1.5rem"}})}),(0,a.jsx)(gh.Link,{as:Ln,to:"/messages/",children:(0,a.jsx)("i",{className:"bi bi-envelope-fill",style:{fontSize:"1.5rem"}})}),(0,a.jsx)(gh.Link,{as:Ln,to:"/Games",children:(0,a.jsx)("i",{className:"bi bi-controller",style:{fontSize:"1.5rem"}})}),(0,a.jsx)(gh.Link,{as:Ln,to:"#",children:(0,a.jsx)("i",{className:"bi bi-gear-fill",style:{fontSize:"1.5rem"}})})]})})})},Sb=()=>{const[t,n]=(0,e.useState)([]),{loggedIn:r,uid:i}=P_(),s=e=>{if(e){const t=Object.entries(e).map((async e=>{let[t,n]=e;return await o(t,n)}));Promise.all(t).then(n)}else n([])},o=async(e,t)=>{try{const n=`UsersDetails/${t.uid}`,r=await L_(n);return{postId:e,...t,username:r.name,profilePic:r.profilePhoto}}catch(xs){return console.error("Error fetching user data:",xs),{postId:e,...t}}};return(0,e.useEffect)((()=>{const e=A_("Posts/",s);return()=>e()}),[]),(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[(0,a.jsx)(U_,{loggedIn:r,uid:i}),(0,a.jsx)(w,{md:7,className:" mx-auto px-0 px-md-3",style:{overflowY:"scroll"},children:(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsx)("h3",{children:"Feed"}),(0,a.jsx)(V,{className:"create-post-feed mb-4",children:(0,a.jsx)(V.Body,{children:(0,a.jsx)(R_,{})})}),t.length>0&&t.map(((e,t)=>(0,a.jsx)(qu,{post:e,currentUserID:i},t)))]})}),(0,a.jsx)(z_,{})]})}),(0,a.jsx)(Eb,{uid:i})]})};function Ib(t,n,r){const i=(0,e.useRef)(void 0!==t),[s,a]=(0,e.useState)(n),o=void 0!==t,l=i.current;return i.current=o,!o&&l&&s!==n&&a(n),[o?t:s,(0,e.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[i,...s]=t;let o=null==r?void 0:r(i,...s);return a(i),o}),[r])]}const Tb={prefix:String(Math.round(1e10*Math.random())),current:0},Nb=e.createContext(Tb),Pb=e.createContext(!1);let Rb=Boolean("undefined"!==typeof window&&window.document&&window.document.createElement),jb=new WeakMap;function Ob(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,e.useContext)(Nb),r=(0,e.useRef)(null);if(null===r.current&&!t){var i,s;let t=null===(s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)||void 0===s||null===(i=s.ReactCurrentOwner)||void 0===i?void 0:i.current;if(t){let e=jb.get(t);null==e?jb.set(t,{id:n.current,state:t.memoizedState}):t.memoizedState!==e.state&&(n.current=e.id,jb.delete(t))}r.current=++n.current}return r.current}const Db="function"===typeof e.useId?function(t){let n=e.useId(),[r]=(0,e.useState)("function"===typeof e.useSyncExternalStore?e.useSyncExternalStore(Ab,Lb,Mb):(0,e.useContext)(Pb));return t||`${r?"react-aria":`react-aria${Tb.prefix}`}-${n}`}:function(t){let n=(0,e.useContext)(Nb);n!==Tb||Rb||console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let r=Ob(!!t),i=`react-aria${n.prefix}`;return t||`${i}-${r}`};function Lb(){return!1}function Mb(){return!0}function Ab(e){return()=>{}}const Fb=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],Ub=["activeKey","getControlledId","getControllerId"],$b=["as"];function zb(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Bb(t){let{active:n,eventKey:r,mountOnEnter:i,transition:s,unmountOnExit:a,role:o="tabpanel",onEnter:l,onEntering:c,onEntered:u,onExit:d,onExiting:h,onExited:f}=t,p=zb(t,Fb);const m=(0,e.useContext)(Zd);if(!m)return[Object.assign({},p,{role:o}),{eventKey:r,isActive:n,mountOnEnter:i,transition:s,unmountOnExit:a,onEnter:l,onEntering:c,onEntered:u,onExit:d,onExiting:h,onExited:f}];const{activeKey:g,getControlledId:v,getControllerId:y}=m,_=zb(m,Ub),b=Xd(r);return[Object.assign({},p,{role:o,id:v(r),"aria-labelledby":y(r)}),{eventKey:r,isActive:null==n&&null!=b?Xd(g)===b:n,transition:s||_.transition,mountOnEnter:null!=i?i:_.mountOnEnter,unmountOnExit:null!=a?a:_.unmountOnExit,onEnter:l,onEntering:c,onEntered:u,onExit:d,onExiting:h,onExited:f}]}const Wb=e.forwardRef(((e,t)=>{let{as:n="div"}=e,r=zb(e,$b);const[i,{isActive:s,onEnter:o,onEntering:l,onEntered:c,onExit:u,onExiting:d,onExited:h,mountOnEnter:f,unmountOnExit:p,transition:m=nd}]=Bb(r);return(0,a.jsx)(Zd.Provider,{value:null,children:(0,a.jsx)(Jd.Provider,{value:null,children:(0,a.jsx)(m,{in:s,onEnter:o,onEntering:l,onEntered:c,onExit:u,onExiting:d,onExited:h,mountOnEnter:f,unmountOnExit:p,children:(0,a.jsx)(n,Object.assign({},i,{ref:t,hidden:!s,"aria-hidden":!s}))})})})}));Wb.displayName="TabPanel";const Hb=t=>{const{id:n,generateChildId:r,onSelect:i,activeKey:s,defaultActiveKey:o,transition:l,mountOnEnter:c,unmountOnExit:u,children:d}=t,[h,f]=Ib(s,o,i),p=Db(n),m=(0,e.useMemo)((()=>r||((e,t)=>p?`${p}-${t}-${e}`:null)),[p,r]),g=(0,e.useMemo)((()=>({onSelect:f,activeKey:h,transition:l,mountOnEnter:c||!1,unmountOnExit:u||!1,getControlledId:e=>m(e,"tabpane"),getControllerId:e=>m(e,"tab")})),[f,h,l,c,u,m]);return(0,a.jsx)(Zd.Provider,{value:g,children:(0,a.jsx)(Jd.Provider,{value:f||null,children:d})})};Hb.Panel=Wb;const qb=Hb;function Vb(e){return"boolean"===typeof e?e?Id:nd:e}const Gb=e=>{let{transition:t,...n}=e;return(0,a.jsx)(qb,{...n,transition:Vb(t)})};Gb.displayName="TabContainer";const Kb=Gb,Yb=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=h(r,"tab-content"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));Yb.displayName="TabContent";const Qb=Yb,Xb=e.forwardRef(((e,t)=>{let{bsPrefix:n,transition:r,...i}=e;const[{className:o,as:l="div",...c},{isActive:u,onEnter:d,onEntering:f,onEntered:p,onExit:m,onExiting:g,onExited:v,mountOnEnter:y,unmountOnExit:_,transition:b=Id}]=Bb({...i,transition:Vb(r)}),w=h(n,"tab-pane");return(0,a.jsx)(Zd.Provider,{value:null,children:(0,a.jsx)(Jd.Provider,{value:null,children:(0,a.jsx)(b,{in:u,onEnter:d,onEntering:f,onEntered:p,onExit:m,onExiting:g,onExited:v,mountOnEnter:y,unmountOnExit:_,children:(0,a.jsx)(l,{...c,ref:t,className:s()(o,w,u&&"active")})})})})}));Xb.displayName="TabPane";const Jb=Xb,Zb={eventKey:K().oneOfType([K().string,K().number]),title:K().node.isRequired,disabled:K().bool,tabClassName:K().string,tabAttrs:K().object},ew=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};ew.propTypes=Zb;const tw=Object.assign(ew,{Container:Kb,Content:Qb,Pane:Jb}),nw=t=>{let{isFriend:n,userDetails:r,friendsList:i,mutualFriends:s,friendRequests:o,renderFriendButton:l,uid:c,userID:u}=t;const[d,h]=(0,e.useState)(!1),f={coverPhoto:r.coverPhotoPhoto,profilePhoto:r.profilePhoto,name:r.name,about:r.about,dob:r.dob},p=e=>{let{aboutText:t}=e;const n=/((https?:\/\/)?(www\.)?[a-zA-Z0-9-]+\.[a-z]{2,}(\.[a-z]{2,})?(\/\S*)?)/gi,r=t.split(n);return(0,a.jsx)("p",{className:"mt-3",children:r.map(((e,t)=>{if(n.test(e)){const n=e.startsWith("http")?e:`https://${e}`;return(0,a.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",children:e},t)}return e}))})};return(0,a.jsxs)(_,{className:"mb-4 align-items-start",children:[u===c&&(0,a.jsx)(w,{xs:12,className:"d-flex justify-content-md-end justify-content-start ",children:(0,a.jsx)(ft,{variant:"outline-primary",onClick:()=>h(!0),children:(0,a.jsx)("i",{className:"bi bi-pencil"})})}),(0,a.jsx)(w,{xs:12,md:6,className:"d-flex flex-column flex-md-row align-items-start",children:(0,a.jsxs)("div",{className:"profile-section d-flex align-items-center",children:[(0,a.jsx)(Q,{src:r.profilePhoto||"/images/defaultProfile.png",roundedCircle:!0,alt:"Profile",className:"me-3",width:"100",height:"100",style:{objectFit:"cover"}}),(0,a.jsxs)("div",{className:"user-details",children:[(0,a.jsx)("h4",{className:"mb-2",style:{whiteSpace:"nowrap"},children:r.name}),(0,a.jsxs)("div",{className:"user-info",children:[(0,a.jsxs)("div",{className:"d-flex",style:{gap:"10px"},children:[(0,a.jsxs)("p",{className:"mb-1",children:[i.length," friends"]}),c===u?(0,a.jsxs)("p",{className:"mb-1",children:[o.length," friend requests"]}):(0,a.jsxs)("p",{className:"mb-1",children:[s.length," mutual friends"]})]}),(0,a.jsxs)("p",{className:"mb-1",children:["Joined ",new Date(r.joinedDate).toLocaleDateString()]})]})]})]})}),u!==c&&(0,a.jsx)(w,{xs:12,className:"d-flex justify-content-end mt-3 mt-md-0",children:(0,a.jsxs)("div",{className:"d-flex flex-md-row-reverse",style:{gap:"10px"},children:[l(),n&&(0,a.jsx)(Ln,{to:`/messages/${u}`,className:"",children:(0,a.jsx)(ft,{variant:"secondary",children:"Message"})})]})}),(0,a.jsx)(w,{xs:12,children:(0,a.jsx)(p,{aboutText:r.about})}),(0,a.jsx)(D_,{show:d,handleClose:()=>h(!1),currentUserDetails:f})]})},rw=e=>{let{isFriend:t,friendRequestSent:n,friendRequestReceived:r,handleFriendToggle:i}=e;return t?(0,a.jsx)(ft,{variant:"danger",onClick:i,children:"Remove Friend"}):n?(0,a.jsx)(ft,{variant:"secondary",onClick:i,children:"Cancel Request"}):r?(0,a.jsx)(ft,{variant:"danger",onClick:i,children:"Reject Request"}):(0,a.jsx)(ft,{variant:"primary",onClick:i,children:"Add Friend"})},iw=e=>{let{posts:t,currentUserID:n}=e;return(0,a.jsx)(tw.Pane,{eventKey:"posts",children:t.length>0?t.map(((e,t)=>(0,a.jsx)(qu,{post:e,currentUserID:n},t))):(0,a.jsx)("p",{children:"No posts available."})})},sw=async e=>{const t=Su(zu(),e);try{await function(e){return Mc("remove",e._path),Pu(e,null)}(t),console.log("Data deleted successfully.")}catch(xs){console.error("Error deleting data:",xs)}},aw=async(e,t)=>{try{await sw(`friend/${t}/Friends/${e}`),await sw(`friend/${e}/Friends/${t}`)}catch(xs){console.error("Error removing friend:",xs)}},ow=e=>{let{user:t,onRemoveFriend:n,isCurrentUser:r}=e;return(0,a.jsx)("div",{className:"friend-card p-3 mb-3 border rounded shadow-sm",children:(0,a.jsxs)("div",{className:"d-flex flex-wrap align-items-center",children:[(0,a.jsx)("img",{src:t.profilePhoto||"/images/defaultProfile.png",alt:t.name,className:"rounded-circle",style:{width:"50px",height:"50px",marginRight:"15px"}}),(0,a.jsx)("div",{className:"flex-grow-1",children:(0,a.jsx)(Ln,{to:`/${t.id}`,className:"text-dark fw-bold",children:t.name})}),r&&(0,a.jsxs)("div",{className:"d-flex justify-content-end mt-2",children:[(0,a.jsx)("button",{className:"btn btn-danger btn-sm me-2 mb-2 mb-md-0",onClick:n,children:"Remove Friend"}),(0,a.jsx)(Ln,{to:`/messages/${t.id}`,className:"",children:(0,a.jsx)("button",{className:"btn btn-primary btn-sm",children:"Message"})})]})]})})},lw=e=>{let{user:t,currentUser:n}=e;return(0,a.jsx)("div",{className:"friend-request-card p-3 mb-3 border rounded shadow-sm",children:(0,a.jsxs)("div",{className:"d-flex flex-wrap align-items-center",children:[(0,a.jsx)(Q,{src:t.profilePhoto||"/images/defaultProfile.png",roundedCircle:!0,style:{width:"50px",height:"50px",marginRight:"15px"}}),(0,a.jsx)("div",{className:"flex-grow-1",children:(0,a.jsx)("h5",{className:"fw-bold mb-0",children:t.name})}),(0,a.jsxs)("div",{className:"d-flex justify-content-end mt-2",children:[(0,a.jsx)(ft,{variant:"success",className:"me-2 mb-2 mb-md-0",onClick:()=>(async(e,t)=>{const n=zu();try{const r=Su(n,`friend/${t}/Friends/${e}`);await Pu(r,{dateAdded:Date.now()});const i=Su(n,`friend/${e}/Friends/${t}`);await Pu(i,{dateAdded:Date.now()}),await sw(`friend/${t}/Friendrequest/${e}`),await sw(`friend/${e}/Friendrequest/${t}`),await sw(`notifications/${t}/Friendrequest/${e}`)}catch(xs){console.error("Error accepting friend request:",xs)}})(t.id,n),children:"Accept"}),(0,a.jsx)(ft,{variant:"danger",onClick:()=>(async(e,t)=>{try{await sw(`friend/${t}/Friendrequest/${e}`),await sw(`friend/${e}/Friendrequest/${t}`),await sw(`notifications/${t}/Friendrequest/${e}`)}catch(xs){console.error("Error rejecting friend request:",xs)}})(t.id,n),children:"Reject"})]})]})})},cw=t=>{let{friendsList:n,mutualFriends:r,friendRequests:i,isCurrentUser:s,currentUserID:o}=t;const[l,c]=(0,e.useState)([]),[u,d]=(0,e.useState)([]),[h,f]=(0,e.useState)([]);return(0,e.useEffect)((()=>{(async()=>{const e=await Promise.all(n.map((async e=>await L_(`UsersDetails/${e}`))));c(e)})(),(async()=>{const e=await Promise.all(i.map((async e=>await L_(`UsersDetails/${e.id}`))));d(e)})(),(async()=>{const e=await Promise.all(r.map((async e=>await L_(`UsersDetails/${e}`))));f(e)})()}),[n,i,r]),(0,a.jsx)(tw.Pane,{eventKey:"friends",children:(0,a.jsxs)(tw.Container,{defaultActiveKey:"friendsList",children:[(0,a.jsxs)(gh,{variant:"tabs",children:[(0,a.jsx)(gh.Item,{children:(0,a.jsx)(gh.Link,{eventKey:"friendsList",children:"Friends List"})}),s?(0,a.jsx)(gh.Item,{children:(0,a.jsx)(gh.Link,{eventKey:"friendRequests",children:"Friend Requests"})}):(0,a.jsx)(gh.Item,{children:(0,a.jsx)(gh.Link,{eventKey:"mutualFriends",children:"Mutual Friends"})})]}),(0,a.jsxs)(tw.Content,{className:"mt-4",children:[(0,a.jsx)(tw.Pane,{eventKey:"friendsList",children:(0,a.jsx)(_,{className:"gx-4 gy-3",children:l.length>0?l.map(((e,t)=>(0,a.jsx)(w,{xs:12,sm:6,lg:4,children:(0,a.jsx)(ow,{user:e,onRemoveFriend:()=>aw(e.id,o),isCurrentUser:s})},t))):(0,a.jsx)("p",{children:"No friends found."})})}),s?(0,a.jsx)(tw.Pane,{eventKey:"friendRequests",children:(0,a.jsx)(_,{className:"gx-4 gy-3",children:u.length>0?u.map(((e,t)=>(0,a.jsx)(w,{xs:12,sm:6,lg:4,children:(0,a.jsx)(lw,{user:e,currentUser:o})},t))):(0,a.jsx)("p",{children:"No friend requests found."})})}):(0,a.jsx)(tw.Pane,{eventKey:"mutualFriends",children:(0,a.jsx)(_,{className:"gx-4 gy-3",children:h.length>0?h.map(((e,t)=>(0,a.jsx)(w,{xs:12,sm:6,lg:4,children:(0,a.jsx)(ow,{user:e,onRemoveFriend:()=>aw(e.id,o)})},t))):(0,a.jsx)("p",{children:"No mutual friends found."})})})]})]})})},uw=e=>{const t=e.match(/\.([a-zA-Z0-9]+)(\?.*)?$/),n=t?t[1].toLowerCase():"";return["mp4","webm","ogg"].includes(n)},dw=e=>{let{posts:t,previousProfilePhotos:n,previousCoverPhotos:r}=e;const i=[];return t.forEach((e=>{e.media&&e.media.length>0&&i.push(...e.media)})),i.push(...n,...r),(0,a.jsx)(tw.Pane,{eventKey:"media",children:(0,a.jsx)(_,{children:i.length>0?i.map(((e,t)=>(0,a.jsx)(w,{xs:6,sm:6,md:4,lg:4,className:"mb-4 position-relative",children:uw(e)?(0,a.jsxs)("div",{className:"position-relative",children:[(0,a.jsx)("video",{src:e,className:"w-100",style:{objectFit:"cover",height:"auto"},controls:!1,muted:!0,preload:"metadata",children:"Your browser does not support the video tag."}),(0,a.jsx)("div",{className:"position-absolute bottom-0 start-0 p-2 text-light bg-dark bg-opacity-50 rounded-circle d-flex align-items-center justify-content-center",style:{width:"30px",height:"30px"},children:(0,a.jsx)("i",{className:"bi bi-play-fill"})})]}):(0,a.jsx)(Q,{src:e,alt:"Media",fluid:!0,style:{objectFit:"cover",width:"100%",height:"auto"}})},t))):(0,a.jsx)("p",{children:"No media available."})})})},hw=()=>{const[t,n]=(0,e.useState)(!1),[r,i]=(0,e.useState)(!1),[s,o]=(0,e.useState)(!1),{userId:l}=un(),{uid:c,loggedIn:u}=P_(),[d,h]=(0,e.useState)(null),[f,p]=(0,e.useState)([]),[m,g]=(0,e.useState)([]),[y,b]=(0,e.useState)([]),[x,k]=(0,e.useState)([]),C=async()=>{if(t)await Promise.all([sw(`friend/${l}/Friends/${c}`),sw(`friend/${c}/Friends/${l}`)]),n(!1);else if(r)await Promise.all([sw(`friend/${l}/Friendrequest/${c}`),sw(`friend/${c}/Friendrequest/${l}`),sw(`notifications/${c}/Friendrequest/${l}`)]),i(!1);else if(s)await Promise.all([sw(`friend/${l}/Friendrequest/${c}`),sw(`friend/${c}/Friendrequest/${l}`)]),o(!1);else{const e={Date:Date.now(),Request:"sent",id:l},t={Date:Date.now(),Request:"received",id:c};await Promise.all([Bu(`friend/${l}/Friendrequest/${c}`,t),Bu(`friend/${c}/Friendrequest/${l}`,e),Bu(`notifications/${l}/Friendrequest/${c}`,t),Bu(`notifications/${l}`,{viewed:!1})]),i(!0)}};(0,e.useEffect)((()=>{const e=A_(`UsersDetails/${l}`,(e=>{e&&h({name:e.name,profilePhoto:e.profilePhoto,coverPhoto:e.coverPhoto,dob:e.dob,about:e.about,joinedDate:e.date,posts:e.posts||[],previousCoverPhotos:e.previousCoverPhotos||[],previousProfilePhotos:e.previousProfilePhotos||[]})}));return()=>e()}),[l]),(0,e.useEffect)((()=>{E(),d&&S()}),[d,c]);const E=async()=>{let e;try{const t=`friend/${l}/Friends`,r=(await A_(t,(t=>{e=t?Object.keys(t):[],g(e),e&&n(e.includes(c))})),`friend/${c}/Friendrequest`);if(await A_(r,(e=>{var t,n;const r=e?Object.values(e).filter((e=>"received"===e.Request)):[];b(r),o(r.includes(l)&&"received"===(null===(t=e[l])||void 0===t?void 0:t.Request)),i(r.includes(l)&&"sent"===(null===(n=e[l])||void 0===n?void 0:n.Request))})),l!==c&&e){A_(`friend/${c}/Friends`,(t=>{const n=t?Object.keys(t).filter((t=>e.includes(t))):[];k(n)}))}}catch(xs){console.error("Error fetching friends and requests:",xs)}},S=async()=>{try{A_("Posts/",(e=>{if(e){const t=Object.entries(e).filter((e=>{let[t,n]=e;return n.uid===l})).map((e=>{let[t,n]=e;return{postId:t,...n,username:d.name,profilePic:d.profilePhoto}}));p(t)}}))}catch(xs){console.error("Error fetching posts:",xs)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[(0,a.jsx)(U_,{loggedIn:u,uid:c}),(0,a.jsx)(w,{md:7,style:{overflowY:"scroll",paddingBottom:"50px"},children:d&&(0,a.jsxs)("div",{children:[(0,a.jsx)(_,{children:(0,a.jsx)(w,{children:(0,a.jsx)(Q,{src:d.coverPhoto||"/images/defaultCover.png",fluid:!0,className:"mb-3",style:{height:"150px"},alt:"Cover"})})}),(0,a.jsx)(nw,{userDetails:d,friendsList:m,mutualFriends:x,friendRequests:y,isFriend:t,renderFriendButton:()=>(0,a.jsx)(rw,{isFriend:t,friendRequestSent:r,friendRequestReceived:s,handleFriendToggle:C}),uid:c,userID:l}),(0,a.jsx)(_,{children:(0,a.jsx)(w,{children:(0,a.jsxs)(tw.Container,{defaultActiveKey:"posts",children:[(0,a.jsxs)(gh,{variant:"tabs",className:"d-flex justify-content-between",children:[(0,a.jsx)(gh.Item,{className:"flex-fill text-center",children:(0,a.jsx)(gh.Link,{eventKey:"posts",children:"Posts"})}),(0,a.jsx)(gh.Item,{className:"flex-fill text-center",children:(0,a.jsx)(gh.Link,{eventKey:"friends",children:"Friends"})}),(0,a.jsx)(gh.Item,{className:"flex-fill text-center",children:(0,a.jsx)(gh.Link,{eventKey:"media",children:"Media"})})]}),(0,a.jsxs)(tw.Content,{className:"mt-4",children:[(0,a.jsx)(iw,{posts:f,currentUserID:c}),(0,a.jsx)(cw,{friendsList:m,mutualFriends:x,friendRequests:y,isCurrentUser:l===c,currentUserID:l}),(0,a.jsx)(dw,{posts:f,previousProfilePhotos:d.previousProfilePhotos,previousCoverPhotos:d.previousCoverPhotos})]})]})})})]})}),(0,a.jsx)(z_,{})]})}),(0,a.jsx)(Eb,{uid:c})]})},fw=e=>{const t=e.match(/\.([a-zA-Z0-9]+)(\?.*)?$/),n=t?t[1].toLowerCase():"";return["mp4","webm","ogg"].includes(n)},pw=e=>{switch(e.split(".").pop().toLowerCase()){case"mp4":default:return"video/mp4";case"webm":return"video/webm";case"ogg":return"video/ogg"}},mw=t=>{let{commentIndex:n,comment:r,postID:i,currentUserID:s}=t;const{uid:o,date:l,postText:c,media:u,likes:d=[]}=r,[h,f]=(0,e.useState)(d),[p,m]=(0,e.useState)({profilePic:"",username:""}),g=h.includes(s);(0,e.useEffect)((()=>{(async()=>{try{const e=`UsersDetails/${o}`,t=await L_(e);t&&m({profilePic:t.profilePhoto,username:t.name})}catch(xs){console.error("Error fetching user details:",xs)}})()}),[o]);return(0,a.jsxs)(V,{className:"mb-3 comment-card",children:[(0,a.jsxs)(V.Header,{className:"d-flex align-items-center",children:[(0,a.jsx)(Ln,{to:`/${o}`,children:(0,a.jsx)(Q,{src:p.profilePic||"/images/defaultProfile.png",roundedCircle:!0,width:"30",height:"30",alt:`${p.username}'s profile picture`,className:"me-2",style:{cursor:"pointer"}})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(Ln,{to:`/${o}`,style:{textDecoration:"none",color:"inherit"},children:(0,a.jsx)("h6",{className:"mb-0",style:{cursor:"pointer"},children:p.username})}),(0,a.jsx)("small",{className:"text-muted",children:new Date(l).toLocaleString()})]})]}),(0,a.jsxs)(V.Body,{children:[c&&(0,a.jsx)(V.Text,{children:c}),u&&(0,a.jsx)("div",{style:{height:"150px",overflow:"hidden"},children:fw(u)?(0,a.jsxs)("video",{controls:!0,width:"100%",height:"100%",className:"d-block w-100",children:[(0,a.jsx)("source",{src:u,type:pw(u)}),"Your browser does not support the video tag."]}):(0,a.jsx)(V.Img,{variant:"top",src:u,alt:"Comment media",style:{objectFit:"contain"}})})]}),(0,a.jsx)(V.Footer,{className:"d-flex justify-content-end",children:(0,a.jsxs)(ft,{variant:"outline-primary",size:"sm",onClick:async()=>{const e=g?h.filter((e=>e!==s)):[...h,s];await Bu(`Posts/${i}/comments/${n}`,{likes:e}),f(e)},children:[(0,a.jsx)("i",{className:"bi bi-heart"+(g?"-fill":"")})," ",h.length," Like"]})})]})},gw=()=>{const{userId:t,postId:n}=un(),r=cn(),[i,s]=(0,e.useState)(null),[o,l]=(0,e.useState)([]),[c,u]=(0,e.useState)(null),{uid:d,loggedIn:h}=P_(),f=async e=>{if(e){const t=await(async(e,t)=>{try{const n=`UsersDetails/${t.uid}`,r=await L_(n);return{postId:e,...t,username:r.name,profilePic:r.profilePhoto}}catch(c){return console.error("Error fetching user data:",c),{postId:e,...t}}})(n,e);s(t),l(t.comments||[])}else s(null),l([])};return(0,e.useEffect)((()=>{const e=A_(`Posts/${n}`,f);return()=>e()}),[n]),(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[(0,a.jsx)(U_,{loggedIn:h,uid:d}),(0,a.jsx)(w,{md:7,className:" mx-auto px-0 px-md-3",style:{overflowY:"auto",paddingBottom:"50px"},children:(0,a.jsxs)(v,{className:"mt-4",children:[(0,a.jsxs)(_,{className:"mb-4",children:[(0,a.jsx)(w,{xs:"auto",children:(0,a.jsxs)(ft,{onClick:()=>r(-1),variant:"outline-primary",children:[(0,a.jsx)("i",{className:"bi bi-arrow-left"})," Back"]})}),(0,a.jsx)(w,{children:(0,a.jsx)("h2",{className:"text-left",children:"Post"})})]}),i?(0,a.jsx)(qu,{post:i,currentUserID:d}):(0,a.jsx)("p",{children:"Loading post..."}),c&&(0,a.jsx)("p",{className:"text-danger",children:c}),(0,a.jsx)(V,{className:"create-post-feed",children:(0,a.jsx)(V.Body,{children:(0,a.jsx)(R_,{commentDetails:{comments:o,postId:n,userId:t}})})}),(0,a.jsxs)(_,{className:"mt-2 mx-auto px-0 ",children:[(0,a.jsx)("h4",{children:"Comments"}),o.length>0?o.map(((e,t)=>(0,a.jsx)(mw,{commentIndex:t,comment:e,postID:n,currentUserID:d},t))):(0,a.jsx)("p",{children:"No comments yet. Be the first to comment!"})]})]})}),(0,a.jsx)(z_,{})]})}),(0,a.jsx)(Eb,{uid:d})]})},vw=e.createContext(null);vw.displayName="InputGroupContext";const yw=vw,_w=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="span",...o}=e;return r=h(r,"input-group-text"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));_w.displayName="InputGroupText";const bw=_w,ww=e.forwardRef(((t,n)=>{let{bsPrefix:r,size:i,hasValidation:o,className:l,as:c="div",...u}=t;r=h(r,"input-group");const d=(0,e.useMemo)((()=>({})),[]);return(0,a.jsx)(yw.Provider,{value:d,children:(0,a.jsx)(c,{ref:n,...u,className:s()(l,r,i&&`${r}-${i}`,o&&"has-validation")})})}));ww.displayName="InputGroup";const xw=Object.assign(ww,{Text:bw,Radio:e=>(0,a.jsx)(bw,{children:(0,a.jsx)(xh,{type:"radio",...e})}),Checkbox:e=>(0,a.jsx)(bw,{children:(0,a.jsx)(xh,{type:"checkbox",...e})})}),kw=async e=>{let{currentUserId:t,recipientUserId:n,chatId:r,messageContent:i,messageType:s,isGroupChat:a=!1,groupParticipants:o=[],room:l}=e,c=r;const u=zu();let d;if(o&&(d=Object.keys(o)),!c){c=Nu(Su(u,"Message")).key}const h=Date.now(),f=`-MSG${h}`,p={};a?d.forEach((e=>{p[e]=e===t})):(p[t]=!0,p[n]=!1);const m={sender:t,message:i,timestamp:h,readBy:p,messageType:s,room:l},g=`Messages/${c}/${f}`;await Bu(g,m);const v={lastMessage:i,lastMessageTimestamp:h},y=`Chats/${c}`;await Bu(y,v);const _=a?d:[t,n],b=e=>a?d.filter((t=>t!==e)):e===n?t:n;for(const w of _){const e=b(w),t=`UserChats/${w}/${a?c:e}`,n={lastMessage:i,lastMessageTimestamp:h,isGroupChat:a,chatWith:e,id:c};await Bu(t,n)}},Cw=async(e,t,n,r,i)=>{const s=`Messages/${e}/${n}`,a={requestStatus:r};await Bu(s,a),r&&(window.location.href=`/Games/${t}/${i}`)},Ew=t=>{let{message:n,currentUser:r,isGroupChat:i,chatId:s}=t;const[o,l]=(0,e.useState)(!1),c=n.sender===r,u="media"===n.messageType,d="GameRequest"===n.messageType,h=e=>{const t=`-MSG${n.timestamp}`;Cw(s,n.message,t,e,n.room)};(0,e.useEffect)((()=>{if(d&&void 0===n.requestStatus){(new Date).getTime()-new Date(n.timestamp).getTime()>6e5&&h(!1)}}),[d,n,s]);const f=e=>{const t=e.match(/\.([a-zA-Z0-9]+)(\?.*)?$/),n=t?t[1].toLowerCase():"";return["mp4","webm","ogg"].includes(n)};return(0,a.jsxs)("div",{className:"chat-message "+(c?"sent":"received"),children:[!c&&i&&(0,a.jsx)("div",{className:"profile-photo-container",children:(0,a.jsx)("img",{src:n.senderProfilePhoto||"/images/defaultProfile.png",alt:"sender profile",className:"sender-profile-photo"})}),(0,a.jsx)(V,{className:"message-bubble "+(c?"sender":"receiver"),children:(0,a.jsxs)(V.Body,{children:[!c&&i&&(0,a.jsx)("div",{className:"sender-name",children:n.senderName}),d?(0,a.jsxs)("div",{children:[(0,a.jsxs)(V.Text,{children:[c?"You":"User"," sent a ",(0,a.jsx)("b",{children:n.message})," game request"]}),void 0===n.requestStatus&&!c&&(0,a.jsxs)("div",{className:"d-flex gap-2 mt-2",children:[(0,a.jsx)(ft,{variant:"success",onClick:()=>h(!0),children:"Accept"}),(0,a.jsx)(ft,{variant:"danger",onClick:()=>h(!1),children:"Reject"})]})]}):u?(0,a.jsx)("div",{onClick:()=>l(!0),className:"image-message",children:f(n.message)?(0,a.jsxs)("div",{className:"position-relative",children:[(0,a.jsx)("video",{src:n.message,className:"w-100",style:{objectFit:"cover",height:"auto"},controls:!1,muted:!0,preload:"metadata",children:"Your browser does not support the video tag."}),(0,a.jsx)("div",{className:"position-absolute bottom-0 start-0 p-2 text-light bg-dark bg-opacity-50 rounded-circle d-flex align-items-center justify-content-center",style:{width:"30px",height:"30px"},children:(0,a.jsx)("i",{className:"bi bi-play-fill"})})]}):(0,a.jsx)("img",{src:n.message,alt:"sent image",className:"message-image-thumbnail"})}):(0,a.jsx)(V.Text,{children:n.message}),(0,a.jsx)(V.Footer,{className:"message-timestamp",children:(0,a.jsx)("small",{className:"text-muted",children:new Date(n.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})})})]})}),(0,a.jsx)(Kd,{show:o,onHide:()=>l(!1),centered:!0,children:(0,a.jsx)(Kd.Body,{className:"image-modal-body",children:f(n.message)?(0,a.jsxs)("video",{controls:!0,width:"100%",height:"100%",className:"d-block w-100",style:{objectFit:"contain",margin:"auto"},children:[(0,a.jsx)("source",{src:n.message,type:(e=>{switch(e.split(".").pop().toLowerCase()){case"mp4":default:return"video/mp4";case"webm":return"video/webm";case"ogg":return"video/ogg"}})(n.message)}),"Your browser does not support the video tag."]}):(0,a.jsx)("img",{src:n.message,alt:"full image",className:"full-image"})})})]})},Sw={SinglePlayer:[{name:"Brick Break",imgSrc:"/images/game1.jpg",path:"BrickBreak"},{name:"Image Slide Puzzle",imgSrc:"/images/game2.jpg",path:"ImageSlidePuzzle"},{name:"Ball Fall",imgSrc:"/images/game3.jpg",path:"BallFall"},{name:"TicTacToe",imgSrc:"/images/game3.jpg",path:"TicTacToe"},{name:"Super TicTacToe",imgSrc:"/images/game3.jpg",path:"SuperTicTacToe"}],MultiPlayer:[{name:"Chess",imgSrc:"/images/game1.jpg",path:"Chess",maxPlayers:2},{name:"Whot",imgSrc:"/images/game2.jpg",path:"Whot",maxPlayers:4},{name:"TicTacToe",imgSrc:"/images/game2.jpg",path:"TicTacToe",maxPlayers:2},{name:"Super TicTacToe",imgSrc:"/images/game3.jpg",path:"SuperTicTacToe",maxPlayers:2}]},Iw=async(e,t,n)=>{let r={};r[n]={id:n,player:"Player1",online:!0},t.forEach(((e,t)=>{e!==n&&(r[e]={id:e,player:`Player${t+2}`,online:!1})}));const i=Nu(Su(w_,`Games/${e}/`)),s=i.key;return await Pu(i,{id:s,players:r}),s},Tw=async(e,t,n,r)=>{const i=`UserChats/${e}/${t}/id`;try{const s=await L_(i);await kw({currentUserId:e,recipientUserId:t,chatId:s,messageContent:n,messageType:"GameRequest",room:r})}catch(xs){console.error("Error sending game request:",xs)}},Nw=e=>{let{show:t,handleClose:n,uid:r,friendId:i}=e;return(0,a.jsxs)(Kd,{show:t,onHide:n,centered:!0,children:[(0,a.jsx)(Kd.Header,{closeButton:!0,className:"d-flex justify-content-between",children:(0,a.jsx)(Kd.Title,{children:"Select Game"})}),(0,a.jsx)(Kd.Body,{children:Sw.MultiPlayer.map((e=>(0,a.jsx)("div",{onClick:()=>(async e=>{const t=await Iw(e.name,[i],r);await Tw(r,i,e.name,t),window.location.href=`/Games/${e.path}/${t}`,n()})(e),className:"game-card w-100 mb-3",style:{cursor:"pointer"},children:(0,a.jsx)(V,{className:" bg-light w-100",children:(0,a.jsx)(V.Body,{children:(0,a.jsx)(V.Title,{children:e.name})})})},e.name)))})]})},Pw=t=>{let{chatId:n,uid:r,messages:i,recipientDetails:s}=t;const[o,l]=(0,e.useState)(""),[c,u]=(0,e.useState)([]),[d,h]=(0,e.useState)(!1),[f,p]=(0,e.useState)(0),m=(0,e.useRef)(null);let g="/images/defaultProfile.png",v=!1;const[y,_]=(0,e.useState)(!1);s&&(v=s.isGroupChat,g=s.profilePhoto?s.profilePhoto:v?"/images/defaultGroup.png":"/images/defaultProfile.png");const b=e=>{const t=e.type;return["video/mp4","video/webm","video/ogg","video/mov"].some((e=>e.includes(t)))};(0,e.useEffect)((()=>{m.current&&m.current.scrollIntoView()}),[i]);const w=(e=>e.reduce(((e,t)=>{const n=new Date(t.timestamp).toLocaleDateString();return e[n]||(e[n]=[]),e[n].push(t),e}),{}))(i);return(0,a.jsx)(a.Fragment,{children:s&&(0,a.jsxs)("div",{className:"chat-container",children:[(0,a.jsxs)("div",{className:"chat-header d-flex align-items-center",children:[(0,a.jsx)("button",{className:"back-button me-2",children:(0,a.jsx)("i",{className:"bi bi-arrow-left"})}),(0,a.jsx)("img",{src:g,alt:"Recipient Profile",className:"recipient-photo me-2"}),(0,a.jsx)("span",{className:"recipient-username",children:s.name}),!v&&(0,a.jsx)("button",{className:"btn ms-auto",onClick:()=>_(!0),children:(0,a.jsx)("i",{className:"bi bi-controller",style:{fontSize:"1.5rem"}})})]}),(0,a.jsxs)("div",{className:"chat-body d-flex flex-column h-100",children:[(0,a.jsxs)("div",{className:"recipient-info",children:[(0,a.jsx)("img",{src:g,alt:"Recipient Profile",className:"recipient-photo-large"}),(0,a.jsx)("h5",{className:"recipient-username-large",children:s.name}),(0,a.jsxs)("p",{className:"recipient-joined-date",children:[s.isGroupChat?"Created:":"Joined:"," ",new Date(s.date).toLocaleDateString()]})]}),(0,a.jsx)("div",{className:"messages-container flex-grow-1",children:Object.entries(w).map((e=>{let[t,i]=e;return(0,a.jsxs)("div",{className:"message-group",children:[(0,a.jsx)("div",{className:"date-label",style:{textAlign:"center",margin:"10px 0"},children:(0,a.jsx)("strong",{children:t})}),i.map((e=>(0,a.jsx)(Ew,{message:e,currentUser:r,isGroupChat:v,chatId:n},e.id)))]},t)}))}),d&&c.map(((e,t)=>(0,a.jsx)("div",{className:"chat-message sent",children:(0,a.jsx)(V,{className:"message-bubble sender",children:(0,a.jsxs)(V.Body,{children:[(0,a.jsxs)("div",{className:"image-message",children:[b(e)?(0,a.jsx)("div",{className:"position-relative",children:(0,a.jsx)("video",{src:URL.createObjectURL(e),className:"w-100",style:{objectFit:"cover",height:"auto"},controls:!1,muted:!0,preload:"metadata",children:"Your browser does not support the video tag."})}):(0,a.jsx)("img",{src:URL.createObjectURL(e),alt:"preview",className:"message-image-thumbnail"}),(0,a.jsxs)("div",{className:"progress-circle",children:[(0,a.jsxs)("svg",{className:"progress-circle-svg",children:[(0,a.jsx)("circle",{cx:"30",cy:"30",r:"28"}),(0,a.jsx)("circle",{cx:"30",cy:"30",r:"28",style:{strokeDashoffset:`calc(176 - (176 * ${f}) / 100)`}})]}),(0,a.jsxs)("div",{className:"progress-text",children:[Math.round(f),"%"]})]})]}),(0,a.jsx)(V.Footer,{className:"message-timestamp",children:(0,a.jsx)("small",{className:"text-muted",children:new Date(Date.now()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})})})]})})},t))),(0,a.jsx)("div",{ref:m})]}),(0,a.jsx)(Gh,{onSubmit:async e=>{if(e.preventDefault(),o.trim()||0!==c.length)try{let e=o.trim(),t="text";if(c.length>0){h(!0);e=(await T_(c,"chat_files",r,((e,t)=>{p(t)})))[0],t="media",h(!1),p(0),u([])}await kw({currentUserId:r,recipientUserId:s.id,chatId:n,messageContent:e,messageType:t,isGroupChat:v,groupParticipants:s.members}),l("")}catch(xs){console.error("Error sending message:",xs)}},className:"message-form",children:(0,a.jsxs)(Gh.Group,{className:"message-input-group",children:[(0,a.jsxs)("div",{className:"input-wrapper",children:[(0,a.jsx)(Gh.Control,{type:"text",placeholder:"Type a message...",value:o,onChange:e=>l(e.target.value),className:"message-input"}),c.map(((e,t)=>(0,a.jsxs)("div",{className:"image-preview-container",children:[e.type.startsWith("image/")?(0,a.jsx)("img",{src:URL.createObjectURL(e),alt:"Selected Image",className:"image-preview"}):e.type.startsWith("video/")?(0,a.jsx)("video",{src:URL.createObjectURL(e),alt:"Selected Video",className:"image-preview",controls:!1,muted:!0,preload:"metadata"}):null,(0,a.jsx)(ft,{variant:"danger",onClick:()=>(e=>{u((t=>t.splice(e))),p(0)})(t),className:"remove-image-button",children:"\xd7"})]},t))),(0,a.jsx)("input",{type:"file",multiple:!0,accept:"image/*,video/*",onChange:e=>{const t=Array.from(e.target.files).filter((e=>["image/jpeg","image/png","image/gif","video/mp4","video/webm","video/ogg","video/mov"].includes(e.type)));u(t)},className:"file-input",style:{display:"none"},id:"file-upload"}),(0,a.jsx)("label",{htmlFor:"file-upload",className:"file-upload-label",children:(0,a.jsx)("i",{className:"bi bi-paperclip"})})]}),(0,a.jsx)(ft,{variant:"primary",type:"submit",className:"send-button",children:(0,a.jsx)("i",{className:"bi bi-send"})})]})}),(0,a.jsx)(Nw,{show:y,handleClose:()=>_(!1),uid:r,friendId:s.id})]})})},Rw=e.forwardRef(((e,t)=>{let{bsPrefix:n,active:r,disabled:i,eventKey:o,className:l,variant:c,action:u,as:d,...f}=e;n=h(n,"list-group-item");const[p,m]=th({key:Xd(o,f.href),active:r,...f}),g=J((e=>{if(i)return e.preventDefault(),void e.stopPropagation();p.onClick(e)}));i&&void 0===f.tabIndex&&(f.tabIndex=-1,f["aria-disabled"]=!0);const v=d||(u?f.href?"a":"button":"div");return(0,a.jsx)(v,{ref:t,...f,...p,onClick:g,className:s()(l,n,m.isActive&&"active",i&&"disabled",c&&`${n}-${c}`,u&&`${n}-action`)})}));Rw.displayName="ListGroupItem";const jw=Rw,Ow=e.forwardRef(((e,t)=>{const{className:n,bsPrefix:r,variant:i,horizontal:o,numbered:l,as:c="div",...u}=ye(e,{activeKey:"onSelect"}),d=h(r,"list-group");let f;return o&&(f=!0===o?"horizontal":`horizontal-${o}`),(0,a.jsx)(lh,{ref:t,...u,as:c,className:s()(n,d,i&&`${d}-${i}`,f&&`${d}-${f}`,l&&`${d}-numbered`)})}));Ow.displayName="ListGroup";const Dw=Object.assign(Ow,{Item:jw}),Lw=e=>{let{chat:t}=e;const n=t.isGroupChat?t.id:t.chatWith;let r="/images/defaultProfile.png";return t&&(r=t.profilePhoto?t.profilePhoto:t.isGroupChat?"/images/defaultGroup.png":"/images/defaultProfile.png"),(0,a.jsx)(Ln,{to:`/messages/${n}`,className:"chat-link",children:(0,a.jsxs)(Dw.Item,{className:"chat-list-item",children:[(0,a.jsxs)(_,{children:[(0,a.jsx)(w,{xs:2,className:"text-center",children:(0,a.jsx)("img",{src:r,alt:t.name,className:"chat-profile-pic"})}),(0,a.jsxs)(w,{xs:8,children:[(0,a.jsx)("strong",{className:"chat-name",children:t.name}),(0,a.jsx)("br",{}),(0,a.jsxs)("span",{className:"chat-preview",children:["image"===t.lastMessageType?(0,a.jsx)("span",{className:"message-icon",children:"\ud83d\uddbc\ufe0f"}):"video"===t.lastMessageType?(0,a.jsx)("span",{className:"message-icon",children:"\ud83c\udfa5"}):null,t.lastMessage]})]})]}),(0,a.jsx)(w,{className:"text-right",children:(0,a.jsx)("span",{className:"chat-time",children:new Date(t.lastMessageTimestamp).toLocaleString()})})]},t.id)},t.id)},Mw=t=>{var n;let{uid:r,show:i,onClose:s,friendsList:o,groupDetails:l}=t;l&&(l.isGroupChat||(l=null));const[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(""),[f,p]=(0,e.useState)(""),[m,g]=(0,e.useState)([]),v=(null===(n=l)||void 0===n?void 0:n.createdBy)===r;(0,e.useEffect)((()=>{l?(h(l.profilePhoto),p(l.name),g(Object.keys(l.members||{}))):(h(),p(),g([]))}),[l]);return(0,a.jsxs)(Kd,{show:i,onHide:s,centered:!0,children:[(0,a.jsxs)(Kd.Header,{className:"d-flex justify-content-between",children:[(0,a.jsx)(ft,{variant:"close",onClick:s,className:"m-0"}),(v||!l)&&(0,a.jsx)(ft,{variant:"primary",onClick:async()=>{await(async e=>{let{groupName:t,selectedFriends:n,groupIcon:r,groupIconUrl:i,uid:s,groupDetails:a,onClose:o}=e;if(!(n.length<1))try{let e=i;r&&(e=(await T_([r],"GroupIcons",t))[0]);const l=zu();let c=a?a.id:null;if(!a){const e=Nu(Su(l,"Group"));c=e.key}const u={groupName:t,groupIcon:e,members:{[s]:!0,...n.reduce(((e,t)=>(e[t]=!0,e)),{})},createdBy:a?a.createdBy:s,createdAt:a?a.date:Date.now(),id:a?a.createdBy:c},d=`Groups/${c}`;await Bu(d,u);const h=a?[...Object.keys(a.members),...n,s]:[...n,s];await Promise.all(h.map((async e=>{const t={lastMessage:"Group updated",lastMessageTimestamp:Date.now(),isGroupChat:!0,chatWith:c,id:c};await Bu(`UserChats/${e}/${c}`,t)}))),o()}catch(xs){console.error("Error updating group:",xs)}})({groupName:f,selectedFriends:m,groupIcon:c,groupIconUrl:d,uid:r,groupDetails:l,onClose:s})},className:"ms-auto",children:"Save"})]}),(0,a.jsxs)(Kd.Body,{className:"text-center",children:[(0,a.jsx)("div",{className:"d-flex justify-content-center mb-4 position-relative",children:(0,a.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,a.jsx)(Q,{src:d||"/images/defaultGroup.png",roundedCircle:!0,style:{height:"100px",width:"100px",marginRight:"20px",position:"relative"},alt:"Group Icon"}),(v||!l)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){u(t);const e=URL.createObjectURL(t);h(e)}},style:{display:"none"},id:"group-icon-upload"}),(0,a.jsx)("label",{htmlFor:"group-icon-upload",className:"d-flex align-items-center justify-content-center",style:{cursor:"pointer",backgroundColor:"rgba(255, 255, 255, 0.7)",borderRadius:"50%",padding:"10px",width:"40px",height:"40px",position:"absolute",top:"50%",left:"50%",transform:"translate(-75%, -50%)"},children:(0,a.jsx)("i",{className:"bi bi-camera",style:{fontSize:"1.5rem"}})})]})]})}),(0,a.jsxs)(Gh.Group,{controlId:"groupNameInput",className:"mb-3 text-start",children:[(0,a.jsx)(Gh.Label,{children:"Group Name"}),(0,a.jsx)(Gh.Control,{type:"text",placeholder:"Enter group name",value:f,onChange:e=>p(e.target.value),disabled:!v&&l})]}),(0,a.jsxs)(Gh.Group,{controlId:"friendSearchInput",className:"mb-3 text-start",children:[(0,a.jsx)(Gh.Label,{children:v||!l?"Add Friends":"Members"}),(0,a.jsx)(xw,{children:(0,a.jsx)(Gh.Control,{type:"text",placeholder:"Search friends"})})]}),(0,a.jsx)("div",{className:"friend-list",children:o.map((e=>{const t=m.includes(e.id);return(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)(Q,{src:e.profilePhoto||"/images/defaultGroup.png",roundedCircle:!0,style:{height:"40px",width:"40px",marginRight:"10px"}}),(0,a.jsx)("span",{children:e.name})]}),(v||!l)&&(0,a.jsx)(ft,{variant:t?"danger":"success",onClick:()=>{return t=e.id,void g((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t},children:t?"Remove":"Add"})]},e.id)}))})]})]})},Aw=t=>{let{show:n,handleClose:r,friendsList:i}=t;const[s,o]=(0,e.useState)(""),[l,c]=(0,e.useState)(i);return(0,e.useEffect)((()=>{const e=i.filter((e=>e.name.toLowerCase().includes(s.toLowerCase())));c(e)}),[s,i]),(0,a.jsxs)(Kd,{show:n,onHide:r,centered:!0,children:[(0,a.jsx)(Kd.Header,{closeButton:!0,className:"d-flex justify-content-between",children:(0,a.jsx)(Kd.Title,{children:"NewChat"})}),(0,a.jsxs)(Kd.Body,{children:[(0,a.jsx)(xw,{className:"mb-3",children:(0,a.jsx)(Gh.Control,{type:"text",placeholder:"Search friends...",value:s,onChange:e=>o(e.target.value)})}),(0,a.jsx)(Dw,{variant:"flush",children:l.map((e=>(0,a.jsxs)(Dw.Item,{className:"d-flex align-items-center",children:[(0,a.jsx)("img",{src:e.profilePhoto||"/images/defaultProfile.png",alt:e.name,className:"rounded-circle",style:{width:"40px",height:"40px",marginRight:"10px"}}),(0,a.jsx)(Ln,{to:`/messages/${e.id}`,className:"text-decoration-none",children:e.name})]},e.id)))})]})]})},Fw=()=>{const{userId:t}=un(),[n,r]=(0,e.useState)(""),[i,s]=(0,e.useState)([]),[o,l]=(0,e.useState)(null),[c,u]=(0,e.useState)([]),{uid:d,loggedIn:h}=P_(),[f,p]=(0,e.useState)(null),[m,g]=(0,e.useState)([]),[y,b]=(0,e.useState)(!1),[x,k]=(0,e.useState)(!1),C=()=>k(!0),E=async(e,t,n)=>{const r=e?`Groups/${t}`:`UsersDetails/${n}`,i=await L_(r);return i?{name:e?i.groupName:i.name,profilePhoto:e?i.groupIcon:i.profilePhoto,date:i.createdAt||i.date,id:i.id,...e&&{members:i.members,createdBy:i.createdBy},isGroupChat:e}:null};return(0,e.useEffect)((()=>{const e=A_(`UserChats/${d}`,(async e=>{if(e){const n=(await Promise.all(Object.keys(e).map((async t=>{const{chatWith:n,isGroupChat:r}=e[t],i={...e[t]},s=await E(r,e[t].id,n);return s?{...i,name:s.name,profilePhoto:s.profilePhoto}:i})))).sort(((e,t)=>t.lastMessageTimestamp-e.lastMessageTimestamp));s(n),t&&e[t]&&l(e[t].id)}}));return()=>e()}),[d,t]),(0,e.useEffect)((()=>{d&&(async()=>{g(await(async e=>{const t=await L_(`friend/${e}/Friends`);return t?(await Promise.all(Object.keys(t).map((async e=>{const t=await L_(`UsersDetails/${e}`);return t?{id:e,name:t.name,profilePhoto:t.profilePhoto}:null})))).filter(Boolean):[]})(d))})()}),[d]),(0,e.useEffect)((()=>{if(!o)return;const e=A_(`Messages/${o}`,(async e=>{if(!e)return u([]);const t=await L_(`UserChats/${d}/${o}`),n=(null===t||void 0===t?void 0:t.isGroupChat)||!1,r=await Promise.all(Object.keys(e).map((async t=>{const r={id:t,...e[t]};if(n){const e=await L_(`UsersDetails/${r.sender}`);e&&(r.senderName=e.name,r.senderProfilePhoto=e.profilePhoto||"/images/defaultProfile.png")}return r})));u(r)}));return()=>e()}),[o]),(0,e.useEffect)((()=>{if(!t||!o)return;const e=A_(`UserChats/${d}/${t}`,(async e=>{if(e){const n=await E(e.isGroupChat,o,t);p(n||null)}}));return()=>e()}),[t,o]),(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[(0,a.jsx)(U_,{uid:d,loggedIn:h}),(0,a.jsxs)(w,{md:10,lg:4,className:"d-flex flex-column "+(t?"d-none d-md-flex":""),children:[(0,a.jsxs)(Cb,{bg:"light",className:"justify-content-between",children:[(0,a.jsx)(Cb.Brand,{children:"Messages"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{className:"btn btn-outline-secondary me-2",title:"Create New Group",onClick:()=>b(!0),children:(0,a.jsx)("i",{className:"bi bi-people-fill"})}),(0,a.jsx)("button",{className:"btn btn-outline-secondary",title:"Start New Chat",onClick:C,children:(0,a.jsx)("i",{className:"bi bi-chat-dots-fill"})})]})]}),(0,a.jsx)(xw,{className:"mb-3",children:(0,a.jsx)(Gh.Control,{placeholder:"Search friends or groups",value:n,onChange:e=>r(e.target.value)})}),(0,a.jsx)("div",{className:"overflow-auto",style:{maxHeight:"calc(100vh - 120px)"},children:i.filter((e=>e.name.toLowerCase().includes(n.toLowerCase()))).map(((e,t)=>(0,a.jsx)(Lw,{chat:e},t)))})]}),(0,a.jsx)(w,{lg:6,className:"d-none d-lg-flex bg-light vh-100 justify-content-center align-items-center",children:t?(0,a.jsx)(Pw,{chatId:o,uid:d,messages:c,recipientDetails:f}):(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h5",{children:"Select a new message"}),(0,a.jsx)(ft,{variant:"primary",onClick:C,children:"Start a new chat"})]})}),t&&(0,a.jsx)(w,{xs:12,className:"d-lg-none ",children:(0,a.jsx)(Pw,{chatId:o,uid:d,messages:c,recipientDetails:f})}),(0,a.jsx)(Mw,{uid:d,show:y,onClose:()=>b(!1),friendsList:m,groupDetails:t?f:null,userId:t}),(0,a.jsx)(Aw,{friendsList:m,show:x,handleClose:()=>k(!1),purpose:"NewChat"})]})}),(0,a.jsx)(Eb,{uid:d})]})};function Uw(e){let t;return Ie(e,(e=>{null==t&&(t=e.props.eventKey)})),t}function $w(e){const{title:t,eventKey:n,disabled:r,tabClassName:i,tabAttrs:s,id:o}=e.props;return null==t?null:(0,a.jsx)(hh,{as:"li",role:"presentation",children:(0,a.jsx)(ph,{as:"button",type:"button",eventKey:n,disabled:r,id:o,className:i,...s,children:t})})}const zw=e=>{const{id:t,onSelect:n,transition:r,mountOnEnter:i=!1,unmountOnExit:s=!1,variant:o="tabs",children:l,activeKey:c=Uw(l),...u}=ye(e,{activeKey:"onSelect"});return(0,a.jsxs)(qb,{id:t,activeKey:c,onSelect:n,transition:Vb(r),mountOnEnter:i,unmountOnExit:s,children:[(0,a.jsx)(gh,{id:t,...u,role:"tablist",as:"ul",variant:o,children:Se(l,$w)}),(0,a.jsx)(Qb,{children:Se(l,(e=>{const t={...e.props};return delete t.title,delete t.disabled,delete t.tabClassName,delete t.tabAttrs,(0,a.jsx)(Jb,{...t})}))})]})};zw.displayName="Tabs";const Bw=zw,Ww=t=>{let{}=t;const[n,r]=(0,e.useState)("Activities"),[i,s]=(0,e.useState)([]),[o,l]=(0,e.useState)([]),[c,u]=(0,e.useState)({}),{uid:d,loggedIn:h}=P_();(0,e.useEffect)((()=>{d&&(async e=>{try{const t=await F_(e);u(t)}catch(xs){console.error("Error fetching notifications:",xs)}})(d)}),[d]),(0,e.useEffect)((()=>{const e=async e=>{const t=await L_(`UsersDetails/${e}`);return{uid:e,name:null===t||void 0===t?void 0:t.name,profilePhoto:null===t||void 0===t?void 0:t.profilePhoto}};(async()=>{if(null===c||void 0===c||!c.Friendrequest)return;const t=await Promise.all(Object.values(c.Friendrequest).map((t=>e(t.uid).then((e=>({...t,...e}))))));l(t)})(),(async()=>{if(null===c||void 0===c||!c.Activities)return;const t=await Promise.all(Object.entries(c.Activities).map((async t=>{let[n,r]=t;return{postId:n,comments:r.comments?await Promise.all(r.comments.map((async t=>{const n=await e(t.uid);return{...t,user:n}}))):[],likes:r.likes?await Promise.all(r.likes.map((async t=>{const n=await e(t.uid);return{...t,user:n}}))):[],reposts:r.reposts?await Promise.all(r.reposts.map((async t=>{const n=await e(t.uid);return{...t,user:n}}))):[]}})));s(t)})()}),[c]);return(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[(0,a.jsx)(U_,{loggedIn:h,uid:d}),(0,a.jsx)(w,{md:7,className:" mx-auto px-0 px-md-3",style:{overflowY:"scroll",paddingBottom:"50px"},children:(0,a.jsxs)(Bw,{id:"notifications-tabs",activeKey:n,onSelect:e=>r(e),className:"mb-3",children:[(0,a.jsx)(tw,{eventKey:"Activities",title:"Activities",children:(()=>{const e=(e=>e.reduce(((e,t)=>([...t.comments.map((e=>({type:"comment",...e,postId:t.postId}))),...t.likes.map((e=>({type:"like",...e,postId:t.postId}))),...t.reposts.map((e=>({type:"repost",...e,postId:t.postId})))].forEach((t=>{const n=new Date(t.date).toLocaleDateString();e[n]||(e[n]={});const r=`${t.postId}-${t.type}`;e[n][r]||(e[n][r]={activities:[],lastUser:null,lastActivityTime:t.date,count:0}),e[n][r].activities.push(t),e[n][r].lastUser=t.user,e[n][r].lastActivityTime=t.date,e[n][r].count++})),e)),{}))(i);return Object.keys(e).sort(((e,t)=>new Date(t)-new Date(e))).map((t=>{const n=e[t],r=Object.values(n).sort(((e,t)=>t.lastActivityTime-e.lastActivityTime));return(0,a.jsxs)("div",{children:[(0,a.jsx)("h6",{className:"text-muted",children:t}),r.map((e=>{const{activities:t,lastUser:n,count:r}=e;let i="";switch(t[0].type){case"comment":i=1===r?`${n.name} commented on your post.`:`${n.name} and ${r-1} others commented on your post.`;break;case"like":i=1===r?`${n.name} liked your post.`:`${n.name} and ${r-1} others liked your post.`;break;case"repost":i=1===r?`${n.name} reposted your post.`:`${n.name} and ${r-1} others reposted your post.`}return(0,a.jsx)(V,{className:"mb-3",children:(0,a.jsxs)(V.Body,{className:"d-flex align-items-center",children:[(0,a.jsx)(Ln,{to:`/${n.uid}/${t[0].postId}`,children:(0,a.jsx)(Q,{src:n.profilePhoto||"/images/defaultProfile.png",roundedCircle:!0,width:"50",height:"50",alt:`${n.name}'s profile`,className:"me-3"})}),(0,a.jsx)(Ln,{to:`/${n.uid}/${t[0].postId}`,children:(0,a.jsx)(V.Text,{children:i})})]})},e.lastActivityTime)}))]},t)}))})()}),(0,a.jsx)(tw,{eventKey:"FriendRequests",title:"Friend Requests",children:(0,a.jsx)(_,{xs:1,sm:2,md:2,className:"g-3",children:o.map(((e,t)=>(0,a.jsx)(w,{children:(0,a.jsx)(lw,{user:e,currentUser:d})},t)))})})]})}),(0,a.jsx)(z_,{})]})}),(0,a.jsx)(Eb,{uid:d})]})};let Hw;const qw={RUNNING:0,GAMEOVER:1,STARTED:2,MENU:3};class Vw{constructor(e){this.gameManager=e,this.gamestate=qw.MENU,this.gameMode=null,this.room="",this.displayText=""}restart(){if(![qw.GAMEOVER,qw.MENU].includes(this.gamestate))return;var e,t;document.getElementById("displayText").innerText=3,e=3,t=this.gameManager,Hw=setInterval((()=>{--e>0&&(document.getElementById("displayText").innerText=e),0===e&&(clearInterval(Hw),t.gameControl.gamestate=qw.RUNNING,document.getElementById("displayText").style.display="none",document.getElementById("displayText").style.backgroundColor="transparent")}),1e3),this.gameManager.Pieces.Restart(),this.gameManager.playerTurn="Player1",this.gamestate=qw.STARTED,Gw(this.gameManager,this.playerId)}}const Gw=(e,t)=>{var n;const r=null===e||void 0===e||null===(n=e.gameControl)||void 0===n?void 0:n.room;A_(`Games/Chess/${r}/players`,(function(){var n;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((null===e||void 0===e||null===(n=e.gameControl)||void 0===n?void 0:n.gamestate)===qw.RUNNING)for(const i of Object.values(r))if(i.id!==t&&i.player===(null===e||void 0===e?void 0:e.playerTurn)){const t=e.Pieces.playerPieces[i.player],n=i.pieces.findIndex(((e,n)=>e.row!==t[n].row||e.column!==t[n].column));if(-1!==n){const t=i.pieces[n].row,r=i.pieces[n].column;e.Pieces.movePiece(n,t,r);break}}}))};class Kw{constructor(e){this.GameManager=e,this.ctx=e.ctx,this.lightImage=new Image,this.darkImage=new Image,this.highlightedImage=new Image,this.lightImage.src="/assets/Chess/square brown light_2x.png",this.darkImage.src="/assets/Chess/square brown dark_2x.png",this.highlightedImage.src="/assets/Chess/square gray light _2x.png",this.tiles=[];for(let t=0;t<8;t++)for(let e=0;e<8;e++)this.tiles.push({row:t,column:e,highlighted:!1,check:!1})}animate(){const e=this.GameManager.gameDimensions;this.ctx.fillStyle="#eee",this.ctx.fillRect(0,0,e,e);const t=(e-10)/8;this.tiles.forEach((e=>{let n=(e.row+e.column)%2===0?this.lightImage:this.darkImage;if(this.ctx.drawImage(n,e.column*t+5,e.row*t+5,t,t),e.highlighted||e.check){const n=this.ctx.getImageData(e.column*t+5,e.row*t+5,t,t),r=n.data;for(let t=0;t<r.length;t+=4)if(e.check)r[t]=255,r[t+1]=0,r[t+2]=0;else{const e=(r[t]+r[t+1]+r[t+2])/3;r[t]=e,r[t+1]=e,r[t+2]=e}this.ctx.putImageData(n,e.column*t+5,e.row*t+5)}}))}}let Yw;const Qw=(e,t,n,r,i)=>{switch(n){case"Rook":return Zw(e,t,[[-1,0],[1,0],[0,-1],[0,1]]);case"Bishop":return Zw(e,t,[[-1,-1],[-1,1],[1,-1],[1,1]]);case"Pawn":return tx(e,t,r,i);case"Knight":return nx(e,t,r,i);case"Queen":return Zw(e,t,[[-1,0],[1,0],[0,-1],[0,1],[-1,-1],[-1,1],[1,-1],[1,1]]);case"King":return Zw(e,t,[[-1,0],[1,0],[0,-1],[0,1],[-1,-1],[-1,1],[1,-1],[1,1]],1);default:return[]}},Xw=(e,t,n,r)=>{0===r.length&&t.playerPieces[n].forEach((e=>e.selected=!1)),r.forEach((t=>{const n=e.findIndex((e=>e.row===t.row&&e.column===t.column));-1!==n&&(e[n].highlighted=!0)}))},Jw=(e,t,n,r)=>{r.forEach((r=>{if(t.playerPieces[n].some((e=>e.row===r.row&&e.column===r.column&&"King"===e.piece))){const t=e.findIndex((e=>e.row===r.row&&e.column===r.column));-1!==t&&(e[t].check=!0,e[t].highlighted=!1)}}))},Zw=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;const i=[],{Pieces:s,playerTurn:a}=Yw,o=s.playerPieces[a],l=s.playerPieces["Player1"===a?"Player2":"Player1"];return n.forEach((n=>{let a=e,c=t,u=!1;for(let e=0;e<r&&(a+=n[0],c+=n[1],ix(a,c,o));e++){const e=ex(a,c,s);if(e){if(l.includes(e)&&("Pawn"!==e.piece||0!==n[0])){i.push({row:a,column:c}),u=!0;break}break}i.push({row:a,column:c})}})),i},ex=(e,t,n)=>Object.values(n.playerPieces).flat().find((n=>n.row===e&&n.column===t&&n.visible))||null,tx=(e,t,n,r)=>{const i="Player1"===n?-1:1,s=r.playerPieces[n].some((n=>n.row===e&&n.column===t&&n.moved))?1:2;return[...Zw(e,t,[[i,0]],s),...[[i,-1],[i,1]].filter((i=>rx(e+i[0],t+i[1],r,n))).map((n=>({row:e+n[0],column:t+n[1]})))]},nx=(e,t,n,r)=>[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]].filter((i=>ix(e+i[0],t+i[1],r.playerPieces[n]))).map((n=>({row:e+n[0],column:t+n[1]}))),rx=(e,t,n,r)=>n.playerPieces["Player1"===r?"Player2":"Player1"].includes(ex(e,t,n)),ix=(e,t,n)=>e>=0&&e<8&&t>=0&&t<8&&!n.some((n=>n.row===e&&n.column===t&&n.visible)),sx=e=>{const{GameBody:t,Pieces:n,playerTurn:r}=e,i=t.tiles,s=n;Yw=e,i.forEach((e=>e.highlighted=!1));const a="Player1"===r?"Player2":"Player1";Object.keys(s.playerPieces).forEach((e=>{s.playerPieces[e].forEach((t=>{const{row:n,column:o,piece:l,selected:c}=t,u=Qw(n,o,l,r,s);c?Xw(i,s,r,u):e===a&&Jw(i,s,r,u)}))}))};class ax{constructor(e){this.canvas=e.canvas,this.gameDimensions=e.gameDimensions,this.gameManager=e,this.clickX=0,this.clickY=0,this.canvas.addEventListener("mousedown",(e=>this.handleMouseDown(e)))}handleMouseDown(e){const t=this.gameManager.gameControl.gamestate,n=this.gameManager.player,r=this.gameManager.playerTurn;if(t===qw.RUNNING&&n===r){const t=e.offsetX,n=e.offsetY;this.clickX=t,this.clickY=n;const r=this.gameManager.GameBody.tiles,i=this.gameManager.Pieces.playerPieces;r.every((e=>!e.highlighted))?this.selectPiece(i):this.movePiece(i,r)}}selectPiece(e){e[this.gameManager.playerTurn].forEach((e=>{const t=this.gameDimensions/8-4;if(e.visible){const n=e.column*(this.gameDimensions/8)+5,r=e.row*(this.gameDimensions/8)+5;this.isclickInsidePiece(n,r,t)&&(e.selected=!0)}}))}movePiece(e,t){const n=this.gameManager.playerTurn,r=(this.gameDimensions-10)/8,i=e[n].findIndex((e=>e.selected));if(i>=0){const s=e[n][i],a=t.find((e=>this.isclickInsideTile(e,r)));a&&a.highlighted?this.gameManager.Pieces.movePiece(i,a.row,a.column):s.selected=!1}}isclickInsidePiece(e,t,n){return this.clickX>=e&&this.clickX<=e+n&&this.clickY>=t&&this.clickY<=t+n}isclickInsideTile(e,t){const n=e.column*(this.gameDimensions/8)+5,r=e.row*(this.gameDimensions/8)+5;return this.clickX>=n&&this.clickX<=n+t&&this.clickY>=r&&this.clickY<=r+t}}const ox={Player1:{Rook:new Image,Knight:new Image,Bishop:new Image,Queen:new Image,King:new Image,Pawn:new Image},Player2:{Rook:new Image,Knight:new Image,Bishop:new Image,Queen:new Image,King:new Image,Pawn:new Image}};ox.Player1.Bishop.src="/assets/Chess/b_bishop_1x.png",ox.Player1.King.src="/assets/Chess/b_king_1x.png",ox.Player1.Knight.src="/assets/Chess/b_knight_1x.png",ox.Player1.Pawn.src="/assets/Chess/b_pawn_1x.png",ox.Player1.Queen.src="/assets/Chess/b_queen_1x.png",ox.Player1.Rook.src="/assets/Chess/b_rook_1x.png",ox.Player2.Bishop.src="/assets/Chess/w_bishop_1x.png",ox.Player2.King.src="/assets/Chess/w_king_1x.png",ox.Player2.Knight.src="/assets/Chess//w_knight_1x.png",ox.Player2.Pawn.src="/assets/Chess/w_Pawn_1x.png",ox.Player2.Queen.src="/assets/Chess/w_queen_1x.png",ox.Player2.Rook.src="/assets/Chess/w_rook_1x.png";class lx{constructor(e){this.gameManager=e,this.ctx=e.ctx,this.pieceImages=ox,this.selectedPiece=null,this.Restart()}animate(){const e=this.gameManager.gameDimensions,t=e/8-4;Object.keys(this.playerPieces).forEach((n=>{this.playerPieces[n].forEach((r=>{r.visible&&this.ctx.drawImage(this.pieceImages[n][r.piece],r.column*(e/8)+5,r.row*(e/8)+5,t,t)}))}))}Restart(){const e=["Rook","Knight","Bishop","Queen","King","Bishop","Knight","Rook"];this.playerPieces={Player1:[],Player2:[]};for(let t=0;t<8;t++)for(let n=0;n<8;n++)switch(t){case 0:this.playerPieces.Player2.push({row:t,column:n,piece:e[n],visible:!0,selected:!1});break;case 7:this.playerPieces.Player1.push({row:t,column:n,piece:e[n],visible:!0,selected:!1});break;case 1:this.playerPieces.Player2.push({row:t,column:n,piece:"Pawn",visible:!0,moved:!1,selected:!1});break;case 6:this.playerPieces.Player1.push({row:t,column:n,piece:"Pawn",visible:!0,selected:!1})}}movePiece(e,t,n){this.gameManager.GameBody.tiles.forEach((e=>{e.highlighted&&(e.highlighted=!1),e.check&&(e.check=!1)}));const r=this.gameManager.playerTurn;if(this.playerPieces[r][e].row=t,this.playerPieces[r][e].column=n,this.playerPieces[r][e].selected=!1,"Pawn"===this.playerPieces[r][e].piece&&(this.playerPieces[r][e].moved=!0),this.gameManager.playerTurn="Player1"===r?"Player2":"Player1","local"===this.gameManager.gameControl.gameMode)this.gameManager.player="Player1"===r?"Player2":"Player1";else if(this.gameManager.player===r){const e=this.gameManager.gameControl.room,t=this.gameManager.gameControl.playerId;Bu(`Games/Chess/${e}/players/${t}/`,{pieces:this.playerPieces[r]})}const i="Player1"===r?"Player2":"Player1",s=this.playerPieces[i],a=s.findIndex((e=>e.row===t&&e.column===n));if(a>=0){this.playerPieces[i][a].visible=!1;if("King"===s[a].piece)return document.getElementById("displayText").innerText=r+"wins",document.getElementById("displayText").style.display="flex",void setTimeout((()=>{this.gameManager.gameControl.gamestate=qw.GAMEOVER,this.gameManager.gameControl.restart()}),3e3)}}}class cx{constructor(e,t,n){this.ctx=e,this.canvas=t,this.gameDimensions=n,this.GameBody=new Kw(this),this.Pieces=new lx(this),this.mouseListener=new ax(this),this.gameControl=new Vw(this),this.playerTurn="Player1"}animate(){this.ctx.clearRect(0,0,this.gameDimensions,this.gameDimensions),this.GameBody.animate(),this.gameControl.gamestate===qw.RUNNING&&(this.Pieces.animate(),this.GameBody&&sx(this))}}const ux=async(e,t,n,r,i)=>{const s=await L_(`Games/${r}/${t}`);let a=[];s&&(a=Object.keys(s.players));const o={online:!0,pieces:n.current.Pieces.playerPieces[s.players[e].player]};if(a.includes(e)){const i=`Games/${r}/${t}/players/${e}`;await Bu(i,o),n.current.player=s.players[e].player,n.current.gameControl.playerId=e,n.current.gameControl.room=t}Tu(Su(w_,`Games/${r}/${t}/players/${e}`)).update({online:!1});const l=await A_(`Games/${r}/${t}/players`,(e=>{i(Object.values(e).every((e=>e.online)))}));return l},dx={body:{width:"100%",height:"100vh",backgroundColor:"#7c4c3e",display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",fontFamily:"CustomFont, sans-serif"},menu:{display:"flex",alignItems:"center",flexDirection:"column"},optionsBody:{display:"flex"},roomName:{fontSize:"2vmax",marginBottom:"0.5vmax",display:"block",fontStyle:"inherit"},options:{fontSize:"1.2vmax",fontFamily:"CustomFont, sans-serif"},displayText:{position:"absolute",color:"white",alignItems:"center",justifyContent:"center",top:0,left:0,right:0,bottom:0,display:"flex"},parent:{position:"relative",display:"inline-block"}},hx=()=>{const t=(0,e.useRef)(null),n=(0,e.useRef)(null),r=(0,e.useRef)(null),[i,s]=(0,e.useState)(null),{uid:o,loggedIn:l}=P_(),{roomKey:c}=un(),[u,d]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{u&&n.current.gameControl.restart()}),[u]),(0,e.useEffect)((()=>{const e=new FontFace("CustomFont","url(/assets/Chess/PressStart2P-Regular.ttf)"),n=(t.current,()=>{if(!r.current)return;const e=r.current.offsetWidth,t=r.current.offsetHeight;let n=e-10;t-30<n&&(n=t-40),s(n)});return e.load().then((()=>{document.fonts.add(e),n()})),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}}),[]),(0,e.useEffect)((()=>{if(i&&t.current){const e=t.current;e.width=i,e.height=i;const r=e.getContext("2d");n.current||(n.current=new cx(r,e,i));const s=()=>{n.current&&n.current.animate(),requestAnimationFrame(s)};if(s(),c&&o&&n.current){let e=null;return ux(o,c,n,"Chess",d).then((t=>e=t)),()=>{if(e&&e(),o&&c){Bu(`Games/Chess/${c}/players/${o}`,{option:!1})}}}return()=>{cancelAnimationFrame(s)}}}),[i,c,o]),(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[(0,a.jsx)(U_,{loggedIn:l,uid:o}),(0,a.jsx)(w,{md:7,className:" mx-auto px-0 px-md-3",style:{overflowY:"scroll",paddingBottom:"50px"},children:(0,a.jsx)("div",{style:dx.body,ref:r,children:(0,a.jsxs)("div",{style:dx.parent,children:[(0,a.jsx)("div",{id:"displayText",style:dx.displayText}),(0,a.jsx)("canvas",{ref:t,id:"gameScreen"})]})})}),(0,a.jsx)(z_,{})]})}),(0,a.jsx)(Eb,{uid:o})]})};class fx{constructor(e){this.GameManager=e}animate(){const e=this.GameManager.gameWidth,t=this.GameManager.gameHeight;this.GameManager.ctx.fillStyle="#0d6efd",this.GameManager.ctx.fillRect(0,0,e,t),this.GameManager.ctx.fillStyle="#eee",this.GameManager.ctx.fillRect(5,5,e-10,t-10),this.GameManager.ctx.fillStyle="#0d6efd",this.GameManager.ctx.fillRect((e-10)/4+5,0,(e-10)/4*3+5,(t-10)/7+5)}}class px{constructor(e){this.canvas=e.canvas,this.gameManager=e;var t=0,n=0;this.canvas.addEventListener("mousedown",(e=>{if(this.gameManager.Tiles){const r=e.offsetX,i=e.offsetY;this.gameManager.Tiles.tileData.forEach((e=>{n=i,(t=r)>=e.position.x&&t<=e.position.x+e.width&&n>=e.position.y&&n<=e.position.y+e.height&&(e.selected=!0,e.dragOffset.x=t-e.position.x,e.dragOffset.y=n-e.position.y)}))}})),this.canvas.addEventListener("mousemove",(e=>{if(this.gameManager.Tiles){const r=this.gameManager.Tiles.tileData.find((e=>e.selected));if(void 0!==r){const i=this.gameManager.Tiles.tileData.indexOf(r),s=e.offsetX,a=e.offsetY,o=s-t,l=a-n;Math.abs(o)>Math.abs(l)?o<0?this.gameManager.Tiles.moveSelectedTile("left",i):o>0&&this.gameManager.Tiles.moveSelectedTile("right",i):Math.abs(l)>Math.abs(o)&&(l<0?this.gameManager.Tiles.moveSelectedTile("up",i):l>0&&this.gameManager.Tiles.moveSelectedTile("down",i)),t=s,n=a}}})),this.canvas.addEventListener("mouseup",(e=>{if(this.gameManager.Tiles){if(void 0!==this.gameManager.Tiles.tileData.find((e=>e.selected))){t=0,n=0;const e=this.gameManager.Tiles.tileData.find((e=>e.selected)),r=this.gameManager.Tiles.tileData.indexOf(e);this.gameManager.Tiles.tileData[r].selected=!1}}}))}}class mx{constructor(e){this.canvas=e.canvas,this.gameManager=e;var t=0,n=0;this.canvas.addEventListener("touchstart",(e=>{if(this.gameManager.Tiles){const r=e.touches[0].clientX,i=e.touches[0].clientY;this.gameManager.Tiles.tileData.forEach((e=>{const s=this.canvas.getBoundingClientRect();t=r-s.left,n=i-s.top,t>=e.position.x&&t<=e.position.x+e.width&&n>=e.position.y&&n<=e.position.y+e.height&&(e.selected=!0,e.dragOffset.x=t-e.position.x,e.dragOffset.y=n-e.position.y)}))}})),this.canvas.addEventListener("touchmove",(e=>{if(this.gameManager.Tiles){const r=e.touches[0].clientX,i=e.touches[0].clientY,s=this.canvas.getBoundingClientRect(),a=this.gameManager.Tiles.tileData.find((e=>e.selected)),o=this.gameManager.Tiles.tileData.indexOf(a),l=r-s.left,c=i-s.top,u=l-t,d=c-n;Math.abs(u)>Math.abs(d)?u<0?this.gameManager.Tiles.moveSelectedTile("left",o):u>0&&this.gameManager.Tiles.moveSelectedTile("right",o):Math.abs(d)>Math.abs(u)&&(d<0?this.gameManager.Tiles.moveSelectedTile("up",o):d>0&&this.gameManager.Tiles.moveSelectedTile("down",o)),t=l,n=c}})),this.canvas.addEventListener("touchend",(e=>{if(this.gameManager.Tiles){t=0,n=0;const e=this.gameManager.Tiles.tileData.find((e=>e.selected));if(e){const t=this.gameManager.Tiles.tileData.indexOf(e);this.gameManager.Tiles.tileData[t].selected=!1}}}))}}class gx{constructor(e){let{ctx:t,canvas:n,gameImage:r,gameWidth:i,gameHeight:s}=e;this.ctx=t,this.canvas=n,this.gameWidth=i,this.gameHeight=s,this.gameImage=r,this.GameBody=new fx(this),this.touchListener=new mx(this),this.mouseListener=new px(this)}animate(){this.ctx.clearRect(0,0,this.gameWidth,this.gameHeight),this.GameBody.animate(),this.Tiles&&this.Tiles.animate()}}class vx{constructor(e,t){this.tileData=[],this.gameManager=e,this.gameImage=t;const n=this.gameImage.width,r=this.gameImage.height,i=this.gameManager.gameWidth,s=this.gameManager.gameHeight;for(let o=0;o<4;o++)for(let e=1;e<=6;e++)this.tileData.push({offset:{x:o*(n/4),y:r/6*(e-1)},position:{x:o*((i-10)/4)+5,y:e*((s-10)/7)+5},selected:!1,width:(i-10)/4,height:(s-10)/7,row:o,column:e,dragOffset:{x:0,y:0}});this.initialTileData=Array.from(this.tileData);const a=[];for(let o=0;o<24;o++){let e,t;do{e=Math.floor(4*Math.random()),t=Math.floor(6*Math.random())+1}while(a.some((n=>n.positionX===e&&n.positionY===t)));this.tileData[o].position={x:e*((i-10)/4)+5,y:t*((s-10)/7)+5},this.tileData[o].row=e,this.tileData[o].column=t,a.push({positionX:e,positionY:t})}}animate(){const e=this.gameManager.gameWidth,t=this.gameManager.gameHeight,n=this.gameImage;this.tileData.forEach((e=>{this.gameManager.ctx.drawImage(n,e.offset.x,e.offset.y,n.width/4,n.height/6,e.position.x,e.position.y,e.width,e.height)})),this.gameManager.ctx.drawImage(n,(e-10)/4*3+5,5,(e-10)/4,(t-10)/7-5)}moveSelectedTile(e,t){const n=this.gameManager.gameWidth,r=this.gameManager.gameHeight,i=this.tileData[t];if(!i)return;let s=i.row,a=i.column;switch(e){case"up":a=Math.max(i.column-1,0);break;case"down":a=Math.min(i.column+1,6);break;case"left":s=Math.max(i.row-1,0);break;case"right":s=Math.min(i.row+1,3)}(0===s&&0===a||this.isValidPosition(s,a))&&!this.tileData.some((e=>e.row===s&&e.column===a))&&(this.tileData[t].row=s,this.tileData[t].column=a,this.tileData[t].position={x:s*((n-10)/4)+5,y:a*((r-10)/7)+5})}isValidPosition(e,t){return e>=0&&e<=3&&t>=1&&t<=6}}const yx=()=>{const{uid:t,loggedIn:n}=P_(),r=(0,e.useRef)(null),[i,s]=(0,e.useState)(null),[o,l]=(0,e.useState)(360),[c,u]=(0,e.useState)(0),d=(0,e.useRef)(null);(0,e.useEffect)((()=>{const e=r.current,t=e.getContext("2d");d.current=new gx({ctx:t,canvas:e,gameImage:i,gameWidth:o,gameHeight:c});const n=()=>{let t=window.innerWidth<371?window.innerWidth-10:360,n=(t-10)/4*7+10;window.innerHeight-30<n&&(n=window.innerHeight-40,t=n/7*4-10),t===o&&n===c||(l(t),u(n)),e&&(e.width=t,e.height=n)};return n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}}),[o,c]),(0,e.useEffect)((()=>{if(i){const e=new Image;e.src=i,e.onload=()=>{d.current.Tiles=new vx(d.current,e)}}}),[i]),(0,e.useEffect)((()=>{const e=()=>{r&&d.current.animate(),requestAnimationFrame(e)};return e(),()=>{cancelAnimationFrame(e)}}),[]);return(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[(0,a.jsx)(U_,{loggedIn:n,uid:t}),(0,a.jsx)(w,{md:7,className:" mx-auto px-0 px-md-3",style:{overflowY:"scroll",paddingBottom:"50px"},children:(0,a.jsxs)(v,{className:"text-center",children:[!i&&(0,a.jsx)(_,{className:"justify-content-center mb-3",children:(0,a.jsx)(w,{md:8,children:(0,a.jsx)(V,{children:(0,a.jsxs)(V.Body,{children:[(0,a.jsx)("h2",{children:"Image Slide Puzzle"}),(0,a.jsx)(Gh,{children:(0,a.jsxs)(Gh.Group,{controlId:"imagePicker",children:[(0,a.jsx)(Gh.Label,{children:"Select an Image:"}),(0,a.jsx)(Gh.Control,{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t&&t.type.includes("image")){const e=URL.createObjectURL(t);s(e)}}})]})})]})})})}),(0,a.jsx)(_,{className:"justify-content-center",children:(0,a.jsx)(w,{md:8,children:(0,a.jsx)("canvas",{ref:r,style:{border:"1px solid #ccc",display:"block",margin:"auto"}})})})]})}),(0,a.jsx)(z_,{})]})}),(0,a.jsx)(Eb,{uid:t})]})};class _x{constructor(e,t,n,r){this.myGamepad=null,this.connected=!1,this.gamepadIndex=r,this.Paddle=e,this.game=t,this.ball=n,window.addEventListener("gamepadconnected",(e=>{this.connected||this.gamepadIndex!==e.gamepad.index||(this.connected=!0)})),window.addEventListener("gamepaddisconnected",(e=>{this.gamepadIndex===e.gamepad.index&&(this.connected=!1)}))}update(){this.myGamepad=navigator.getGamepads()[this.gamepadIndex],this.myGamepad.buttons.map((e=>e.pressed)).forEach(((e,t)=>{if(e)switch(t){case 2:0!==this.game.gamestate&&2!==this.game.gamestate&&3!==this.game.gamestate&&(this.ball.speed={x:8,y:-8},this.game.gamestate=1);break;case 9:this.game.togglePause()}}));var e=this.applyDeadzone(this.myGamepad.axes[0],.25);this.applyDeadzone(this.myGamepad.axes[2],.25),this.applyDeadzone(this.myGamepad.axes[1],.25),this.applyDeadzone(void 0===this.myGamepad.axes[5]?this.myGamepad.axes[3]:this.myGamepad.axes[5],.25);0===e&&(this.Paddle.speed<0&&this.Paddle.stop(),this.Paddle.speed>0&&this.Paddle.stop()),e<0?this.Paddle.moveLeft():e>0&&this.Paddle.moveRight()}applyDeadzone(e,t,n){return(n=(Math.abs(e)-t)/(1-t))<0&&(n=0),n*(e>0?1:-1)}}class bx{constructor(e,t,n){document.addEventListener("keydown",(r=>{switch(r.keyCode){case 37:case 65:e.moveLeft();break;case 39:case 68:e.moveRight();break;case 27:t.togglePause();break;case 32:t.start();break;case 13:0!==t.gamestate&&2!==t.gamestate&&3!==t.gamestate&&(n.speed={x:6,y:-6},t.gamestate=1)}})),document.addEventListener("keyup",(t=>{switch(t.keyCode){case 37:case 65:e.speed<0&&e.stop();break;case 39:case 68:e.speed>0&&e.stop()}}))}}class wx{constructor(e){this.gameWidth=e.gameWidth,this.width=150,this.height=20,this.game=e,this.maxSpeed=10,this.speed=0,this.position={x:e.gameWidth/2-this.width/2,y:e.gameHeight-this.height-10}}moveLeft(){this.speed=-this.maxSpeed}moveRight(){this.speed=this.maxSpeed}draw(e){e.fillStyle="#0ff",e.fillRect(this.position.x,this.position.y,this.width,this.height)}stop(){this.speed=0}update(e){this.position.x+=this.speed,5===this.game.gamestate&&(this.game.ball.position.x=this.position.x+this.width/2-this.game.ball.size/2),this.position.x<0&&(this.position.x=0),this.position.x+this.width>this.gameWidth&&(this.position.x=this.gameWidth-this.width)}}function xx(e,t){let n=e.position.y+e.size,r=e.position.y,i=t.position.y,s=t.position.y+t.height,a=t.position.x,o=t.position.x+t.width;return n>=i&&r<=s&&e.position.x>=a&&e.position.x+e.size<=o}class kx{constructor(e){this.image=new Image,this.image.src="/assets/BrickBreak/PngItem_2373133.png",this.size=16,this.gameWidth=e.gameWidth,this.gameHeight=e.gameHeight,this.game=e,this.reset()}reset(){this.position={x:this.game.paddle.position.x+this.game.paddle.width/2-this.size/2,y:this.gameHeight-this.size-this.game.paddle.height-10},this.speed={x:0,y:0}}draw(e){e.drawImage(this.image,this.position.x,this.position.y,this.size,this.size)}update(e){this.position.x+=this.speed.x,this.position.y+=this.speed.y,(this.position.x+this.size>this.gameWidth||this.position.x<0)&&(this.speed.x=-this.speed.x),this.position.y<0&&(this.speed.y=-this.speed.y),this.position.y+this.size>this.gameHeight&&(this.game.lives--,document.getElementById("lives").innerText=this.game.lives,this.reset(),this.game.gamestate=5);this.position.y,this.size,this.game.paddle.position.y,this.game.paddle.position.x,this.game.paddle.position.x,this.game.paddle.width;xx(this,this.game.paddle)&&(this.speed.y=-this.speed.y,this.position.y=this.game.paddle.position.y-this.size)}}class Cx{constructor(e,t,n){document.getElementById("left_touch").addEventListener("touchstart",(function(){e.moveLeft()})),document.getElementById("right_touch").addEventListener("touchstart",(function(){e.moveRight()})),document.getElementById("left_touch").addEventListener("touchend",(t=>{e.speed<0&&e.stop()})),document.getElementById("right_touch").addEventListener("touchend",(t=>{e.speed>0&&e.stop()})),document.getElementById("center_touch").addEventListener("touchstart",(function(){5===t.gamestate?(n.speed={x:3,y:-3},t.gamestate=1):2!==t.gamestate&&3!==t.gamestate||t.start()})),document.getElementById("pause_img").addEventListener("click",(function(){t.togglePause()}))}}class Ex{constructor(e,t,n){this.image=new Image,this.image.src="/assets/BrickBreak/bricksx64.png",this.position=t,this.width=n,this.height=24,this.game=e,this.markedForDeletion=!1}update(){xx(this.game.ball,this)&&(this.game.ball.speed.y=-this.game.ball.speed.y,this.markedForDeletion=!0)}draw(e){e.drawImage(this.image,this.position.x,this.position.y,this.width,this.height)}}const Sx={1:[[1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,1,0,0]],2:[[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1]],3:[[1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,1,1,1,1,1,1,1,0,0,1],[1,0,1,0,0,0,0,0,1,0,0,1],[1,0,1,1,1,1,1,1,1,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1]],4:[[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0]],5:[[1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,1,0,0,0,0,0,1,0,0,1],[1,0,0,1,0,0,0,1,0,0,0,1],[1,0,0,0,1,0,1,0,0,0,0,1],[1,0,0,0,0,1,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1]],6:[[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0]],7:[[1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,1,1,1,1,1,1,1,0,0,1],[1,0,1,0,0,0,0,0,1,0,0,1],[1,0,1,1,1,1,1,1,1,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1]],8:[[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0]],9:[[1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,1,0,0,0,0,0,1,0,0,1],[1,0,0,1,0,0,0,1,0,0,0,1],[1,0,0,0,1,0,1,0,0,0,0,1],[1,0,0,0,0,1,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1]],10:[[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0]]},Ix=0,Tx=1,Nx=2,Px=3,Rx=4,jx=5,Ox=6;class Dx{constructor(e,t,n){n&&t>e?(this.gameWidth=t,this.gameHeight=e):(this.gameWidth=e,this.gameHeight=t),this.gamestate=Nx,this.paddle=new wx(this),this.ball=new kx(this),this.gameObjects=[],this.bricks=[],this.lives=3,this.levels=Sx,this.currentLevel=1,new bx(this.paddle,this,this.ball),new Cx(this.paddle,this,this.ball),this.gamepad=new _x(this.paddle,this,this.ball,1)}start(){this.gamestate!==Nx&&this.gamestate!==Rx&&this.gamestate!==Px||(this.gamestate===Px&&(this.lives=3),document.getElementById("lives").innerText=this.lives,this.bricks=function(e,t,n){let r=[];return t.forEach(((t,i)=>{t.forEach(((t,s)=>{if(1===t){let t={x:n/12*s,y:75+24*i};r.push(new Ex(e,t,n/12))}}))})),r}(this,this.levels[this.currentLevel],this.gameWidth),this.gameObjects=[this.ball,this.paddle],this.ball.reset(),this.gamestate=jx,document.getElementById("pause_img").style.zIndex=10)}update(e){0===this.lives&&(this.gamestate=Px),this.gamestate!==Ix&&this.gamestate!==Ox&&this.gamestate!==Nx&&this.gamestate!==Px&&(0===this.bricks.length&&(this.currentLevel=(this.currentLevel,1),this.gamestate=Rx,this.start()),[...this.gameObjects,...this.bricks].forEach((t=>t.update(e))),this.bricks=this.bricks.filter((e=>!e.markedForDeletion)),this.gamepad.connected&&this.gamepad.update())}draw(e){[...this.gameObjects,...this.bricks].forEach((t=>t.draw(e))),this.gamestate!=Ix&&this.gamestate!=Ox||(e.rect(0,0,this.gameWidth,this.gameHeight),e.fillStyle="rgba(0,0,0,0.5)",e.fill(),e.font="30px Arial",e.fillStyle="white",e.textAlign="center",e.fillText("Paused",this.gameWidth/2,this.gameHeight/2)),this.gamestate==Nx&&(e.rect(0,0,this.gameWidth,this.gameHeight),e.fillStyle="rgba(0,0,0,1)",e.fill(),e.font="30px Arial",e.fillStyle="white",e.textAlign="center",e.fillText("Press Spacebar or Tap the Screen to Start",this.gameWidth/2,this.gameHeight/2),document.getElementById("pause_img").style.zIndex=0),this.gamestate==Px&&(e.rect(0,0,this.gameWidth,this.gameHeight),e.fillStyle="rgba(0,0,0,1)",e.fill(),e.font="30px Arial",e.fillStyle="white",e.textAlign="center",e.fillText("Game Over",this.gameWidth/2,this.gameHeight/2),document.getElementById("pause_img").style.zIndex=0)}togglePause(){switch(this.gamestate){case Ix:this.gamestate=Tx;break;case Tx:this.gamestate=Ix;break;case jx:this.gamestate=Ox;break;case Ox:this.gamestate=jx}}}const Lx={gameBody:{position:"relative",height:"100vh"},gameScreen:{display:"block",position:"absolute",top:0,left:0,width:"100%",height:"100%",margin:0,padding:0},touchArea:{flexGrow:1,height:"100%",zIndex:10,marginTop:60},pauseImage:{width:40,height:40,margin:8,zIndex:8},livesImage:{width:40,height:40,margin:8},header:{display:"flex",justifyContent:"space-between",padding:0,position:"absolute",top:0,left:0,width:"100%",zIndex:10}},Mx=()=>{const t=(0,e.useRef)(null),n=(0,e.useRef)(null),r=(0,e.useRef)(0),[i,s]=(0,e.useState)(window.innerWidth),[o,l]=(0,e.useState)(window.innerHeight),[c,u]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{u(/Mobi|Android/i.test(navigator.userAgent))}),[]),(0,e.useEffect)((()=>{const e=()=>{const e=window.innerWidth,r=window.innerHeight;if(s(e),l(r),n.current&&(c&&o>i?(n.current.gameWidth=r,n.current.gameHeight=e):(n.current.gameWidth=e,n.current.gameHeight=r)),t.current){const n=t.current,s=n.getContext("2d");n.width=e,n.height=r,c&&o>i?(s.save(),s.translate(e,0),s.rotate(Math.PI/2)):s.restore()}};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}}),[c]),(0,e.useEffect)((()=>{const e=t.current.getContext("2d");if(!n.current){n.current=new Dx(i,o,c);const s=a=>{const l=a-r.current;r.current=a,o>i&&c?e.clearRect(0,0,o,i):e.clearRect(0,0,i,o),t.current&&n.current.update(l),t.current&&n.current.draw(e),requestAnimationFrame(s)};return requestAnimationFrame(s),()=>{cancelAnimationFrame(s)}}}),[i,o]),(0,a.jsx)(v,{fluid:!0,className:"p-0",children:(0,a.jsxs)("div",{id:"game-body",style:Lx.gameBody,children:[(0,a.jsxs)("div",{id:"head",style:Lx.header,children:[(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)("img",{src:"/assets/BrickBreak/pngwing.com.png",alt:"Lives",id:"lives_img",style:Lx.livesImage}),(0,a.jsx)("p",{id:"lives",className:"m-0",children:"3"})]}),(0,a.jsx)("img",{src:"/assets/BrickBreak/windows-media-player-pause-button.png",alt:"Pause",id:"pause_img",style:Lx.pauseImage})]}),(0,a.jsxs)("div",{className:"d-flex h-100",style:{overflowY:"hidden"},children:[(0,a.jsx)("div",{id:"left_touch",style:Lx.touchArea}),(0,a.jsx)("div",{id:"center_touch",style:Lx.touchArea}),(0,a.jsx)("div",{id:"right_touch",style:Lx.touchArea})]}),(0,a.jsx)("canvas",{id:"gameScreen",ref:t,style:Lx.gameScreen})]})})};class Ax{constructor(e,t){this.myGamepad=null,this.connected=!1,this.game=e,this.ball=t,window.addEventListener("gamepadconnected",(e=>{this.connected||this.gamepadIndex!==e.gamepad.index&&this.gamepadIndex||(this.connected=!0,this.gamepadIndex=e.gamepad.index)})),window.addEventListener("gamepaddisconnected",(e=>{this.gamepadIndex===e.gamepad.index&&(this.connected=!1)}))}update(){this.myGamepad=navigator.getGamepads()[this.gamepadIndex],this.myGamepad.buttons.map((e=>e.pressed)).forEach(((e,t)=>{if(e)switch(t){case 2:0!==this.game.gamestate&&2!==this.game.gamestate&&3!==this.game.gamestate&&(this.game.gamestate=1);break;case 9:this.game.togglePause()}}));var e=this.applyDeadzone(this.myGamepad.axes[0],.25);0===e&&(this.ball.speed.x<0&&this.ball.stop(),this.ball.speed.x>0&&this.ball.stop()),e<0?this.ball.moveLeft():e>0&&this.ball.moveRight()}applyDeadzone(e,t,n){return(n=(Math.abs(e)-t)/(1-t))<0&&(n=0),n*(e>0?1:-1)}}class Fx{constructor(e){const t=new Image;t.src="/assets/BallFall/PngItem_2373133.png",this.image=t,this.gameWidth=e.gameWidth,this.gameHeight=e.gameHeight,this.height=.03*this.gameHeight,this.width=.03*this.gameWidth,this.game=e,this.maxSpeed=10,this.reset()}reset(){this.position={x:this.gameWidth/2-this.width/2,y:this.gameHeight/2-this.height/2},this.speed={x:0,y:0}}draw(e){e.drawImage(this.image,this.position.x,this.position.y,this.width,this.height)}moveLeft(){this.speed.x=-this.maxSpeed}moveRight(){this.speed.x=this.maxSpeed}stop(){this.speed.x=0}update(e){this.position.x+=this.speed.x,this.position.y+=this.speed.y,this.position.y<0&&(this.game.lives-=1,document.getElementById("lives").innerText=this.game.lives,this.reset(),this.game.gamestate=5),this.position.y+this.height>this.gameHeight&&(this.game.lives-=1,document.getElementById("lives").innerText=this.game.lives,this.reset(),this.game.gamestate=5),this.position.x<0&&(this.position.x=0),this.position.x+this.width>this.gameWidth&&(this.position.x=this.gameWidth-this.width)}}function Ux(e,t){let n=e.position.y+e.height+e.speed.y,r=e.position.y,i=t.position.y,s=e.position.x-e.speed.x,a=e.position.x+e.width+e.speed.x,o=t.position.y+t.height,l=t.position.x,c=t.position.x+t.width;return n>=i&&s>=l&&a<=c&&r<=o}class $x{constructor(e,t){const n=new Image;n.src="/assets/BallFall/pngwing.com.png",this.image=n,this.gameWidth=e.gameWidth,this.gameHeight=e.gameHeight,this.height=.03*this.gameHeight,this.width=.03*this.gameWidth,this.game=e,this.speed=-4,this.position={x:t,y:e.gameHeight-this.height}}draw(e){e.drawImage(this.image,this.position.x,this.position.y,this.width,this.height)}update(e){this.position.y+=this.speed,Ux(this.game.ball,this)&&this.game.lives<5&&(this.markedForDeletion=!0,this.game.lives+=1,document.getElementById("lives").innerText=this.game.lives),this.position.y+this.height<0&&(this.markedForDeletion=!0)}}class zx{constructor(e,t){this.gameWidth=e.gameWidth,this.width=this.gameWidth>480?120:this.gameWidth/4,this.height=10,this.game=e,this.speed=-4,this.position={x:t,y:e.gameHeight}}draw(e){e.fillStyle="#0ff",e.fillRect(this.position.x,this.position.y,this.width,this.height)}update(){this.position.y+=this.speed,Ux(this.game.ball,this)?(this.game.ball.speed.y=0,this.game.ball.position.y=this.position.y-this.game.ball.height):this.game.ball.speed.y=2,this.position.y+this.height<0&&(this.markedForDeletion=!0)}}class Bx{constructor(e,t){document.addEventListener("keydown",(n=>{switch(n.keyCode){case 37:t.moveLeft();break;case 39:t.moveRight();break;case 27:e.togglePause();break;case 32:e.start();break;case 13:0!==e.gamestate&&2!==e.gamestate&&3!==e.gamestate&&(e.gamestate=1)}})),document.addEventListener("keyup",(e=>{switch(e.keyCode){case 37:t.speed.x<0&&t.stop();break;case 39:t.speed.x>0&&t.stop()}}))}}class Wx{constructor(e,t){document.getElementById("left_touch").addEventListener("touchstart",(function(){t.moveLeft()})),document.getElementById("right_touch").addEventListener("touchstart",(function(){t.moveRight()})),document.getElementById("left_touch").addEventListener("touchend",(e=>{t.speed.x<0&&t.stop()})),document.getElementById("right_touch").addEventListener("touchend",(e=>{t.speed.x>0&&t.stop()})),document.getElementById("center_touch").addEventListener("touchstart",(function(){5===e.gamestate?e.gamestate=1:2!==e.gamestate&&3!==e.gamestate||e.start()})),document.getElementById("pause_img").addEventListener("click",(function(){e.togglePause()}))}}const Hx=0,qx=1,Vx=2,Gx=3,Kx=4,Yx=5,Qx=6;class Xx{constructor(e,t){this.gameWidth=e,this.gameHeight=t,this.gamestate=Vx,this.ball=new Fx(this),this.lives=3,this.gameObjects=[],this.newPaddle=0,this.paddles=[],this.extraHealths=[],this.score=0,this.gamepad=new Ax(this,this.ball),new Bx(this,this.ball),new Wx(this,this.ball)}start(){this.gamestate!==Vx&&this.gamestate!==Kx&&this.gamestate!==Gx||(this.gamestate===Gx&&(this.lives=3),document.getElementById("lives").innerText=this.lives,this.ball.reset(),this.paddles=[],this.extraHealths=[],this.score=0,this.gamestate=Yx,document.getElementById("pause_img").style.zIndex=10)}update(e){0===this.lives&&(this.gamestate=Gx),this.gamestate!==Hx&&this.gamestate!==Qx&&this.gamestate!==Vx&&this.gamestate!==Gx&&(this.paddles=function(e,t,n,r){if(t.newPaddle++,t.newPaddle===Math.round(e/(e/24))){var i=0,s=e-(e>480?120:e/4),a=Math.floor(Math.random()*(s-i+1)+i);i=1,s=10,3===Math.floor(Math.random()*(s-i+1)+i)&&r.push(new $x(t,a)),n.push(new zx(t,a)),t.newPaddle=0}return n}(this.gameWidth,this,this.paddles,this.extraHealths),[this.ball,...this.extraHealths,...this.paddles].forEach((t=>t.update(e))),this.paddles=this.paddles.filter((e=>!e.markedForDeletion)),this.extraHealths=this.extraHealths.filter((e=>!e.markedForDeletion)),this.score+=1,document.getElementById("score").innerText=Math.round(this.score/5),this.gamepad.connected&&this.gamepad.update())}draw(e){[this.ball,...this.extraHealths,...this.paddles].forEach((t=>t.draw(e))),this.gamestate!=Hx&&this.gamestate!=Qx||(e.rect(0,0,this.gameWidth,this.gameHeight),e.fillStyle="rgba(0,0,0,0.5)",e.fill(),e.font="30px Arial",e.fillStyle="white",e.textAlign="center",e.fillText("Paused",this.gameWidth/2,this.gameHeight/2)),this.gamestate==Vx&&(e.rect(0,0,this.gameWidth,this.gameHeight),e.fillStyle="rgba(0,0,0,1)",e.fill(),e.font="30px Arial",e.fillStyle="white",e.textAlign="center",e.fillText("Press Spacebar or Tap the Screen to Start",this.gameWidth/2,this.gameHeight/2),document.getElementById("pause_img").style.zIndex=0),this.gamestate==Gx&&(e.rect(0,0,this.gameWidth,this.gameHeight),e.fillStyle="rgba(0,0,0,1)",e.fill(),e.font="30px Arial",e.fillStyle="white",e.textAlign="center",e.fillText("Game Over",this.gameWidth/2,this.gameHeight/2),document.getElementById("pause_img").style.zIndex=0)}togglePause(){switch(this.gamestate){case Hx:this.gamestate=qx;break;case qx:this.gamestate=Hx;break;case Yx:this.gamestate=Qx;break;case Qx:this.gamestate=Yx}}}const Jx={gameBody:{position:"relative",height:"100vh"},gameScreen:{display:"block",position:"absolute",top:0,left:0,width:"100%",height:"100%"},touchArea:{flexGrow:1,height:"100%",zIndex:10,marginTop:60},pauseImage:{width:40,height:40,margin:8,zIndex:8},livesText:{marginRight:10},livesImage:{width:40,height:40,margin:8},header:{display:"flex",justifyContent:"space-between",padding:0,position:"absolute",top:0,left:0,width:"100%",zIndex:10},scoreLabel:{marginLeft:15,fontSize:"1.2rem",color:"black"},score:{fontSize:"1.2rem",color:"black"}},Zx=()=>{const{uid:t,loggedIn:n}=P_(),r=(0,e.useRef)(null),i=(0,e.useRef)(null),s=(0,e.useRef)(0),[o,l]=(0,e.useState)(window.innerWidth),[c,u]=(0,e.useState)(window.innerHeight);return(0,e.useEffect)((()=>{const e=()=>{l(window.innerWidth),u(window.innerHeight),i.current&&(i.current.gameWidth=window.innerWidth,i.current.gameHeight=window.innerHeight),r.current&&(r.current.width=window.innerWidth,r.current.height=window.innerHeight)};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}}),[]),(0,e.useEffect)((()=>{const e=r.current.getContext("2d");if(!i.current){i.current=new Xx(o,c);const t=n=>{const a=n-s.current;s.current=n,e.clearRect(0,0,o,c),r.current&&(i.current.update(a),i.current.draw(e)),requestAnimationFrame(t)};return requestAnimationFrame(t),()=>{cancelAnimationFrame(t)}}}),[o,c]),(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[(0,a.jsx)(U_,{loggedIn:n,uid:t}),(0,a.jsx)(w,{md:7,className:" mx-auto px-0 px-md-3",style:{overflowY:"scroll",paddingBottom:"50px"},children:(0,a.jsx)(v,{fluid:!0,className:"p-0",children:(0,a.jsxs)("div",{id:"game-body",style:Jx.gameBody,children:[(0,a.jsxs)("div",{id:"head",style:Jx.header,children:[(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)("img",{src:"/assets/BallFall/pngwing.com.png",alt:"Lives",id:"lives_img",style:Jx.livesImage}),(0,a.jsx)("p",{id:"lives",style:Jx.livesText,children:"3"})]}),(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)("img",{src:"/assets/Ballfall/windows-media-player-pause-button.png",alt:"Pause",id:"pause_img",style:Jx.pauseImage}),(0,a.jsxs)("p",{id:"score-label",style:Jx.scoreLabel,children:["Score:"," ",(0,a.jsx)("span",{id:"score",style:Jx.score,children:"0"})]})]})]}),(0,a.jsxs)("div",{className:"d-flex h-100",style:{overflowY:"hidden"},children:[(0,a.jsx)("div",{id:"left_touch",style:Jx.touchArea}),(0,a.jsx)("div",{id:"center_touch",style:Jx.touchArea}),(0,a.jsx)("div",{id:"right_touch",style:Jx.touchArea})]}),(0,a.jsx)("canvas",{id:"gameScreen",ref:r,style:Jx.gameScreen})]})})}),(0,a.jsx)(z_,{})]})}),(0,a.jsx)(Eb,{uid:t})]})},ek=(e,t,n,r)=>[[1,2,3],[4,5,6],[7,8,9],[1,4,7],[2,5,8],[3,6,9],[1,5,9],[3,5,7]].filter((t=>t.includes(e))).some((e=>e.every((e=>t[`${n}${e}`].value===r)))),tk=(e,t,n,r,i,s,a,o)=>{e((e=>{let l=e;const c=t+1;n||(n=c);const u=l[`Stile${n}`].tiles;if(""!==u[`tile${c}`].value)return l;l[`Stile${n}`].tiles[`tile${c}`].value=i,Object.values(u).every((e=>""!==e.value))&&(l[`Stile${n}`].value="-"),ek(c,u,"tile",i)&&(l[`Stile${n}`].value=i,ek(c,l,"Stile",i)&&console.log("win"));let d=""===l[`Stile${c}`].value?c:null;return r(d),s((e=>"Player1"===e?"Player2":"Player1")),a&&Bu(`Games/SuperTicTacToe/${a}/players/${o}`,{tiles:l,curSuperTile:d}),l}))},nk=e=>{let{dimensions:t,tilesValue:n,setDisplayHint:r}=e;return(0,a.jsx)("div",{className:"floatingBody",children:(0,a.jsxs)("div",{className:"hintBody",style:{width:t.tilesBody,height:t.tilesBody},children:[(0,a.jsx)("div",{className:"floatingClose",onClick:()=>r(!1),children:"\u2716"}),Object.values(n).map(((e,n)=>(0,a.jsx)("div",{className:"STile",style:{width:`${t.tile}px`,height:`${t.tile}px`,display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(3, 1fr)"},children:Object.values(e.tiles).map(((e,n)=>(0,a.jsx)("div",{className:"hintTile",style:{width:t.titleTile-1+"px",height:t.titleTile-1+"px"},children:e.value},n)))},n)))]})})},rk=(e,t,n,r,i,s,a,o)=>{if(!s)return;const l=i+1,c=t[`Stile${l}`].value;null===n&&""===c?(r(i+1),a&&Bu(`Games/SuperTicTacToe/${a}/players/${o}`,{curSuperTile:l})):e(!0)},ik=(e,t,n)=>{const r="O"===n?"X":"O",i=(e,t)=>{const{tile1:n,tile2:r,tile3:i,tile4:s,tile5:a,tile6:o,tile7:l,tile8:c,tile9:u}=e.tiles;return[[n.value,r.value,i.value],[s.value,a.value,o.value],[l.value,c.value,u.value],[n.value,s.value,l.value],[r.value,a.value,c.value],[i.value,o.value,u.value],[n.value,a.value,u.value],[i.value,a.value,l.value]].some((e=>e.every((e=>e===t))))},s=e=>Object.keys(e.tiles).filter((t=>""===e.tiles[t].value)),a=e=>parseInt(e.replace("tile",""))-1,o=(e,t)=>{const n=s(e);for(const r of n){if(e.tiles[r].value=t,i(e,t))return e.tiles[r].value="",a(r);e.tiles[r].value=""}return null},l=e[`Stile${t}`];if(null!==t&&void 0!==t&&0!==s(l).length){let e=o(l,n);if(null!==e)return e;let t=o(l,r);if(null!==t)return t;const i=s(l);if(i.length>0){const e=i[Math.floor(Math.random()*i.length)];return a(e)}}else{for(let t=1;t<=9;t++){const i=e[`Stile${t}`];let s=o(i,n);if(null!==s)return s;let a=o(i,r);if(null!==a)return a}for(let t=1;t<=9;t++){const n=e[`Stile${t}`],r=s(n);if(r.length>0){const e=r[Math.floor(Math.random()*r.length)];return a(e)}}}return null},sk=async(e,t,n,r,i,s)=>{const a=await L_(`Games/${r}/${t}`);let o=[];a&&(o=Object.keys(a.players));const l={online:!0,tiles:n,curSuperTile:""};if(o.includes(e)){const n=`Games/${r}/${t}/players/${e}`;await Bu(n,l),s(a.players[e].player)}Tu(Su(w_,`Games/${r}/${t}/players/${e}`)).update({online:!1});const c=await A_(`Games/${r}/${t}/players`,(e=>{i(Object.values(e).every((e=>e.online)))}));return c},ak=(e,t,n,r,i,s)=>{A_(`Games/SuperTicTacToe/${e}/players/${t}/`,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.current,a=n.current;if(e&&e.player===a){let n=null;if(t){var o,l;const i=`Stile${t}`,s=null===(o=r.current[i])||void 0===o?void 0:o.tiles,a=null===(l=e.tiles[i])||void 0===l?void 0:l.tiles;n=Object.keys(a).findIndex((e=>a[e].value!==s[e].value))}(n||t!==e.curSuperTile)&&s(n,e.curSuperTile,t,a)}}))},ok=()=>{const{uid:t,loggedIn:n}=P_(),{roomKey:r}=un(),[i,s]=(0,e.useState)(null),[o,l]=(0,e.useState)("Player1"),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(!1),[f,p]=(0,e.useState)(null),[m,g]=(0,e.useState)(!1),y=(0,e.useRef)(i),b=(0,e.useRef)(o),[x,k]=(0,e.useState)((()=>({gameWidth:0,gameHeight:0,tilesBody:0,tile:0,titleWidth:0,titleHeight:0,titleTileBody:0,titleTile:0}))),[C,E]=(0,e.useState)((e=>{const t={};for(let n=1;n<=9;n++){t[`Stile${n}`]={value:"",tiles:{}};for(let e=1;e<=9;e++)t[`Stile${n}`].tiles[`tile${e}`]={value:""}}return t})),S=(0,e.useRef)(C),I={Player1:"X",Player2:"O"},T=()=>{let e,t;t=window.innerWidth<371?window.innerWidth-10:372,e=(t-12)/3*4+15,window.innerHeight-30<e&&(e=window.innerHeight-40,t=3*(e/4-15)+12),k({gameWidth:`${t}px`,gameHeight:`${e}px`,tilesBody:`${t}px`,tile:(t-12)/3,titleWidth:`${t}px`,titleHeight:(e-15)/4+3+"px",titleTileBody:(e-15)/4+3+"px",titleTile:(e-15)/4/3})};0===x.gameWidth&&0===x.gameHeight&&T(),window.addEventListener("resize",T),(0,e.useEffect)((()=>{if("Player2"===o&&"COMPUTER"===f){const e=ik(C,i,I[o]);setTimeout((()=>{tk(E,e,i,s,I[o],l)}),1e3)}}),[o]),(0,e.useEffect)((()=>{let e=null;if(r&&t)return"Single"===r?p("COMPUTER"):sk(t,r,C,"SuperTicTacToe",g,u).then((t=>e=t)),()=>{if(e&&e(),t&&r){Bu(`Games/SuperTicTacToe/${r}/players/${t}`,{option:!1})}}}),[t,r]);const N=(e,t,n,r)=>{null===e||-1===e?s(t):tk(E,e,n,s,I[r],l)};return(0,e.useEffect)((()=>{y.current=i,S.current=C,b.current=o}),[i,C,o]),(0,e.useEffect)((()=>{m&&(p("PVP"),ak(r,r,b,S,y,N))}),[m]),(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[(0,a.jsx)(U_,{loggedIn:n,uid:t}),(0,a.jsx)(w,{md:7,className:" mx-auto px-0 px-md-3",style:{overflowY:"scroll",display:"flex",alignContent:"center",justifyContent:"center",paddingBottom:"50px"},children:(0,a.jsx)(V,{style:{width:"min-content",height:"fit-content"},children:(0,a.jsx)(V.Body,{className:"body",children:(0,a.jsxs)("div",{className:"gamebody",style:{width:x.gameWidth,height:x.gameHeight},children:[(0,a.jsxs)("div",{className:"title",style:{width:x.titleWidth,height:x.titleHeight},children:[(0,a.jsx)("div",{className:"titleTiles",style:{width:x.titleTileBody,height:x.titleTileBody},children:Object.values(C).map(((e,n)=>(0,a.jsx)("div",{className:"titleTile",style:{backgroundColor:i-1===n?"red":"#eee",width:x.titleTile,height:x.titleTile},onClick:()=>rk(h,C,i,s,n,f,r,t),children:e.value},n)))}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{display:"flex"},children:[(0,a.jsx)("div",{children:"Turn: "}),(0,a.jsx)("div",{children:"Player1"===o?"Player 1":"COMPUTER"===f?"Computer":"Player 2"})]}),!i&&(0,a.jsx)("div",{children:"Select a Super Tile to Play"})]})]}),(0,a.jsx)("div",{className:"tiles",style:{width:x.tilesBody,height:x.tilesBody},children:i&&Object.values(C[`Stile${i}`].tiles).map(((e,n)=>(0,a.jsx)("div",{className:"tile",style:{width:`${x.tile}px`,height:`${x.tile}px`,fontSize:`${x.tile}px`},onClick:()=>{"COMPUTER"===f&&"Player2"===o||"PVP"===f&&o!==c||tk(E,n,i,s,I[o],l,r,t)},children:e.value},n)))}),d&&(0,a.jsx)(nk,{dimensions:x,tilesValue:C,setDisplayHint:h})]})})})}),(0,a.jsx)(z_,{})]})}),(0,a.jsx)(Eb,{uid:t})]})},lk=(e,t,n,r)=>[[1,2,3],[4,5,6],[7,8,9],[1,4,7],[2,5,8],[3,6,9],[1,5,9],[3,5,7]].filter((t=>t.includes(e))).some((e=>e.every((e=>t[`tile${e}`].value===r)))),ck=(e,t,n,r,i,s)=>{e((e=>{let a={...e};const o=t+1;return""!==a[`tile${o}`].value||(a[`tile${o}`].value=n,lk(o,a,"tile",n)&&console.log(`${n} wins!`),r((e=>"Player1"===e?"Player2":"Player1")),i&&Bu(`Games/TicTacToe/${i}/players/${s}`,{tiles:a})),a}))},uk=(e,t)=>{const n="O"===t?"X":"O",r=(e,t)=>[[1,2,3],[4,5,6],[7,8,9],[1,4,7],[2,5,8],[3,6,9],[1,5,9],[3,5,7]].some((n=>n.every((n=>e[`tile${n}`].value===t)))),i=e=>Object.keys(e).filter((t=>""===e[t].value)),s=(e,t)=>{const n=i(e);for(const i of n){if(e[i].value=t,r(e,t))return e[i].value="",parseInt(i.replace("tile",""))-1;e[i].value=""}return null};let a=s(e,t);if(null!==a)return a;let o=s(e,n);if(null!==o)return o;const l=i(e);if(l.length>0){const e=l[Math.floor(Math.random()*l.length)];return parseInt(e.replace("tile",""))-1}return null},dk=async(e,t,n,r,i,s)=>{const a=await L_(`Games/${r}/${t}`);let o=[];a&&(o=Object.keys(a.players));const l={online:!0,tiles:n};if(o.includes(e)){const n=`Games/${r}/${t}/players/${e}`;await Bu(n,l),s(a.players[e].player)}Tu(Su(w_,`Games/${r}/${t}/players/${e}`)).update({online:!1});const c=await A_(`Games/${r}/${t}/players`,(e=>{i(Object.values(e).every((e=>e.online)))}));return c},hk=(e,t,n,r,i)=>{A_(`Games/TicTacToe/${t}/players/`,(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=Object.values(t).find((t=>t.id!==e)),a=n.current;if(s&&s.player===a){let e=null;const t=r.current,n=s.tiles;e=Object.keys(n).findIndex((e=>n[e].value!==t[e].value)),e&&i(e,a)}}))},fk=()=>{const{uid:t,loggedIn:n}=P_(),{roomKey:r}=un(),[i,s]=(0,e.useState)("Player1"),[o,l]=(0,e.useState)(null),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(!1),f=(0,e.useRef)(i),[p,m]=(0,e.useState)({gameWidth:0,gameHeight:0,tileSize:0}),[g,y]=(0,e.useState)((()=>{const e={};for(let t=1;t<=9;t++)e[`tile${t}`]={value:""};return e})),b=(0,e.useRef)(g),x={Player1:"X",Player2:"O"},k=()=>{let e=window.innerWidth<371?window.innerWidth-10:372,t=e;window.innerHeight-30<t&&(t=window.innerHeight-40,e=t),m({gameWidth:`${e}px`,gameHeight:`${t}px`,tileSize:(e-12)/3})};0===p.gameWidth&&0===p.gameHeight&&k(),window.addEventListener("resize",k),(0,e.useEffect)((()=>{if("Player2"===i&&"COMPUTER"===o){const e=uk(g,x[i]);setTimeout((()=>{ck(y,e,x[i],s)}),1e3)}}),[i]),(0,e.useEffect)((()=>{let e=null;if(r&&t)return"Single"===r?l("COMPUTER"):dk(t,r,g,"TicTacToe",h,u).then((t=>e=t)),()=>{if(e&&e(),t&&r){Bu(`Games/TicTacToe/${r}/players/${t}`,{option:!1})}}}),[t,r]);const C=(e,t)=>{null!==e&&-1!==e&&ck(y,e,x[t],s)};return(0,e.useEffect)((()=>{b.current=g,f.current=i}),[g,i]),(0,e.useEffect)((()=>{d&&(l("PVP"),hk(t,r,f,b,C))}),[d]),(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[(0,a.jsx)(U_,{loggedIn:n,uid:t}),(0,a.jsx)(w,{md:7,className:" mx-auto px-0 px-md-3",style:{overflowY:"scroll",display:"flex",alignContent:"center",justifyContent:"center",paddingBottom:"50px"},children:(0,a.jsx)(V,{style:{width:"min-content",height:"fit-content"},children:(0,a.jsx)(V.Body,{className:"body",children:(0,a.jsxs)("div",{className:"gamebody",style:{width:p.gameWidth},children:[(0,a.jsx)("div",{className:"title",children:(0,a.jsxs)("div",{children:["Turn: ","Player1"===i?"Player 1":"Player 2"]})}),(0,a.jsx)("div",{className:"tiles",style:{width:p.gameWidth,height:p.gameHeight},children:Object.values(g).map(((e,n)=>(0,a.jsx)("div",{className:"tile",style:{width:`${p.tileSize}px`,height:`${p.tileSize}px`,fontSize:`${p.tileSize}px`},onClick:()=>{"COMPUTER"===o&&"Player2"===i||"PVP"===o&&i!==c||!o||ck(y,n,x[i],s,r,t)},children:e.value},n)))})]})})})}),(0,a.jsx)(z_,{})]})}),(0,a.jsx)(Eb,{uid:t})]})},pk=t=>{let{friendsList:n,show:r,handleClose:i,Game:s,UID:o}=t;const[l,c]=(0,e.useState)([]);return(0,a.jsxs)(Kd,{show:r,onHide:i,centered:!0,children:[(0,a.jsxs)(Kd.Header,{className:"d-flex justify-content-between",children:[(0,a.jsx)(ft,{variant:"close",onClick:i,className:"m-0"}),l.length>0&&(0,a.jsx)(ft,{variant:"primary",onClick:async()=>{const e=await Iw(s.name,l,o);await Promise.all(l.map((t=>Tw(o,t,s.name,e)))),window.location.href=`/Games/${s.path}/${e}`,i()},children:"Send Request"})]}),(0,a.jsxs)(Kd.Body,{className:"text-center",children:[(0,a.jsxs)(Gh.Group,{controlId:"friendSearchInput",className:"mb-3 text-start",children:[(0,a.jsx)(Gh.Label,{children:"Select Friends"}),(0,a.jsx)(xw,{children:(0,a.jsx)(Gh.Control,{type:"text",placeholder:"Search friends"})})]}),(0,a.jsx)("div",{className:"friend-list",children:n.map((e=>{const t=l.includes(e.id);return(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)(Q,{src:e.profilePhoto||"/images/defaultGroup.png",roundedCircle:!0,style:{height:"40px",width:"40px",marginRight:"10px"}}),(0,a.jsx)("span",{children:e.name})]}),(0,a.jsx)(ft,{variant:t?"danger":"success",onClick:()=>{return t=e.id,void c((e=>e.includes(t)?e.filter((e=>e!==t)):l.length<s.maxPlayers-1?[...e,t]:void 0));var t},children:t?"Remove":"Add"})]},e.id)}))})]})]})},mk=()=>{const{uid:t,loggedIn:n,isPending:r}=P_(),[i,s]=(0,e.useState)([]),[o,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(!1),[f,p]=(0,e.useState)(!1),m=()=>p(!0);(0,e.useEffect)((()=>{n&&g()}),[n]);const g=()=>{L_(`UsersDetails/${t}`).then((e=>{e&&(e.name||m())})).catch((e=>{console.error("Error:",e)}))};return(0,e.useEffect)((()=>{t&&(async()=>{s(await(async()=>{const e=await L_(`friend/${t}/Friends`);return e?(await Promise.all(Object.keys(e).map((async e=>{const t=await L_(`UsersDetails/${e}`);return t?{id:e,name:t.name,profilePhoto:t.profilePhoto}:null})))).filter(Boolean):[]})())})()}),[t]),(0,e.useEffect)((()=>{!r&&c&&(n?l(!0):h(!0))}),[c,r]),(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[(0,a.jsx)(U_,{loggedIn:n,uid:t}),(0,a.jsx)(w,{md:7,className:"vh-100 mx-auto px-0 px-md-3",style:{overflowY:"scroll"},children:(0,a.jsxs)(Bw,{id:"games-tabs",className:"mb-3 w-100",children:[(0,a.jsx)(tw,{eventKey:"Single-Player",title:"Single-Player",children:(0,a.jsx)("div",{className:"d-flex flex-column w-100",children:Sw.SinglePlayer.map((e=>(0,a.jsx)(Ln,{to:`/Games/${e.path}/Single`,className:"game-card w-100 mb-3",style:{textDecoration:"none"},children:(0,a.jsx)(V,{className:" bg-light w-100",children:(0,a.jsx)(V.Body,{children:(0,a.jsx)(V.Title,{children:e.name})})})},e.name)))})}),(0,a.jsx)(tw,{eventKey:"Multi-Player",title:"Multi-Player",children:(0,a.jsx)("div",{className:"d-flex flex-column w-100",children:Sw.MultiPlayer.map((e=>(0,a.jsx)("div",{onClick:()=>u(e),className:"game-card w-100 mb-3",style:{cursor:"pointer"},children:(0,a.jsx)(V,{className:" bg-light w-100",children:(0,a.jsx)(V.Body,{children:(0,a.jsx)(V.Title,{children:e.name})})})},e.name)))})})]})}),(0,a.jsx)(z_,{})]})}),(0,a.jsx)(Eb,{uid:t}),(0,a.jsx)(pk,{friendsList:i,show:o,handleClose:()=>l(!1),Game:c,UID:t}),(0,a.jsx)(I_,{show:d,handleClose:()=>{h(!1)},handleProfileEdit:m,returnOnClose:!0}),(0,a.jsx)(D_,{show:f,handleClose:()=>p(!1)})]})};class gk{constructor(e){this.GameManager=e,this.ctx=e.ctx,this.background=new Image,this.background.src="/assets/Whot/TableBackground.jpeg"}animate(){const e=this.GameManager.gameDimensions;this.ctx.fillStyle="#eee",this.ctx.fillRect(0,0,e.width,e.height),this.ctx.drawImage(this.background,0,0,e.width,e.height)}}const vk=async(e,t)=>{const n=t.room;await Bu(`Games/Whot/${n}/data/`,e)},yk=e=>{for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e},_k=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=t.indexOf(e);return t[(r+(n?2:1))%t.length]};class bk{constructor(e){this.canvas=e.canvas,this.gameManager=e,this.touchX=0,this.touchY=0,this.cardSelected=null,this.canvas.addEventListener("mousedown",(e=>{const{Cards:t}=this.gameManager;if(t){const n=e.offsetX,r=e.offsetY;if(!t.stacks)return;Object.keys(t.stacks).forEach((e=>{let i=null;t.stacks[e].cards.forEach((e=>{n>=e.x&&n<=e.x+e.width&&r>=e.y&&r<=e.y+e.height&&(this.touchX=n,this.touchY=r,i=e)})),i&&(i.selected=!0,i.dragOffset={x:n-i.x,y:r-i.y},this.cardSelected=i)}))}})),this.canvas.addEventListener("mousemove",(e=>{if(this.gameManager.player!==this.gameManager.playerTurn||!this.cardSelected)return;const{Cards:t}=this.gameManager,n=this.cardSelected,r=e.offsetX,i=e.offsetY,s=r-this.touchX,a=i-this.touchY,o=this.getCardStack(n);if("market"===o&&s<0){t.getCards(this.gameManager.playerTurn,1),this.deselectCard();const e=_k(this.gameManager.playerTurn,this.gameManager.Cards.roundTurns);return this.gameManager.playerTurn=e,void vk({stacks:JSON.stringify(this.gameManager.Cards.stacks),playerTurn:this.gameManager.playerTurn},this.gameManager)}("player2"===o&&a>0||("player1"===o||this.gameManager.player===o)&&a<0)&&(t.playCard(o,n),this.deselectCard()),this.touchX=r,this.touchY=i})),this.canvas.addEventListener("mouseup",(()=>{if(this.gameManager.Cards&&this.cardSelected){const e=this.getCardStack(this.cardSelected);"market"!==e&&"played"!==e&&this.rearrangeCardsInStack(e),this.deselectCard()}}))}getCardStack(e){return Object.keys(this.gameManager.Cards.stacks).find((t=>this.gameManager.Cards.stacks[t].cards.includes(e)))}deselectCard(){this.cardSelected&&(this.cardSelected.selected=!1,this.cardSelected=null)}rearrangeCardsInStack(e){const t=this.gameManager.Cards.stacks[e].cards,n=t.findIndex((e=>e===this.cardSelected));if(-1!==n){const e=6,r=n-Math.floor(n/e)*e,i=t[n];for(let s=n;s>r;s-=e)t[s]=t[s-e];t[r]=i}}}const wk=e=>{if(e.market.cards.length<3){const t=e.played.cards;if(t.length>1){const n=t.slice(0,-1),r=t[t.length-1],i=yk(n);e.market.cards.push(...i),e.played.cards=[r]}}},xk={box:[1,2,3,5,7,10,11,13,14],circle:[1,2,3,4,5,7,8,10,11,12,13,14],cross:[1,2,3,5,7,10,11,13,14],star:[1,2,3,4,5,7,8],Triangle:[1,2,3,4,5,7,8,10,11,12,13,14]},kk={},Ck={};Object.keys(xk).forEach((e=>{xk[e].forEach((t=>{kk[`${e}${t}`]=new Image,Ck[`${e}${t}`]={name:`${e}${t}`,shape:e,number:t},kk[`${e}${t}`].src=`/assets/Whot/${e}${t}.png`}))}));class Ek{constructor(e){this.gameManager=e,this.ctx=e.ctx,this.cardImages=kk,this.cardData=Ck,this.selectedPiece=null,this.roundTurns=[]}setupListeners(){(async(e,t)=>{const n=e.room;await A_(`Games/Whot/${n}/data/`,(e=>t(e)))})(this.gameManager,this.updateGameStacks.bind(this))}animate(){const e=this.gameManager.gameDimensions.width,t=this.gameManager.gameDimensions.height,n={width:(t-40)/5,height:(t-40)/3};Object.keys(this.stacks).forEach((r=>{this.stacks[r].cards.forEach(((i,s)=>{let a,o;i.image=this.cardImages[i.name],i.width=n.width,i.height=n.height,[a,o]=this.calculateCardPosition(r,s,n,e,t,6,3),i.targetPosition={x:a,y:o},i.offset={position:{x:"market"===r?i.image.width/2:0,y:0},size:{width:i.image.width/2,height:i.image.height}},(e=>{e.x?(e.x+=.1*(e.targetPosition.x-e.x),e.y+=.1*(e.targetPosition.y-e.y)):(e.x=e.targetPosition.x,e.y=e.targetPosition.y)})(i),this.ctx.drawImage(i.image,i.offset.position.x,i.offset.position.y,i.offset.size.width,i.offset.size.height,i.x,i.y,n.width,n.height)}))}))}calculateCardPosition(e,t,n,r,i,s,a){let o,l,c,u;switch(e){case"market":c=r-(n.width+n.width/2)-.3*t,u=i/2+(n.height-i/2);break;case"played":c=(r-n.width)/2-.3*t,u=(i-n.height)/2;break;case this.gameManager.player:o=Math.floor(t/s),l=t%s,c=n.width/2+l*(n.width-10),u=i-n.height-20-o*a}return[c,u]}Restart(){const e=yk(Object.values(this.cardData));this.roundTurns=this.roundTurns.length<2?this.gameManager.players:this.roundTurns;const t=this.roundTurns;this.gameManager.player===t[0]&&(this.stacks={market:{cards:[]},played:{cards:e}},t.forEach((e=>{this.stacks[e]={cards:[]}})),vk({stacks:JSON.stringify(this.stacks),playerTurn:this.gameManager.playerTurn},this.gameManager),setTimeout((()=>{wk(this.stacks),t.forEach((e=>{this.getCards(e,5)})),vk({stacks:JSON.stringify(this.stacks),playerTurn:this.gameManager.playerTurn},this.gameManager)}),3e3))}getCards(e,t){const n=this.stacks.market.cards.slice(0,t);this.stacks[e].cards.push(...n),this.stacks.market.cards=this.stacks.market.cards.slice(t),wk(this.stacks)}playCard(e,t){const n=this.roundTurns,r=this.stacks[e].cards.findIndex((e=>e===t));if(-1===r||e!==this.gameManager.playerTurn)return;const i=this.stacks.played.cards,s=i[i.length-1];if(s&&!this.isValidMove(s,t))return;this.stacks.played.cards.push(t),this.stacks[e].cards.splice(r,1),this.stacks[e].cards.length<1&&this.playerWins(e);const a=_k(this.gameManager.playerTurn,n);this.updateGameStatus(t,a)}updateGameStatus(e,t){switch(e.number){case 2:this.getCards(t,2);break;case 14:this.getCards(t,1)}const n=1===e.number||8===e.number||2===e.number||14===e.number;this.gameManager.playerTurn=_k(this.gameManager.playerTurn,this.roundTurns,n),vk({stacks:JSON.stringify(this.stacks),playerTurn:this.gameManager.playerTurn},this.gameManager)}updateGameStacks(e){e&&(this.stacks=JSON.parse(e.stacks),this.gameManager.playerTurn=e.playerTurn)}isValidMove(e,t){return e.shape===t.shape||e.number===t.number}playerWins(e){if(this.roundTurns.length>2){const t={};this.roundTurns.forEach((e=>{t[e]=0,this.stacks[e].cards.forEach((n=>{let r=n.number;"star"===n.shape&&(r*=2),t[e]+=r}))})),this.remainingCardsCount=t[this.gameManager.player],this.gameManager.win=e;const n=Object.keys(t).reduce(((e,n)=>t[e]>t[n]?e:n)),r=this.roundTurns.filter((e=>e!==n));this.roundTurns=r}else this.roundTurns=this.gameManager.players;this.setIsWinner(!0)}}class Sk{constructor(e){this.canvas=e.canvas,this.gameManager=e,this.touchX=0,this.touchY=0,this.cardSelected=null,this.canvas.addEventListener("touchstart",(e=>{const{Cards:t}=this.gameManager;if(t){const n=e.touches[0],r=n.clientX,i=n.clientY;if(this.touchX=r,this.touchY=i,!t.stacks)return;Object.keys(t.stacks).forEach((e=>{let n=null;t.stacks[e].cards.forEach((e=>{r>=e.x&&r<=e.x+e.width&&i>=e.y&&i<=e.y+e.height&&(n=e)})),n&&(n.selected=!0,n.dragOffset={x:r-n.x,y:i-n.y},this.cardSelected=n)}))}})),this.canvas.addEventListener("touchmove",(e=>{if(this.gameManager.player!==this.gameManager.playerTurn||!this.cardSelected)return;const{Cards:t}=this.gameManager,n=this.cardSelected,r=e.touches[0],i=r.clientX,s=r.clientY,a=i-this.touchX,o=s-this.touchY,l=this.getCardStack(n);if("market"===l&&a<0){t.getCards(this.gameManager.playerTurn,1),this.deselectCard();const e=_k(this.gameManager.playerTurn,this.gameManager.Cards.roundTurns);return this.gameManager.playerTurn=e,void vk({stacks:JSON.stringify(this.gameManager.Cards.stacks),playerTurn:this.gameManager.playerTurn},this.gameManager)}("player2"===l&&o>0||("player1"===l||this.gameManager.player===l)&&o<0)&&(t.playCard(l,n),this.deselectCard()),this.touchX=i,this.touchY=s})),this.canvas.addEventListener("touchend",(()=>{if(this.gameManager.Cards&&this.cardSelected){const e=this.getCardStack(this.cardSelected);"market"!==e&&"played"!==e&&this.rearrangeCardsInStack(e),this.deselectCard()}}))}getCardStack(e){return Object.keys(this.gameManager.Cards.stacks).find((t=>this.gameManager.Cards.stacks[t].cards.includes(e)))}deselectCard(){this.cardSelected&&(this.cardSelected.selected=!1,this.cardSelected=null)}rearrangeCardsInStack(e){const t=this.gameManager.Cards.stacks[e].cards,n=t.findIndex((e=>e===this.cardSelected));if(-1!==n){const e=6,r=n-Math.floor(n/e)*e,i=t[n];for(let s=n;s>r;s-=e)t[s]=t[s-e];t[r]=i}}}class Ik{constructor(e,t,n){this.ctx=e,this.canvas=t,this.gameDimensions=n,this.win=null,this.players=[],this.GameBody=new gk(this),this.Cards=new Ek(this),this.touchListener=new Sk(this),this.mouseListener=new bk(this),this.Cards.roundTurns=this.players,this.playerTurn=null}Start(e,t,n){this.players=e,this.room=t,this.player=n,this.Cards.roundTurns=this.players,this.playerTurn=this.players[0],this.Cards.setupListeners(),this.Cards.Restart()}animate(){this.ctx.clearRect(0,0,this.gameDimensions,this.gameDimensions),this.GameBody.animate(),this.Cards.stacks&&this.Cards.animate()}}const Tk=t=>{let{gameRef:n}=t;const[r,i]=(0,e.useState)(!1);return(0,a.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center"},children:n.current?r?(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{children:[n.current.win," wins!"]}),n.current.Cards.roundTurns.length>2&&(0,a.jsxs)("p",{children:["Remaining cards: ",n.current.Cards.remainingCardsCount]}),(0,a.jsx)(ft,{onClick:()=>{n.current.Cards.Restart()},children:n.current.Cards.roundTurns.length>2?"Next Round":"New Game"})]}):(n.current.Cards.setIWinner=i,null):null})},Nk=async(e,t,n,r,i)=>{const s=await L_(`Games/${n}/${t}`);let a=[];s&&(a=Object.keys(s.players));const o={online:!0};if(a.includes(e)){const r=`Games/${n}/${t}/players/${e}`;await Bu(r,o)}Tu(Su(w_,`Games/${n}/${t}/players/${e}`)).update({online:!1});const l=await A_(`Games/${n}/${t}/players`,(e=>{r(Object.keys(e).filter((t=>e[t].online))),i(Object.values(e).every((e=>e.online)))}));return l},Pk=()=>{const t=(0,e.useRef)(null),n=(0,e.useRef)(null),r=(0,e.useRef)(null),i=(0,e.useRef)(0),[s,o]=(0,e.useState)(window.innerWidth),[l,c]=(0,e.useState)(window.innerHeight),[u,d]=(0,e.useState)(null),[h,f]=(0,e.useState)(!1),{uid:p,loggedIn:m}=P_(),{roomKey:g}=un(),[y,b]=(0,e.useState)(!1),[x,k]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{d(/Mobi|Android/i.test(navigator.userAgent))}),[]),(0,e.useEffect)((()=>{if(g&&p){let e=null;return Nk(p,g,"Whot",b,k).then((t=>e=t)),()=>{if(e&&e(),p&&g){Bu(`Games/Whot/${g}/players/${p}`,{true:!1})}}}}),[p,g]),(0,e.useEffect)((()=>{if(!n.current||null===u)return;const e=()=>((e,t,n,r,i,s)=>{let a=n.current.clientWidth,o=n.current.clientHeight;const l=t.current.getContext("2d");a<(o-40)/5*7+40&&!s&&(o=(a-40)/7*5+40),r(a),i(o),e.current&&(e.current.gameDimensions={width:a,height:o}),t.current&&(t.current.width=a,t.current.height=o,s?(l.save(),l.translate(a,0),l.rotate(Math.PI/2)):l.restore())})(r,t,n,o,c,u);return n.current.addEventListener("resize",e),e(),()=>{n.current&&n.current.removeEventListener("resize",e)}}),[n,u]),(0,e.useEffect)((()=>{if(x){const e=t.current,n=e.getContext("2d"),a={width:u?l:s,height:u?s:l};if(!r.current){r.current=new Ik(n,e,a,u),r.current.Start(y,g,p);const t=e=>{const a=e-i.current;i.current=e,u?n.clearRect(0,0,l,s):n.clearRect(0,0,s,l),r.current.animate(a),requestAnimationFrame(t)};return requestAnimationFrame(t),()=>cancelAnimationFrame(t)}}}),[s,l,y,x]),(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[(0,a.jsx)(U_,{loggedIn:m,uid:p}),(0,a.jsx)(w,{md:7,className:" mx-auto px-0 px-md-3",style:{overflowY:"scroll",paddingBottom:"50px"},children:(0,a.jsx)(v,{fluid:!0,className:"p-0",ref:n,children:(0,a.jsxs)("div",{id:"game-body",style:{position:"relative",height:"100vh",display:"flex",flexDirection:"column",justifyContent:"center",alignContent:"center"},children:[(0,a.jsx)(Tk,{gameRef:r}),(0,a.jsx)("canvas",{id:"gameScreen",ref:t})]})})}),(0,a.jsx)(z_,{})]})}),(0,a.jsx)(Eb,{uid:p})]})},Rk=()=>(0,a.jsx)(jn,{children:(0,a.jsxs)(Sn,{children:[(0,a.jsx)(Cn,{path:"/",element:(0,a.jsx)(Sb,{})}),(0,a.jsx)(Cn,{path:"/:userId",element:(0,a.jsx)(hw,{})}),(0,a.jsx)(Cn,{path:"/:userId/:postId",element:(0,a.jsx)(gw,{})}),(0,a.jsx)(Cn,{path:"/messages",element:(0,a.jsx)(Fw,{})}),(0,a.jsx)(Cn,{path:"/messages/:userId",element:(0,a.jsx)(Fw,{})}),(0,a.jsx)(Cn,{path:"/notifications",element:(0,a.jsx)(Ww,{})}),(0,a.jsx)(Cn,{path:"/Games",element:(0,a.jsx)(mk,{})}),(0,a.jsx)(Cn,{path:"/Games/Chess/:roomKey",element:(0,a.jsx)(hx,{})}),(0,a.jsx)(Cn,{path:"/Games/ImageSlidePuzzle/:roomKey",element:(0,a.jsx)(yx,{})}),(0,a.jsx)(Cn,{path:"/Games/BrickBreak/:roomKey",element:(0,a.jsx)(Mx,{})}),(0,a.jsx)(Cn,{path:"/Games/BallFall/:roomKey",element:(0,a.jsx)(Zx,{})}),(0,a.jsx)(Cn,{path:"/Games/SuperTicTacToe/:roomKey",element:(0,a.jsx)(ok,{})}),(0,a.jsx)(Cn,{path:"/Games/TicTacToe/:roomKey",element:(0,a.jsx)(fk,{})}),(0,a.jsx)(Cn,{path:"/Games/Whot/:roomKey",element:(0,a.jsx)(Pk,{})})]})});r.createRoot(document.getElementById("root")).render((0,a.jsx)(a.Fragment,{children:(0,a.jsx)(Rk,{})}))})()})();
//# sourceMappingURL=main.672dec9f.js.map