/*! For license information please see main.600832ca.js.LICENSE.txt */
(()=>{var e={740:e=>{"use strict";e.exports=function(e,t,n,r,i,s,a,o){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,s,a,o],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},197:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.default)((function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=null;return t.forEach((function(e){if(null==i){var t=e.apply(void 0,n);null!=t&&(i=t)}})),i}))};var r,i=n(534),s=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},534:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,i,s,a){var o=i||"<<anonymous>>",l=a||r;if(null==n[r])return t?new Error("Required "+s+" `"+l+"` was not specified in `"+o+"`."):null;for(var c=arguments.length,u=Array(c>6?c-6:0),d=6;d<c;d++)u[d-6]=arguments[d];return e.apply(void 0,[n,r,o,s,l].concat(u))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,a){if(a!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),I=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,A=Object.assign;function F(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var $=!1;function U(e,t){if(!e||$)return"";$=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{$=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case x:return"Portal";case E:return"Profiler";case C:return"StrictMode";case N:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function V(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return A({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Q(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function J(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return A({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=A({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,ke=null,Ce=null;function Ee(e){if(e=_i(e)){if("function"!==typeof xe)throw Error(s(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Se(e){ke?Ce?Ce.push(e):Ce=[e]:ke=e}function Ie(){if(ke){var e=ke,t=Ce;if(Ce=ke=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Te(e,t){return e(t)}function Ne(){}var Pe=!1;function je(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Te(e,t,n)}finally{Pe=!1,(null!==ke||null!==Ce)&&(Ne(),Ie())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Oe=!1}function Le(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Ae=null,Fe=!1,$e=null,Ue={onError:function(e){Me=!0,Ae=e}};function ze(e,t,n,r,i,s,a,o,l){Me=!1,Ae=null,Le.apply(Ue,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(s(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return He(i),e;if(a===r)return He(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Qe=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=dt(o):0!==(s&=a)&&(r=dt(s))}else 0!==(a=n&~i)?r=dt(a):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,kt,Ct,Et,St=!1,It=[],Tt=null,Nt=null,Pt=null,jt=new Map,Rt=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":jt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function At(e){var t=yi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Et(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function $t(e,t,n){Ft(e)&&n.delete(t)}function Ut(){St=!1,null!==Tt&&Ft(Tt)&&(Tt=null),null!==Nt&&Ft(Nt)&&(Nt=null),null!==Pt&&Ft(Pt)&&(Pt=null),jt.forEach($t),Rt.forEach($t)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function Bt(e){function t(t){return zt(t,e)}if(0<It.length){zt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&zt(Tt,e),null!==Nt&&zt(Nt,e),null!==Pt&&zt(Pt,e),jt.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)At(n),null===n.blockedOn&&Ot.shift()}var Wt=b.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,r){var i=_t,s=Wt.transition;Wt.transition=null;try{_t=1,Gt(e,t,n,r)}finally{_t=i,Wt.transition=s}}function Vt(e,t,n,r){var i=_t,s=Wt.transition;Wt.transition=null;try{_t=4,Gt(e,t,n,r)}finally{_t=i,Wt.transition=s}}function Gt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Kt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Mt(Tt,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return Pt=Mt(Pt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return jt.set(s,Mt(jt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var s=_i(i);if(null!==s&&wt(s),null===(s=Yt(e,t,n,r))&&Hr(e,t,r,Kt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Kt=null;function Yt(e,t,n,r){if(Kt=null,null!==(e=yi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return A(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=A({},cn,{view:0,detail:0}),hn=sn(dn),fn=A({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),mn=sn(A({},fn,{dataTransfer:0})),gn=sn(A({},dn,{relatedTarget:0})),vn=sn(A({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=A({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=sn(yn),bn=sn(A({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function En(){return Cn}var Sn=A({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=sn(Sn),Tn=sn(A({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=sn(A({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Pn=sn(A({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),jn=A({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(jn),On=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,An=u&&(!Dn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),$n=!1;function Un(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function qn(e,t,n,r){Se(r),0<(t=Vr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Vn=null,Gn=null;function Kn(e){Fr(e,0)}function Yn(e){if(G(bi(e)))return e}function Qn(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Vn&&(Vn.detachEvent("onpropertychange",nr),Gn=Vn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];qn(t,Gn,e,we(e)),je(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Vn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function sr(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,_r=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Vr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},Cr={};function Er(e){if(kr[e])return kr[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return kr[e]=n[t];return e}u&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Sr=Er("animationend"),Ir=Er("animationiteration"),Tr=Er("animationstart"),Nr=Er("transitionend"),Pr=new Map,jr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Pr.set(e,t),l(t,[e])}for(var Or=0;Or<jr.length;Or++){var Dr=jr[Or];Rr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Rr(Sr,"onAnimationEnd"),Rr(Ir,"onAnimationIteration"),Rr(Tr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Ar(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Ae;Me=!1,Ae=null,Fe||(Fe=!0,$e=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Ar(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Ar(i,o,c),s=l}}}if(Fe)throw e=$e,Fe=!1,$e=null,e}function $r(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Ur("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Qt(t)){case 1:var i=qt;break;case 4:i=Vt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=yi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}je((function(){var r=s,i=we(n),a=[];e:{var o=Pr.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case Sr:case Ir:case Tr:l=vn;break;case Nr:l=Pn;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Re(p,h))&&u.push(qr(p,m,f)))),d)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?o:bi(l),f=null==c?o:bi(c),(o=new u(m,p+"leave",l,n,i)).target=d,o.relatedTarget=f,m=null,yi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,m=h;m;m=Gr(m))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)h=Gr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gr(u),h=Gr(h)}u=null}else u=null;null!==l&&Kr(a,o,l,u,!1),null!==c&&null!==d&&Kr(a,d,c,u,!0)}if("select"===(l=(o=r?bi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Qn;else if(Hn(o))if(Xn)g=ar;else{g=ir;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?qn(a,g,n,i):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?bi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,br(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(a,n,i)}var y;if(Dn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Bn?Un(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(An&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Bn&&(y=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(v=Vr(r,_)).length&&(_=new bn(_,e,null,n,i),a.push({event:_,listeners:v}),y?_.data=y:null!==(y=zn(n))&&(_.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:($n=!0,Fn);case"textInput":return(e=t.data)===Fn&&$n?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&Un(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return An&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Vr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Fr(a,t)}))}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Vr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Re(e,n))&&r.unshift(qr(e,s,i)),null!=(s=Re(e,t))&&r.push(qr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Re(n,s))&&a.unshift(qr(n,l,o)):i||null!=(l=Re(n,s))&&a.push(qr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Qr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Qr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wi(e){return e[fi]||null}var xi=[],ki=-1;function Ci(e){return{current:e}}function Ei(e){0>ki||(e.current=xi[ki],xi[ki]=null,ki--)}function Si(e,t){ki++,xi[ki]=e.current,e.current=t}var Ii={},Ti=Ci(Ii),Ni=Ci(!1),Pi=Ii;function ji(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ei(Ni),Ei(Ti)}function Di(e,t,n){if(Ti.current!==Ii)throw Error(s(168));Si(Ti,t),Si(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,W(e)||"Unknown",i));return A({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Pi=Ti.current,Si(Ti,e),Si(Ni,Ni.current),!0}function Ai(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ni),Ei(Ti),Si(Ti,e)):Ei(Ni),Si(Ni,n)}var Fi=null,$i=!1,Ui=!1;function zi(e){null===Fi?Fi=[e]:Fi.push(e)}function Bi(){if(!Ui&&null!==Fi){Ui=!0;var e=0,t=_t;try{var n=Fi;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,$i=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ge(Ze,Bi),i}finally{_t=t,Ui=!1}}return null}var Wi=[],Hi=0,qi=null,Vi=0,Gi=[],Ki=0,Yi=null,Qi=1,Xi="";function Ji(e,t){Wi[Hi++]=Vi,Wi[Hi++]=qi,qi=e,Vi=t}function Zi(e,t,n){Gi[Ki++]=Qi,Gi[Ki++]=Xi,Gi[Ki++]=Yi,Yi=e;var r=Qi;e=Xi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Qi=1<<32-at(t)+i|n<<i|r,Xi=s+e}else Qi=1<<s|n<<i|r,Xi=e}function es(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ts(e){for(;e===qi;)qi=Wi[--Hi],Wi[Hi]=null,Vi=Wi[--Hi],Wi[Hi]=null;for(;e===Yi;)Yi=Gi[--Ki],Gi[Ki]=null,Xi=Gi[--Ki],Gi[Ki]=null,Qi=Gi[--Ki],Gi[Ki]=null}var ns=null,rs=null,is=!1,ss=null;function as(e,t){var n=jc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Qi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=jc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&os(e,t)?as(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)as(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function _s(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Ac(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===k?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===R&&ys(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ac(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case x:return(t=Fc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:d(e,t,n,r,null);vs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function m(i,s,o,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<o.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(i,d,o[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),s=a(v,s,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===o.length)return n(i,d),is&&Ji(i,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(i,o[m],l))&&(s=a(d,s,m),null===u?c=d:u.sibling=d,u=d);return is&&Ji(i,m),c}for(d=r(i,d);m<o.length;m++)null!==(g=p(d,i,m,o[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),is&&Ji(i,m),c}function g(i,o,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var _=f(i,m,y.value,c);if(null===_){null===m&&(m=v);break}e&&m&&null===_.alternate&&t(i,m),o=a(_,o,g),null===d?u=_:d.sibling=_,d=_,m=v}if(y.done)return n(i,m),is&&Ji(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return is&&Ji(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=a(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),is&&Ji(i,g),u}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===k){if(7===u.tag){n(r,u.sibling),(s=i(u,a.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&ys(c)===u.type){n(r,u.sibling),(s=i(u,a.props)).ref=gs(r,u,a),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===k?((s=Lc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Dc(a.type,a.key,a.props,null,r.mode,l)).ref=gs(r,s,a),l.return=r,r=l)}return o(r);case x:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(a,r.mode,l)).return=r,r=s}return o(r);case R:return e(r,s,(u=a._init)(a._payload),l)}if(te(a))return m(r,s,a,l);if(L(a))return g(r,s,a,l);vs(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Ac(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var bs=_s(!0),ws=_s(!1),xs=Ci(null),ks=null,Cs=null,Es=null;function Ss(){Es=Cs=ks=null}function Is(e){var t=xs.current;Ei(xs),e._currentValue=t}function Ts(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ns(e,t){ks=e,Es=Cs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_o=!0),e.firstContext=null)}function Ps(e){var t=e._currentValue;if(Es!==e)if(e={context:e,memoizedValue:t,next:null},null===Cs){if(null===ks)throw Error(s(308));Cs=e,ks.dependencies={lanes:0,firstContext:e}}else Cs=Cs.next=e;return t}var js=null;function Rs(e){null===js?js=[e]:js.push(e)}function Os(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Rs(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ds(e,r)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ls=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function As(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $s(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ds(e,n)}return null===(i=r.interleaved)?(t.next=t,Rs(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ds(e,n)}function Us(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function zs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;Ls=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(a=0,u=c=l=null,o=s;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=A({},d,h);break e;case 2:Ls=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ml|=a,e.lanes=a,e.memoizedState=d}}function Ws(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Hs={},qs=Ci(Hs),Vs=Ci(Hs),Gs=Ci(Hs);function Ks(e){if(e===Hs)throw Error(s(174));return e}function Ys(e,t){switch(Si(Gs,t),Si(Vs,e),Si(qs,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(qs),Si(qs,t)}function Qs(){Ei(qs),Ei(Vs),Ei(Gs)}function Xs(e){Ks(Gs.current);var t=Ks(qs.current),n=le(t,e.type);t!==n&&(Si(Vs,e),Si(qs,n))}function Js(e){Vs.current===e&&(Ei(qs),Ei(Vs))}var Zs=Ci(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=b.ReactCurrentDispatcher,ia=b.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ca=!1,ua=!1,da=0,ha=0;function fa(){throw Error(s(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,i,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Ja:Za,e=n(r,i),ua){a=0;do{if(ua=!1,da=0,25<=a)throw Error(s(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,i)}while(ua)}if(ra.current=Xa,t=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ca=!1,t)throw Error(s(300));return e}function ga(){var e=0!==da;return da=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function ya(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function _a(e,t){return"function"===typeof t?t(e):t}function ba(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=oa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((sa&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,aa.lanes|=d,Ml|=d}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(_o=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,aa.lanes|=a,Ml|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(_o=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function xa(){}function ka(e,t){var n=aa,r=ya(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,_o=!0),r=r.queue,La(Sa.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Pa(9,Ea.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(s(349));0!==(30&sa)||Ca(n,t,i)}return i}function Ca(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ea(e,t,n,r){t.value=n,t.getSnapshot=r,Ia(t)&&Ta(e)}function Sa(e,t,n){return n((function(){Ia(t)&&Ta(e)}))}function Ia(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ta(e){var t=Ds(e,1);null!==t&&nc(t,e,1,-1)}function Na(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:e},t.queue=e,e=e.dispatch=Ga.bind(null,aa,e),[t.memoizedState,e]}function Pa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ja(){return ya().memoizedState}function Ra(e,t,n,r){var i=va();aa.flags|=e,i.memoizedState=Pa(1|t,n,void 0,void 0===r?null:r)}function Oa(e,t,n,r){var i=ya();r=void 0===r?null:r;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==r&&pa(r,a.deps))return void(i.memoizedState=Pa(t,n,s,r))}aa.flags|=e,i.memoizedState=Pa(1|t,n,s,r)}function Da(e,t){return Ra(8390656,8,e,t)}function La(e,t){return Oa(2048,8,e,t)}function Ma(e,t){return Oa(4,2,e,t)}function Aa(e,t){return Oa(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function $a(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4,4,Fa.bind(null,t,e),n)}function Ua(){}function za(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ba(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wa(e,t,n){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,_o=!0),e.memoizedState=n):(or(n,t)||(n=mt(),aa.lanes|=n,Ml|=n,e.baseState=!0),t)}function Ha(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{_t=n,ia.transition=r}}function qa(){return ya().memoizedState}function Va(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ka(e))Ya(t,n);else if(null!==(n=Os(e,t,n,r))){nc(n,e,r,ec()),Qa(n,t,r)}}function Ga(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ka(e))Ya(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,Rs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Os(e,t,i,r))&&(nc(n,e,r,i=ec()),Qa(n,t,r))}}function Ka(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ya(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Qa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Xa={readContext:Ps,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Ja={readContext:Ps,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Ps,useEffect:Da,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ra(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ra(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ra(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Va.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Na,useDebugValue:Ua,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Na(!1),t=e[0];return e=Ha.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,i=va();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nl)throw Error(s(349));0!==(30&sa)||Ca(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Da(Sa.bind(null,r,a,e),[e]),r.flags|=2048,Pa(9,Ea.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Nl.identifierPrefix;if(is){var n=Xi;t=":"+t+"R"+(n=(Qi&~(1<<32-at(Qi)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Ps,useCallback:za,useContext:Ps,useEffect:La,useImperativeHandle:$a,useInsertionEffect:Ma,useLayoutEffect:Aa,useMemo:Ba,useReducer:ba,useRef:ja,useState:function(){return ba(_a)},useDebugValue:Ua,useDeferredValue:function(e){return Wa(ya(),oa.memoizedState,e)},useTransition:function(){return[ba(_a)[0],ya().memoizedState]},useMutableSource:xa,useSyncExternalStore:ka,useId:qa,unstable_isNewReconciler:!1},eo={readContext:Ps,useCallback:za,useContext:Ps,useEffect:La,useImperativeHandle:$a,useInsertionEffect:Ma,useLayoutEffect:Aa,useMemo:Ba,useReducer:wa,useRef:ja,useState:function(){return wa(_a)},useDebugValue:Ua,useDeferredValue:function(e){var t=ya();return null===oa?t.memoizedState=e:Wa(t,oa.memoizedState,e)},useTransition:function(){return[wa(_a)[0],ya().memoizedState]},useMutableSource:xa,useSyncExternalStore:ka,useId:qa,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=A({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:A({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=$s(e,s,i))&&(nc(t,e,i,r),Us(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=$s(e,s,i))&&(nc(t,e,i,r),Us(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=$s(e,i,r))&&(nc(t,e,r,n),Us(t,e,r))}};function io(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function so(e,t,n){var r=!1,i=Ii,s=t.contextType;return"object"===typeof s&&null!==s?s=Ps(s):(i=Ri(t)?Pi:Ti.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?ji(e,i):Ii),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Ms(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ps(s):(s=Ri(t)?Pi:Ti.current,i.context=ji(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,ql=r),uo(0,t)},n}function po(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Vl?Vl=new Set([this]):Vl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,$s(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var yo=b.ReactCurrentOwner,_o=!1;function bo(e,t,n,r){t.child=null===e?ws(t,null,n,r):bs(t,e.child,n,r)}function wo(e,t,n,r,i){n=n.render;var s=t.ref;return Ns(t,i),r=ma(e,t,n,r,s,i),n=ga(),null===e||_o?(is&&n&&es(t),t.flags|=1,bo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function xo(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Rc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ko(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Ho(e,t,i)}return t.flags|=1,(e=Oc(s,r)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(_o=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ho(e,t,i);0!==(131072&e.flags)&&(_o=!0)}}return So(e,t,n,r,i)}function Co(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Ol,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Ol,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Si(Ol,Rl),Rl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Si(Ol,Rl),Rl|=r;return bo(e,t,i,n),t.child}function Eo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function So(e,t,n,r,i){var s=Ri(n)?Pi:Ti.current;return s=ji(t,s),Ns(t,i),n=ma(e,t,n,r,s,i),r=ga(),null===e||_o?(is&&r&&es(t),t.flags|=1,bo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function Io(e,t,n,r,i){if(Ri(n)){var s=!0;Mi(t)}else s=!1;if(Ns(t,i),null===t.stateNode)Wo(e,t),so(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ps(c):c=ji(t,c=Ri(n)?Pi:Ti.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Ls=!1;var h=t.memoizedState;a.state=h,Bs(t,r,a,i),l=t.memoizedState,o!==r||h!==l||Ni.current||Ls?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=Ls||io(t,n,o,r,h,l,c))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,As(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ps(l):l=ji(t,l=Ri(n)?Pi:Ti.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||h!==l)&&ao(t,a,r,l),Ls=!1,h=t.memoizedState,a.state=h,Bs(t,r,a,i);var p=t.memoizedState;o!==d||h!==p||Ni.current||Ls?("function"===typeof f&&(no(t,n,f,r),p=t.memoizedState),(c=Ls||io(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return To(e,t,n,r,s,i)}function To(e,t,n,r,i,s){Eo(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Ai(t,n,!1),Ho(e,t,s);r=t.stateNode,yo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,o,s)):bo(e,t,o,s),t.memoizedState=r.state,i&&Ai(t,n,!0),t.child}function No(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),Ys(e,t.containerInfo)}function Po(e,t,n,r,i){return fs(),ps(i),t.flags|=256,bo(e,t,n,r),t.child}var jo,Ro,Oo,Do,Lo={dehydrated:null,treeContext:null,retryLane:0};function Mo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ao(e,t,n){var r,i=t.pendingProps,a=Zs.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Si(Zs,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Mc(l,i,0,null),e=Lc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Mo(n),t.memoizedState=Lo,e):Fo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,$o(e,t,o,r=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(a=Lc(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,o),t.child.memoizedState=Mo(o),t.memoizedState=Lo,a);if(0===(1&t.mode))return $o(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,$o(e,t,o,r=co(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),_o||l){if(null!==(r=Nl)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Ds(e,i),nc(r,e,i,-1))}return mc(),$o(e,t,o,r=co(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Gi[Ki++]=Qi,Gi[Ki++]=Xi,Gi[Ki++]=Yi,Qi=e.id,Xi=e.overflow,Yi=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Oc(r,o):(o=Lc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Mo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Lo,i}return e=(o=e.child).sibling,i=Oc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fo(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function $o(e,t,n,r){return null!==r&&ps(r),bs(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Uo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ts(e.return,t,n)}function zo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Bo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(bo(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Uo(e,n,t);else if(19===e.tag)Uo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ea(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zo(t,!0,n,null,s);break;case"together":zo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ml|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qo(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Vo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Go(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vo(t),null;case 1:case 17:return Ri(t.type)&&Oi(),Vo(t),null;case 3:return r=t.stateNode,Qs(),Ei(Ni),Ei(Ti),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Ro(e,t),Vo(t),null;case 5:Js(t);var i=Ks(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)Oo(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Vo(t),null}if(e=Ks(qs.current),ds(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":$r("cancel",r),$r("close",r);break;case"iframe":case"object":case"embed":$r("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)$r(Lr[i],r);break;case"source":$r("error",r);break;case"img":case"image":case"link":$r("error",r),$r("load",r);break;case"details":$r("toggle",r);break;case"input":Q(r,a),$r("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},$r("invalid",r);break;case"textarea":ie(r,a),$r("invalid",r)}for(var l in ye(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&$r("scroll",r)}switch(n){case"input":V(r),Z(r,a,!0);break;case"textarea":V(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,jo(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":$r("cancel",e),$r("close",e),i=r;break;case"iframe":case"object":case"embed":$r("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)$r(Lr[i],e);i=r;break;case"source":$r("error",e),i=r;break;case"img":case"image":case"link":$r("error",e),$r("load",e),i=r;break;case"details":$r("toggle",e),i=r;break;case"input":Q(e,r),i=Y(e,r),$r("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=A({},r,{value:void 0}),$r("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),$r("invalid",e)}for(a in ye(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&$r("scroll",e):null!=u&&_(e,a,u,l))}switch(n){case"input":V(e),Z(e,r,!1);break;case"textarea":V(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Vo(t),null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Ks(Gs.current),Ks(qs.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Vo(t),null;case 13:if(Ei(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),fs(),t.flags|=98560,a=!1;else if(a=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[hi]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Vo(t),a=!1}else null!==ss&&(ac(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Dl&&(Dl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Vo(t),null);case 4:return Qs(),Ro(e,t),null===e&&Br(t.stateNode.containerInfo),Vo(t),null;case 10:return Is(t.type._context),Vo(t),null;case 19:if(Ei(Zs),null===(a=t.memoizedState))return Vo(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)qo(a,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,qo(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==a.tail&&Xe()>Bl&&(t.flags|=128,r=!0,qo(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!is)return Vo(t),null}else 2*Xe()-a.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,qo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xe(),t.sibling=null,n=Zs.current,Si(Zs,r?1&n|2:1&n),t):(Vo(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Vo(t),6&t.subtreeFlags&&(t.flags|=8192)):Vo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ko(e,t){switch(ts(t),t.tag){case 1:return Ri(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Qs(),Ei(Ni),Ei(Ti),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Js(t),null;case 13:if(Ei(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(Zs),null;case 4:return Qs(),null;case 10:return Is(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}jo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ro=function(){},Oo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ks(qs.current);var s,a=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),a=[];break;case"select":i=A({},i,{value:void 0}),r=A({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&$r("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Do=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yo=!1,Qo=!1,Xo="function"===typeof WeakSet?WeakSet:Set,Jo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Cc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Cc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Qo||Zo(n,t);case 6:var r=ul,i=dl;ul=null,hl(e,t,n),dl=i,null!==(ul=r)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Qo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&el(n,t,a),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Qo&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Cc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Qo=(r=Qo)||null!==n.memoizedState,hl(e,t,n),Qo=r):hl(e,t,n);break;default:hl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xo),t.forEach((function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(a,o,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Cc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Cc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Cc(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Cc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&X(i,a),_e(l,o);var u=_e(l,a);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):_(i,d,h,u)}switch(l){case"input":J(i,a);break;case"textarea":se(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(g){Cc(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Cc(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Cc(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Xe())),4&r&&pl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Qo=(u=Qo)||d,ml(t,e),Qo=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Jo=e,d=e.child;null!==d;){for(h=Jo=d;null!==Jo;){switch(p=(f=Jo).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Zo(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Cc(r,n,g)}}break;case 5:Zo(f,f.return);break;case 22:if(null!==f.memoizedState){wl(h);continue}}null!==p?(p.return=f,Jo=p):wl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Cc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Cc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,ol(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(s(161))}}catch(o){Cc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Jo=e,_l(e,t,n)}function _l(e,t,n){for(var r=0!==(1&e.mode);null!==Jo;){var i=Jo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Yo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Qo;o=Yo;var c=Qo;if(Yo=a,(Qo=l)&&!c)for(Jo=i;null!==Jo;)l=(a=Jo).child,22===a.tag&&null!==a.memoizedState?xl(i):null!==l?(l.return=a,Jo=l):xl(i);for(;null!==s;)Jo=s,_l(s,t,n),s=s.sibling;Jo=i,Yo=o,Qo=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Jo=s):bl(e)}}function bl(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ws(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ws(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(s(163))}Qo||512&t.flags&&il(t)}catch(f){Cc(t,t.return,f)}}if(t===e){Jo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jo=n;break}Jo=t.return}}function wl(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jo=n;break}Jo=t.return}}function xl(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Cc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Cc(t,i,l)}}var s=t.return;try{il(t)}catch(l){Cc(t,s,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Cc(t,a,l)}}}catch(l){Cc(t,t.return,l)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var kl,Cl=Math.ceil,El=b.ReactCurrentDispatcher,Sl=b.ReactCurrentOwner,Il=b.ReactCurrentBatchConfig,Tl=0,Nl=null,Pl=null,jl=0,Rl=0,Ol=Ci(0),Dl=0,Ll=null,Ml=0,Al=0,Fl=0,$l=null,Ul=null,zl=0,Bl=1/0,Wl=null,Hl=!1,ql=null,Vl=null,Gl=!1,Kl=null,Yl=0,Ql=0,Xl=null,Jl=-1,Zl=0;function ec(){return 0!==(6&Tl)?Xe():-1!==Jl?Jl:Jl=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==jl?jl&-jl:null!==ms.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function nc(e,t,n,r){if(50<Ql)throw Ql=0,Xl=null,Error(s(185));vt(e,n,r),0!==(2&Tl)&&e===Nl||(e===Nl&&(0===(2&Tl)&&(Al|=n),4===Dl&&oc(e,jl)),rc(e,r),1===n&&0===Tl&&0===(1&t.mode)&&(Bl=Xe()+500,$i&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ht(e,e===Nl?jl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){$i=!0,zi(e)}(lc.bind(null,e)):zi(lc.bind(null,e)),ai((function(){0===(6&Tl)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Jl=-1,Zl=0,0!==(6&Tl))throw Error(s(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Nl?jl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Tl;Tl|=2;var a=pc();for(Nl===e&&jl===t||(Wl=null,Bl=Xe()+500,hc(e,t));;)try{yc();break}catch(l){fc(e,l)}Ss(),El.current=a,Tl=i,null!==Pl?t=0:(Nl=null,jl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ll,hc(e,0),oc(e,r),rc(e,Xe()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(a=pt(e))&&(r=a,t=sc(e,a))),1===t))throw n=Ll,hc(e,0),oc(e,r),rc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Ul,Wl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=zl+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Ul,Wl),t);break}wc(e,Ul,Wl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Cl(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Ul,Wl),r);break}wc(e,Ul,Wl);break;default:throw Error(s(329))}}}return rc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=$l;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&ac(t)),e}function ac(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function oc(e,t){for(t&=~Fl,t&=~Al,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Tl))throw Error(s(327));xc();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ll,hc(e,0),oc(e,t),rc(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Ul,Wl),rc(e,Xe()),null}function cc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(Bl=Xe()+500,$i&&Bi())}}function uc(e){null!==Kl&&0===Kl.tag&&0===(6&Tl)&&xc();var t=Tl;Tl|=1;var n=Il.transition,r=_t;try{if(Il.transition=null,_t=1,e)return e()}finally{_t=r,Il.transition=n,0===(6&(Tl=t))&&Bi()}}function dc(){Rl=Ol.current,Ei(Ol)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:Qs(),Ei(Ni),Ei(Ti),na();break;case 5:Js(r);break;case 4:Qs();break;case 13:case 19:Ei(Zs);break;case 10:Is(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Nl=e,Pl=e=Oc(e.current,null),jl=Rl=t,Dl=0,Ll=null,Fl=Al=Ml=0,Ul=$l=null,null!==js){for(t=0;t<js.length;t++)if(null!==(r=(n=js[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}js=null}return e}function fc(e,t){for(;;){var n=Pl;try{if(Ss(),ra.current=Xa,ca){for(var r=aa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ca=!1}if(sa=0,la=oa=aa=null,ua=!1,da=0,Sl.current=null,null===n||null===n.return){Dl=1,Ll=t,Pl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=jl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&mo(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(a,u,t),mc();break e}c=Error(s(426))}else if(is&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),ps(lo(c,l));break e}}a=c=lo(c,l),4!==Dl&&(Dl=2),null===$l?$l=[a]:$l.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zs(a,fo(0,c,t));break e;case 1:l=c;var y=a.type,_=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Vl||!Vl.has(_)))){a.flags|=65536,t&=-t,a.lanes|=t,zs(a,po(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(b){t=b,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function pc(){var e=El.current;return El.current=Xa,null===e?Xa:e}function mc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Nl||0===(268435455&Ml)&&0===(268435455&Al)||oc(Nl,jl)}function gc(e,t){var n=Tl;Tl|=2;var r=pc();for(Nl===e&&jl===t||(Wl=null,hc(e,t));;)try{vc();break}catch(i){fc(e,i)}if(Ss(),Tl=n,El.current=r,null!==Pl)throw Error(s(261));return Nl=null,jl=0,Dl}function vc(){for(;null!==Pl;)_c(Pl)}function yc(){for(;null!==Pl&&!Ye();)_c(Pl)}function _c(e){var t=kl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?bc(e):Pl=t,Sl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Go(n,t,Rl)))return void(Pl=n)}else{if(null!==(n=Ko(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Dl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Dl&&(Dl=5)}function wc(e,t,n){var r=_t,i=Il.transition;try{Il.transition=null,_t=1,function(e,t,n,r){do{xc()}while(null!==Kl);if(0!==(6&Tl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Nl&&(Pl=Nl=null,jl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Nc(tt,(function(){return xc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Il.transition,Il.transition=null;var o=_t;_t=1;var l=Tl;Tl|=4,Sl.current=null,function(e,t){if(ei=Ht,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=o),f===a&&++d===r&&(c=o),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(w){Cc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Qe(),Tl=l,_t=o,Il.transition=a}else e.current=n;if(Gl&&(Gl=!1,Kl=e,Yl=i),a=e.pendingLanes,0===a&&(Vl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=ql,ql=null,e;0!==(1&Yl)&&0!==e.tag&&xc(),a=e.pendingLanes,0!==(1&a)?e===Xl?Ql++:(Ql=0,Xl=e):Ql=0,Bi()}(e,t,n,r)}finally{Il.transition=i,_t=r}return null}function xc(){if(null!==Kl){var e=bt(Yl),t=Il.transition,n=_t;try{if(Il.transition=null,_t=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Yl=0,0!==(6&Tl))throw Error(s(331));var i=Tl;for(Tl|=4,Jo=e.current;null!==Jo;){var a=Jo,o=a.child;if(0!==(16&Jo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Jo=u;null!==Jo;){var d=Jo;switch(d.tag){case 0:case 11:case 15:nl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Jo=h;else for(;null!==Jo;){var f=(d=Jo).sibling,p=d.return;if(sl(d),d===u){Jo=null;break}if(null!==f){f.return=p,Jo=f;break}Jo=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Jo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(a=Jo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Jo=y;break e}Jo=a.return}}var _=e.current;for(Jo=_;null!==Jo;){var b=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Jo=b;else e:for(o=_;null!==Jo;){if(0!==(2048&(l=Jo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(x){Cc(l,l.return,x)}if(l===o){Jo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Jo=w;break e}Jo=l.return}}if(Tl=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{_t=n,Il.transition=t}}return!1}function kc(e,t,n){e=$s(e,t=fo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Cc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Vl||!Vl.has(r))){t=$s(t,e=po(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(jl&n)===n&&(4===Dl||3===Dl&&(130023424&jl)===jl&&500>Xe()-zl?hc(e,0):Fl|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ds(e,t))&&(vt(e,t,n),rc(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Sc(e,n)}function Nc(e,t){return Ge(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jc(e,t,n,r){return new Pc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=jc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Rc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return Lc(n.children,i,a,t);case C:o=8,i|=8;break;case E:return(e=jc(12,n,t,2|i)).elementType=E,e.lanes=a,e;case N:return(e=jc(13,n,t,i)).elementType=N,e.lanes=a,e;case P:return(e=jc(19,n,t,i)).elementType=P,e.lanes=a,e;case O:return Mc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case I:o=9;break e;case T:o=11;break e;case j:o=14;break e;case R:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=jc(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Lc(e,t,n,r){return(e=jc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=jc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Ac(e,t,n){return(e=jc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=jc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $c(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,s,a,o,l){return e=new $c(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=jc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function zc(e){if(!e)return Ii;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,s,a,o,l){return(e=Uc(n,r,!0,e,0,s,0,o,l)).context=zc(null),n=e.current,(s=Fs(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,$s(n,s,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,s=ec(),a=tc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=$s(i,t,a))&&(nc(e,i,a,s),Us(e,i,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Vc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)_o=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _o=!1,function(e,t,n){switch(t.tag){case 3:No(t),fs();break;case 5:Xs(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(xs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ao(e,t,n):(Si(Zs,1&Zs.current),null!==(e=Ho(e,t,n))?e.sibling:null);Si(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,Co(e,t,n)}return Ho(e,t,n)}(e,t,n);_o=0!==(131072&e.flags)}else _o=!1,is&&0!==(1048576&t.flags)&&Zi(t,Vi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wo(e,t),e=t.pendingProps;var i=ji(t,Ti.current);Ns(t,n),i=ma(null,t,r,e,i,n);var a=ga();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(a=!0,Mi(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ms(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=To(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),bo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===j)return 14}return 2}(r),e=to(r,e),i){case 0:t=So(null,t,r,e,n);break e;case 1:t=Io(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=xo(null,t,r,to(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,So(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,Io(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(No(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,As(e,t),Bs(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Po(e,t,r,n,i=lo(Error(s(423)),t));break e}if(r!==i){t=Po(e,t,r,n,i=lo(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=ws(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Ho(e,t,n);break e}bo(e,t,r,n)}t=t.child}return t;case 5:return Xs(t),null===e&&cs(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),Eo(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ao(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):bo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Si(xs,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Ni.current){t=Ho(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ts(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ts(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}bo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ns(t,n),r=r(i=Ps(i)),t.flags|=1,bo(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),xo(e,t,r,i=to(r.type,i),n);case 15:return ko(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),Wo(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Ns(t,n),so(t,r,i),oo(t,r,i,n),To(null,t,r,!0,e,n);case 19:return Bo(e,t,n);case 22:return Co(e,t,n)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Hc(a);o.call(e)}}Wc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hc(a);s.call(e)}}var a=Bc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=a,e[pi]=a.current,Br(8===e.nodeType?e.parentNode:e),uc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),uc((function(){Wc(t,l,n,r)})),l}(n,t,e,i,r);return Hc(a)}Yc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},Yc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Wc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&At(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Xe()),0===(6&Tl)&&(Bl=Xe()+500,Bi()))}break;case 13:uc((function(){var t=Ds(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Vc(e,1)}},xt=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)nc(t,e,134217728,ec());Vc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=Ds(e,t);if(null!==n)nc(n,e,t,ec());Vc(e,t)}},Ct=function(){return _t},Et=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(s(90));G(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cc,Ne=uc;var eu={usingClientEntryPoint:!1,Events:[_i,bi,wi,Se,Ie,cc]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(s(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,a,o),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=_.prototype=new y;b.constructor=_,m(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,k={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)x.call(t,i)&&!C.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:k.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+T(l,0):s,w(a)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),N(a,t,i,"",(function(e){return e}))):null!=a&&(S(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(I,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+T(o=e[c],c);l+=N(o,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=N(o=o.value,t,i,u=s+T(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function j(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},D={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:k};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=_,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!C.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:j}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,O(x);else{var t=r(u);null!==t&&D(w,t.startTime-e)}}function x(e,n){m=!1,g&&(g=!1,y(S),S=-1),p=!0;var s=f;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&D(w,d.startTime-n),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,C=!1,E=null,S=-1,I=5,T=-1;function N(){return!(t.unstable_now()-T<I)}function P(){if(null!==E){var e=t.unstable_now();T=e;var n=!0;try{n=E(!0,e)}finally{n?k():(C=!1,E=null)}}else C=!1}if("function"===typeof _)k=function(){_(P)};else if("undefined"!==typeof MessageChannel){var j=new MessageChannel,R=j.port2;j.port1.onmessage=P,k=function(){R.postMessage(null)}}else k=function(){v(P,0)};function O(e){E=e,C||(C=!0,k())}function D(e,n){S=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,O(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(y(S),S=-1):g=!0,D(w,s-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,O(x))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)},440:e=>{"use strict";var t=function(){};e.exports=t},139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,s(n)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(s,a),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=n(43),t=n.t(e,2),r=n(391),i=n(139),s=n.n(i),a=n(579);const o=["xxl","xl","lg","md","sm","xs"],l="xs",c=e.createContext({prefixes:{},breakpoints:o,minBreakpoint:l}),{Consumer:u,Provider:d}=c;function h(t,n){const{prefixes:r}=(0,e.useContext)(c);return t||r[n]||n}function f(){const{breakpoints:t}=(0,e.useContext)(c);return t}function p(){const{minBreakpoint:t}=(0,e.useContext)(c);return t}function m(){const{dir:t}=(0,e.useContext)(c);return"rtl"===t}const g=e.forwardRef(((e,t)=>{let{bsPrefix:n,fluid:r=!1,as:i="div",className:o,...l}=e;const c=h(n,"container"),u="string"===typeof r?`-${r}`:"-fluid";return(0,a.jsx)(i,{ref:t,...l,className:s()(o,r?`${c}${u}`:c)})}));g.displayName="Container";const v=g,y=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i="div",...o}=e;const l=h(n,"row"),c=f(),u=p(),d=`${l}-cols`,m=[];return c.forEach((e=>{const t=o[e];let n;delete o[e],null!=t&&"object"===typeof t?({cols:n}=t):n=t;const r=e!==u?`-${e}`:"";null!=n&&m.push(`${d}${r}-${n}`)})),(0,a.jsx)(i,{ref:t,...o,className:s()(r,l,...m)})}));y.displayName="Row";const _=y;const b=e.forwardRef(((e,t)=>{const[{className:n,...r},{as:i="div",bsPrefix:o,spans:l}]=function(e){let{as:t,bsPrefix:n,className:r,...i}=e;n=h(n,"col");const a=f(),o=p(),l=[],c=[];return a.forEach((e=>{const t=i[e];let r,s,a;delete i[e],"object"===typeof t&&null!=t?({span:r,offset:s,order:a}=t):r=t;const u=e!==o?`-${e}`:"";r&&l.push(!0===r?`${n}${u}`:`${n}${u}-${r}`),null!=a&&c.push(`order${u}-${a}`),null!=s&&c.push(`offset${u}-${s}`)})),[{...i,className:s()(r,...l,...c)},{as:t,bsPrefix:n,spans:l}]}(e);return(0,a.jsx)(i,{...r,ref:t,className:s()(n,!l.length&&o)})}));b.displayName="Col";const w=b,x=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=h(r,"card-body"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));x.displayName="CardBody";const k=x,C=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=h(r,"card-footer"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));C.displayName="CardFooter";const E=C,S=e.createContext(null);S.displayName="CardHeaderContext";const I=S,T=e.forwardRef(((t,n)=>{let{bsPrefix:r,className:i,as:o="div",...l}=t;const c=h(r,"card-header"),u=(0,e.useMemo)((()=>({cardHeaderBsPrefix:c})),[c]);return(0,a.jsx)(I.Provider,{value:u,children:(0,a.jsx)(o,{ref:n,...l,className:s()(i,c)})})}));T.displayName="CardHeader";const N=T,P=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,variant:i,as:o="img",...l}=e;const c=h(n,"card-img");return(0,a.jsx)(o,{ref:t,className:s()(i?`${c}-${i}`:c,r),...l})}));P.displayName="CardImg";const j=P,R=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=h(r,"card-img-overlay"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));R.displayName="CardImgOverlay";const O=R,D=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="a",...o}=e;return r=h(r,"card-link"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));D.displayName="CardLink";const L=D,M=t=>e.forwardRef(((e,n)=>(0,a.jsx)("div",{...e,ref:n,className:s()(e.className,t)}))),A=M("h6"),F=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=A,...o}=e;return r=h(r,"card-subtitle"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));F.displayName="CardSubtitle";const $=F,U=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="p",...o}=e;return r=h(r,"card-text"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));U.displayName="CardText";const z=U,B=M("h5"),W=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=B,...o}=e;return r=h(r,"card-title"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));W.displayName="CardTitle";const H=W,q=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,bg:i,text:o,border:l,body:c=!1,children:u,as:d="div",...f}=e;const p=h(n,"card");return(0,a.jsx)(d,{ref:t,...f,className:s()(r,p,i&&`bg-${i}`,o&&`text-${o}`,l&&`border-${l}`),children:c?(0,a.jsx)(k,{children:u}):u})}));q.displayName="Card";const V=Object.assign(q,{Img:j,Title:H,Subtitle:$,Body:k,Link:L,Text:z,Header:N,Footer:E,ImgOverlay:O});var G=n(173),K=n.n(G);K().string,K().bool,K().bool,K().bool,K().bool;const Y=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,fluid:i=!1,rounded:o=!1,roundedCircle:l=!1,thumbnail:c=!1,...u}=e;return n=h(n,"img"),(0,a.jsx)("img",{ref:t,...u,className:s()(r,i&&`${n}-fluid`,o&&"rounded",l&&"rounded-circle",c&&`${n}-thumbnail`)})}));Y.displayName="Image";const Q=Y;const X=function(t){const n=(0,e.useRef)(t);return(0,e.useEffect)((()=>{n.current=t}),[t]),n};function J(t){const n=X(t);return(0,e.useCallback)((function(){return n.current&&n.current(...arguments)}),[n])}const Z=function(t,n){const r=(0,e.useRef)(!0);(0,e.useEffect)((()=>{if(!r.current)return t();r.current=!1}),n)};function ee(){const t=(0,e.useRef)(!0),n=(0,e.useRef)((()=>t.current));return(0,e.useEffect)((()=>(t.current=!0,()=>{t.current=!1})),[]),n.current}function te(t){const n=function(t){const n=(0,e.useRef)(t);return n.current=t,n}(t);(0,e.useEffect)((()=>()=>n.current()),[])}const ne=2**31-1;function re(e,t,n){const r=n-Date.now();e.current=r<=ne?setTimeout(t,r):setTimeout((()=>re(e,t,n)),ne)}function ie(){const t=ee(),n=(0,e.useRef)();return te((()=>clearTimeout(n.current))),(0,e.useMemo)((()=>{const e=()=>clearTimeout(n.current);return{set:function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t()&&(e(),i<=ne?n.current=setTimeout(r,i):re(n,r,Date.now()+i))},clear:e,handleRef:n}}),[])}const se="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,ae="undefined"!==typeof document||se?e.useLayoutEffect:e.useEffect;new WeakMap;const oe=["as","disabled"];function le(e){let{tagName:t,disabled:n,href:r,target:i,rel:s,role:a,onClick:o,tabIndex:l=0,type:c}=e;t||(t=null!=r||null!=i||null!=s?"a":"button");const u={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},u];const d=e=>{(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==o||o(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=a?a:"button",disabled:void 0,tabIndex:n?void 0:l,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?s:void 0,onClick:d,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),d(e))}},u]}const ce=e.forwardRef(((e,t)=>{let{as:n,disabled:r}=e,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,oe);const[s,{tagName:o}]=le(Object.assign({tagName:n,disabled:r},i));return(0,a.jsx)(o,Object.assign({},i,s,{ref:t}))}));ce.displayName="Button";const ue=ce,de=["onKeyDown"];const he=e.forwardRef(((e,t)=>{let{onKeyDown:n}=e,r=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,de);const[i]=le(Object.assign({tagName:"a"},r)),s=J((e=>{i.onKeyDown(e),null==n||n(e)}));return(o=r.href)&&"#"!==o.trim()&&"button"!==r.role?(0,a.jsx)("a",Object.assign({ref:t},r,{onKeyDown:n})):(0,a.jsx)("a",Object.assign({ref:t},r,i,{onKeyDown:s}));var o}));he.displayName="Anchor";const fe=he;function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pe.apply(null,arguments)}function me(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}n(740);function ge(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function ve(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function ye(t,n){return Object.keys(n).reduce((function(r,i){var s,a=r,o=a[ge(i)],l=a[i],c=me(a,[ge(i),i].map(ve)),u=n[i],d=function(t,n,r){var i=(0,e.useRef)(void 0!==t),s=(0,e.useState)(n),a=s[0],o=s[1],l=void 0!==t,c=i.current;return i.current=l,!l&&c&&a!==n&&o(n),[l?t:a,(0,e.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r&&r.apply(void 0,[e].concat(n)),o(e)}),[r])]}(l,o,t[u]),h=d[0],f=d[1];return pe({},c,((s={})[i]=h,s[u]=f,s))}),t)}function _e(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function be(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function we(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}_e.__suppressDeprecationWarning=!0,be.__suppressDeprecationWarning=!0,we.__suppressDeprecationWarning=!0;const xe=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=h(r,"carousel-caption"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));xe.displayName="CarouselCaption";const ke=xe,Ce=e.forwardRef(((e,t)=>{let{as:n="div",bsPrefix:r,className:i,...o}=e;const l=s()(i,h(r,"carousel-item"));return(0,a.jsx)(n,{ref:t,...o,className:l})}));Ce.displayName="CarouselItem";const Ee=Ce;function Se(t,n){let r=0;return e.Children.map(t,(t=>e.isValidElement(t)?n(t,r++):t))}function Ie(e){return e&&e.ownerDocument||document}function Te(e,t){return function(e){var t=Ie(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var Ne=/([A-Z])/g;var Pe=/^ms-/;function je(e){return function(e){return e.replace(Ne,"-$1").toLowerCase()}(e).replace(Pe,"-ms-")}var Re=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const Oe=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(je(t))||Te(e).getPropertyValue(je(t));Object.keys(t).forEach((function(i){var s=t[i];s||0===s?!function(e){return!(!e||!Re.test(e))}(i)?n+=je(i)+": "+s+";":r+=i+"("+s+") ":e.style.removeProperty(je(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n},De=!("undefined"===typeof window||!window.document||!window.document.createElement);var Le=!1,Me=!1;try{var Ae={get passive(){return Le=!0},get once(){return Me=Le=!0}};De&&(window.addEventListener("test",Ae,Ae),window.removeEventListener("test",Ae,!0))}catch(Nk){}const Fe=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!Me){var i=r.once,s=r.capture,a=n;!Me&&i&&(a=n.__once||function e(r){this.removeEventListener(t,e,s),n.call(this,r)},n.__once=a),e.addEventListener(t,a,Le?r:s)}e.addEventListener(t,n,r)};const $e=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};const Ue=function(e,t,n,r){return Fe(e,t,n,r),function(){$e(e,t,n,r)}};function ze(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),s=Ue(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),s()}}function Be(e,t,n,r){null==n&&(n=function(e){var t=Oe(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=ze(e,n,r),s=Ue(e,"transitionend",t);return function(){i(),s()}}function We(e,t){const n=Oe(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function He(e,t){const n=We(e,"transitionDuration"),r=We(e,"transitionDelay"),i=Be(e,(n=>{n.target===e&&(i(),t(n))}),n+r)}function qe(e){e.offsetHeight}function Ve(e,t){return Ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ve(e,t)}var Ge=n(950),Ke=n.t(Ge,2);const Ye=!1,Qe=e.createContext(null);var Xe="unmounted",Je="exited",Ze="entering",et="entered",tt="exiting",nt=function(t){var n,r;function i(e,n){var r;r=t.call(this,e,n)||this;var i,s=n&&!n.isMounting?e.enter:e.appear;return r.appearStatus=null,e.in?s?(i=Je,r.appearStatus=Ze):i=et:i=e.unmountOnExit||e.mountOnEnter?Xe:Je,r.state={status:i},r.nextCallback=null,r}r=t,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,Ve(n,r),i.getDerivedStateFromProps=function(e,t){return e.in&&t.status===Xe?{status:Je}:null};var s=i.prototype;return s.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},s.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Ze&&n!==et&&(t=Ze):n!==Ze&&n!==et||(t=tt)}this.updateStatus(!1,t)},s.componentWillUnmount=function(){this.cancelNextCallback()},s.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},s.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Ze){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:Ge.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Je&&this.setState({status:Xe})},s.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[Ge.findDOMNode(this),r],s=i[0],a=i[1],o=this.getTimeouts(),l=r?o.appear:o.enter;!e&&!n||Ye?this.safeSetState({status:et},(function(){t.props.onEntered(s)})):(this.props.onEnter(s,a),this.safeSetState({status:Ze},(function(){t.props.onEntering(s,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:et},(function(){t.props.onEntered(s,a)}))}))})))},s.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:Ge.findDOMNode(this);t&&!Ye?(this.props.onExit(r),this.safeSetState({status:tt},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Je},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:Je},(function(){e.props.onExited(r)}))},s.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},s.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},s.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},s.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:Ge.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],s=i[0],a=i[1];this.props.addEndListener(s,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},s.render=function(){var t=this.state.status;if(t===Xe)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,me(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return e.createElement(Qe.Provider,{value:null},"function"===typeof r?r(t,i):e.cloneElement(e.Children.only(r),i))},i}(e.Component);function rt(){}nt.contextType=Qe,nt.propTypes={},nt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:rt,onEntering:rt,onEntered:rt,onExit:rt,onExiting:rt,onExited:rt},nt.UNMOUNTED=Xe,nt.EXITED=Je,nt.ENTERING=Ze,nt.ENTERED=et,nt.EXITING=tt;const it=nt,st=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const at=function(t,n){return(0,e.useMemo)((()=>function(e,t){const n=st(e),r=st(t);return e=>{n&&n(e),r&&r(e)}}(t,n)),[t,n])};const ot=e.forwardRef(((t,n)=>{let{onEnter:r,onEntering:i,onEntered:s,onExit:o,onExiting:l,onExited:c,addEndListener:u,children:d,childRef:h,...f}=t;const p=(0,e.useRef)(null),m=at(p,h),g=e=>{var t;m((t=e)&&"setState"in t?Ge.findDOMNode(t):null!=t?t:null)},v=e=>t=>{e&&p.current&&e(p.current,t)},y=(0,e.useCallback)(v(r),[r]),_=(0,e.useCallback)(v(i),[i]),b=(0,e.useCallback)(v(s),[s]),w=(0,e.useCallback)(v(o),[o]),x=(0,e.useCallback)(v(l),[l]),k=(0,e.useCallback)(v(c),[c]),C=(0,e.useCallback)(v(u),[u]);return(0,a.jsx)(it,{ref:n,...f,onEnter:y,onEntered:b,onEntering:_,onExit:w,onExited:k,onExiting:x,addEndListener:C,nodeRef:p,children:"function"===typeof d?(e,t)=>d(e,{...t,ref:g}):e.cloneElement(d,{ref:g})})})),lt=ot;const ct=e.forwardRef(((t,n)=>{let{defaultActiveIndex:r=0,...i}=t;const{as:o="div",bsPrefix:l,slide:c=!0,fade:u=!1,controls:d=!0,indicators:f=!0,indicatorLabels:p=[],activeIndex:g,onSelect:v,onSlide:y,onSlid:_,interval:b=5e3,keyboard:w=!0,onKeyDown:x,pause:k="hover",onMouseOver:C,onMouseOut:E,wrap:S=!0,touch:I=!0,onTouchStart:T,onTouchMove:N,onTouchEnd:P,prevIcon:j=(0,a.jsx)("span",{"aria-hidden":"true",className:"carousel-control-prev-icon"}),prevLabel:R="Previous",nextIcon:O=(0,a.jsx)("span",{"aria-hidden":"true",className:"carousel-control-next-icon"}),nextLabel:D="Next",variant:L,className:M,children:A,...F}=ye({defaultActiveIndex:r,...i},{activeIndex:"onSelect"}),$=h(l,"carousel"),U=m(),z=(0,e.useRef)(null),[B,W]=(0,e.useState)("next"),[H,q]=(0,e.useState)(!1),[V,G]=(0,e.useState)(!1),[K,Y]=(0,e.useState)(g||0);(0,e.useEffect)((()=>{V||g===K||(z.current?W(z.current):W((g||0)>K?"next":"prev"),c&&G(!0),Y(g||0))}),[g,V,K,c]),(0,e.useEffect)((()=>{z.current&&(z.current=null)}));let Q,ee=0;!function(t,n){let r=0;e.Children.forEach(t,(t=>{e.isValidElement(t)&&n(t,r++)}))}(A,((e,t)=>{++ee,t===g&&(Q=e.props.interval)}));const te=X(Q),ne=(0,e.useCallback)((e=>{if(V)return;let t=K-1;if(t<0){if(!S)return;t=ee-1}z.current="prev",null==v||v(t,e)}),[V,K,v,S,ee]),re=J((e=>{if(V)return;let t=K+1;if(t>=ee){if(!S)return;t=0}z.current="next",null==v||v(t,e)})),se=(0,e.useRef)();(0,e.useImperativeHandle)(n,(()=>({element:se.current,prev:ne,next:re})));const ae=J((()=>{!document.hidden&&function(e){if(!e||!e.style||!e.parentNode||!e.parentNode.style)return!1;const t=getComputedStyle(e);return"none"!==t.display&&"hidden"!==t.visibility&&"none"!==getComputedStyle(e.parentNode).display}(se.current)&&(U?ne():re())})),oe="next"===B?"start":"end";Z((()=>{c||(null==y||y(K,oe),null==_||_(K,oe))}),[K]);const le=`${$}-item-${B}`,ce=`${$}-item-${oe}`,ue=(0,e.useCallback)((e=>{qe(e),null==y||y(K,oe)}),[y,K,oe]),de=(0,e.useCallback)((()=>{G(!1),null==_||_(K,oe)}),[_,K,oe]),he=(0,e.useCallback)((e=>{if(w&&!/input|textarea/i.test(e.target.tagName))switch(e.key){case"ArrowLeft":return e.preventDefault(),void(U?re(e):ne(e));case"ArrowRight":return e.preventDefault(),void(U?ne(e):re(e))}null==x||x(e)}),[w,x,ne,re,U]),pe=(0,e.useCallback)((e=>{"hover"===k&&q(!0),null==C||C(e)}),[k,C]),me=(0,e.useCallback)((e=>{q(!1),null==E||E(e)}),[E]),ge=(0,e.useRef)(0),ve=(0,e.useRef)(0),_e=ie(),be=(0,e.useCallback)((e=>{ge.current=e.touches[0].clientX,ve.current=0,"hover"===k&&q(!0),null==T||T(e)}),[k,T]),we=(0,e.useCallback)((e=>{e.touches&&e.touches.length>1?ve.current=0:ve.current=e.touches[0].clientX-ge.current,null==N||N(e)}),[N]),xe=(0,e.useCallback)((e=>{if(I){const t=ve.current;Math.abs(t)>40&&(t>0?ne(e):re(e))}"hover"===k&&_e.set((()=>{q(!1)}),b||void 0),null==P||P(e)}),[I,k,ne,re,_e,b,P]),ke=null!=b&&!H&&!V,Ce=(0,e.useRef)();(0,e.useEffect)((()=>{var e,t;if(!ke)return;const n=U?ne:re;return Ce.current=window.setInterval(document.visibilityState?ae:n,null!=(e=null!=(t=te.current)?t:b)?e:void 0),()=>{null!==Ce.current&&clearInterval(Ce.current)}}),[ke,ne,re,te,b,ae,U]);const Ee=(0,e.useMemo)((()=>f&&Array.from({length:ee},((e,t)=>e=>{null==v||v(t,e)}))),[f,ee,v]);return(0,a.jsxs)(o,{ref:se,...F,onKeyDown:he,onMouseOver:pe,onMouseOut:me,onTouchStart:be,onTouchMove:we,onTouchEnd:xe,className:s()(M,$,c&&"slide",u&&`${$}-fade`,L&&`${$}-${L}`),children:[f&&(0,a.jsx)("div",{className:`${$}-indicators`,children:Se(A,((e,t)=>(0,a.jsx)("button",{type:"button","data-bs-target":"","aria-label":null!=p&&p.length?p[t]:`Slide ${t+1}`,className:t===K?"active":void 0,onClick:Ee?Ee[t]:void 0,"aria-current":t===K},t)))}),(0,a.jsx)("div",{className:`${$}-inner`,children:Se(A,((t,n)=>{const r=n===K;return c?(0,a.jsx)(lt,{in:r,onEnter:r?ue:void 0,onEntered:r?de:void 0,addEndListener:He,children:(n,i)=>e.cloneElement(t,{...i,className:s()(t.props.className,r&&"entered"!==n&&le,("entered"===n||"exiting"===n)&&"active",("entering"===n||"exiting"===n)&&ce)})}):e.cloneElement(t,{className:s()(t.props.className,r&&"active")})}))}),d&&(0,a.jsxs)(a.Fragment,{children:[(S||0!==g)&&(0,a.jsxs)(fe,{className:`${$}-control-prev`,onClick:ne,children:[j,R&&(0,a.jsx)("span",{className:"visually-hidden",children:R})]}),(S||g!==ee-1)&&(0,a.jsxs)(fe,{className:`${$}-control-next`,onClick:re,children:[O,D&&(0,a.jsx)("span",{className:"visually-hidden",children:D})]})]})]})}));ct.displayName="Carousel";const ut=Object.assign(ct,{Caption:ke,Item:Ee}),dt=e.forwardRef(((e,t)=>{let{as:n,bsPrefix:r,variant:i="primary",size:o,active:l=!1,disabled:c=!1,className:u,...d}=e;const f=h(r,"btn"),[p,{tagName:m}]=le({tagName:n,disabled:c,...d}),g=m;return(0,a.jsx)(g,{...p,...d,ref:t,disabled:c,className:s()(u,f,l&&"active",i&&`${f}-${i}`,o&&`${f}-${o}`,d.href&&c&&"disabled")})}));dt.displayName="Button";const ht=dt;function ft(){return ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ft.apply(this,arguments)}var pt;!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(pt||(pt={}));const mt="popstate";function gt(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function vt(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Nk){}}}function yt(e,t){return{usr:e.state,key:e.key,idx:t}}function _t(e,t,n,r){return void 0===n&&(n=null),ft({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?wt(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function bt(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function wt(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function xt(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,a=i.history,o=pt.Pop,l=null,c=u();function u(){return(a.state||{idx:null}).idx}function d(){o=pt.Pop;let e=u(),t=null==e?null:e-c;c=e,l&&l({action:o,location:f.location,delta:t})}function h(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:bt(e);return n=n.replace(/ $/,"%20"),gt(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==c&&(c=0,a.replaceState(ft({},a.state,{idx:c}),""));let f={get action(){return o},get location(){return e(i,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(mt,d),l=e,()=>{i.removeEventListener(mt,d),l=null}},createHref:e=>t(i,e),createURL:h,encodeLocation(e){let t=h(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o=pt.Push;let r=_t(f.location,e,t);n&&n(r,e),c=u()+1;let d=yt(r,c),h=f.createHref(r);try{a.pushState(d,"",h)}catch(ws){if(ws instanceof DOMException&&"DataCloneError"===ws.name)throw ws;i.location.assign(h)}s&&l&&l({action:o,location:f.location,delta:1})},replace:function(e,t){o=pt.Replace;let r=_t(f.location,e,t);n&&n(r,e),c=u();let i=yt(r,c),d=f.createHref(r);a.replaceState(i,"",d),s&&l&&l({action:o,location:f.location,delta:0})},go:e=>a.go(e)};return f}var kt;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(kt||(kt={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function Ct(e,t,n){return void 0===n&&(n="/"),Et(e,t,n,!1)}function Et(e,t,n,r){let i=$t(("string"===typeof t?wt(t):t).pathname||"/",n);if(null==i)return null;let s=St(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let e=Ft(i);a=Mt(s[o],e,r)}return a}function St(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(gt(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=Ht([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(gt(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),St(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:Lt(o,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of It(e.path))i(e,t,r);else i(e,t)})),t}function It(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=It(r.join("/")),o=[];return o.push(...a.map((e=>""===e?s:[s,e].join("/")))),i&&o.push(...a),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const Tt=/^:[\w-]+$/,Nt=3,Pt=2,jt=1,Rt=10,Ot=-2,Dt=e=>"*"===e;function Lt(e,t){let n=e.split("/"),r=n.length;return n.some(Dt)&&(r+=Ot),t&&(r+=Pt),n.filter((e=>!Dt(e))).reduce(((e,t)=>e+(Tt.test(t)?Nt:""===t?jt:Rt)),r)}function Mt(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=At({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=At({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:Ht([s,u.pathname]),pathnameBase:qt(Ht([s,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(s=Ht([s,u.pathnameBase]))}return a}function At(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);vt("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:s,pathnameBase:a,pattern:e}}function Ft(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(ws){return vt(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+ws+")."),e}}function $t(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Ut(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function zt(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function Bt(e,t){let n=zt(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function Wt(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=wt(e):(i=ft({},e),gt(!i.pathname||!i.pathname.includes("?"),Ut("?","pathname","search",i)),gt(!i.pathname||!i.pathname.includes("#"),Ut("#","pathname","hash",i)),gt(!i.search||!i.search.includes("#"),Ut("#","search","hash",i)));let s,a=""===e||""===i.pathname,o=a?"/":i.pathname;if(null==o)s=n;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?wt(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:Vt(r),hash:Gt(i)}}(i,s),c=o&&"/"!==o&&o.endsWith("/"),u=(a||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const Ht=e=>e.join("/").replace(/\/\/+/g,"/"),qt=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Vt=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Gt=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function Kt(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const Yt=["post","put","patch","delete"],Qt=(new Set(Yt),["get",...Yt]);new Set(Qt),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Xt(){return Xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Xt.apply(this,arguments)}const Jt=e.createContext(null);const Zt=e.createContext(null);const en=e.createContext(null);const tn=e.createContext(null);const nn=e.createContext({outlet:null,matches:[],isDataRoute:!1});const rn=e.createContext(null);function sn(){return null!=e.useContext(tn)}function an(){return sn()||gt(!1),e.useContext(tn).location}function on(t){e.useContext(en).static||e.useLayoutEffect(t)}function ln(){let{isDataRoute:t}=e.useContext(nn);return t?function(){let{router:t}=_n(vn.UseNavigateStable),n=wn(yn.UseNavigateStable),r=e.useRef(!1);on((()=>{r.current=!0}));let i=e.useCallback((function(e,i){void 0===i&&(i={}),r.current&&("number"===typeof e?t.navigate(e):t.navigate(e,Xt({fromRouteId:n},i)))}),[t,n]);return i}():function(){sn()||gt(!1);let t=e.useContext(Jt),{basename:n,future:r,navigator:i}=e.useContext(en),{matches:s}=e.useContext(nn),{pathname:a}=an(),o=JSON.stringify(Bt(s,r.v7_relativeSplatPath)),l=e.useRef(!1);on((()=>{l.current=!0}));let c=e.useCallback((function(e,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof e)return void i.go(e);let s=Wt(e,JSON.parse(o),a,"path"===r.relative);null==t&&"/"!==n&&(s.pathname="/"===s.pathname?n:Ht([n,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[n,i,o,a,t]);return c}()}function cn(){let{matches:t}=e.useContext(nn),n=t[t.length-1];return n?n.params:{}}function un(t,n){let{relative:r}=void 0===n?{}:n,{future:i}=e.useContext(en),{matches:s}=e.useContext(nn),{pathname:a}=an(),o=JSON.stringify(Bt(s,i.v7_relativeSplatPath));return e.useMemo((()=>Wt(t,JSON.parse(o),a,"path"===r)),[t,o,a,r])}function dn(t,n,r,i){sn()||gt(!1);let{navigator:s}=e.useContext(en),{matches:a}=e.useContext(nn),o=a[a.length-1],l=o?o.params:{},c=(o&&o.pathname,o?o.pathnameBase:"/");o&&o.route;let u,d=an();if(n){var h;let e="string"===typeof n?wt(n):n;"/"===c||(null==(h=e.pathname)?void 0:h.startsWith(c))||gt(!1),u=e}else u=d;let f=u.pathname||"/",p=f;if("/"!==c){let e=c.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let m=Ct(t,{pathname:p});let g=gn(m&&m.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:Ht([c,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:Ht([c,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,r,i);return n&&g?e.createElement(tn.Provider,{value:{location:Xt({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:pt.Pop}},g):g}function hn(){let t=function(){var t;let n=e.useContext(rn),r=bn(yn.UseRouteError),i=wn(yn.UseRouteError);if(void 0!==n)return n;return null==(t=r.errors)?void 0:t[i]}(),n=Kt(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:s},r):null,null)}const fn=e.createElement(hn,null);class pn extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?e.createElement(nn.Provider,{value:this.props.routeContext},e.createElement(rn.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mn(t){let{routeContext:n,match:r,children:i}=t,s=e.useContext(Jt);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(nn.Provider,{value:n},i)}function gn(t,n,r,i){var s;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==t){var a;if(!r)return null;if(r.errors)t=r.matches;else{if(!(null!=(a=i)&&a.v7_partialHydration&&0===n.length&&!r.initialized&&r.matches.length>0))return null;t=r.matches}}let o=t,l=null==(s=r)?void 0:s.errors;if(null!=l){let e=o.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||gt(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,u=-1;if(r&&i&&i.v7_partialHydration)for(let e=0;e<o.length;e++){let t=o[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(u=e),t.route.id){let{loaderData:e,errors:n}=r,i=t.route.loader&&void 0===e[t.route.id]&&(!n||void 0===n[t.route.id]);if(t.route.lazy||i){c=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight(((t,i,s)=>{let a,d=!1,h=null,f=null;var p;r&&(a=l&&i.route.id?l[i.route.id]:void 0,h=i.route.errorElement||fn,c&&(u<0&&0===s?(p="route-fallback",!1||xn[p]||(xn[p]=!0),d=!0,f=null):u===s&&(d=!0,f=i.route.hydrateFallbackElement||null)));let m=n.concat(o.slice(0,s+1)),g=()=>{let n;return n=a?h:d?f:i.route.Component?e.createElement(i.route.Component,null):i.route.element?i.route.element:t,e.createElement(mn,{match:i,routeContext:{outlet:t,matches:m,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?e.createElement(pn,{location:r.location,revalidation:r.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var vn=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(vn||{}),yn=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(yn||{});function _n(t){let n=e.useContext(Jt);return n||gt(!1),n}function bn(t){let n=e.useContext(Zt);return n||gt(!1),n}function wn(t){let n=function(){let t=e.useContext(nn);return t||gt(!1),t}(),r=n.matches[n.matches.length-1];return r.route.id||gt(!1),r.route.id}const xn={};t.startTransition;function kn(e){gt(!1)}function Cn(t){let{basename:n="/",children:r=null,location:i,navigationType:s=pt.Pop,navigator:a,static:o=!1,future:l}=t;sn()&&gt(!1);let c=n.replace(/^\/*/,"/"),u=e.useMemo((()=>({basename:c,navigator:a,static:o,future:Xt({v7_relativeSplatPath:!1},l)})),[c,l,a,o]);"string"===typeof i&&(i=wt(i));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=i,g=e.useMemo((()=>{let e=$t(d,c);return null==e?null:{location:{pathname:e,search:h,hash:f,state:p,key:m},navigationType:s}}),[c,d,h,f,p,m,s]);return null==g?null:e.createElement(en.Provider,{value:u},e.createElement(tn.Provider,{children:r,value:g}))}function En(e){let{children:t,location:n}=e;return dn(Sn(t),n)}new Promise((()=>{}));e.Component;function Sn(t,n){void 0===n&&(n=[]);let r=[];return e.Children.forEach(t,((t,i)=>{if(!e.isValidElement(t))return;let s=[...n,i];if(t.type===e.Fragment)return void r.push.apply(r,Sn(t.props.children,s));t.type!==kn&&gt(!1),t.props.index&&t.props.children&&gt(!1);let a={id:t.props.id||s.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(a.children=Sn(t.props.children,s)),r.push(a)})),r}function In(){return In=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},In.apply(this,arguments)}function Tn(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Nn=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(Nk){}new Map;const Pn=t.startTransition;Ke.flushSync,t.useId;function jn(t){let{basename:n,children:r,future:i,window:s}=t,a=e.useRef();null==a.current&&(a.current=function(e){return void 0===e&&(e={}),xt((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return _t("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:bt(t)}),null,e)}({window:s,v5Compat:!0}));let o=a.current,[l,c]=e.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},d=e.useCallback((e=>{u&&Pn?Pn((()=>c(e))):c(e)}),[c,u]);return e.useLayoutEffect((()=>o.listen(d)),[o,d]),e.createElement(Cn,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:o,future:i})}const Rn="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,On=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dn=e.forwardRef((function(t,n){let r,{onClick:i,relative:s,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,unstable_viewTransition:h}=t,f=Tn(t,Nn),{basename:p}=e.useContext(en),m=!1;if("string"===typeof u&&On.test(u)&&(r=u,Rn))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=$t(t.pathname,p);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:m=!0}catch(Nk){}let g=function(t,n){let{relative:r}=void 0===n?{}:n;sn()||gt(!1);let{basename:i,navigator:s}=e.useContext(en),{hash:a,pathname:o,search:l}=un(t,{relative:r}),c=o;return"/"!==i&&(c="/"===o?i:Ht([i,o])),s.createHref({pathname:c,search:l,hash:a})}(u,{relative:s}),v=function(t,n){let{target:r,replace:i,state:s,preventScrollReset:a,relative:o,unstable_viewTransition:l}=void 0===n?{}:n,c=ln(),u=an(),d=un(t,{relative:o});return e.useCallback((e=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,r)){e.preventDefault();let n=void 0!==i?i:bt(u)===bt(d);c(t,{replace:n,state:s,preventScrollReset:a,relative:o,unstable_viewTransition:l})}}),[u,c,d,i,s,r,t,a,o,l])}(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,unstable_viewTransition:h});return e.createElement("a",In({},f,{href:r||g,onClick:m||a?i:function(e){i&&i(e),e.defaultPrevented||v(e)},ref:n,target:c}))}));var Ln,Mn;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ln||(Ln={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Mn||(Mn={}));const An=!1,Fn=!1,$n="${JSCORE_VERSION}",Un=function(e,t){if(!e)throw zn(t)},zn=function(e){return new Error("Firebase Database ("+$n+") INTERNAL ASSERT FAILED: "+e)},Bn=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Wn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Bn(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const o=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==a||null==o)throw new Hn;const l=t<<2|s>>4;if(r.push(l),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Hn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qn=function(e){const t=Bn(e);return Wn.encodeByteArray(t,!0)},Vn=function(e){return qn(e).replace(/\./g,"")},Gn=function(e){try{return Wn.decodeString(e,!0)}catch(Nk){console.error("base64Decode failed: ",Nk)}return null};function Kn(e){return Yn(void 0,e)}function Yn(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Yn(e[n],t[n]));return e}const Qn=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Xn=()=>{try{return Qn()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Nk){return}const t=e&&Gn(e[1]);return t&&JSON.parse(t)})()}catch(Nk){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Nk}`)}},Jn=e=>{var t,n;return null===(n=null===(t=Xn())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Zn=e=>{const t=Jn(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},er=()=>{var e;return null===(e=Xn())||void 0===e?void 0:e.config},tr=e=>{var t;return null===(t=Xn())||void 0===t?void 0:t[`_${e}`]};class nr{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function rr(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Vn(JSON.stringify({alg:"none",type:"JWT"})),Vn(JSON.stringify(s)),""].join(".")}function ir(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function sr(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ir())}function ar(){var e;const t=null===(e=Xn())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Nk){return!1}}function or(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function lr(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function cr(){return!0===An||!0===Fn}function ur(){try{return"object"===typeof indexedDB}catch(Nk){return!1}}function dr(){return new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(ws){t(ws)}}))}class hr extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fr.prototype.create)}}class fr{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(pr,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new hr(n,s,t)}}const pr=/\{\$([^}]+)}/g;function mr(e){return JSON.parse(e)}function gr(e){return JSON.stringify(e)}const vr=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=mr(Gn(s[0])||""),n=mr(Gn(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(Nk){}return{header:t,claims:n,data:r,signature:i}};function yr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function _r(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function br(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function wr(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function xr(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(kr(n)&&kr(s)){if(!xr(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function kr(e){return null!==e&&"object"===typeof e}function Cr(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Er(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Sr(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Ir{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],a=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^a&(o^l),i=1518500249):(r=a^o^l,i=1859775393):u<60?(r=a&o|l&(a|o),i=2400959708):(r=a^o^l,i=3395469782);const e=(s<<5|s>>>27)+r+c+i+n[u]&4294967295;c=l,l=o,o=4294967295&(a<<30|a>>>2),a=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class Tr{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Nr),void 0===r.error&&(r.error=Nr),void 0===r.complete&&(r.complete=Nr);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Nk){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Nk){"undefined"!==typeof console&&console.error&&console.error(Nk)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Nr(){}function Pr(e,t){return`${e} failed: ${t} argument `}const jr=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function Rr(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}function Or(e){return e&&e._delegate?e._delegate:e}class Dr{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Lr="[DEFAULT]";class Mr{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new nr;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Nk){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Nk){if(r)return null;throw Nk}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Lr})}catch(Nk){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Nk){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lr;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lr;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lr;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Lr?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lr;return this.component?this.component.multipleInstances?e:Lr:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ar{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Mr(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Fr=[];var $r;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}($r||($r={}));const Ur={debug:$r.DEBUG,verbose:$r.VERBOSE,info:$r.INFO,warn:$r.WARN,error:$r.ERROR,silent:$r.SILENT},zr=$r.INFO,Br={[$r.DEBUG]:"log",[$r.VERBOSE]:"log",[$r.INFO]:"info",[$r.WARN]:"warn",[$r.ERROR]:"error"},Wr=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Br[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r](`[${n}]  ${e.name}:`,...s)};class Hr{constructor(e){this.name=e,this._logLevel=zr,this._logHandler=Wr,this._userLogHandler=null,Fr.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $r))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Ur[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,$r.DEBUG,...t),this._logHandler(this,$r.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,$r.VERBOSE,...t),this._logHandler(this,$r.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,$r.INFO,...t),this._logHandler(this,$r.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,$r.WARN,...t),this._logHandler(this,$r.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,$r.ERROR,...t),this._logHandler(this,$r.ERROR,...t)}}let qr,Vr;const Gr=new WeakMap,Kr=new WeakMap,Yr=new WeakMap,Qr=new WeakMap,Xr=new WeakMap;let Jr={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Kr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Yr.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ti(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Zr(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Vr||(Vr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ni(this),n),ti(Gr.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ti(e.apply(ni(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(ni(this),t,...r);return Yr.set(s,t.sort?t.sort():[t]),ti(s)}}function ei(e){return"function"===typeof e?Zr(e):(e instanceof IDBTransaction&&function(e){if(Kr.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));Kr.set(e,t)}(e),t=e,(qr||(qr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,Jr):e);var t}function ti(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(ti(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Gr.set(t,e)})).catch((()=>{})),Xr.set(t,e),t}(e);if(Qr.has(e))return Qr.get(e);const t=ei(e);return t!==e&&(Qr.set(e,t),Xr.set(t,e)),t}const ni=e=>Xr.get(e);const ri=["get","getKey","getAll","getAllKeys","count"],ii=["put","add","delete","clear"],si=new Map;function ai(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(si.get(t))return si.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ii.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ri.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return si.set(t,s),s}Jr=(e=>({...e,get:(t,n,r)=>ai(t,n)||e.get(t,n,r),has:(t,n)=>!!ai(t,n)||e.has(t,n)}))(Jr);class oi{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const li="@firebase/app",ci="0.9.13",ui=new Hr("@firebase/app"),di="@firebase/app-compat",hi="@firebase/analytics-compat",fi="@firebase/analytics",pi="@firebase/app-check-compat",mi="@firebase/app-check",gi="@firebase/auth",vi="@firebase/auth-compat",yi="@firebase/database",_i="@firebase/database-compat",bi="@firebase/functions",wi="@firebase/functions-compat",xi="@firebase/installations",ki="@firebase/installations-compat",Ci="@firebase/messaging",Ei="@firebase/messaging-compat",Si="@firebase/performance",Ii="@firebase/performance-compat",Ti="@firebase/remote-config",Ni="@firebase/remote-config-compat",Pi="@firebase/storage",ji="@firebase/storage-compat",Ri="@firebase/firestore",Oi="@firebase/firestore-compat",Di="firebase",Li="[DEFAULT]",Mi={[li]:"fire-core",[di]:"fire-core-compat",[fi]:"fire-analytics",[hi]:"fire-analytics-compat",[mi]:"fire-app-check",[pi]:"fire-app-check-compat",[gi]:"fire-auth",[vi]:"fire-auth-compat",[yi]:"fire-rtdb",[_i]:"fire-rtdb-compat",[bi]:"fire-fn",[wi]:"fire-fn-compat",[xi]:"fire-iid",[ki]:"fire-iid-compat",[Ci]:"fire-fcm",[Ei]:"fire-fcm-compat",[Si]:"fire-perf",[Ii]:"fire-perf-compat",[Ti]:"fire-rc",[Ni]:"fire-rc-compat",[Pi]:"fire-gcs",[ji]:"fire-gcs-compat",[Ri]:"fire-fst",[Oi]:"fire-fst-compat","fire-js":"fire-js",[Di]:"fire-js-all"},Ai=new Map,Fi=new Map;function $i(e,t){try{e.container.addComponent(t)}catch(Nk){ui.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,Nk)}}function Ui(e){const t=e.name;if(Fi.has(t))return ui.debug(`There were multiple attempts to register component ${t}.`),!1;Fi.set(t,e);for(const n of Ai.values())$i(n,e);return!0}function zi(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Bi=new fr("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Wi{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Dr("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bi.create("app-deleted",{appName:this._name})}}const Hi="9.23.0";function qi(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Li,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Bi.create("bad-app-name",{appName:String(i)});if(n||(n=er()),!n)throw Bi.create("no-options");const s=Ai.get(i);if(s){if(xr(n,s.options)&&xr(r,s.config))return s;throw Bi.create("duplicate-app",{appName:i})}const a=new Ar(i);for(const l of Fi.values())a.addComponent(l);const o=new Wi(n,r,a);return Ai.set(i,o),o}function Vi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Li;const t=Ai.get(e);if(!t&&e===Li&&er())return qi();if(!t)throw Bi.create("no-app",{appName:e});return t}function Gi(e,t,n){var r;let i=null!==(r=Mi[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void ui.warn(e.join(" "))}Ui(new Dr(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}const Ki="firebase-heartbeat-store";let Yi=null;function Qi(){return Yi||(Yi=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=ti(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(ti(a.result),e.oldVersion,e.newVersion,ti(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),o.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Ki)}}).catch((e=>{throw Bi.create("idb-open",{originalErrorMessage:e.message})}))),Yi}async function Xi(e,t){try{const n=(await Qi()).transaction(Ki,"readwrite"),r=n.objectStore(Ki);await r.put(t,Ji(e)),await n.done}catch(Nk){if(Nk instanceof hr)ui.warn(Nk.message);else{const t=Bi.create("idb-set",{originalErrorMessage:null===Nk||void 0===Nk?void 0:Nk.message});ui.warn(t.message)}}}function Ji(e){return`${e.name}!${e.options.appId}`}class Zi{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ts(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=es();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=es(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),ns(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ns(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=Vn(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function es(){return(new Date).toISOString().substring(0,10)}class ts{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!ur()&&dr().then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Qi();return await t.transaction(Ki).objectStore(Ki).get(Ji(e))}catch(Nk){if(Nk instanceof hr)ui.warn(Nk.message);else{const t=Bi.create("idb-get",{originalErrorMessage:null===Nk||void 0===Nk?void 0:Nk.message});ui.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Xi(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Xi(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ns(e){return Vn(JSON.stringify({version:2,heartbeats:e})).length}var rs;rs="",Ui(new Dr("platform-logger",(e=>new oi(e)),"PRIVATE")),Ui(new Dr("heartbeat",(e=>new Zi(e)),"PRIVATE")),Gi(li,ci,rs),Gi(li,ci,"esm2017"),Gi("fire-js","");const is="@firebase/database",ss="0.14.4";let as="";class os{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),gr(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:mr(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class ls{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return yr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const cs=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new os(t)}}catch(Nk){}return new ls},us=cs("localStorage"),ds=cs("sessionStorage"),hs=new Hr("@firebase/database"),fs=function(){let e=1;return function(){return e++}}(),ps=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Un(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Ir;n.update(t);const r=n.digest();return Wn.encodeByteArray(r)},ms=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=ms.apply(null,n):e+="object"===typeof n?gr(n):n,e+=" "}return e};let gs=null,vs=!0;const ys=function(e,t){Un(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(hs.logLevel=$r.VERBOSE,gs=hs.log.bind(hs),t&&ds.set("logging_enabled",!0)):"function"===typeof e?gs=e:(gs=null,ds.remove("logging_enabled"))},_s=function(){if(!0===vs&&(vs=!1,null===gs&&!0===ds.get("logging_enabled")&&ys(!0)),gs){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=ms.apply(null,t);gs(r)}},bs=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];_s(e,...n)}},ws=function(){const e="FIREBASE INTERNAL ERROR: "+ms(...arguments);hs.error(e)},xs=function(){const e=`FIREBASE FATAL ERROR: ${ms(...arguments)}`;throw hs.error(e),new Error(e)},ks=function(){const e="FIREBASE WARNING: "+ms(...arguments);hs.warn(e)},Cs=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Es="[MIN_NAME]",Ss="[MAX_NAME]",Is=function(e,t){if(e===t)return 0;if(e===Es||t===Ss)return-1;if(t===Es||e===Ss)return 1;{const n=Ls(e),r=Ls(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},Ts=function(e,t){return e===t?0:e<t?-1:1},Ns=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+gr(t))},Ps=function(e){if("object"!==typeof e||null===e)return gr(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=gr(t[r]),n+=":",n+=Ps(e[t[r]]);return n+="}",n},js=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Rs(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Os=function(e){Un(!Cs(e),"Invalid JSON number");const t=1023;let n,r,i,s,a;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const o=[];for(a=52;a;a-=1)o.push(i%2?1:0),i=Math.floor(i/2);for(a=11;a;a-=1)o.push(r%2?1:0),r=Math.floor(r/2);o.push(n?1:0),o.reverse();const l=o.join("");let c="";for(a=0;a<64;a+=8){let e=parseInt(l.substr(a,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const Ds=new RegExp("^-?(0*)\\d{1,10}$"),Ls=function(e){if(Ds.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Ms=function(e){try{e()}catch(Nk){setTimeout((()=>{const t=Nk.stack||"";throw ks("Exception was thrown by user callback.",t),Nk}),Math.floor(0))}},As=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class Fs{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){ks(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class $s{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(_s("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ks(e)}}class Us{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Us.OWNER="owner";const zs="5",Bs=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ws="ac",Hs="websocket",qs="long_polling";class Vs{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=us.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&us.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function Gs(e,t,n){let r;if(Un("string"===typeof t,"typeof type must == string"),Un("object"===typeof n,"typeof params must == object"),t===Hs)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==qs)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return Rs(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class Ks{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;yr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Kn(this.counters_)}}const Ys={},Qs={};function Xs(e){const t=e.toString();return Ys[t]||(Ys[t]=new Ks),Ys[t]}class Js{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&Ms((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const Zs="start";class ea{constructor(e,t,n,r,i,s,a){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=bs(e),this.stats_=Xs(t),this.urlFn=e=>(this.appCheckToken&&(e[Ws]=this.appCheckToken),Gs(t,qs,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Js(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(cr()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new ta((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s,a,o,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Zs)n.id=s,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[Zs]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=zs,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[Ws]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&Bs.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ea.forceAllow_=!0}static forceDisallow(){ea.forceDisallow_=!0}static isAvailable(){return!cr()&&(!!ea.forceAllow_||!ea.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=gr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=qn(t),r=js(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(cr())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=gr(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class ta{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,cr())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=fs(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=ta.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(Nk){_s("frame writing exception"),Nk.stack&&_s(Nk.stack),_s(Nk)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||_s("No IE domain setting required")}catch(Nk){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){cr()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{_s("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(Nk){}}),Math.floor(1))}}let na=null;"undefined"!==typeof MozWebSocket?na=MozWebSocket:"undefined"!==typeof WebSocket&&(na=WebSocket);class ra{constructor(e,t,n,r,i,s,a){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=bs(this.connId),this.stats_=Xs(t),this.connURL=ra.connectionURL_(t,s,a,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const s={};return s.v=zs,!cr()&&"undefined"!==typeof location&&location.hostname&&Bs.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),r&&(s[Ws]=r),i&&(s.p=i),Gs(e,Hs,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,us.set("previous_websocket_failure",!0);try{let e;if(cr()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/${zs}/${as}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new na(this.connURL,[],e)}catch(Nk){this.log_("Error instantiating WebSocket.");const t=Nk.message||Nk.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){ra.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==na&&!ra.forceDisallow_}static previouslyFailed(){return us.isInMemoryStorage||!0===us.get("previous_websocket_failure")}markConnectionHealthy(){us.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=mr(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Un(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=gr(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=js(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(Nk){this.log_("Exception thrown from WebSocket.send():",Nk.message||Nk.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ra.responsesRequiredToBeHealthy=2,ra.healthyTimeout=3e4;class ia{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ea,ra]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=ra&&ra.isAvailable();let n=t&&!ra.previouslyFailed();if(e.webSocketOnly&&(t||ks("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[ra];else{const e=this.transports_=[];for(const t of ia.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);ia.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}ia.globalTransportInitialized_=!1;class sa{constructor(e,t,n,r,i,s,a,o,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=o,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=bs("c:"+this.id+":"),this.transportManager_=new ia(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=As((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Ns("t",e),n=Ns("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Ns("t",e),n=Ns("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Ns("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?ws("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ws("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),zs!==n&&ks("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),As((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):As((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(us.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class aa{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class oa{constructor(e){this.allowedEvents_=e,this.listeners_={},Un(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Un(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class la extends oa{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||sr()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new la}getInitialEvent(e){return Un("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class ca{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function ua(){return new ca("")}function da(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ha(e){return e.pieces_.length-e.pieceNum_}function fa(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ca(e.pieces_,t)}function pa(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ma(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function ga(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ca(t,0)}function va(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof ca)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new ca(n,0)}function ya(e){return e.pieceNum_>=e.pieces_.length}function _a(e,t){const n=da(e),r=da(t);if(null===n)return t;if(n===r)return _a(fa(e),fa(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function ba(e,t){const n=ma(e,0),r=ma(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=Is(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function wa(e,t){if(ha(e)!==ha(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function xa(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(ha(e)>ha(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class ka{constructor(e,t){this.errorPrefix_=t,this.parts_=ma(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=jr(this.parts_[n]);Ca(this)}}function Ca(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ea(e))}function Ea(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Sa extends oa{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new Sa}getInitialEvent(e){return Un("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Ia=1e3;class Ta extends aa{constructor(e,t,n,r,i,s,a,o){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=s,this.appCheckTokenProvider_=a,this.authOverride_=o,this.id=Ta.nextPersistentConnectionId_++,this.log_=bs("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ia,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,o&&!cr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Sa.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&la.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(gr(i)),Un(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new nr,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Un(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Un(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const s=i.d,a=i.s;Ta.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==a&&this.removeListen_(n,r),e.onComplete&&e.onComplete(a,s))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&yr(e,"w")){const n=_r(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();ks(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=vr(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=vr(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Un(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+gr(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):ws("Unrecognized action received from server: "+gr(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Un(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ia,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ia,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ia),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+Ta.nextConnectionId_++,i=this.lastSessionId;let s=!1,a=null;const o=function(){a?a.close():(s=!0,n())},l=function(e){Un(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:o,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[o,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?_s("getToken() completed but was canceled"):(_s("getToken() completed. Creating connection."),this.authToken_=o&&o.accessToken,this.appCheckToken_=l&&l.token,a=new sa(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{ks(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(ws){this.log_("Failed to get token: "+ws),s||(this.repoInfo_.nodeAdmin&&ks(ws),o())}}}interrupt(e){_s("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){_s("Resuming connection for reason: "+e),delete this.interruptReasons_[e],br(this.interruptReasons_)&&(this.reconnectDelay_=Ia,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>Ps(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new ca(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){_s("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){_s("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";cr()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+as.replace(/\./g,"-")]=1,sr()?e["framework.cordova"]=1:lr()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=la.getInstance().currentlyOnline();return br(this.interruptReasons_)&&e}}Ta.nextPersistentConnectionId_=0,Ta.nextConnectionId_=0;class Na{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Na(e,t)}}class Pa{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Na(Es,e),r=new Na(Es,t);return 0!==this.compare(n,r)}minPost(){return Na.MIN}}let ja;class Ra extends Pa{static get __EMPTY_NODE(){return ja}static set __EMPTY_NODE(e){ja=e}compare(e,t){return Is(e.name,t.name)}isDefinedOn(e){throw zn("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Na.MIN}maxPost(){return new Na(Ss,ja)}makePost(e,t){return Un("string"===typeof e,"KeyIndex indexValue must always be a string."),new Na(e,ja)}toString(){return".key"}}const Oa=new Ra;class Da{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class La{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:La.RED,this.left=null!=r?r:Ma.EMPTY_NODE,this.right=null!=i?i:Ma.EMPTY_NODE}copy(e,t,n,r,i){return new La(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ma.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Ma.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,La.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,La.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}La.RED=!0,La.BLACK=!1;class Ma{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ma.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new Ma(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,La.BLACK,null,null))}remove(e){return new Ma(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,La.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Da(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Da(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Da(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Da(this.root_,null,this.comparator_,!0,e)}}function Aa(e,t){return Is(e.name,t.name)}function Fa(e,t){return Is(e,t)}let $a;Ma.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new La(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ua=function(e){return"number"===typeof e?"number:"+Os(e):"string:"+e},za=function(e){if(e.isLeafNode()){const t=e.val();Un("string"===typeof t||"number"===typeof t||"object"===typeof t&&yr(t,".sv"),"Priority must be a string or number.")}else Un(e===$a||e.isEmpty(),"priority of unexpected type.");Un(e===$a||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ba,Wa,Ha;class qa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qa.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Un(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),za(this.priorityNode_)}static set __childrenNodeConstructor(e){Ba=e}static get __childrenNodeConstructor(){return Ba}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new qa(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:qa.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ya(e)?this:".priority"===da(e)?this.priorityNode_:qa.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:qa.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=da(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Un(".priority"!==n||1===ha(e),".priority must be the last token in a path"),this.updateImmediateChild(n,qa.__childrenNodeConstructor.EMPTY_NODE.updateChild(fa(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ua(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Os(this.value_):this.value_,this.lazyHash_=ps(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===qa.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof qa.__childrenNodeConstructor?-1:(Un(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=qa.VALUE_TYPE_ORDER.indexOf(t),i=qa.VALUE_TYPE_ORDER.indexOf(n);return Un(r>=0,"Unknown leaf type: "+t),Un(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}qa.VALUE_TYPE_ORDER=["object","boolean","number","string"];const Va=new class extends Pa{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Is(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Na.MIN}maxPost(){return new Na(Ss,new qa("[PRIORITY-POST]",Ha))}makePost(e,t){const n=Wa(e);return new Na(t,new qa("[PRIORITY-POST]",n))}toString(){return".priority"}},Ga=Math.log(2);class Ka{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Ga,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Ya=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let a,o;if(0===s)return null;if(1===s)return a=e[t],o=n?n(a):a,new La(o,a.node,La.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=i(t,l),u=i(l+1,r);return a=e[l],o=n?n(a):a,new La(o,a.node,La.BLACK,c,u)}},s=function(t){let r=null,s=null,a=e.length;const o=function(t,r){const s=a-t,o=a;a-=t;const c=i(s+1,o),u=e[s],d=n?n(u):u;l(new La(d,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?o(r,La.BLACK):(o(r,La.BLACK),o(r,La.RED))}return s}(new Ka(e.length));return new Ma(r||t,s)};let Qa;const Xa={};class Ja{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Un(Xa&&Va,"ChildrenNode.ts has not been loaded"),Qa=Qa||new Ja({".priority":Xa},{".priority":Va}),Qa}get(e){const t=_r(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ma?t:null}hasIndex(e){return yr(this.indexSet_,e.toString())}addIndex(e,t){Un(e!==Oa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(Na.Wrap);let s,a=i.getNext();for(;a;)r=r||e.isDefinedOn(a.node),n.push(a),a=i.getNext();s=r?Ya(n,e.getCompare()):Xa;const o=e.toString(),l=Object.assign({},this.indexSet_);l[o]=e;const c=Object.assign({},this.indexes_);return c[o]=s,new Ja(c,l)}addToIndexes(e,t){const n=wr(this.indexes_,((n,r)=>{const i=_r(this.indexSet_,r);if(Un(i,"Missing index implementation for "+r),n===Xa){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(Na.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),Ya(n,i.getCompare())}return Xa}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new Na(e.name,r))),i.insert(e,e.node)}}));return new Ja(n,this.indexSet_)}removeFromIndexes(e,t){const n=wr(this.indexes_,(n=>{if(n===Xa)return n;{const r=t.get(e.name);return r?n.remove(new Na(e.name,r)):n}}));return new Ja(n,this.indexSet_)}}let Za;class eo{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&za(this.priorityNode_),this.children_.isEmpty()&&Un(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Za||(Za=new eo(new Ma(Fa),null,Ja.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Za}updatePriority(e){return this.children_.isEmpty()?this:new eo(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?Za:t}}getChild(e){const t=da(e);return null===t?this:this.getImmediateChild(t).getChild(fa(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Un(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new Na(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const s=r.isEmpty()?Za:this.priorityNode_;return new eo(r,s,i)}}updateChild(e,t){const n=da(e);if(null===n)return t;{Un(".priority"!==da(e)||1===ha(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(fa(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(Va,((s,a)=>{t[s]=a.val(e),n++,i&&eo.INTEGER_REGEXP_.test(s)?r=Math.max(r,Number(s)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Ua(this.getPriority().val())+":"),this.forEachChild(Va,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":ps(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new Na(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Na(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Na(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,Na.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,Na.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===to?-1:0}withIndex(e){if(e===Oa||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new eo(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Oa||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(Va),n=t.getIterator(Va);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===Oa?null:this.indexMap_.get(e.toString())}}eo.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const to=new class extends eo{constructor(){super(new Ma(Fa),eo.EMPTY_NODE,Ja.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return eo.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Na,{MIN:{value:new Na(Es,eo.EMPTY_NODE)},MAX:{value:new Na(Ss,to)}}),Ra.__EMPTY_NODE=eo.EMPTY_NODE,qa.__childrenNodeConstructor=eo,$a=to,function(e){Ha=e}(to);function no(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return eo.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Un(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new qa(e,no(t))}if(e instanceof Array){let n=eo.EMPTY_NODE;return Rs(e,((t,r)=>{if(yr(e,t)&&"."!==t.substring(0,1)){const e=no(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(no(t))}{const n=[];let r=!1;if(Rs(e,((e,t)=>{if("."!==e.substring(0,1)){const i=no(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new Na(e,i)))}})),0===n.length)return eo.EMPTY_NODE;const i=Ya(n,Aa,(e=>e.name),Fa);if(r){const e=Ya(n,Va.getCompare());return new eo(i,no(t),new Ja({".priority":e},{".priority":Va}))}return new eo(i,no(t),Ja.Default)}}!function(e){Wa=e}(no);class ro extends Pa{constructor(e){super(),this.indexPath_=e,Un(!ya(e)&&".priority"!==da(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Is(e.name,t.name):i}makePost(e,t){const n=no(e),r=eo.EMPTY_NODE.updateChild(this.indexPath_,n);return new Na(t,r)}maxPost(){const e=eo.EMPTY_NODE.updateChild(this.indexPath_,to);return new Na(Ss,e)}toString(){return ma(this.indexPath_,0).join("/")}}const io=new class extends Pa{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Is(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Na.MIN}maxPost(){return Na.MAX}makePost(e,t){const n=no(e);return new Na(t,n)}toString(){return".value"}};function so(e){return{type:"value",snapshotNode:e}}function ao(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function oo(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function lo(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class co{constructor(e){this.index_=e}updateChild(e,t,n,r,i,s){Un(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(oo(t,a)):Un(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ao(t,n)):s.trackChildChange(lo(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Va,((e,r)=>{t.hasChild(e)||n.trackChildChange(oo(e,r))})),t.isLeafNode()||t.forEachChild(Va,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(lo(t,r,i))}else n.trackChildChange(ao(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?eo.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class uo{constructor(e){this.indexedFilter_=new co(e.getIndex()),this.index_=e.getIndex(),this.startPost_=uo.getStartPost_(e),this.endPost_=uo.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,s){return this.matches(new Na(t,n))||(n=eo.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=eo.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(eo.EMPTY_NODE);const i=this;return t.forEachChild(Va,((e,t)=>{i.matches(new Na(e,t))||(r=r.updateImmediateChild(e,eo.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class ho{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new uo(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new Na(t,n))||(n=eo.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=eo.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=eo.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(eo.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,eo.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const a=e;Un(a.numChildren()===this.limit_,"");const o=new Na(t,n),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),c=this.rangedFilter_.matches(o);if(a.hasChild(t)){const e=a.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||a.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const d=null==u?1:s(u,o);if(c&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(lo(t,n,e)),a.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(oo(t,e));const n=a.updateImmediateChild(t,eo.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(ao(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,o)>=0?(null!=i&&(i.trackChildChange(oo(l.name,l.node)),i.trackChildChange(ao(t,n))),a.updateImmediateChild(t,n).updateImmediateChild(l.name,eo.EMPTY_NODE)):e}}class fo{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Va}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Un(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Un(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Es}hasEnd(){return this.endSet_}getIndexEndValue(){return Un(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Un(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ss}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Un(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Va}copy(){const e=new fo;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function po(e){const t={};if(e.isDefault())return t;let n;if(e.index_===Va?n="$priority":e.index_===io?n="$value":e.index_===Oa?n="$key":(Un(e.index_ instanceof ro,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=gr(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=gr(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+gr(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=gr(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+gr(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function mo(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Va&&(t.i=e.index_.toString()),t}class go extends aa{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=bs("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Un(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=go.getListenId_(e,n),a={};this.listens_[s]=a;const o=po(e._queryParams);this.restRequest_(i+".json",o,((e,t)=>{let o=t;if(404===e&&(o=null,e=null),null===e&&this.onDataUpdate_(i,o,!1,n),_r(this.listens_,s)===a){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=go.getListenId_(e,t);delete this.listens_[n]}get(e){const t=po(e._queryParams),n=e._path.toString(),r=new nr;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,s]=r;i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const a=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Cr(t);this.log_("Sending REST request for "+a);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+a+" received. status:",o.status,"response:",o.responseText);let e=null;if(o.status>=200&&o.status<300){try{e=mr(o.responseText)}catch(Nk){ks("Failed to parse JSON response for "+a+": "+o.responseText)}n(null,e)}else 401!==o.status&&404!==o.status&&ks("Got unsuccessful REST response for "+a+" Status: "+o.status),n(o.status);n=null}},o.open("GET",a,!0),o.send()}))}}class vo{constructor(){this.rootNode_=eo.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function yo(){return{value:null,children:new Map}}function _o(e,t,n){if(ya(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=da(t);e.children.has(r)||e.children.set(r,yo());_o(e.children.get(r),t=fa(t),n)}}function bo(e,t){if(ya(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(Va,((t,n)=>{_o(e,new ca(t),n)})),bo(e,t)}}if(e.children.size>0){const n=da(t);if(t=fa(t),e.children.has(n)){bo(e.children.get(n),t)&&e.children.delete(n)}return 0===e.children.size}return!0}function wo(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{wo(r,new ca(t.toString()+"/"+e),n)}))}class xo{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Rs(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class ko{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new xo(e);const n=1e4+2e4*Math.random();As(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Rs(e,((e,r)=>{r>0&&yr(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),As(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Co;function Eo(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Co||(Co={}));class So{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Co.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(ya(this.path)){if(null!=this.affectedTree.value)return Un(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ca(e));return new So(ua(),t,this.revert)}}return Un(da(this.path)===e,"operationForChild called for unrelated child."),new So(fa(this.path),this.affectedTree,this.revert)}}class Io{constructor(e,t){this.source=e,this.path=t,this.type=Co.LISTEN_COMPLETE}operationForChild(e){return ya(this.path)?new Io(this.source,ua()):new Io(this.source,fa(this.path))}}class To{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Co.OVERWRITE}operationForChild(e){return ya(this.path)?new To(this.source,ua(),this.snap.getImmediateChild(e)):new To(this.source,fa(this.path),this.snap)}}class No{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Co.MERGE}operationForChild(e){if(ya(this.path)){const t=this.children.subtree(new ca(e));return t.isEmpty()?null:t.value?new To(this.source,ua(),t.value):new No(this.source,ua(),t)}return Un(da(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new No(this.source,fa(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Po{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ya(e))return this.isFullyInitialized()&&!this.filtered_;const t=da(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class jo{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Ro(e,t,n,r,i,s){const a=r.filter((e=>e.type===n));a.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw zn("Should only compare child_ events.");const r=new Na(t.childName,t.snapshotNode),i=new Na(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),a.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Oo(e,t){return{eventCache:e,serverCache:t}}function Do(e,t,n,r){return Oo(new Po(t,n,r),e.serverCache)}function Lo(e,t,n,r){return Oo(e.eventCache,new Po(t,n,r))}function Mo(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Ao(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Fo;class $o{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(Fo||(Fo=new Ma(Ts)),Fo);this.value=e,this.children=t}static fromObject(e){let t=new $o(null);return Rs(e,((e,n)=>{t=t.set(new ca(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:ua(),value:this.value};if(ya(e))return null;{const n=da(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(fa(e),t);if(null!=i){return{path:va(new ca(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(ya(e))return this;{const t=da(e),n=this.children.get(t);return null!==n?n.subtree(fa(e)):new $o(null)}}set(e,t){if(ya(e))return new $o(t,this.children);{const n=da(e),r=(this.children.get(n)||new $o(null)).set(fa(e),t),i=this.children.insert(n,r);return new $o(this.value,i)}}remove(e){if(ya(e))return this.children.isEmpty()?new $o(null):new $o(null,this.children);{const t=da(e),n=this.children.get(t);if(n){const r=n.remove(fa(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new $o(null):new $o(this.value,i)}return this}}get(e){if(ya(e))return this.value;{const t=da(e),n=this.children.get(t);return n?n.get(fa(e)):null}}setTree(e,t){if(ya(e))return t;{const n=da(e),r=(this.children.get(n)||new $o(null)).setTree(fa(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new $o(this.value,i)}}fold(e){return this.fold_(ua(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(va(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,ua(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(ya(e))return null;{const r=da(e),i=this.children.get(r);return i?i.findOnPath_(fa(e),va(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,ua(),t)}foreachOnPath_(e,t,n){if(ya(e))return this;{this.value&&n(t,this.value);const r=da(e),i=this.children.get(r);return i?i.foreachOnPath_(fa(e),va(t,r),n):new $o(null)}}foreach(e){this.foreach_(ua(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(va(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class Uo{constructor(e){this.writeTree_=e}static empty(){return new Uo(new $o(null))}}function zo(e,t,n){if(ya(t))return new Uo(new $o(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const a=_a(i,t);return s=s.updateChild(a,n),new Uo(e.writeTree_.set(i,s))}{const r=new $o(n),i=e.writeTree_.setTree(t,r);return new Uo(i)}}}function Bo(e,t,n){let r=e;return Rs(n,((e,n)=>{r=zo(r,va(t,e),n)})),r}function Wo(e,t){if(ya(t))return Uo.empty();{const n=e.writeTree_.setTree(t,new $o(null));return new Uo(n)}}function Ho(e,t){return null!=qo(e,t)}function qo(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(_a(n.path,t)):null}function Vo(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Va,((e,n)=>{t.push(new Na(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new Na(e,n.value))})),t}function Go(e,t){if(ya(t))return e;{const n=qo(e,t);return new Uo(null!=n?new $o(n):e.writeTree_.subtree(t))}}function Ko(e){return e.writeTree_.isEmpty()}function Yo(e,t){return Qo(ua(),e.writeTree_,t)}function Qo(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(Un(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Qo(va(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(va(e,".priority"),r)),n}}function Xo(e,t){return ul(t,e)}function Jo(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));Un(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,a=e.allWrites.length-1;for(;i&&a>=0;){const t=e.allWrites[a];t.visible&&(a>=n&&Zo(t,r.path)?i=!1:xa(r.path,t.path)&&(s=!0)),a--}if(i){if(s)return function(e){e.visibleWrites=tl(e.allWrites,el,ua()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=Wo(e.visibleWrites,r.path);else{Rs(r.children,(t=>{e.visibleWrites=Wo(e.visibleWrites,va(r.path,t))}))}return!0}return!1}function Zo(e,t){if(e.snap)return xa(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&xa(va(e.path,n),t))return!0;return!1}function el(e){return e.visible}function tl(e,t,n){let r=Uo.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)xa(n,e)?(t=_a(n,e),r=zo(r,t,s.snap)):xa(e,n)&&(t=_a(e,n),r=zo(r,ua(),s.snap.getChild(t)));else{if(!s.children)throw zn("WriteRecord should have .snap or .children");if(xa(n,e))t=_a(n,e),r=Bo(r,t,s.children);else if(xa(e,n))if(t=_a(e,n),ya(t))r=Bo(r,ua(),s.children);else{const e=_r(s.children,da(t));if(e){const n=e.getChild(fa(t));r=zo(r,ua(),n)}}}}}return r}function nl(e,t,n,r,i){if(r||i){const s=Go(e.visibleWrites,t);if(!i&&Ko(s))return n;if(i||null!=n||Ho(s,ua())){const s=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(xa(e.path,t)||xa(t,e.path))};return Yo(tl(e.allWrites,s,t),n||eo.EMPTY_NODE)}return null}{const r=qo(e.visibleWrites,t);if(null!=r)return r;{const r=Go(e.visibleWrites,t);if(Ko(r))return n;if(null!=n||Ho(r,ua())){return Yo(r,n||eo.EMPTY_NODE)}return null}}}function rl(e,t,n,r){return nl(e.writeTree,e.treePath,t,n,r)}function il(e,t){return function(e,t,n){let r=eo.EMPTY_NODE;const i=qo(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Va,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=Go(e.visibleWrites,t);return n.forEachChild(Va,((e,t)=>{const n=Yo(Go(i,new ca(e)),t);r=r.updateImmediateChild(e,n)})),Vo(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return Vo(Go(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function sl(e,t,n,r){return function(e,t,n,r,i){Un(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=va(t,n);if(Ho(e.visibleWrites,s))return null;{const t=Go(e.visibleWrites,s);return Ko(t)?i.getChild(n):Yo(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function al(e,t){return function(e,t){return qo(e.visibleWrites,t)}(e.writeTree,va(e.treePath,t))}function ol(e,t,n,r,i,s){return function(e,t,n,r,i,s,a){let o;const l=Go(e.visibleWrites,t),c=qo(l,ua());if(null!=c)o=c;else{if(null==n)return[];o=Yo(l,n)}if(o=o.withIndex(a),o.isEmpty()||o.isLeafNode())return[];{const e=[],t=a.getCompare(),n=s?o.getReverseIteratorFrom(r,a):o.getIteratorFrom(r,a);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}function ll(e,t,n){return function(e,t,n,r){const i=va(t,n),s=qo(e.visibleWrites,i);if(null!=s)return s;if(r.isCompleteForChild(n))return Yo(Go(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function cl(e,t){return ul(va(e.treePath,t),e.writeTree)}function ul(e,t){return{treePath:e,writeTree:t}}class dl{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Un("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Un(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,lo(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,oo(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,ao(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw zn("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,lo(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const hl=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class fl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Po(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ll(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ao(this.viewCache_),i=ol(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function pl(e,t,n,r,i){const s=new dl;let a,o;if(n.type===Co.OVERWRITE){const l=n;l.source.fromUser?a=vl(e,t,l.path,l.snap,r,i,s):(Un(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered()&&!ya(l.path),a=gl(e,t,l.path,l.snap,r,i,o,s))}else if(n.type===Co.MERGE){const l=n;l.source.fromUser?a=function(e,t,n,r,i,s,a){let o=t;return r.foreach(((r,l)=>{const c=va(n,r);yl(t,da(c))&&(o=vl(e,o,c,l,i,s,a))})),r.foreach(((r,l)=>{const c=va(n,r);yl(t,da(c))||(o=vl(e,o,c,l,i,s,a))})),o}(e,t,l.path,l.children,r,i,s):(Un(l.source.fromServer,"Unknown source."),o=l.source.tagged||t.serverCache.isFiltered(),a=bl(e,t,l.path,l.children,r,i,o,s))}else if(n.type===Co.ACK_USER_WRITE){const o=n;a=o.revert?function(e,t,n,r,i,s){let a;if(null!=al(r,n))return t;{const o=new fl(r,t,i),l=t.eventCache.getNode();let c;if(ya(n)||".priority"===da(n)){let n;if(t.serverCache.isFullyInitialized())n=rl(r,Ao(t));else{const e=t.serverCache.getNode();Un(e instanceof eo,"serverChildren would be complete if leaf node"),n=il(r,e)}c=e.filter.updateFullNode(l,n,s)}else{const i=da(n);let u=ll(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,fa(n),o,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,eo.EMPTY_NODE,fa(n),o,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=rl(r,Ao(t)),a.isLeafNode()&&(c=e.filter.updateFullNode(c,a,s)))}return a=t.serverCache.isFullyInitialized()||null!=al(r,ua()),Do(t,c,a,e.filter.filtersNodes())}}(e,t,o.path,r,i,s):function(e,t,n,r,i,s,a){if(null!=al(i,n))return t;const o=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(ya(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return gl(e,t,n,l.getNode().getChild(n),i,s,o,a);if(ya(n)){let r=new $o(null);return l.getNode().forEachChild(Oa,((e,t)=>{r=r.set(new ca(e),t)})),bl(e,t,n,r,i,s,o,a)}return t}{let c=new $o(null);return r.foreach(((e,t)=>{const r=va(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),bl(e,t,n,c,i,s,o,a)}}(e,t,o.path,o.affectedTree,r,i,s)}else{if(n.type!==Co.LISTEN_COMPLETE)throw zn("Unknown operation type: "+n.type);a=function(e,t,n,r,i){const s=t.serverCache,a=Lo(t,s.getNode(),s.isFullyInitialized()||ya(n),s.isFiltered());return ml(e,a,n,r,hl,i)}(e,t,n.path,r,s)}const l=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Mo(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(so(Mo(t)))}}(t,a,l),{viewCache:a,changes:l}}function ml(e,t,n,r,i,s){const a=t.eventCache;if(null!=al(r,n))return t;{let o,l;if(ya(n))if(Un(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=Ao(t),i=il(r,n instanceof eo?n:eo.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=rl(r,Ao(t));o=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=da(n);if(".priority"===c){Un(1===ha(n),"Can't have a priority with additional path components");const i=a.getNode();l=t.serverCache.getNode();const s=sl(r,n,i,l);o=null!=s?e.filter.updatePriority(i,s):a.getNode()}else{const u=fa(n);let d;if(a.isCompleteForChild(c)){l=t.serverCache.getNode();const e=sl(r,n,a.getNode(),l);d=null!=e?a.getNode().getImmediateChild(c).updateChild(u,e):a.getNode().getImmediateChild(c)}else d=ll(r,c,t.serverCache);o=null!=d?e.filter.updateChild(a.getNode(),c,d,u,i,s):a.getNode()}}return Do(t,o,a.isFullyInitialized()||ya(n),e.filter.filtersNodes())}}function gl(e,t,n,r,i,s,a,o){const l=t.serverCache;let c;const u=a?e.filter:e.filter.getIndexedFilter();if(ya(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=da(n);if(!l.isCompleteForPath(n)&&ha(n)>1)return t;const i=fa(n),s=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,i,hl,null)}const d=Lo(t,c,l.isFullyInitialized()||ya(n),u.filtersNodes());return ml(e,d,n,i,new fl(i,d,s),o)}function vl(e,t,n,r,i,s,a){const o=t.eventCache;let l,c;const u=new fl(i,t,s);if(ya(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,a),l=Do(t,c,!0,e.filter.filtersNodes());else{const i=da(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=Do(t,c,o.isFullyInitialized(),o.isFiltered());else{const s=fa(n),c=o.getNode().getImmediateChild(i);let d;if(ya(s))d=r;else{const e=u.getCompleteChild(i);d=null!=e?".priority"===pa(s)&&e.getChild(ga(s)).isEmpty()?e:e.updateChild(s,r):eo.EMPTY_NODE}if(c.equals(d))l=t;else{l=Do(t,e.filter.updateChild(o.getNode(),i,d,s,u,a),o.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function yl(e,t){return e.eventCache.isCompleteForChild(t)}function _l(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function bl(e,t,n,r,i,s,a,o){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=ya(n)?r:new $o(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=_l(0,t.serverCache.getNode().getImmediateChild(n),r);c=gl(e,c,new ca(n),l,i,s,a,o)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=_l(0,t.serverCache.getNode().getImmediateChild(n),r);c=gl(e,c,new ca(n),l,i,s,a,o)}})),c}class wl{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new co(n.getIndex()),i=(s=n).loadsAllData()?new co(s.getIndex()):s.hasLimit()?new ho(s):new uo(s);var s;this.processor_=function(e){return{filter:e}}(i);const a=t.serverCache,o=t.eventCache,l=r.updateFullNode(eo.EMPTY_NODE,a.getNode(),null),c=i.updateFullNode(eo.EMPTY_NODE,o.getNode(),null),u=new Po(l,a.isFullyInitialized(),r.filtersNodes()),d=new Po(c,o.isFullyInitialized(),i.filtersNodes());this.viewCache_=Oo(d,u),this.eventGenerator_=new jo(this.query_)}get query(){return this.query_}}function xl(e,t){const n=Ao(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!ya(t)&&!n.getImmediateChild(da(t)).isEmpty())?n.getChild(t):null}function kl(e){return 0===e.eventRegistrations_.length}function Cl(e,t,n){const r=[];if(n){Un(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function El(e,t,n,r){t.type===Co.MERGE&&null!==t.source.queryId&&(Un(Ao(e.viewCache_),"We should always have a full cache before handling merges"),Un(Mo(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=pl(e.processor_,i,t,n,r);var a,o;return a=e.processor_,o=s.viewCache,Un(o.eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),Un(o.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),Un(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Sl(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Sl(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],s=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Ro(e,i,"child_removed",t,r,n),Ro(e,i,"child_added",t,r,n),Ro(e,i,"child_moved",s,r,n),Ro(e,i,"child_changed",t,r,n),Ro(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let Il,Tl;class Nl{constructor(){this.views=new Map}}function Pl(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return Un(null!=s,"SyncTree gave us an op for an invalid query."),El(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(El(s,t,n,r));return i}}function jl(e,t,n,r,i){const s=t._queryIdentifier,a=e.views.get(s);if(!a){let e=rl(n,i?r:null),s=!1;e?s=!0:r instanceof eo?(e=il(n,r),s=!1):(e=eo.EMPTY_NODE,s=!1);const a=Oo(new Po(e,s,!1),new Po(r,i,!1));return new wl(t,a)}return a}function Rl(e,t,n,r,i,s){const a=jl(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(Va,((e,t)=>{r.push(ao(e,t))}));return n.isFullyInitialized()&&r.push(so(n.getNode())),Sl(e,r,n.getNode(),t)}(a,n)}function Ol(e,t,n,r){const i=t._queryIdentifier,s=[];let a=[];const o=Fl(e);if("default"===i)for(const[l,c]of e.views.entries())a=a.concat(Cl(c,n,r)),kl(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(i);t&&(a=a.concat(Cl(t,n,r)),kl(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||s.push(t.query)))}return o&&!Fl(e)&&s.push(new(Un(Il,"Reference.ts has not been loaded"),Il)(t._repo,t._path)),{removed:s,events:a}}function Dl(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function Ll(e,t){let n=null;for(const r of e.views.values())n=n||xl(r,t);return n}function Ml(e,t){if(t._queryParams.loadsAllData())return $l(e);{const n=t._queryIdentifier;return e.views.get(n)}}function Al(e,t){return null!=Ml(e,t)}function Fl(e){return null!=$l(e)}function $l(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Ul=1;class zl{constructor(e){this.listenProvider_=e,this.syncPointTree_=new $o(null),this.pendingWriteTree_={visibleWrites:Uo.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Bl(e,t,n,r,i){return function(e,t,n,r,i){Un(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=zo(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Xl(e,new To({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Wl(e,t,n,r){!function(e,t,n,r){Un(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Bo(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=$o.fromObject(n);return Xl(e,new No({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function Hl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Jo(e.pendingWriteTree_,t)){let t=new $o(null);return null!=r.snap?t=t.set(ua(),!0):Rs(r.children,(e=>{t=t.set(new ca(e),!0)})),Xl(e,new So(r.path,t,n))}return[]}function ql(e,t,n){return Xl(e,new To({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Vl(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,a=e.syncPointTree_.get(s);let o=[];if(a&&("default"===t._queryIdentifier||Al(a,t))){const l=Ol(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(o=l.events,!i){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(s,((e,t)=>Fl(t)));if(n&&!i){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&Fl(t)){return[$l(t)]}{let e=[];return t&&(e=Dl(t)),Rs(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=ec(e,r);e.listenProvider_.startListening(ac(i),tc(e,i),s.hashFn,s.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(ac(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(nc(t));e.listenProvider_.stopListening(ac(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=nc(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return o}function Gl(e,t,n,r){const i=rc(e,r);if(null!=i){const r=ic(i),s=r.path,a=r.queryId,o=_a(s,t);return sc(e,s,new To(Eo(a),o,n))}return[]}function Kl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let s=null,a=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=_a(e,i);s=s||Ll(t,n),a=a||Fl(t)}));let o,l=e.syncPointTree_.get(i);if(l?(a=a||Fl(l),s=s||Ll(l,ua())):(l=new Nl,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=s)o=!0;else{o=!1,s=eo.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=Ll(t,ua());n&&(s=s.updateImmediateChild(e,n))}))}const c=Al(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=nc(t);Un(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=Ul++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=Rl(l,t,n,Xo(e.pendingWriteTree_,i),s,o);if(!c&&!a&&!r){const n=Ml(l,t);u=u.concat(function(e,t,n){const r=t._path,i=tc(e,t),s=ec(e,n),a=e.listenProvider_.startListening(ac(t),i,s.hashFn,s.onComplete),o=e.syncPointTree_.subtree(r);if(i)Un(!Fl(o.value),"If we're adding a query, it shouldn't be shadowed");else{const t=o.fold(((e,t,n)=>{if(!ya(e)&&t&&Fl(t))return[$l(t).query];{let e=[];return t&&(e=e.concat(Dl(t).map((e=>e.query)))),Rs(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(ac(r),tc(e,r))}}return a}(e,t,n))}return u}function Yl(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=Ll(n,_a(e,t));if(r)return r}));return nl(r,t,i,n,!0)}function Ql(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,((e,t)=>{const i=_a(e,n);r=r||Ll(t,i)}));let i=e.syncPointTree_.get(n);i?r=r||Ll(i,ua()):(i=new Nl,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,a=s?new Po(r,!0,!1):null;return function(e){return Mo(e.viewCache_)}(jl(i,t,Xo(e.pendingWriteTree_,t._path),s?a.getNode():eo.EMPTY_NODE,s))}function Xl(e,t){return Jl(t,e.syncPointTree_,null,Xo(e.pendingWriteTree_,ua()))}function Jl(e,t,n,r){if(ya(e.path))return Zl(e,t,n,r);{const i=t.get(ua());null==n&&null!=i&&(n=Ll(i,ua()));let s=[];const a=da(e.path),o=e.operationForChild(a),l=t.children.get(a);if(l&&o){const e=n?n.getImmediateChild(a):null,t=cl(r,a);s=s.concat(Jl(o,l,e,t))}return i&&(s=s.concat(Pl(i,e,r,n))),s}}function Zl(e,t,n,r){const i=t.get(ua());null==n&&null!=i&&(n=Ll(i,ua()));let s=[];return t.children.inorderTraversal(((t,i)=>{const a=n?n.getImmediateChild(t):null,o=cl(r,t),l=e.operationForChild(t);l&&(s=s.concat(Zl(l,i,a,o)))})),i&&(s=s.concat(Pl(i,e,r,n))),s}function ec(e,t){const n=t.query,r=tc(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||eo.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=rc(e,n);if(r){const n=ic(r),i=n.path,s=n.queryId,a=_a(i,t);return sc(e,i,new Io(Eo(s),a))}return[]}(e,n._path,r):function(e,t){return Xl(e,new Io({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Vl(e,n,null,r)}}}}function tc(e,t){const n=nc(t);return e.queryToTagMap.get(n)}function nc(e){return e._path.toString()+"$"+e._queryIdentifier}function rc(e,t){return e.tagToQueryMap.get(t)}function ic(e){const t=e.indexOf("$");return Un(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ca(e.substr(0,t))}}function sc(e,t,n){const r=e.syncPointTree_.get(t);Un(r,"Missing sync point for query tag that we're tracking");return Pl(r,n,Xo(e.pendingWriteTree_,t),null)}function ac(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Un(Tl,"Reference.ts has not been loaded"),Tl)(e._repo,e._path):e}class oc{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new oc(t)}node(){return this.node_}}class lc{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=va(this.path_,e);return new lc(this.syncTree_,t)}node(){return Yl(this.syncTree_,this.path_)}}const cc=function(e,t,n){return e&&"object"===typeof e?(Un(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?uc(e[".sv"],t,n):"object"===typeof e[".sv"]?dc(e[".sv"],t):void Un(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},uc=function(e,t,n){if("timestamp"===e)return n.timestamp;Un(!1,"Unexpected server value: "+e)},dc=function(e,t,n){e.hasOwnProperty("increment")||Un(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&Un(!1,"Unexpected increment value: "+r);const i=t.node();if(Un(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!==typeof s?r:s+r},hc=function(e,t,n,r){return pc(t,new lc(n,e),r)},fc=function(e,t,n){return pc(e,new oc(t),n)};function pc(e,t,n){const r=e.getPriority().val(),i=cc(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=cc(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new qa(s,no(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new qa(i))),r.forEachChild(Va,((e,r)=>{const i=pc(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))})),s}}class mc{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function gc(e,t){let n=t instanceof ca?t:new ca(t),r=e,i=da(n);for(;null!==i;){const e=_r(r.node.children,i)||{children:{},childCount:0};r=new mc(i,r,e),n=fa(n),i=da(n)}return r}function vc(e){return e.node.value}function yc(e,t){e.node.value=t,kc(e)}function _c(e){return e.node.childCount>0}function bc(e,t){Rs(e.node.children,((n,r)=>{t(new mc(n,e,r))}))}function wc(e,t,n,r){n&&!r&&t(e),bc(e,(e=>{wc(e,t,!0,r)})),n&&r&&t(e)}function xc(e){return new ca(null===e.parent?e.name:xc(e.parent)+"/"+e.name)}function kc(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===vc(e)&&!_c(e)}(n),i=yr(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,kc(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,kc(e))}(e.parent,e.name,e)}const Cc=/[\[\].#$\/\u0000-\u001F\u007F]/,Ec=/[\[\].#$\u0000-\u001F\u007F]/,Sc=10485760,Ic=function(e){return"string"===typeof e&&0!==e.length&&!Cc.test(e)},Tc=function(e){return"string"===typeof e&&0!==e.length&&!Ec.test(e)},Nc=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!Cs(e)||e&&"object"===typeof e&&yr(e,".sv")},Pc=function(e,t,n,r){r&&void 0===t||jc(Pr(e,"value"),t,n)},jc=function(e,t,n){const r=n instanceof ca?new ka(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Ea(r));if("function"===typeof t)throw new Error(e+"contains a function "+Ea(r)+" with contents = "+t.toString());if(Cs(t))throw new Error(e+"contains "+t.toString()+" "+Ea(r));if("string"===typeof t&&t.length>Sc/3&&jr(t)>Sc)throw new Error(e+"contains a string greater than "+Sc+" utf8 bytes "+Ea(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(Rs(t,((t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!Ic(t)))throw new Error(e+" contains an invalid key ("+t+") "+Ea(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=jr(t),Ca(e)}(r,t),jc(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=jr(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+Ea(r)+" in addition to actual children.")}},Rc=function(e,t,n,r){if(r&&void 0===t)return;const i=Pr(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const s=[];Rs(t,((e,t)=>{const r=new ca(e);if(jc(i,t,va(n,r)),".priority"===pa(r)&&!Nc(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)})),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=ma(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!Ic(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(ba);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&xa(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},Oc=function(e,t,n){if(!n||void 0!==t){if(Cs(t))throw new Error(Pr(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Nc(t))throw new Error(Pr(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Dc=function(e,t,n,r){if((!r||void 0!==n)&&!Tc(n))throw new Error(Pr(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Lc=function(e,t){if(".info"===da(t))throw new Error(e+" failed = Can't modify data under /.info/")},Mc=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Ic(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Tc(e)}(n))throw new Error(Pr(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Ac{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Fc(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||wa(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function $c(e,t,n){Fc(e,n),zc(e,(e=>wa(e,t)))}function Uc(e,t,n){Fc(e,n),zc(e,(e=>xa(e,t)||xa(t,e)))}function zc(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(Bc(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Bc(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();gs&&_s("event: "+n.toString()),Ms(r)}}}const Wc="repo_interrupt";class Hc{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ac,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=yo(),this.transactionQueueTree_=new mc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function qc(e,t,n){if(e.stats_=Xs(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new go(e.repoInfo_,((t,n,r,i)=>{Kc(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>Yc(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{gr(n)}catch(Nk){throw new Error("Invalid authOverride provided: "+Nk)}}e.persistentConnection_=new Ta(e.repoInfo_,t,((t,n,r,i)=>{Kc(e,t,n,r,i)}),(t=>{Yc(e,t)}),(t=>{!function(e,t){Rs(t,((t,n)=>{Qc(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return Qs[n]||(Qs[n]=t()),Qs[n]}(e.repoInfo_,(()=>new ko(e.stats_,e.server_))),e.infoData_=new vo,e.infoSyncTree_=new zl({startListening:(t,n,r,i)=>{let s=[];const a=e.infoData_.getNode(t._path);return a.isEmpty()||(s=ql(e.infoSyncTree_,t._path,a),setTimeout((()=>{i("ok")}),0)),s},stopListening:()=>{}}),Qc(e,"connected",!1),e.serverSyncTree_=new zl({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const s=i(n,r);Uc(e.eventQueue_,t._path,s)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function Vc(e){const t=e.infoData_.getNode(new ca(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Gc(e){return(t=(t={timestamp:Vc(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Kc(e,t,n,r,i){e.dataUpdateCount++;const s=new ca(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(i)if(r){const t=wr(n,(e=>no(e)));a=function(e,t,n,r){const i=rc(e,r);if(i){const r=ic(i),s=r.path,a=r.queryId,o=_a(s,t),l=$o.fromObject(n);return sc(e,s,new No(Eo(a),o,l))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=no(n);a=Gl(e.serverSyncTree_,s,t,i)}else if(r){const t=wr(n,(e=>no(e)));a=function(e,t,n){const r=$o.fromObject(n);return Xl(e,new No({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=no(n);a=ql(e.serverSyncTree_,s,t)}let o=s;a.length>0&&(o=ou(e,s)),Uc(e.eventQueue_,o,a)}function Yc(e,t){Qc(e,"connected",t),!1===t&&function(e){ru(e,"onDisconnectEvents");const t=Gc(e),n=yo();wo(e.onDisconnect_,ua(),((r,i)=>{const s=hc(r,i,e.serverSyncTree_,t);_o(n,r,s)}));let r=[];wo(n,ua(),((t,n)=>{r=r.concat(ql(e.serverSyncTree_,t,n));const i=hu(e,t);ou(e,i)})),e.onDisconnect_=yo(),Uc(e.eventQueue_,ua(),r)}(e)}function Qc(e,t,n){const r=new ca("/.info/"+t),i=no(n);e.infoData_.updateSnapshot(r,i);const s=ql(e.infoSyncTree_,r,i);Uc(e.eventQueue_,r,s)}function Xc(e){return e.nextWriteId_++}function Jc(e,t,n,r,i){ru(e,"set",{path:t.toString(),value:n,priority:r});const s=Gc(e),a=no(n,r),o=Yl(e.serverSyncTree_,t),l=fc(a,o,s),c=Xc(e),u=Bl(e.serverSyncTree_,t,l,c,!0);Fc(e.eventQueue_,u),e.server_.put(t.toString(),a.val(!0),((n,r)=>{const s="ok"===n;s||ks("set at "+t+" failed: "+n);const a=Hl(e.serverSyncTree_,c,!s);Uc(e.eventQueue_,t,a),iu(e,i,n,r)}));const d=hu(e,t);ou(e,d),Uc(e.eventQueue_,d,[])}function Zc(e,t,n){e.server_.onDisconnectCancel(t.toString(),((r,i)=>{"ok"===r&&bo(e.onDisconnect_,t),iu(e,n,r,i)}))}function eu(e,t,n,r){const i=no(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),((n,s)=>{"ok"===n&&_o(e.onDisconnect_,t,i),iu(e,r,n,s)}))}function tu(e,t,n){let r;r=".info"===da(t._path)?Vl(e.infoSyncTree_,t,n):Vl(e.serverSyncTree_,t,n),$c(e.eventQueue_,t._path,r)}function nu(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Wc)}function ru(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];_s(t,...r)}function iu(e,t,n,r){t&&Ms((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}}))}function su(e,t,n){return Yl(e.serverSyncTree_,t,n)||eo.EMPTY_NODE}function au(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||du(e,t),vc(t)){const n=cu(e,t);Un(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=su(e,t,r);let s=i;const a=i.hash();for(let c=0;c<n.length;c++){const e=n[c];Un(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=_a(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const o=s.val(!0),l=t;e.server_.put(l.toString(),o,(r=>{ru(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(Hl(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();du(e,gc(e.transactionQueueTree_,t)),au(e,e.transactionQueueTree_),Uc(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)Ms(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{ks("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}ou(e,t)}}),a)}(e,xc(t),n)}else _c(t)&&bc(t,(t=>{au(e,t)}))}function ou(e,t){const n=lu(e,t),r=xc(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter((e=>0===e.status)),a=s.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const s=t[l],c=_a(n,s.path);let u,d=!1;if(Un(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)d=!0,u=s.abortReason,i=i.concat(Hl(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)d=!0,u="maxretry",i=i.concat(Hl(e.serverSyncTree_,s.currentWriteId,!0));else{const n=su(e,s.path,a);s.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){jc("transaction failed: Data returned ",r,s.path);let t=no(r);"object"===typeof r&&null!=r&&yr(r,".priority")||(t=t.updatePriority(n.getPriority()));const o=s.currentWriteId,l=Gc(e),c=fc(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=Xc(e),a.splice(a.indexOf(o),1),i=i.concat(Bl(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),i=i.concat(Hl(e.serverSyncTree_,o,!0))}else d=!0,u="nodata",i=i.concat(Hl(e.serverSyncTree_,s.currentWriteId,!0))}Uc(e.eventQueue_,n,i),i=[],d&&(t[l].status=2,o=t[l].unwatcher,setTimeout(o,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var o;du(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)Ms(r[l]);au(e,e.transactionQueueTree_)}(e,cu(e,n),r),r}function lu(e,t){let n,r=e.transactionQueueTree_;for(n=da(t);null!==n&&void 0===vc(r);)r=gc(r,n),n=da(t=fa(t));return r}function cu(e,t){const n=[];return uu(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function uu(e,t,n){const r=vc(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);bc(t,(t=>{uu(e,t,n)}))}function du(e,t){const n=vc(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,yc(t,n.length>0?n:void 0)}bc(t,(t=>{du(e,t)}))}function hu(e,t){const n=xc(lu(e,t)),r=gc(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{fu(e,t)})),fu(e,r),wc(r,(t=>{fu(e,t)})),n}function fu(e,t){const n=vc(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Un(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(Un(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(Hl(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?yc(t,void 0):n.length=s+1,Uc(e.eventQueue_,xc(t),i);for(let e=0;e<r.length;e++)Ms(r[e])}}const pu=function(e,t){const n=mu(e),r=n.namespace;"firebase.com"===n.domain&&xs(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||xs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ks("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Vs(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new ca(n.pathString)}},mu=function(e){let t="",n="",r="",i="",s="",a=!0,o="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(o=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let d=e.indexOf("?");-1===d&&(d=e.length),t=e.substring(0,Math.min(u,d)),u<d&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(Nk){}t+="/"+e}return t}(e.substring(u,d)));const h=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ks(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,d)));c=t.indexOf(":"),c>=0?(a="https"===o||"wss"===o,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in h&&(s=h.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:a,scheme:o,pathString:i,namespace:s}},gu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",vu=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const s=new Array(8);for(i=7;i>=0;i--)s[i]=gu.charAt(n%64),n=Math.floor(n/64);Un(0===n,"Cannot push at time == 0");let a=s.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)a+=gu.charAt(t[i]);return Un(20===a.length,"nextPushId: Length should be 20."),a}}();class yu{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+gr(this.snapshot.exportVal())}}class _u{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class bu{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Un(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class wu{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new nr;return Zc(this._repo,this._path,e.wrapCallback((()=>{}))),e.promise}remove(){Lc("OnDisconnect.remove",this._path);const e=new nr;return eu(this._repo,this._path,null,e.wrapCallback((()=>{}))),e.promise}set(e){Lc("OnDisconnect.set",this._path),Pc("OnDisconnect.set",e,this._path,!1);const t=new nr;return eu(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}setWithPriority(e,t){Lc("OnDisconnect.setWithPriority",this._path),Pc("OnDisconnect.setWithPriority",e,this._path,!1),Oc("OnDisconnect.setWithPriority",t,!1);const n=new nr;return function(e,t,n,r,i){const s=no(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),((n,r)=>{"ok"===n&&_o(e.onDisconnect_,t,s),iu(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((()=>{}))),n.promise}update(e){Lc("OnDisconnect.update",this._path),Rc("OnDisconnect.update",e,this._path,!1);const t=new nr;return function(e,t,n,r){if(br(n))return _s("onDisconnect().update() called with empty data.  Don't do anything."),void iu(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,((i,s)=>{"ok"===i&&Rs(n,((n,r)=>{const i=no(r);_o(e.onDisconnect_,va(t,n),i)})),iu(0,r,i,s)}))}(this._repo,this._path,e,t.wrapCallback((()=>{}))),t.promise}}class xu{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return ya(this._path)?null:pa(this._path)}get ref(){return new ku(this._repo,this._path)}get _queryIdentifier(){const e=mo(this._queryParams),t=Ps(e);return"{}"===t?"default":t}get _queryObject(){return mo(this._queryParams)}isEqual(e){if(!((e=Or(e))instanceof xu))return!1;const t=this._repo===e._repo,n=wa(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class ku extends xu{constructor(e,t){super(e,t,new fo,!1)}get parent(){const e=ga(this._path);return null===e?null:new ku(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Cu{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new ca(e),n=Su(this.ref,e);return new Cu(this._node.getChild(t),n,Va)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new Cu(n,Su(this.ref,t),Va))))}hasChild(e){const t=new ca(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Eu(e,t){return(e=Or(e))._checkNotDeleted("ref"),void 0!==t?Su(e._root,t):e._root}function Su(e,t){var n,r,i,s;return null===da((e=Or(e))._path)?(n="child",r="path",s=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Dc(n,r,i,s)):Dc("child","path",t,!1),new ku(e._repo,va(e._path,t))}function Iu(e){return e=Or(e),new wu(e._repo,e._path)}function Tu(e,t){e=Or(e),Lc("push",e._path),Pc("push",t,e._path,!0);const n=Vc(e._repo),r=vu(n),i=Su(e,r),s=Su(e,r);let a;return a=null!=t?Nu(s,t).then((()=>s)):Promise.resolve(s),i.then=a.then.bind(a),i.catch=a.then.bind(a,void 0),i}function Nu(e,t){e=Or(e),Lc("set",e._path),Pc("set",t,e._path,!1);const n=new nr;return Jc(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function Pu(e,t){Rc("update",t,e._path,!1);const n=new nr;return function(e,t,n,r){ru(e,"update",{path:t.toString(),value:n});let i=!0;const s=Gc(e),a={};if(Rs(n,((n,r)=>{i=!1,a[n]=hc(va(t,n),no(r),e.serverSyncTree_,s)})),i)_s("update() called with empty data.  Don't do anything."),iu(0,r,"ok",void 0);else{const i=Xc(e),s=Wl(e.serverSyncTree_,t,a,i);Fc(e.eventQueue_,s),e.server_.merge(t.toString(),n,((n,s)=>{const a="ok"===n;a||ks("update at "+t+" failed: "+n);const o=Hl(e.serverSyncTree_,i,!a),l=o.length>0?ou(e,t):t;Uc(e.eventQueue_,l,o),iu(0,r,n,s)})),Rs(n,(n=>{const r=hu(e,va(t,n));ou(e,r)})),Uc(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}function ju(e){e=Or(e);const t=new bu((()=>{})),n=new Ru(t);return function(e,t,n){const r=Ql(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((r=>{const i=no(r).withIndex(t._queryParams.getIndex());let s;if(Kl(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=ql(e.serverSyncTree_,t._path,i);else{const n=tc(e.serverSyncTree_,t);s=Gl(e.serverSyncTree_,t._path,i,n)}return Uc(e.eventQueue_,t._path,s),Vl(e.serverSyncTree_,t,n,null,!0),i}),(n=>(ru(e,"get for query "+gr(t)+" failed: "+n),Promise.reject(new Error(n)))))}(e._repo,e,n).then((t=>new Cu(t,new ku(e._repo,e._path),e._queryParams.getIndex())))}class Ru{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new yu("value",this,new Cu(e.snapshotNode,new ku(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new _u(this,e,t):null}matches(e){return e instanceof Ru&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Ou{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new _u(this,e,t):null}createEvent(e,t){Un(null!=e.childName,"Child events should have a childName.");const n=Su(new ku(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new yu(e.type,this,new Cu(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Ou&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function Du(e,t,n,r,i){let s;if("object"===typeof r&&(s=void 0,i=r),"function"===typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{tu(e._repo,e,o),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const a=new bu(n,s||void 0),o="value"===t?new Ru(a):new Ou(t,a);return function(e,t,n){let r;r=".info"===da(t._path)?Kl(e.infoSyncTree_,t,n):Kl(e.serverSyncTree_,t,n),$c(e.eventQueue_,t._path,r)}(e._repo,e,o),()=>tu(e._repo,e,o)}function Lu(e,t,n,r){return Du(e,"value",t,n,r)}!function(e){Un(!Il,"__referenceConstructor has already been defined"),Il=e}(ku),function(e){Un(!Tl,"__referenceConstructor has already been defined"),Tl=e}(ku);const Mu={};let Au=!1;function Fu(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||xs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_s("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let a,o,l=pu(s,i),c=l.repoInfo;"undefined"!==typeof process&&(o={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),o?(a=!0,s=`http://${o}?ns=${c.namespace}`,l=pu(s,i),c=l.repoInfo):a=!l.repoInfo.secure;const u=i&&a?new Us(Us.OWNER):new $s(e.name,e.options,t);Mc("Invalid Firebase Database URL",l),ya(l.path)||xs("Database URL must point to the root of a Firebase Database (not including a child path).");const d=function(e,t,n,r){let i=Mu[t.name];i||(i={},Mu[t.name]=i);let s=i[e.toURLString()];s&&xs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new Hc(e,Au,n,r),i[e.toURLString()]=s,s}(c,e,u,new Fs(e.name,n));return new $u(d,e)}class $u{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(qc(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ku(this._repo,ua())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=Mu[t];n&&n[e.key]===e||xs(`Database ${t}(${e.repoInfo_}) has already been deleted.`),nu(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&xs("Cannot call "+e+" on a deleted database.")}}function Uu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vi(),t=arguments.length>1?arguments[1]:void 0;const n=zi(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=Zn("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Or(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&xs("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&xs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Us(Us.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:rr(r.mockUserToken,e.app.options.projectId);s=new Us(t)}!function(e,t,n,r){e.repoInfo_=new Vs(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,s)}(n,...e)}return n}Ta.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Ta.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){as=e}(Hi),Ui(new Dr("database",((e,t)=>{let{instanceIdentifier:n}=t;return Fu(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Gi(is,ss,e),Gi(is,ss,"esm2017")}();const zu=async(e,t)=>{const n=Eu(Uu(),e);try{await Pu(n,t),console.log("Data updated successfully.")}catch(ws){console.error("Error updating data:",ws)}},Bu=e=>{const t=e.match(/\.([a-zA-Z0-9]+)(\?.*)?$/),n=t?t[1].toLowerCase():"";return["mp4","webm","ogg"].includes(n)},Wu=e=>{switch(e.split(".").pop().toLowerCase()){case"mp4":default:return"video/mp4";case"webm":return"video/webm";case"ogg":return"video/ogg"}},Hu=e=>{let{post:t,currentUserID:n}=e;const{profilePic:r,username:i,uid:s,date:o,postText:l,media:c,likes:u,reposts:d,comments:h}=t,f=u&&u.includes(n),p=d&&d.some((e=>e.userID===n));return(0,a.jsxs)(V,{className:"mb-4 post-card",children:[(0,a.jsx)(V.Header,{className:"d-flex align-items-center justify-content-between",children:(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)(Dn,{to:`/${s}`,children:(0,a.jsx)(Q,{src:r||"/images/defaultProfile.png",roundedCircle:!0,width:"40",height:"40",alt:`${i}'s profile picture`,className:"me-3",style:{cursor:"pointer"}})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(Dn,{to:`/${s}`,style:{textDecoration:"none",color:"inherit"},children:(0,a.jsx)("h6",{className:"mb-0",style:{cursor:"pointer"},children:i})}),(0,a.jsx)("small",{className:"text-muted",children:new Date(o).toLocaleString()})]})]})}),(0,a.jsx)(Dn,{to:`/${s}/${t.id}`,style:{textDecoration:"none",color:"inherit"},children:(0,a.jsxs)(V.Body,{children:[l&&(0,a.jsx)(V.Text,{children:l}),c&&c.length>0&&(0,a.jsx)(ut,{interval:null,indicators:!1,children:c.map(((e,t)=>(0,a.jsx)(ut.Item,{children:(0,a.jsx)("div",{style:{height:"250px",overflow:"hidden"},children:Bu(e)?(0,a.jsxs)("video",{controls:!0,width:"100%",height:"100%",className:"d-block w-100",style:{objectFit:"contain",margin:"auto"},children:[(0,a.jsx)("source",{src:e,type:Wu(e)}),"Your browser does not support the video tag."]}):(0,a.jsx)(V.Img,{variant:"top",src:e,alt:`Media ${t+1}`,style:{height:"100%",objectFit:"contain"}})})},t)))})]})}),(0,a.jsxs)(V.Footer,{className:"d-flex justify-content-between",children:[(0,a.jsxs)(ht,{variant:"outline-primary",onClick:async()=>{const e=`Posts/${t.id}`,r=`notifications/${s}/Activities/${t.id}`,i=Date.now(),a=f?u.filter((e=>e!==n)):[...u||[],n];await zu(e,{likes:a}),n!==t.userId&&await zu(r,{likes:a.map((e=>({uid:e,date:i})))})},children:[(0,a.jsx)("i",{className:"bi bi-heart"+(f?"-fill":"")})," ",u?u.length:0," ",(0,a.jsx)("span",{className:"d-none d-sm-inline",children:"Like"})]}),(0,a.jsxs)(ht,{variant:"outline-secondary",onClick:async()=>{const e=`Posts/${t.id}`,r=`notifications/${s}/Activities/${t.id}`,i={userID:n,date:Date.now()},a=p?d.filter((e=>e.userID!==n)):[...d||[],i];await zu(e,{reposts:a}),n!==s&&await zu(r,a)},children:[(0,a.jsx)("i",{className:"bi bi-repeat"+(p?"-1":"")}),d?d.length:0,(0,a.jsx)("span",{className:"d-none d-sm-inline",children:"Repost"})]}),(0,a.jsx)(Dn,{to:`/${s}/${t.id}`,style:{textDecoration:"none"},children:(0,a.jsxs)(ht,{variant:"outline-info",children:[(0,a.jsx)("i",{className:"bi bi-chat"})," ",h?h.length:0," ",(0,a.jsx)("span",{className:"d-none d-sm-inline",children:"Comment"})]})}),(0,a.jsxs)(ht,{variant:"outline-success",className:"ms-auto",onClick:()=>{const e=`${window.location.origin}/${s}/${t.id}`;navigator.share?navigator.share({title:`${i}'s Post`,text:"Check out this post!",url:e}).then((()=>{})).catch((e=>console.error("Error sharing post",e))):navigator.clipboard.writeText(e).then((()=>alert("Post URL copied to clipboard")),(e=>console.error("Failed to copy text: ",e)))},children:[(0,a.jsx)("i",{className:"bi bi-share"})," ",(0,a.jsx)("span",{className:"d-none d-sm-inline",children:"Share"})]})]})]})};var qu;function Vu(e){if((!qu&&0!==qu||e)&&De){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),qu=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return qu}function Gu(e){void 0===e&&(e=Ie());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(Nk){return e.body}}function Ku(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function Yu(e){return`data-rr-ui-${e}`}const Qu=Yu("modal-open");const Xu=class{constructor(){let{ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[n]:r.style[n]},e.scrollBarWidth&&(t[n]=`${parseInt(Oe(r,n)||"0",10)+e.scrollBarWidth}px`),r.setAttribute(Qu,""),Oe(r,t)}reset(){[...this.modals].forEach((e=>this.remove(e)))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(Qu),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}remove(e){const t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}},Ju=(0,e.createContext)(De?window:void 0);Ju.Provider;function Zu(){return(0,e.useContext)(Ju)}const ed=(e,t)=>De?null==e?(t||Ie()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;const td=function(t){let{children:n,in:r,onExited:i,mountOnEnter:s,unmountOnExit:a}=t;const o=(0,e.useRef)(null),l=(0,e.useRef)(r),c=J(i);(0,e.useEffect)((()=>{r?l.current=!0:c(o.current)}),[r,c]);const u=at(o,n.ref),d=(0,e.cloneElement)(n,{ref:u});return r?d:a||!l.current&&s?null:d};function nd(){const t=e.version.split(".");return{major:+t[0],minor:+t[1],patch:+t[2]}}const rd=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];const id=["component"];const sd=e.forwardRef(((t,n)=>{let{component:r}=t;const i=function(t){let{onEnter:n,onEntering:r,onEntered:i,onExit:s,onExiting:a,onExited:o,addEndListener:l,children:c}=t,u=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(t,rd);const{major:d}=nd(),h=d>=19?c.props.ref:c.ref,f=(0,e.useRef)(null),p=at(f,"function"===typeof c?null:h),m=e=>t=>{e&&f.current&&e(f.current,t)},g=(0,e.useCallback)(m(n),[n]),v=(0,e.useCallback)(m(r),[r]),y=(0,e.useCallback)(m(i),[i]),_=(0,e.useCallback)(m(s),[s]),b=(0,e.useCallback)(m(a),[a]),w=(0,e.useCallback)(m(o),[o]),x=(0,e.useCallback)(m(l),[l]);return Object.assign({},u,{nodeRef:f},n&&{onEnter:g},r&&{onEntering:v},i&&{onEntered:y},s&&{onExit:_},a&&{onExiting:b},o&&{onExited:w},l&&{addEndListener:x},{children:"function"===typeof c?(e,t)=>c(e,Object.assign({},t,{ref:p})):(0,e.cloneElement)(c,{ref:p})})}(function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(t,id));return(0,a.jsx)(r,Object.assign({ref:n},i))})),ad=sd;function od(t){let{children:n,in:r,onExited:i,onEntered:s,transition:a}=t;const[o,l]=(0,e.useState)(!r);r&&o&&l(!1);const c=function(t){let{in:n,onTransition:r}=t;const i=(0,e.useRef)(null),s=(0,e.useRef)(!0),a=J(r);return ae((()=>{if(!i.current)return;let e=!1;return a({in:n,element:i.current,initial:s.current,isStale:()=>e}),()=>{e=!0}}),[n,a]),ae((()=>(s.current=!1,()=>{s.current=!0})),[]),i}({in:!!r,onTransition:e=>{Promise.resolve(a(e)).then((()=>{e.isStale()||(e.in?null==s||s(e.element,e.initial):(l(!0),null==i||i(e.element)))}),(t=>{throw e.in||l(!0),t}))}}),u=at(c,n.ref);return o&&!r?null:(0,e.cloneElement)(n,{ref:u})}function ld(e,t,n){return e?(0,a.jsx)(ad,Object.assign({},n,{component:e})):t?(0,a.jsx)(od,Object.assign({},n,{transition:t})):(0,a.jsx)(td,Object.assign({},n))}const cd=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let ud;function dd(t){const n=Zu(),r=t||function(e){return ud||(ud=new Xu({ownerDocument:null==e?void 0:e.document})),ud}(n),i=(0,e.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>r.add(i.current),remove:()=>r.remove(i.current),isTopModal:()=>r.isTopModal(i.current),setDialogRef:(0,e.useCallback)((e=>{i.current.dialog=e}),[]),setBackdropRef:(0,e.useCallback)((e=>{i.current.backdrop=e}),[])})}const hd=(0,e.forwardRef)(((t,n)=>{let{show:r=!1,role:i="dialog",className:s,style:o,children:l,backdrop:c=!0,keyboard:u=!0,onBackdropClick:d,onEscapeKeyDown:h,transition:f,runTransition:p,backdropTransition:m,runBackdropTransition:g,autoFocus:v=!0,enforceFocus:y=!0,restoreFocus:_=!0,restoreFocusOptions:b,renderDialog:w,renderBackdrop:x=e=>(0,a.jsx)("div",Object.assign({},e)),manager:k,container:C,onShow:E,onHide:S=()=>{},onExit:I,onExited:T,onExiting:N,onEnter:P,onEntering:j,onEntered:R}=t,O=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(t,cd);const D=Zu(),L=function(t,n){const r=Zu(),[i,s]=(0,e.useState)((()=>ed(t,null==r?void 0:r.document)));if(!i){const e=ed(t);e&&s(e)}return(0,e.useEffect)((()=>{n&&i&&n(i)}),[n,i]),(0,e.useEffect)((()=>{const e=ed(t);e!==i&&s(e)}),[t,i]),i}(C),M=dd(k),A=ee(),F=function(t){const n=(0,e.useRef)(null);return(0,e.useEffect)((()=>{n.current=t})),n.current}(r),[$,U]=(0,e.useState)(!r),z=(0,e.useRef)(null);(0,e.useImperativeHandle)(n,(()=>M),[M]),De&&!F&&r&&(z.current=Gu(null==D?void 0:D.document)),r&&$&&U(!1);const B=J((()=>{if(M.add(),K.current=Ue(document,"keydown",V),G.current=Ue(document,"focus",(()=>setTimeout(H)),!0),E&&E(),v){var e,t;const n=Gu(null!=(e=null==(t=M.dialog)?void 0:t.ownerDocument)?e:null==D?void 0:D.document);M.dialog&&n&&!Ku(M.dialog,n)&&(z.current=n,M.dialog.focus())}})),W=J((()=>{var e;(M.remove(),null==K.current||K.current(),null==G.current||G.current(),_)&&(null==(e=z.current)||null==e.focus||e.focus(b),z.current=null)}));(0,e.useEffect)((()=>{r&&L&&B()}),[r,L,B]),(0,e.useEffect)((()=>{$&&W()}),[$,W]),te((()=>{W()}));const H=J((()=>{if(!y||!A()||!M.isTopModal())return;const e=Gu(null==D?void 0:D.document);M.dialog&&e&&!Ku(M.dialog,e)&&M.dialog.focus()})),q=J((e=>{e.target===e.currentTarget&&(null==d||d(e),!0===c&&S())})),V=J((e=>{u&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&M.isTopModal()&&(null==h||h(e),e.defaultPrevented||S())})),G=(0,e.useRef)(),K=(0,e.useRef)();if(!L)return null;const Y=Object.assign({role:i,ref:M.setDialogRef,"aria-modal":"dialog"===i||void 0},O,{style:o,className:s,tabIndex:-1});let Q=w?w(Y):(0,a.jsx)("div",Object.assign({},Y,{children:e.cloneElement(l,{role:"document"})}));Q=ld(f,p,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!r,onExit:I,onExiting:N,onExited:function(){U(!0),null==T||T(...arguments)},onEnter:P,onEntering:j,onEntered:R,children:Q});let X=null;return c&&(X=x({ref:M.setBackdropRef,onClick:q}),X=ld(m,g,{in:!!r,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:X})),(0,a.jsx)(a.Fragment,{children:Ge.createPortal((0,a.jsxs)(a.Fragment,{children:[X,Q]}),L)})}));hd.displayName="Modal";const fd=Object.assign(hd,{Manager:Xu});var pd=Function.prototype.bind.call(Function.prototype.call,[].slice);function md(e,t){return pd(e.querySelectorAll(t))}function gd(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const vd=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",yd=".sticky-top",_d=".navbar-toggler";class bd extends Xu{adjustAndStore(e,t,n){const r=t.style[e];t.dataset[e]=r,Oe(t,{[e]:`${parseFloat(Oe(t,e))+n}px`})}restore(e,t){const n=t.dataset[e];void 0!==n&&(delete t.dataset[e],Oe(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();var n,r;if(r="modal-open",(n=t).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";md(t,vd).forEach((t=>this.adjustAndStore(i,t,e.scrollBarWidth))),md(t,yd).forEach((t=>this.adjustAndStore(s,t,-e.scrollBarWidth))),md(t,_d).forEach((t=>this.adjustAndStore(s,t,e.scrollBarWidth)))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();var n,r;r="modal-open",(n=t).classList?n.classList.remove(r):"string"===typeof n.className?n.className=gd(n.className,r):n.setAttribute("class",gd(n.className&&n.className.baseVal||"",r));const i=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";md(t,vd).forEach((e=>this.restore(i,e))),md(t,yd).forEach((e=>this.restore(s,e))),md(t,_d).forEach((e=>this.restore(s,e)))}}let wd;function xd(e){return wd||(wd=new bd(e)),wd}const kd=bd,Cd={[Ze]:"show",[et]:"show"},Ed=e.forwardRef(((t,n)=>{let{className:r,children:i,transitionClasses:o={},onEnter:l,...c}=t;const u={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...c},d=(0,e.useCallback)(((e,t)=>{qe(e),null==l||l(e,t)}),[l]),{major:h}=nd(),f=h>=19?i.props.ref:i.ref;return(0,a.jsx)(lt,{ref:n,addEndListener:He,...u,onEnter:d,childRef:f,children:(t,n)=>e.cloneElement(i,{...n,className:s()("fade",r,i.props.className,Cd[t],o[t])})})}));Ed.displayName="Fade";const Sd=Ed,Id=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=h(r,"modal-body"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));Id.displayName="ModalBody";const Td=Id,Nd=e.createContext({onHide(){}}),Pd=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,contentClassName:i,centered:o,size:l,fullscreen:c,children:u,scrollable:d,...f}=e;n=h(n,"modal");const p=`${n}-dialog`,m="string"===typeof c?`${n}-fullscreen-${c}`:`${n}-fullscreen`;return(0,a.jsx)("div",{...f,ref:t,className:s()(p,r,l&&`${n}-${l}`,o&&`${p}-centered`,d&&`${p}-scrollable`,c&&m),children:(0,a.jsx)("div",{className:s()(`${n}-content`,i),children:u})})}));Pd.displayName="ModalDialog";const jd=Pd,Rd=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=h(r,"modal-footer"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));Rd.displayName="ModalFooter";const Od=Rd,Dd={"aria-label":K().string,onClick:K().func,variant:K().oneOf(["white"])},Ld=e.forwardRef(((e,t)=>{let{className:n,variant:r,"aria-label":i="Close",...o}=e;return(0,a.jsx)("button",{ref:t,type:"button",className:s()("btn-close",r&&`btn-close-${r}`,n),"aria-label":i,...o})}));Ld.displayName="CloseButton",Ld.propTypes=Dd;const Md=Ld,Ad=e.forwardRef(((t,n)=>{let{closeLabel:r="Close",closeVariant:i,closeButton:s=!1,onHide:o,children:l,...c}=t;const u=(0,e.useContext)(Nd),d=J((()=>{null==u||u.onHide(),null==o||o()}));return(0,a.jsxs)("div",{ref:n,...c,children:[l,s&&(0,a.jsx)(Md,{"aria-label":r,variant:i,onClick:d})]})})),Fd=Ad,$d=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,closeLabel:i="Close",closeButton:o=!1,...l}=e;return n=h(n,"modal-header"),(0,a.jsx)(Fd,{ref:t,...l,className:s()(r,n),closeLabel:i,closeButton:o})}));$d.displayName="ModalHeader";const Ud=$d,zd=M("h4"),Bd=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=zd,...o}=e;return r=h(r,"modal-title"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));Bd.displayName="ModalTitle";const Wd=Bd;function Hd(e){return(0,a.jsx)(Sd,{...e,timeout:null})}function qd(e){return(0,a.jsx)(Sd,{...e,timeout:null})}const Vd=e.forwardRef(((t,n)=>{let{bsPrefix:r,className:i,style:o,dialogClassName:l,contentClassName:c,children:u,dialogAs:d=jd,"data-bs-theme":f,"aria-labelledby":p,"aria-describedby":g,"aria-label":v,show:y=!1,animation:_=!0,backdrop:b=!0,keyboard:w=!0,onEscapeKeyDown:x,onShow:k,onHide:C,container:E,autoFocus:S=!0,enforceFocus:I=!0,restoreFocus:T=!0,restoreFocusOptions:N,onEntered:P,onExit:j,onExiting:R,onEnter:O,onEntering:D,onExited:L,backdropClassName:M,manager:A,...F}=t;const[$,U]=(0,e.useState)({}),[z,B]=(0,e.useState)(!1),W=(0,e.useRef)(!1),H=(0,e.useRef)(!1),q=(0,e.useRef)(null),[V,G]=(0,e.useState)(null),K=at(n,G),Y=J(C),Q=m();r=h(r,"modal");const X=(0,e.useMemo)((()=>({onHide:Y})),[Y]);function Z(){return A||xd({isRTL:Q})}function ee(e){if(!De)return;const t=Z().getScrollbarWidth()>0,n=e.scrollHeight>Ie(e).documentElement.clientHeight;U({paddingRight:t&&!n?Vu():void 0,paddingLeft:!t&&n?Vu():void 0})}const ne=J((()=>{V&&ee(V.dialog)}));te((()=>{$e(window,"resize",ne),null==q.current||q.current()}));const re=()=>{W.current=!0},ie=e=>{W.current&&V&&e.target===V.dialog&&(H.current=!0),W.current=!1},se=()=>{B(!0),q.current=Be(V.dialog,(()=>{B(!1)}))},ae=e=>{"static"!==b?H.current||e.target!==e.currentTarget?H.current=!1:null==C||C():(e=>{e.target===e.currentTarget&&se()})(e)},oe=(0,e.useCallback)((e=>(0,a.jsx)("div",{...e,className:s()(`${r}-backdrop`,M,!_&&"show")})),[_,M,r]),le={...o,...$};le.display="block";return(0,a.jsx)(Nd.Provider,{value:X,children:(0,a.jsx)(fd,{show:y,ref:K,backdrop:b,container:E,keyboard:!0,autoFocus:S,enforceFocus:I,restoreFocus:T,restoreFocusOptions:N,onEscapeKeyDown:e=>{w?null==x||x(e):(e.preventDefault(),"static"===b&&se())},onShow:k,onHide:C,onEnter:(e,t)=>{e&&ee(e),null==O||O(e,t)},onEntering:(e,t)=>{null==D||D(e,t),Fe(window,"resize",ne)},onEntered:P,onExit:e=>{null==q.current||q.current(),null==j||j(e)},onExiting:R,onExited:e=>{e&&(e.style.display=""),null==L||L(e),$e(window,"resize",ne)},manager:Z(),transition:_?Hd:void 0,backdropTransition:_?qd:void 0,renderBackdrop:oe,renderDialog:e=>(0,a.jsx)("div",{role:"dialog",...e,style:le,className:s()(i,r,z&&`${r}-static`,!_&&"show"),onClick:b?ae:void 0,onMouseUp:ie,"data-bs-theme":f,"aria-label":v,"aria-labelledby":p,"aria-describedby":g,children:(0,a.jsx)(d,{...F,onMouseDown:re,className:l,contentClassName:c,children:u})})})})}));Vd.displayName="Modal";const Gd=Object.assign(Vd,{Body:Td,Header:Ud,Title:Wd,Footer:Od,Dialog:jd,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});n(197);const Kd=e.createContext(null);Kd.displayName="NavContext";const Yd=Kd,Qd=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},Xd=e.createContext(null),Jd=e.createContext(null),Zd=["as","active","eventKey"];function eh(t){let{key:n,onClick:r,active:i,id:s,role:a,disabled:o}=t;const l=(0,e.useContext)(Xd),c=(0,e.useContext)(Yd),u=(0,e.useContext)(Jd);let d=i;const h={role:a};if(c){a||"tablist"!==c.role||(h.role="tab");const e=c.getControllerId(null!=n?n:null),t=c.getControlledId(null!=n?n:null);h[Yu("event-key")]=n,h.id=e||s,d=null==i&&null!=n?c.activeKey===n:i,!d&&(null!=u&&u.unmountOnExit||null!=u&&u.mountOnEnter)||(h["aria-controls"]=t)}return"tab"===h.role&&(h["aria-selected"]=d,d||(h.tabIndex=-1),o&&(h.tabIndex=-1,h["aria-disabled"]=!0)),h.onClick=J((e=>{o||(null==r||r(e),null!=n&&l&&!e.isPropagationStopped()&&l(n,e))})),[h,{isActive:d}]}const th=e.forwardRef(((e,t)=>{let{as:n=ue,active:r,eventKey:i}=e,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,Zd);const[o,l]=eh(Object.assign({key:Qd(i,s.href),active:r},s));return o[Yu("active")]=l.isActive,(0,a.jsx)(n,Object.assign({},s,o,{ref:t}))}));th.displayName="NavItem";const nh=th,rh=["as","onSelect","activeKey","role","onKeyDown"];const ih=()=>{},sh=Yu("event-key"),ah=e.forwardRef(((t,n)=>{let{as:r="div",onSelect:i,activeKey:s,role:o,onKeyDown:l}=t,c=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(t,rh);const u=function(){const[,t]=(0,e.useReducer)((e=>!e),!1);return t}(),d=(0,e.useRef)(!1),h=(0,e.useContext)(Xd),f=(0,e.useContext)(Jd);let p,m;f&&(o=o||"tablist",s=f.activeKey,p=f.getControlledId,m=f.getControllerId);const g=(0,e.useRef)(null),v=e=>{const t=g.current;if(!t)return null;const n=md(t,`[${sh}]:not([aria-disabled=true])`),r=t.querySelector("[aria-selected=true]");if(!r||r!==document.activeElement)return null;const i=n.indexOf(r);if(-1===i)return null;let s=i+e;return s>=n.length&&(s=0),s<0&&(s=n.length-1),n[s]},y=(e,t)=>{null!=e&&(null==i||i(e,t),null==h||h(e,t))};(0,e.useEffect)((()=>{if(g.current&&d.current){const e=g.current.querySelector(`[${sh}][aria-selected=true]`);null==e||e.focus()}d.current=!1}));const _=at(n,g);return(0,a.jsx)(Xd.Provider,{value:y,children:(0,a.jsx)(Yd.Provider,{value:{role:o,activeKey:Qd(s),getControlledId:p||ih,getControllerId:m||ih},children:(0,a.jsx)(r,Object.assign({},c,{onKeyDown:e=>{if(null==l||l(e),!f)return;let t;switch(e.key){case"ArrowLeft":case"ArrowUp":t=v(-1);break;case"ArrowRight":case"ArrowDown":t=v(1);break;default:return}var n;t&&(e.preventDefault(),y(t.dataset[(n="EventKey",`rrUi${n}`)]||null,e),d.current=!0,u())},ref:_,role:o}))})})}));ah.displayName="Nav";const oh=Object.assign(ah,{Item:nh}),lh=e.createContext(null);lh.displayName="NavbarContext";const ch=lh,uh=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=h(r,"nav-item"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));uh.displayName="NavItem";const dh=uh,hh=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i=fe,active:o,eventKey:l,disabled:c=!1,...u}=e;n=h(n,"nav-link");const[d,f]=eh({key:Qd(l,u.href),active:o,disabled:c,...u});return(0,a.jsx)(i,{...u,...d,ref:t,disabled:c,className:s()(r,n,c&&"disabled",f.isActive&&"active")})}));hh.displayName="NavLink";const fh=hh,ph=e.forwardRef(((t,n)=>{const{as:r="div",bsPrefix:i,variant:o,fill:l=!1,justify:c=!1,navbar:u,navbarScroll:d,className:f,activeKey:p,...m}=ye(t,{activeKey:"onSelect"}),g=h(i,"nav");let v,y,_=!1;const b=(0,e.useContext)(ch),w=(0,e.useContext)(I);return b?(v=b.bsPrefix,_=null==u||u):w&&({cardHeaderBsPrefix:y}=w),(0,a.jsx)(oh,{as:r,ref:n,activeKey:p,className:s()(f,{[g]:!_,[`${v}-nav`]:_,[`${v}-nav-scroll`]:_&&d,[`${y}-${o}`]:!!y,[`${g}-${o}`]:!!o,[`${g}-fill`]:l,[`${g}-justified`]:c}),...m})}));ph.displayName="Nav";const mh=Object.assign(ph,{Item:dh,Link:fh}),gh={type:K().string,tooltip:K().bool,as:K().elementType},vh=e.forwardRef(((e,t)=>{let{as:n="div",className:r,type:i="valid",tooltip:o=!1,...l}=e;return(0,a.jsx)(n,{...l,ref:t,className:s()(r,`${i}-${o?"tooltip":"feedback"}`)})}));vh.displayName="Feedback",vh.propTypes=gh;const yh=vh,_h=e.createContext({}),bh=e.forwardRef(((t,n)=>{let{id:r,bsPrefix:i,className:o,type:l="checkbox",isValid:c=!1,isInvalid:u=!1,as:d="input",...f}=t;const{controlId:p}=(0,e.useContext)(_h);return i=h(i,"form-check-input"),(0,a.jsx)(d,{...f,ref:n,type:l,id:r||p,className:s()(o,i,c&&"is-valid",u&&"is-invalid")})}));bh.displayName="FormCheckInput";const wh=bh,xh=e.forwardRef(((t,n)=>{let{bsPrefix:r,className:i,htmlFor:o,...l}=t;const{controlId:c}=(0,e.useContext)(_h);return r=h(r,"form-check-label"),(0,a.jsx)("label",{...l,ref:n,htmlFor:o||c,className:s()(i,r)})}));xh.displayName="FormCheckLabel";const kh=xh,Ch=e.forwardRef(((t,n)=>{let{id:r,bsPrefix:i,bsSwitchPrefix:o,inline:l=!1,reverse:c=!1,disabled:u=!1,isValid:d=!1,isInvalid:f=!1,feedbackTooltip:p=!1,feedback:m,feedbackType:g,className:v,style:y,title:_="",type:b="checkbox",label:w,children:x,as:k="input",...C}=t;i=h(i,"form-check"),o=h(o,"form-switch");const{controlId:E}=(0,e.useContext)(_h),S=(0,e.useMemo)((()=>({controlId:r||E})),[E,r]),I=!x&&null!=w&&!1!==w||function(t,n){return e.Children.toArray(t).some((t=>e.isValidElement(t)&&t.type===n))}(x,kh),T=(0,a.jsx)(wh,{...C,type:"switch"===b?"checkbox":b,ref:n,isValid:d,isInvalid:f,disabled:u,as:k});return(0,a.jsx)(_h.Provider,{value:S,children:(0,a.jsx)("div",{style:y,className:s()(v,I&&i,l&&`${i}-inline`,c&&`${i}-reverse`,"switch"===b&&o),children:x||(0,a.jsxs)(a.Fragment,{children:[T,I&&(0,a.jsx)(kh,{title:_,children:w}),m&&(0,a.jsx)(yh,{type:g,tooltip:p,children:m})]})})})}));Ch.displayName="FormCheck";const Eh=Object.assign(Ch,{Input:wh,Label:kh});n(440);const Sh=e.forwardRef(((t,n)=>{let{bsPrefix:r,type:i,size:o,htmlSize:l,id:c,className:u,isValid:d=!1,isInvalid:f=!1,plaintext:p,readOnly:m,as:g="input",...v}=t;const{controlId:y}=(0,e.useContext)(_h);return r=h(r,"form-control"),(0,a.jsx)(g,{...v,type:i,size:l,ref:n,readOnly:m,id:c||y,className:s()(u,p?`${r}-plaintext`:r,o&&`${r}-${o}`,"color"===i&&`${r}-color`,d&&"is-valid",f&&"is-invalid")})}));Sh.displayName="FormControl";const Ih=Object.assign(Sh,{Feedback:yh}),Th=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=h(r,"form-floating"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));Th.displayName="FormFloating";const Nh=Th,Ph=e.forwardRef(((t,n)=>{let{controlId:r,as:i="div",...s}=t;const o=(0,e.useMemo)((()=>({controlId:r})),[r]);return(0,a.jsx)(_h.Provider,{value:o,children:(0,a.jsx)(i,{...s,ref:n})})}));Ph.displayName="FormGroup";const jh=Ph,Rh=e.forwardRef(((t,n)=>{let{as:r="label",bsPrefix:i,column:o=!1,visuallyHidden:l=!1,className:c,htmlFor:u,...d}=t;const{controlId:f}=(0,e.useContext)(_h);i=h(i,"form-label");let p="col-form-label";"string"===typeof o&&(p=`${p} ${p}-${o}`);const m=s()(c,i,l&&"visually-hidden",o&&p);return u=u||f,o?(0,a.jsx)(w,{ref:n,as:"label",className:m,htmlFor:u,...d}):(0,a.jsx)(r,{ref:n,className:m,htmlFor:u,...d})}));Rh.displayName="FormLabel";const Oh=Rh,Dh=e.forwardRef(((t,n)=>{let{bsPrefix:r,className:i,id:o,...l}=t;const{controlId:c}=(0,e.useContext)(_h);return r=h(r,"form-range"),(0,a.jsx)("input",{...l,type:"range",ref:n,className:s()(i,r),id:o||c})}));Dh.displayName="FormRange";const Lh=Dh,Mh=e.forwardRef(((t,n)=>{let{bsPrefix:r,size:i,htmlSize:o,className:l,isValid:c=!1,isInvalid:u=!1,id:d,...f}=t;const{controlId:p}=(0,e.useContext)(_h);return r=h(r,"form-select"),(0,a.jsx)("select",{...f,size:o,ref:n,className:s()(l,r,i&&`${r}-${i}`,c&&"is-valid",u&&"is-invalid"),id:d||p})}));Mh.displayName="FormSelect";const Ah=Mh,Fh=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i="small",muted:o,...l}=e;return n=h(n,"form-text"),(0,a.jsx)(i,{...l,ref:t,className:s()(r,n,o&&"text-muted")})}));Fh.displayName="FormText";const $h=Fh,Uh=e.forwardRef(((e,t)=>(0,a.jsx)(Eh,{...e,ref:t,type:"switch"})));Uh.displayName="Switch";const zh=Object.assign(Uh,{Input:Eh.Input,Label:Eh.Label}),Bh=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,children:i,controlId:o,label:l,...c}=e;return n=h(n,"form-floating"),(0,a.jsxs)(jh,{ref:t,className:s()(r,n),controlId:o,...c,children:[i,(0,a.jsx)("label",{htmlFor:o,children:l})]})}));Bh.displayName="FloatingLabel";const Wh=Bh,Hh={_ref:K().any,validated:K().bool,as:K().elementType},qh=e.forwardRef(((e,t)=>{let{className:n,validated:r,as:i="form",...o}=e;return(0,a.jsx)(i,{...o,ref:t,className:s()(n,r&&"was-validated")})}));qh.displayName="Form",qh.propTypes=Hh;const Vh=Object.assign(qh,{Group:jh,Control:Ih,Floating:Nh,Check:Eh,Switch:zh,Label:Oh,Text:$h,Range:Lh,Select:Ah,FloatingLabel:Wh}),Gh=M("h4");Gh.displayName="DivStyledAsH4";const Kh=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=Gh,...o}=e;return r=h(r,"alert-heading"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));Kh.displayName="AlertHeading";const Yh=Kh,Qh=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=fe,...o}=e;return r=h(r,"alert-link"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));Qh.displayName="AlertLink";const Xh=Qh,Jh=e.forwardRef(((e,t)=>{const{bsPrefix:n,show:r=!0,closeLabel:i="Close alert",closeVariant:o,className:l,children:c,variant:u="primary",onClose:d,dismissible:f,transition:p=Sd,...m}=ye(e,{show:"onClose"}),g=h(n,"alert"),v=J((e=>{d&&d(!1,e)})),y=!0===p?Sd:p,_=(0,a.jsxs)("div",{role:"alert",...y?void 0:m,ref:t,className:s()(l,g,u&&`${g}-${u}`,f&&`${g}-dismissible`),children:[f&&(0,a.jsx)(Md,{onClick:v,"aria-label":i,variant:o}),c]});return y?(0,a.jsx)(y,{unmountOnExit:!0,...m,ref:void 0,in:r,children:_}):r?_:null}));Jh.displayName="Alert";const Zh=Object.assign(Jh,{Link:Xh,Heading:Yh});Gi("firebase","9.23.0","app");let ef,tf;const nf=new WeakMap,rf=new WeakMap,sf=new WeakMap,af=new WeakMap,of=new WeakMap;let lf={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return rf.get(e);if("objectStoreNames"===t)return e.objectStoreNames||sf.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return df(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function cf(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(tf||(tf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(hf(this),n),df(nf.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return df(e.apply(hf(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(hf(this),t,...r);return sf.set(s,t.sort?t.sort():[t]),df(s)}}function uf(e){return"function"===typeof e?cf(e):(e instanceof IDBTransaction&&function(e){if(rf.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));rf.set(e,t)}(e),t=e,(ef||(ef=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,lf):e);var t}function df(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(df(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&nf.set(t,e)})).catch((()=>{})),of.set(t,e),t}(e);if(af.has(e))return af.get(e);const t=uf(e);return t!==e&&(af.set(e,t),of.set(t,e)),t}const hf=e=>of.get(e);const ff=["get","getKey","getAll","getAllKeys","count"],pf=["put","add","delete","clear"],mf=new Map;function gf(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(mf.get(t))return mf.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=pf.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ff.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return mf.set(t,s),s}!function(e){lf=e(lf)}((e=>({...e,get:(t,n,r)=>gf(t,n)||e.get(t,n,r),has:(t,n)=>!!gf(t,n)||e.has(t,n)})));const vf="@firebase/installations",yf="0.6.4",_f=1e4,bf=`w:${yf}`,wf="FIS_v2",xf=36e5,kf=new fr("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Cf(e){return e instanceof hr&&e.code.includes("request-failed")}function Ef(e){let{projectId:t}=e;return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function Sf(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function If(e,t){const n=(await t.json()).error;return kf.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Tf(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Nf(e,t){let{refreshToken:n}=t;const r=Tf(e);return r.append("Authorization",function(e){return`${wf} ${e}`}(n)),r}async function Pf(e){const t=await e();return t.status>=500&&t.status<600?e():t}function jf(e){return new Promise((t=>{setTimeout(t,e)}))}const Rf=/^[cdef][\w-]{21}$/;function Of(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return Rf.test(t)?t:""}catch(e){return""}}function Df(e){return`${e.appName}!${e.appId}`}const Lf=new Map;function Mf(e,t){const n=Df(e);Af(n,t),function(e,t){const n=$f();n&&n.postMessage({key:e,fid:t});Uf()}(n,t)}function Af(e,t){const n=Lf.get(e);if(n)for(const r of n)r(t)}let Ff=null;function $f(){return!Ff&&"BroadcastChannel"in self&&(Ff=new BroadcastChannel("[Firebase] FID Change"),Ff.onmessage=e=>{Af(e.data.key,e.data.fid)}),Ff}function Uf(){0===Lf.size&&Ff&&(Ff.close(),Ff=null)}const zf="firebase-installations-store";let Bf=null;function Wf(){return Bf||(Bf=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=df(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(df(a.result),e.oldVersion,e.newVersion,df(a.transaction))})),n&&a.addEventListener("blocked",(()=>n())),o.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),o}("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(zf)}})),Bf}async function Hf(e,t){const n=Df(e),r=(await Wf()).transaction(zf,"readwrite"),i=r.objectStore(zf),s=await i.get(n);return await i.put(t,n),await r.done,s&&s.fid===t.fid||Mf(e,t.fid),t}async function qf(e){const t=Df(e),n=(await Wf()).transaction(zf,"readwrite");await n.objectStore(zf).delete(t),await n.done}async function Vf(e,t){const n=Df(e),r=(await Wf()).transaction(zf,"readwrite"),i=r.objectStore(zf),s=await i.get(n),a=t(s);return void 0===a?await i.delete(n):await i.put(a,n),await r.done,!a||s&&s.fid===a.fid||Mf(e,a.fid),a}async function Gf(e){let t;const n=await Vf(e.appConfig,(n=>{const r=function(e){const t=e||{fid:Of(),registrationStatus:0};return Qf(t)}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(kf.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:i}=t;const s=Ef(n),a=Tf(n),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:i,authVersion:wf,appId:n.appId,sdkVersion:bf},c={method:"POST",headers:a,body:JSON.stringify(l)},u=await Pf((()=>fetch(s,c)));if(u.ok){const e=await u.json();return{fid:e.fid||i,registrationStatus:2,refreshToken:e.refreshToken,authToken:Sf(e.authToken)}}throw await If("Create Installation",u)}(e,t);return Hf(e.appConfig,n)}catch(Nk){throw Cf(Nk)&&409===Nk.customData.serverCode?await qf(e.appConfig):await Hf(e.appConfig,{fid:t.fid,registrationStatus:0}),Nk}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Kf(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Kf(e){let t=await Yf(e.appConfig);for(;1===t.registrationStatus;)await jf(100),t=await Yf(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Gf(e);return n||t}return t}function Yf(e){return Vf(e,(e=>{if(!e)throw kf.create("installation-not-found");return Qf(e)}))}function Qf(e){return 1===(t=e).registrationStatus&&t.registrationTime+_f<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Xf(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const i=function(e,t){let{fid:n}=t;return`${Ef(e)}/${n}/authTokens:generate`}(n,t),s=Nf(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const o={installation:{sdkVersion:bf,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await Pf((()=>fetch(i,l)));if(c.ok){return Sf(await c.json())}throw await If("Generate Auth Token",c)}async function Jf(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await Vf(e.appConfig,(r=>{if(!ep(r))throw kf.create("not-registered");const i=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+xf}(e)}(i))return r;if(1===i.requestStatus)return t=async function(e,t){let n=await Zf(e.appConfig);for(;1===n.authToken.requestStatus;)await jf(100),n=await Zf(e.appConfig);const r=n.authToken;return 0===r.requestStatus?Jf(e,t):r}(e,n),r;{if(!navigator.onLine)throw kf.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return t=async function(e,t){try{const n=await Xf(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await Hf(e.appConfig,r),n}catch(Nk){if(!Cf(Nk)||401!==Nk.customData.serverCode&&404!==Nk.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Hf(e.appConfig,n)}else await qf(e.appConfig);throw Nk}}(e,n),n}}));return t?await t:r.authToken}function Zf(e){return Vf(e,(e=>{if(!ep(e))throw kf.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+_f<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n}))}function ep(e){return void 0!==e&&2===e.registrationStatus}async function tp(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await Gf(e);t&&await t}(n);return(await Jf(n,t)).token}function np(e){return kf.create("missing-app-config-values",{valueName:e})}const rp="installations",ip=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw np("App Configuration");if(!e.name)throw np("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw np(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:zi(t,"heartbeat"),_delete:()=>Promise.resolve()}},sp=e=>{const t=zi(e.getProvider("app").getImmediate(),rp).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await Gf(t);return r?r.catch(console.error):Jf(t).catch(console.error),n.fid}(t),getToken:e=>tp(t,e)}};Ui(new Dr(rp,ip,"PUBLIC")),Ui(new Dr("installations-internal",sp,"PRIVATE")),Gi(vf,yf),Gi(vf,yf,"esm2017");const ap="analytics",op="https://www.googletagmanager.com/gtag/js",lp=new Hr("@firebase/analytics"),cp=new fr("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function up(e){if(!e.startsWith(op)){const t=cp.create("invalid-gtag-resource",{gtagURL:e});return lp.warn(t.message),""}return e}function dp(e){return Promise.all(e.map((e=>e.catch((e=>e)))))}function hp(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:up}),r=document.createElement("script"),i=`${op}?l=${e}&id=${t}`;r.src=n?null===n||void 0===n?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function fp(e,t,n,r){return async function(i){try{for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];if("event"===i){const[r,i]=a;await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await dp(n);for(const n of e){const e=r.find((e=>e.measurementId===n)),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(Nk){lp.error(Nk)}}(e,t,n,r,i)}else if("config"===i){const[i,s]=a;await async function(e,t,n,r,i,s){const a=r[i];try{if(a)await t[a];else{const e=(await dp(n)).find((e=>e.measurementId===i));e&&await t[e.appId]}}catch(Nk){lp.error(Nk)}e("config",i,s)}(e,t,n,r,i,s)}else if("consent"===i){const[t]=a;e("consent","update",t)}else if("get"===i){const[t,n,r]=a;e("get",t,n,r)}else if("set"===i){const[t]=a;e("set",t)}else e(i,...a)}catch(Nk){lp.error(Nk)}}}const pp=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function mp(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function gp(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pp,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw cp.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw cp.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new yp;return setTimeout((async()=>{o.abort()}),void 0!==n?n:6e4),vp({appId:r,apiKey:i,measurementId:s},a,o,t)}async function vp(e,t,n){let{throttleEndTimeMillis:r,backoffCount:i}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:pp;var a;const{appId:o,measurementId:l}=e;try{await function(e,t){return new Promise(((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener((()=>{clearTimeout(s),r(cp.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}(n,r)}catch(Nk){if(l)return lp.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===Nk||void 0===Nk?void 0:Nk.message}]`),{appId:o,measurementId:l};throw Nk}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:mp(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),a=await fetch(s,i);if(200!==a.status&&304!==a.status){let e="";try{const n=await a.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(o){}throw cp.create("config-fetch-failed",{httpStatus:a.status,responseMessage:e})}return a.json()}(e);return s.deleteThrottleMetadata(o),t}catch(Nk){const r=Nk;if(!function(e){if(!(e instanceof hr)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(r)){if(s.deleteThrottleMetadata(o),l)return lp.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${null===r||void 0===r?void 0:r.message}]`),{appId:o,measurementId:l};throw Nk}const c=503===Number(null===(a=null===r||void 0===r?void 0:r.customData)||void 0===a?void 0:a.httpStatus)?Rr(i,s.intervalMillis,30):Rr(i,s.intervalMillis),u={throttleEndTimeMillis:Date.now()+c,backoffCount:i+1};return s.setThrottleMetadata(o,u),lp.debug(`Calling attemptFetch again in ${c} millis`),vp(e,u,n,s)}}class yp{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach((e=>e()))}}let _p,bp;function wp(e){bp=e}function xp(e){_p=e}async function kp(e,t,n,r,i,s,a){var o;const l=gp(e);l.then((t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&lp.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((e=>lp.error(e))),t.push(l);const c=async function(){if(!ur())return lp.warn(cp.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await dr()}catch(Nk){return lp.warn(cp.create("indexeddb-unavailable",{errorInfo:null===Nk||void 0===Nk?void 0:Nk.toString()}).message),!1}return!0}().then((e=>e?r.getId():void 0)),[u,d]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(op)&&n.src.includes(e))return n;return null})(s)||hp(s,u.measurementId),bp&&(i("consent","default",bp),wp(void 0)),i("js",new Date);const h=null!==(o=null===a||void 0===a?void 0:a.config)&&void 0!==o?o:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),i("config",u.measurementId,h),_p&&(i("set",_p),xp(void 0)),u.measurementId}class Cp{constructor(e){this.app=e}_delete(){return delete Ep[this.app.options.appId],Promise.resolve()}}let Ep={},Sp=[];const Ip={};let Tp,Np,Pp="dataLayer",jp="gtag",Rp=!1;function Op(){const e=[];if(or()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map(((e,t)=>`(${t+1}) ${e}`)).join(" "),n=cp.create("invalid-analytics-context",{errorInfo:t});lp.warn(n.message)}}function Dp(e,t,n){Op();const r=e.options.appId;if(!r)throw cp.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw cp.create("no-api-key");lp.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ep[r])throw cp.create("already-exists",{id:r});if(!Rp){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Pp);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(s=window[i]),window[i]=fp(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}(Ep,Sp,Ip,Pp,jp);Np=e,Tp=t,Rp=!0}Ep[r]=kp(e,Sp,Ip,t,Tp,Pp,n);return new Cp(e)}function Lp(e,t,n,r){e=Or(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(Np,Ep[e.app.options.appId],t,n,r).catch((e=>lp.error(e)))}const Mp="@firebase/analytics",Ap="0.10.0";Ui(new Dr(ap,((e,t)=>{let{options:n}=t;return Dp(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),Ui(new Dr("analytics-internal",(function(e){try{const t=e.getProvider(ap).getImmediate();return{logEvent:(e,n,r)=>Lp(t,e,n,r)}}catch(Nk){throw cp.create("interop-component-reg-failed",{reason:Nk})}}),"PRIVATE")),Gi(Mp,Ap),Gi(Mp,Ap,"esm2017");function Fp(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function $p(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Up=$p,zp=new fr("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Bp=new Hr("@firebase/auth");function Wp(e){if(Bp.logLevel<=$r.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Bp.error(`Auth (${Hi}): ${e}`,...n)}}function Hp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Kp(e,...n)}function qp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Kp(e,...n)}function Vp(e,t,n){const r=Object.assign(Object.assign({},Up()),{[t]:n});return new fr("auth","Firebase",r).create(t,{appName:e.name})}function Gp(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Hp(e,"argument-error"),Vp(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Kp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return zp.create(e,...n)}function Yp(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Kp(t,...r)}}function Qp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Wp(t),new Error(t)}function Xp(e,t){e||Qp(t)}function Jp(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Zp(){return"http:"===em()||"https:"===em()}function em(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class tm{constructor(e,t){this.shortDelay=e,this.longDelay=t,Xp(t>e,"Short delay should be less than long delay!"),this.isMobile=sr()||lr()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Zp()||or()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function nm(e,t){Xp(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class rm{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Qp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Qp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Qp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const im={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},sm=new tm(3e4,6e4);function am(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function om(e,t,n,r){return lm(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=Cr(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode),rm.fetch()(um(e,e.config.apiHost,n,a),Object.assign({method:t,headers:o,referrerPolicy:"no-referrer"},i))}))}async function lm(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},im),t);try{const t=new dm(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw hm(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw hm(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw hm(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw hm(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Vp(e,o,a);Hp(e,o)}}catch(Nk){if(Nk instanceof hr)throw Nk;Hp(e,"network-request-failed",{message:String(Nk)})}}async function cm(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await om(e,t,n,r,i);return"mfaPendingCredential"in s&&Hp(e,"multi-factor-auth-required",{_serverResponse:s}),s}function um(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?nm(e.config,i):`${e.config.apiScheme}://${i}`}class dm{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(qp(this.auth,"network-request-failed"))),sm.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function hm(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=qp(e,t,r);return i.customData._tokenResponse=n,i}function fm(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Nk){}}function pm(e){return 1e3*Number(e)}function mm(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Wp("JWT malformed, contained fewer than 3 sections"),null;try{const e=Gn(n);return e?JSON.parse(e):(Wp("Failed to decode base64 JWT payload"),null)}catch(Nk){return Wp("Caught error parsing JWT payload as JSON",null===Nk||void 0===Nk?void 0:Nk.toString()),null}}async function gm(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Nk){throw Nk instanceof hr&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(Nk)&&e.auth.currentUser===e&&await e.auth.signOut(),Nk}}class vm{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Nk){return void("auth/network-request-failed"===(null===Nk||void 0===Nk?void 0:Nk.code)&&this.schedule(!0))}this.schedule()}}class ym{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fm(this.lastLoginAt),this.creationTime=fm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function _m(e){var t;const n=e.auth,r=await e.getIdToken(),i=await gm(e,async function(e,t){return om(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Yp(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=Fp(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const o=(l=e.providerData,c=a,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new ym(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}class bm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Yp(e.idToken,"internal-error"),Yp("undefined"!==typeof e.idToken,"internal-error"),Yp("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=mm(e);return Yp(t,"internal-error"),Yp("undefined"!==typeof t.exp,"internal-error"),Yp("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Yp(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await lm(e,{},(async()=>{const n=Cr({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=um(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",rm.fetch()(s,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new bm;return n&&(Yp("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Yp("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Yp("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bm,this.toJSON())}_performRefresh(){return Qp("not implemented")}}function wm(e,t){Yp("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class xm{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Fp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ym(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await gm(this,this.stsTokenManager.getToken(this.auth,e));return Yp(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Or(e),r=await n.getIdToken(t),i=mm(r);Yp(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:fm(pm(i.auth_time)),issuedAtTime:fm(pm(i.iat)),expirationTime:fm(pm(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Or(e);await _m(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Yp(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new xm(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Yp(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await _m(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await gm(this,async function(e,t){return om(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:_,isAnonymous:b,providerData:w,stsTokenManager:x}=t;Yp(y&&x,e,"internal-error");const k=bm.fromJSON(this.name,x);Yp("string"===typeof y,e,"internal-error"),wm(u,e.name),wm(d,e.name),Yp("boolean"===typeof _,e,"internal-error"),Yp("boolean"===typeof b,e,"internal-error"),wm(h,e.name),wm(f,e.name),wm(p,e.name),wm(m,e.name),wm(g,e.name),wm(v,e.name);const C=new xm({uid:y,auth:e,email:d,emailVerified:_,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:k,createdAt:g,lastLoginAt:v});return w&&Array.isArray(w)&&(C.providerData=w.map((e=>Object.assign({},e)))),m&&(C._redirectEventId=m),C}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new bm;r.updateFromServerResponse(t);const i=new xm({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await _m(i),i}}const km=new Map;function Cm(e){Xp(e instanceof Function,"Expected a class definition");let t=km.get(e);return t?(Xp(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,km.set(e,t),t)}class Em{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Em.type="NONE";const Sm=Em;function Im(e,t,n){return`firebase:${e}:${t}:${n}`}class Tm{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Im(this.userKey,r.apiKey,i),this.fullPersistenceKey=Im("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?xm._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Tm(Cm(Sm),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||Cm(Sm);const s=Im(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){const n=xm._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new Tm(i,e,n)):new Tm(i,e,n)}}function Nm(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Om(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Pm(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Lm(t))return"Blackberry";if(Mm(t))return"Webos";if(jm(t))return"Safari";if((t.includes("chrome/")||Rm(t))&&!t.includes("edge/"))return"Chrome";if(Dm(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Pm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ir();return/firefox\//i.test(e)}function jm(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ir()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Rm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ir();return/crios\//i.test(e)}function Om(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ir();return/iemobile/i.test(e)}function Dm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ir();return/android/i.test(e)}function Lm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ir();return/blackberry/i.test(e)}function Mm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ir();return/webos/i.test(e)}function Am(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ir();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Fm(){return function(){const e=ir();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function $m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ir();return Am(e)||Dm(e)||Mm(e)||Lm(e)||/windows phone/i.test(e)||Om(e)}function Um(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Nm(ir());break;case"Worker":t=`${Nm(ir())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${Hi}/${r}`}async function zm(e,t){return om(e,"GET","/v2/recaptchaConfig",am(e,t))}function Bm(e){return void 0!==e&&void 0!==e.enterprise}class Wm{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some((e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState))}}function Hm(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=qp("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function qm(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Vm{constructor(e){this.type="recaptcha-enterprise",this.auth=Qm(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Bm(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{zm(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Wm(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Bm(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));Hm("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Gm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Vm(e);let s;try{s=await i.verify(n)}catch(ws){s=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}class Km{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(Nk){r(Nk)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Nk){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Nk||void 0===Nk?void 0:Nk.message})}}}class Ym{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xm(this),this.idTokenSubscription=new Xm(this),this.beforeStateQueue=new Km(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zp,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Cm(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Tm.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Nk){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(Nk){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(Nk)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Yp(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Nk){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await _m(e)}catch(Nk){if("auth/network-request-failed"!==(null===Nk||void 0===Nk?void 0:Nk.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Or(e):null;return t&&Yp(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Yp(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(Cm(e))}))}async initializeRecaptchaConfig(){const e=await zm(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new Wm(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new Vm(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new fr("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Cm(e)||this._popupRedirectResolver;Yp(t,this,"argument-error"),this.redirectPersistenceManager=await Tm.create(this,[Cm(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return Yp(s,this,"internal-error"),s.then((()=>i(this.currentUser))),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Yp(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Um(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Bp.logLevel<=$r.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Bp.warn(`Auth (${Hi}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function Qm(e){return Or(e)}class Xm{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Tr(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Yp(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Jm(e,t,n){const r=Qm(e);Yp(r._canInitEmulator,r,"emulator-config-failed"),Yp(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Zm(t),{host:a,port:o}=function(e){const t=Zm(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:eg(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:eg(t)}}}(t),l=null===o?"":`:${o}`;r.config.emulator={url:`${s}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Zm(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function eg(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class tg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Qp("not implemented")}_getIdTokenResponse(e){return Qp("not implemented")}_linkToIdToken(e,t){return Qp("not implemented")}_getReauthenticationResolver(e){return Qp("not implemented")}}async function ng(e,t){return om(e,"POST","/v1/accounts:update",t)}async function rg(e,t){return cm(e,"POST","/v1/accounts:signInWithPassword",am(e,t))}class ig extends tg{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ig(e,t,"password")}static _fromEmailAndCode(e,t){return new ig(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await Gm(e,n,"signInWithPassword");return rg(e,t)}return rg(e,n).catch((async t=>{if("auth/missing-recaptcha-token"===t.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await Gm(e,n,"signInWithPassword");return rg(e,t)}return Promise.reject(t)}));case"emailLink":return async function(e,t){return cm(e,"POST","/v1/accounts:signInWithEmailLink",am(e,t))}(e,{email:this._email,oobCode:this._password});default:Hp(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ng(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return cm(e,"POST","/v1/accounts:signInWithEmailLink",am(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Hp(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function sg(e,t){return cm(e,"POST","/v1/accounts:signInWithIdp",am(e,t))}class ag extends tg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ag(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Hp("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Fp(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new ag(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return sg(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,sg(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,sg(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Cr(t)}return e}}const og={USER_NOT_FOUND:"user-not-found"};class lg extends tg{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new lg({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new lg({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return cm(e,"POST","/v1/accounts:signInWithPhoneNumber",am(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await cm(e,"POST","/v1/accounts:signInWithPhoneNumber",am(e,t));if(n.temporaryProof)throw hm(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return cm(e,"POST","/v1/accounts:signInWithPhoneNumber",am(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),og)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new lg({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class cg{constructor(e){var t,n,r,i,s,a;const o=Er(Sr(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Yp(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=Er(Sr(e)).link,n=t?Er(Sr(t)).deep_link_id:null,r=Er(Sr(e)).deep_link_id;return(r?Er(Sr(r)).link:null)||r||n||t||e}(e);try{return new cg(t)}catch(n){return null}}}class ug{constructor(){this.providerId=ug.PROVIDER_ID}static credential(e,t){return ig._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=cg.parseLink(t);return Yp(n,"argument-error"),ig._fromEmailAndCode(e,n.code,n.tenantId)}}ug.PROVIDER_ID="password",ug.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ug.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class dg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class hg extends dg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class fg extends hg{constructor(){super("facebook.com")}static credential(e){return ag._fromParams({providerId:fg.PROVIDER_ID,signInMethod:fg.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fg.credentialFromTaggedObject(e)}static credentialFromError(e){return fg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return fg.credential(t.oauthAccessToken)}catch(n){return null}}}fg.FACEBOOK_SIGN_IN_METHOD="facebook.com",fg.PROVIDER_ID="facebook.com";class pg extends hg{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ag._fromParams({providerId:pg.PROVIDER_ID,signInMethod:pg.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return pg.credentialFromTaggedObject(e)}static credentialFromError(e){return pg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return pg.credential(n,r)}catch(i){return null}}}pg.GOOGLE_SIGN_IN_METHOD="google.com",pg.PROVIDER_ID="google.com";class mg extends hg{constructor(){super("github.com")}static credential(e){return ag._fromParams({providerId:mg.PROVIDER_ID,signInMethod:mg.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mg.credentialFromTaggedObject(e)}static credentialFromError(e){return mg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return mg.credential(t.oauthAccessToken)}catch(n){return null}}}mg.GITHUB_SIGN_IN_METHOD="github.com",mg.PROVIDER_ID="github.com";class gg extends hg{constructor(){super("twitter.com")}static credential(e,t){return ag._fromParams({providerId:gg.PROVIDER_ID,signInMethod:gg.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gg.credentialFromTaggedObject(e)}static credentialFromError(e){return gg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return gg.credential(n,r)}catch(i){return null}}}async function vg(e,t){return cm(e,"POST","/v1/accounts:signUp",am(e,t))}gg.TWITTER_SIGN_IN_METHOD="twitter.com",gg.PROVIDER_ID="twitter.com";class yg{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await xm._fromIdTokenResponse(e,n,r),s=_g(n);return new yg({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=_g(n);return new yg({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function _g(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class bg extends hr{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,bg.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new bg(e,t,n,r)}}function wg(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw bg._fromErrorAndOperation(e,n,t,r);throw n}))}async function xg(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await gm(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return yg._forOperation(e,"link",r)}async function kg(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await gm(e,wg(r,i,t,e),n);Yp(s.idToken,r,"internal-error");const a=mm(s.idToken);Yp(a,r,"internal-error");const{sub:o}=a;return Yp(e.uid===o,r,"user-mismatch"),yg._forOperation(e,i,s)}catch(Nk){throw"auth/user-not-found"===(null===Nk||void 0===Nk?void 0:Nk.code)&&Hp(r,"user-mismatch"),Nk}}async function Cg(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await wg(e,r,t),s=await yg._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Eg(e,t){return Cg(Qm(e),t)}new WeakMap;const Sg="__sak";class Ig{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Sg,"1"),this.storage.removeItem(Sg),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Tg extends Ig{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=ir();return jm(e)||Am(e)}()&&function(){try{return!(!window||window===window.top)}catch(Nk){return!1}}(),this.fallbackToPolling=$m(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Fm()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Tg.type="LOCAL";const Ng=Tg;class Pg extends Ig{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Pg.type="SESSION";const jg=Pg;class Rg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Rg(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map((async e=>e(t.origin,i))),o=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Og(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Rg.receivers=[];class Dg{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((a,o)=>{const l=Og("",20);r.port1.start();const c=setTimeout((()=>{o(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{o(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Lg(){return window}function Mg(){return"undefined"!==typeof Lg().WorkerGlobalScope&&"function"===typeof Lg().importScripts}const Ag="firebaseLocalStorageDb",Fg="firebaseLocalStorage",$g="fbase_key";class Ug{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function zg(e,t){return e.transaction([Fg],t?"readwrite":"readonly").objectStore(Fg)}function Bg(){const e=indexedDB.open(Ag,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Fg,{keyPath:$g})}catch(Nk){n(Nk)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Fg)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ag);return new Ug(e).toPromise()}(),t(await Bg()))}))}))}async function Wg(e,t,n){const r=zg(e,!0).put({[$g]:t,value:n});return new Ug(r).toPromise()}function Hg(e,t){const n=zg(e,!0).delete(t);return new Ug(n).toPromise()}class qg{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Bg()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Nk){if(t++>3)throw Nk;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Mg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rg._getInstance(Mg()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Dg(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bg();return await Wg(e,Sg,"1"),await Hg(e,Sg),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Wg(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=zg(e,!1).get(t),r=await new Ug(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Hg(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=zg(e,!1).getAll();return new Ug(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}qg.type="LOCAL";const Vg=qg;qm("rcb"),new tm(3e4,6e4);const Gg="recaptcha";async function Kg(e,t,n){var r;const i=await n.verify();try{let s;if(Yp("string"===typeof i,e,"argument-error"),Yp(n.type===Gg,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Yp("enroll"===t.type,e,"internal-error");const n=await function(e,t){return om(e,"POST","/v2/accounts/mfaEnrollment:start",am(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Yp("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Yp(n,e,"missing-multi-factor-info");const a=await function(e,t){return om(e,"POST","/v2/accounts/mfaSignIn:start",am(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return om(e,"POST","/v1/accounts:sendVerificationCode",am(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Yg{constructor(e){this.providerId=Yg.PROVIDER_ID,this.auth=Qm(e)}verifyPhoneNumber(e,t){return Kg(this.auth,e,Or(t))}static credential(e,t){return lg._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Yg.credentialFromTaggedObject(t)}static credentialFromError(e){return Yg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?lg._fromTokenResponse(n,r):null}}function Qg(e,t){return t?Cm(t):(Yp(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Yg.PROVIDER_ID="phone",Yg.PHONE_SIGN_IN_METHOD="phone";class Xg extends tg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sg(e,this._buildIdpRequest())}_linkToIdToken(e,t){return sg(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return sg(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Jg(e){return Cg(e.auth,new Xg(e),e.bypassAuthState)}function Zg(e){const{auth:t,user:n}=e;return Yp(n,t,"internal-error"),kg(n,new Xg(e),e.bypassAuthState)}async function ev(e){const{auth:t,user:n}=e;return Yp(n,t,"internal-error"),xg(n,new Xg(e),e.bypassAuthState)}class tv{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Nk){this.reject(Nk)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(Nk){this.reject(Nk)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Jg;case"linkViaPopup":case"linkViaRedirect":return ev;case"reauthViaPopup":case"reauthViaRedirect":return Zg;default:Hp(this.auth,"internal-error")}}resolve(e){Xp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xp(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const nv=new tm(2e3,1e4);class rv extends tv{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,rv.currentPopupAction&&rv.currentPopupAction.cancel(),rv.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Yp(e,this.auth,"internal-error"),e}async onExecution(){Xp(1===this.filter.length,"Popup operations only handle one event");const e=Og();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(qp(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(qp(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rv.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(qp(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,nv.get())};e()}}rv.currentPopupAction=null;const iv=new Map;class sv extends tv{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=iv.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=lv(t),r=ov(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(Nk){e=()=>Promise.reject(Nk)}iv.set(this.auth._key(),e)}return this.bypassAuthState||iv.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function av(e,t){iv.set(e._key(),t)}function ov(e){return Cm(e._redirectPersistence)}function lv(e){return Im("pendingRedirect",e.config.apiKey,e.name)}async function cv(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Qm(e),i=Qg(r,t),s=new sv(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class uv{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hv(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!hv(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(qp(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(dv(e))}saveEventToCache(e){this.cachedEventUids.add(dv(e)),this.lastProcessedEventTime=Date.now()}}function dv(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function hv(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const fv=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pv=/^https?/;async function mv(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return om(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(gv(r))return}catch(n){}Hp(e,"unauthorized-domain")}function gv(e){const t=Jp(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!pv.test(n))return!1;if(fv.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const vv=new tm(3e4,6e4);function yv(){const e=Lg().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let _v=null;function bv(e){return _v=_v||function(e){return new Promise(((t,n)=>{var r,i,s;function a(){yv(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{yv(),n(qp(e,"network-request-failed"))},timeout:vv.get()})}if(null===(i=null===(r=Lg().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Lg().gapi)||void 0===s?void 0:s.load)){const t=qm("iframefcb");return Lg()[t]=()=>{gapi.load?a():n(qp(e,"network-request-failed"))},Hm(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}a()}})).catch((e=>{throw _v=null,e}))}(e),_v}const wv=new tm(5e3,15e3),xv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cv(e){const t=e.config;Yp(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?nm(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:Hi},i=kv.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Cr(r).slice(1)}`}const Ev={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Sv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Nk){}}}function Iv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Ev),{width:r.toString(),height:i.toString(),top:s,left:a}),c=ir().toLowerCase();n&&(o=Rm(c)?"_blank":n),Pm(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`}),"");if(function(){var e;return Am(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ir())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new Sv(null);const d=window.open(t||"",o,u);Yp(d,e,"popup-blocked");try{d.focus()}catch(Nk){}return new Sv(d)}const Tv="__/auth/handler",Nv="emulator/auth/handler",Pv=encodeURIComponent("fac");async function jv(e,t,n,r,i,s){Yp(e.config.authDomain,e,"auth-domain-config-required"),Yp(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Hi,eventId:i};if(t instanceof dg){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",br(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof hg){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?`#${Pv}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${Tv}`;return nm(t,Nv)}(e)}?${Cr(o).slice(1)}${c}`}const Rv="webStorageSupport";const Ov=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jg,this._completeRedirectFn=cv,this._overrideRedirectResult=av}async _openPopup(e,t,n,r){var i;Xp(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Iv(e,await jv(e,t,n,Jp(),r),Og())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Lg().location.href=e}(await jv(e,t,n,Jp(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Xp(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await bv(e),n=Lg().gapi;return Yp(n,e,"internal-error"),t.open({where:document.body,url:Cv(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xv,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=qp(e,"network-request-failed"),s=Lg().setTimeout((()=>{r(i)}),wv.get());function a(){Lg().clearTimeout(s),n(t)}t.ping(a).then(a,(()=>{r(i)}))}))))}(e),n=new uv(e);return t.register("authEvent",(t=>{Yp(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Rv,{type:Rv},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Rv];void 0!==i&&t(!!i),Hp(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=mv(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $m()||jm()||Am()}};var Dv="@firebase/auth",Lv="0.23.2";class Mv{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Yp(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Av=tr("authIdTokenMaxAge")||300;let Fv=null;function $v(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vi();const t=zi(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=zi(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(xr(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Hp(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ov,persistence:[Vg,Ng,jg]}),r=tr("authTokenSyncURL");if(r){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Av)return;const r=null===t||void 0===t?void 0:t.token;Fv!==r&&(Fv=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){Or(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(e,t,n,r){Or(e).onIdTokenChanged(t,n,r)}(n,(t=>e(t)))}var i;const s=Jn("auth");return s&&Jm(n,`http://${s}`),n}var Uv;Uv="Browser",Ui(new Dr("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Yp(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:Uv,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Um(Uv)},c=new Ym(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Cm);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Ui(new Dr("auth-internal",(e=>(e=>new Mv(e))(Qm(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Gi(Dv,Lv,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Uv)),Gi(Dv,Lv,"esm2017");const zv="firebasestorage.googleapis.com",Bv="storageBucket";class Wv extends hr{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Vv(e),`Firebase Storage: ${t} (${Vv(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Wv.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Vv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var Hv,qv;function Vv(e){return"storage/"+e}function Gv(){return new Wv(Hv.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Kv(){return new Wv(Hv.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Yv(){return new Wv(Hv.CANCELED,"User canceled the upload/download.")}function Qv(){return new Wv(Hv.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Xv(e){return new Wv(Hv.INVALID_ARGUMENT,e)}function Jv(){return new Wv(Hv.APP_DELETED,"The Firebase app was deleted.")}function Zv(e,t){return new Wv(Hv.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function ey(e){throw new Wv(Hv.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Hv||(Hv={}));class ty{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=ty.makeFromUrl(e,t)}catch(Nk){return new ty(e,"")}if(""===n.path)return n;throw r=e,new Wv(Hv.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),o=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${a}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===zv?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<o.length;l++){const t=o[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new ty(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Wv(Hv.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class ny{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function ry(e){return"string"===typeof e||e instanceof String}function iy(e){return sy()&&e instanceof Blob}function sy(){return"undefined"!==typeof Blob&&!ar()}function ay(e,t,n,r){if(r<t)throw Xv(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw Xv(`Invalid value for '${e}'. Expected ${n} or less.`)}function oy(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function ly(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function cy(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(qv||(qv={}));class uy{constructor(e,t,n,r,i,s,a,o,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new dy(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===qv.NO_ERROR,i=n.getStatus();if(!t||cy(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===qv.ABORT;return void e(!1,new dy(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new dy(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());void 0!==e?n(e):n()}catch(Nk){r(Nk)}else if(null!==i){const e=Gv();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?Jv():Yv())}else{r(Kv())}};this.canceled_?t(0,new dy(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,a=!1,o=0;function l(){return 2===o}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function h(){s&&clearTimeout(s)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||a)return h(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===o?(o=2,s=0):s=1e3*(r+Math.random()),d(s)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==i?(e||(o=2),clearTimeout(i),d(0)):e||(o=1)))}return d(0),s=setTimeout((()=>{a=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class dy{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function hy(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function fy(){const e=hy();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(sy())return new Blob(n);throw new Wv(Hv.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function py(e){if("undefined"===typeof atob)throw t="base-64",new Wv(Hv.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}const my="raw",gy="base64",vy="base64url",yy="data_url";class _y{constructor(e,t){this.data=e,this.contentType=t||null}}function by(e,t){switch(e){case my:return new _y(wy(t));case gy:case vy:return new _y(xy(e,t));case yy:return new _y(function(e){const t=new ky(e);return t.base64?xy(gy,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(Nk){throw Zv(yy,"Malformed data URL.")}return wy(t)}(t.rest)}(t),new ky(t).contentType)}throw Gv()}function wy(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function xy(e,t){switch(e){case gy:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw Zv(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case vy:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw Zv(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=py(t)}catch(Nk){if(Nk.message.includes("polyfill"))throw Nk;throw Zv(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class ky{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Zv(yy,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Cy{constructor(e,t){let n=0,r="";iy(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(iy(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Cy(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Cy(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(sy()){const e=t.map((e=>e instanceof Cy?e.data_:e));return new Cy(fy.apply(null,e))}{const e=t.map((e=>ry(e)?by(my,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new Cy(r,!0)}}uploadData(){return this.data_}}function Ey(e){let t;try{t=JSON.parse(e)}catch(Nk){return null}return"object"!==typeof(n=t)||Array.isArray(n)?null:t;var n}function Sy(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Iy(e,t){return t}class Ty{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Iy}}let Ny=null;function Py(){if(Ny)return Ny;const e=[];e.push(new Ty("bucket")),e.push(new Ty("generation")),e.push(new Ty("metageneration")),e.push(new Ty("name","fullPath",!0));const t=new Ty("name");t.xform=function(e,t){return function(e){return!ry(e)||e.length<2?e:Sy(e)}(t)},e.push(t);const n=new Ty("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Ty("timeCreated")),e.push(new Ty("updated")),e.push(new Ty("md5Hash",null,!0)),e.push(new Ty("cacheControl",null,!0)),e.push(new Ty("contentDisposition",null,!0)),e.push(new Ty("contentEncoding",null,!0)),e.push(new Ty("contentLanguage",null,!0)),e.push(new Ty("contentType",null,!0)),e.push(new Ty("metadata","customMetadata",!0)),Ny=e,Ny}function jy(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new ty(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Ry(e,t,n){const r=Ey(t);if(null===r)return null;return jy(e,r,n)}function Oy(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class Dy{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ly(e){if(!e)throw Gv()}function My(e,t){return function(n,r){const i=Ry(e,r,t);return Ly(null!==i),i}}function Ay(e,t){return function(n,r){const i=Ry(e,r,t);return Ly(null!==i),function(e,t,n,r){const i=Ey(t);if(null===i)return null;if(!ry(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const a=encodeURIComponent;return s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return oy("/b/"+a(i)+"/o/"+a(s),n,r)+ly({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Fy(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Wv(Hv.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Wv(Hv.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new Wv(Hv.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Wv(Hv.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function $y(e){const t=Fy(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new Wv(Hv.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Uy(e,t,n){const r=oy(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new Dy(r,"GET",My(e,n),i);return s.errorHandler=$y(t),s}function zy(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function By(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};const o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+o;const l=zy(t,r,i),c="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Oy(l,n)+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+o+"--",d=Cy.getBlob(c,r,u);if(null===d)throw Qv();const h={name:l.fullPath},f=oy(s,e.host,e._protocol),p=e.maxUploadRetryTime,m=new Dy(f,"POST",My(e,n),p);return m.urlParams=h,m.headers=a,m.body=d.uploadData(),m.errorHandler=Fy(t),m}class Wy{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function Hy(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(Nk){Ly(!1)}return Ly(!!n&&-1!==(t||["active"]).indexOf(n)),n}const qy=262144;function Vy(e,t,n,r,i,s,a,o){const l=new Wy(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new Wv(Hv.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const d=l.current,h=d+u;let f="";f=0===u?"finalize":c===u?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":`${l.current}`},m=r.slice(d,h);if(null===m)throw Qv();const g=t.maxUploadRetryTime,v=new Dy(n,"POST",(function(e,n){const i=Hy(e,["active","final"]),a=l.current+u,o=r.size();let c;return c="final"===i?My(t,s)(e,n):null,new Wy(a,o,"final"===i,c)}),g);return v.headers=p,v.body=m.uploadData(),v.progressCallback=o||null,v.errorHandler=Fy(e),v}const Gy="running",Ky="paused",Yy="success",Qy="canceled",Xy="error";function Jy(e){switch(e){case"running":case"pausing":case"canceling":return Gy;case"paused":return Ky;case"success":return Yy;case"canceled":return Qy;default:return Xy}}class Zy{constructor(e,t,n){if("function"===typeof e||null!=t||null!=n)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function e_(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}class t_{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qv.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=qv.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=qv.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw ey("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ey("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ey("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Nk){return-1}}getResponse(){if(!this.sent_)throw ey("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ey("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class n_ extends t_{initXhr(){this.xhr_.responseType="text"}}function r_(){return new n_}class i_{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=Py(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(Hv.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(cy(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=Kv()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(Hv.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),a=zy(t,r,i),o={name:a.fullPath},l=oy(s,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},u=Oy(a,n),d=e.maxUploadRetryTime,h=new Dy(l,"POST",(function(e){let t;Hy(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(Nk){Ly(!1)}return Ly(ry(t)),t}),d);return h.urlParams=o,h.headers=c,h.body=u,h.errorHandler=Fy(t),h}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,r_,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,s=new Dy(n,"POST",(function(e){const t=Hy(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Nk){Ly(!1)}n||Ly(!1);const i=Number(n);return Ly(!isNaN(i)),new Wy(i,r.size(),"final"===t)}),i);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=Fy(t),s}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,r_,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=qy*this._chunkMultiplier,t=new Wy(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let s;try{s=Vy(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(Nk){return this._error=Nk,void this._transition("error")}const a=this._ref.storage._makeRequest(s,r_,r,i,!1);this._request=a,a.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(qy*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=Uy(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,r_,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=By(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,r_,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Yv(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Jy(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new Zy(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Jy(this._state)){case Yy:e_(this._resolve.bind(null,this.snapshot))();break;case Qy:case Xy:e_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Jy(this._state)){case Gy:case Ky:e.next&&e_(e.next.bind(e,this.snapshot))();break;case Yy:e.complete&&e_(e.complete.bind(e))();break;default:e.error&&e_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class s_{constructor(e,t){this._service=e,this._location=t instanceof ty?t:ty.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new s_(e,t)}get root(){const e=new ty(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Sy(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new ty(this._location.bucket,e);return new s_(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Wv(Hv.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function a_(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=oy(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new Dy(r,"GET",Ay(e,n),i);return s.errorHandler=$y(t),s}(e.storage,e._location,Py());return e.storage.makeRequestWithTokens(t,r_).then((e=>{if(null===e)throw new Wv(Hv.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function o_(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new ty(e._location.bucket,n);return new s_(e.storage,r)}function l_(e,t){if(e instanceof d_){const n=e;if(null==n._bucket)throw new Wv(Hv.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Bv+"' property when initializing the app?");const r=new s_(n,n._bucket);return null!=t?l_(r,t):r}return void 0!==t?o_(e,t):e}function c_(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof d_)return new s_(e,t);throw Xv("To use ref(service, url), the first argument must be a Storage instance.")}return l_(e,t)}function u_(e,t){const n=null===t||void 0===t?void 0:t[Bv];return null==n?null:ty.makeFromBucketSpec(n,e)}class d_{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=zv,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?ty.makeFromBucketSpec(r,this._host):u_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=ty.makeFromBucketSpec(this._url,e):this._bucket=u_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ay("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ay("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new s_(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new ny(Jv());{const s=function(e,t,n,r,i,s){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const o=ly(e.urlParams),l=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new uy(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const h_="@firebase/storage",f_="0.11.2",p_="storage";function m_(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new i_(e,new Cy(t),n)}(e=Or(e),t,n)}function g_(e){return a_(e=Or(e))}function v_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vi(),t=arguments.length>1?arguments[1]:void 0;e=Or(e);const n=zi(e,p_).getImmediate({identifier:t}),r=Zn("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:rr(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}function y_(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new d_(r,i,s,n,Hi)}Ui(new Dr(p_,y_,"PUBLIC").setMultipleInstances(!0)),Gi(h_,f_,""),Gi(h_,f_,"esm2017");const __=qi({apiKey:"AIzaSyB0US8vBzOKJlpb1bkixDZQCB8ka1h1DiY",authDomain:"buzzit-45162.firebaseapp.com",projectId:"buzzit-45162",storageBucket:"buzzit-45162.appspot.com",messagingSenderId:"253955480738",appId:"1:253955480738:web:0c6a1788a784aff90b0bfb",measurementId:"G-XJP4GD0B21"}),b_=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vi();e=Or(e);const t=zi(e,ap);t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=zi(e,ap);if(n.isInitialized()){const e=n.getImmediate();if(xr(t,n.getOptions()))return e;throw cp.create("already-initialized")}const r=n.initialize({options:t})}(e)}(__),Uu()),w_=e=>{let{e:t,inputRefs:n,setStates:r,createNewProfile:i}=e;t.preventDefault(),r.setIsPending(!0);const s=n.email.ref.current.value,a=n.password.ref.current.value,o=n.rePassword.ref.current.value,l=()=>{(async function(e,t,n){var r;const i=Qm(e),s={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let a;if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await Gm(i,s,"signUpPassword");a=vg(i,e)}else a=vg(i,s).catch((async e=>{if("auth/missing-recaptcha-token"===e.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await Gm(i,s,"signUpPassword");return vg(i,e)}return Promise.reject(e)}));const o=await a.catch((e=>Promise.reject(e))),l=await yg._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(l.user),l})($v(),s,a).then((e=>{const t=e.user;i(s,t.uid)})).catch((e=>{e.code;const t=e.message;r.setError(t),r.setIsPending(!1)}))};a!==o?(n.password.setError("Password does not Match"),r.setIsPending(!1)):(l(),r.setValidated(!0))},x_=(e,t)=>{const n=new pg;(async function(e,t,n){const r=Qm(e);Gp(e,t,dg);const i=Qg(r,n);return new rv(r,"signInViaPopup",t,i).executeNotNull()})($v(),n).then((n=>{pg.credentialFromResult(n).accessToken;const r=n.user;"function"===typeof e?e(r.email,r.uid):t(!0)})).catch((e=>{e.code,e.message,e.customData.email,pg.credentialFromError(e)}))},k_=t=>{let{setSuccess:n}=t;const[r,i]=(0,e.useState)(!1),[s,o]=(0,e.useState)(null),[l,c]=(0,e.useState)(null),[u,d]=(0,e.useState)(!1),h={email:{ref:(0,e.useRef)(),error:null},password:{ref:(0,e.useRef)(),error:s,setError:o},rePassword:{ref:(0,e.useRef)(),error:null}},f={setValidated:i,setError:c,setIsPending:d,setSuccess:n},p=(e,t)=>{const n={email:e,id:t,date:Date.now()};Nu(Eu(Uu(),`UsersDetails/${t}`),n).then((()=>{const t={email:e};localStorage.setItem("details",JSON.stringify(t)),f.setSuccess(!0),f.setIsPending(!1)})).catch((e=>{if("AbortError"===e.name);else{e.code;const t=e.message;f.setError(t),f.setIsPending(!1)}}))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(Vh,{className:"custom-form",onSubmit:e=>w_({e:e,inputRefs:h,setStates:f,createNewProfile:p}),children:[l&&(0,a.jsx)(Zh,{variant:"danger",children:l}),(0,a.jsxs)(Vh.Group,{controlId:"signupEmail",className:"mb-3",children:[(0,a.jsx)(Vh.Label,{children:"Email address"}),(0,a.jsx)(Vh.Control,{type:"email",required:!0,placeholder:"Email Address",ref:h.email.ref,disabled:u}),(0,a.jsx)(Vh.Control.Feedback,{type:"invalid",children:"Enter a Valid Email"})]}),(0,a.jsxs)(Vh.Group,{controlId:"signupPassword",className:"mb-3",children:[(0,a.jsx)(Vh.Label,{children:"Password"}),(0,a.jsx)(Vh.Control,{type:"password",placeholder:"Create a password",required:!0,ref:h.password.ref,isInvalid:s,disabled:u})]}),(0,a.jsxs)(Vh.Group,{className:"mb-3",children:[(0,a.jsx)(Vh.Label,{children:"Confirm Password"}),(0,a.jsx)(Vh.Control,{type:"password",required:!0,placeholder:"Re-Enter Password",ref:h.rePassword.ref,isInvalid:s,disabled:u}),(0,a.jsx)(Vh.Control.Feedback,{type:"invalid",children:s||"Re-enter password to confirm"})]}),(0,a.jsx)(ht,{variant:"success",type:"submit",className:"w-100 mb-2",children:"Sign Up"})]}),(0,a.jsxs)("div",{className:"text-center mt-3",children:[(0,a.jsx)("p",{children:"or"}),(0,a.jsxs)(ht,{variant:"outline-primary",className:"w-100",onClick:()=>{x_(p)},children:[(0,a.jsx)("i",{className:"bi bi-google me-2"})," Sign in with Google"]})]})]})},C_=e=>{let{e:t,setStates:n,inputRefs:r}=e;t.preventDefault(),n.setIsPending(!0);const i=r.email.ref.current.value,s=r.password.ref.current.value;var a,o,l;n.setValidated(!0),(a=$v(),o=i,l=s,Eg(Or(a),ug.credential(o,l))).then((e=>{e.user,n.setSuccess(!0),n.setIsPending(!1)})).catch((e=>{e.code;const t=e.message;n.setError(t),console.log(t),n.setIsPending(!1)}))},E_=t=>{let{setSuccess:n}=t;const[r,i]=(0,e.useState)(!1),[s,o]=(0,e.useState)(null),[l,c]=(0,e.useState)(null),[u,d]=(0,e.useState)(!1),h={email:{ref:(0,e.useRef)(),error:null},password:{ref:(0,e.useRef)(),error:s,setError:o}},f={setValidated:i,setError:c,setIsPending:d,setSuccess:n};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(Vh,{className:"custom-form",onSubmit:e=>C_({e:e,inputRefs:h,setStates:f}),children:[(0,a.jsxs)(Vh.Group,{className:"mb-3",children:[(0,a.jsx)(Vh.Label,{children:"Email Address"}),(0,a.jsx)(Vh.Control,{type:"email",required:!0,placeholder:"Email Address",ref:h.email.ref,disabled:u}),(0,a.jsx)(Vh.Control.Feedback,{type:"invalid",children:"Enter a Valid Email"})]}),(0,a.jsxs)(Vh.Group,{className:"mb-3",children:[(0,a.jsx)(Vh.Label,{children:"Password"}),(0,a.jsx)(Vh.Control,{name:"password",type:"password",required:!0,placeholder:"Password",ref:h.password.ref,isInvalid:s,disabled:u}),(0,a.jsx)(Vh.Control.Feedback,{type:"invalid",children:s||"Enter a valid password"})]}),(0,a.jsx)(ht,{variant:"primary",type:"submit",className:"w-100",children:"Login"})]}),(0,a.jsxs)("div",{className:"text-center mt-3",children:[(0,a.jsx)("p",{children:"or"}),(0,a.jsxs)(ht,{variant:"outline-primary",className:"w-100",onClick:()=>{x_(null,n)},children:[(0,a.jsx)("i",{className:"bi bi-google me-2"})," Sign in with Google"]})]})]})},S_=t=>{let{show:n,handleClose:r,handleProfileEdit:i,returnOnClose:s}=t;const[o,l]=(0,e.useState)(!0),[c,u]=(0,e.useState)(!1),d=ln();(0,e.useEffect)((()=>{c&&(o||i(),r())}),[c]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(Gd,{show:n,onHide:()=>{!c&&s&&d("/"),r()},children:[(0,a.jsx)(Gd.Header,{closeButton:!0,children:(0,a.jsx)(Gd.Title,{children:o?"Login":"Sign Up"})}),(0,a.jsxs)(Gd.Body,{children:[(0,a.jsxs)(mh,{variant:"tabs",defaultActiveKey:o?"login":"signup",className:"mb-3",children:[(0,a.jsx)(mh.Item,{children:(0,a.jsx)(mh.Link,{eventKey:"login",active:o,onClick:()=>l(!0),children:"Login"})}),(0,a.jsx)(mh.Item,{children:(0,a.jsx)(mh.Link,{eventKey:"signup",active:!o,onClick:()=>l(!1),children:"Sign Up"})})]}),o?(0,a.jsx)(E_,{setSuccess:u}):(0,a.jsx)(k_,{setSuccess:u})]})]})})},I_=async(e,t,n)=>{const r=v_();try{const a=[];for(const o of e){const e=(i=r,s=`${t}/${n}/${o.name}`,c_(i=Or(i),s)),l=await m_(e,o),c=await g_(l.ref);a.push(c)}return a}catch(ws){throw console.error("Error uploading files:",ws),ws}var i,s},T_=async(e,t,n)=>{const r=e.uid,i=e.postText;let s=n?e.media[0]:e.media;const a=()=>{const e=Tu(Eu(Uu(),"Posts"));Nu(e,{postText:i,media:s,likes:[],reposts:[],comments:[],uid:r,id:e.key,date:Date.now()}).then((()=>{t.setSuccess(!0),t.setIsPending(!1)})).catch((e=>{if("AbortError"===e.name);else{const n=e.message;t.setError(n),t.setIsPending(!1)}}))},o=async()=>{const e=`Posts/${n.postId}`,a={postText:i,media:s||"",likes:[],uid:r,date:Date.now()};try{if(r!==n.userId){const e=[...n.comments.map((e=>({uid:e.uid,date:e.date}))),{uid:r,date:a.date}];await Promise.all([zu(`notifications/${n.userId}/Activities/${n.postId}`,{comments:e}),zu(`notifications/${n.userId}`,{viewed:!1})])}await zu(e,{comments:[...n.comments||[],a]}),t.setSuccess(!0),t.setIsPending(!1)}catch(ws){const n=ws.message;t.setError(n),t.setIsPending(!1)}};await(async()=>{if(s){const e=n?"Comments":"Posts";try{const t=await I_(s,e,r);s=t,n?await o():a()}catch(ws){console.error("Upload failed:",ws),t.setError("Upload failed:",ws)}}else n?await o():a()})()},N_=()=>{const[t,n]=(0,e.useState)(!1),[r,i]=(0,e.useState)(!0),[s,a]=(0,e.useState)(null);return(0,e.useEffect)((()=>{const e=function(e,t,n,r){return Or(e).onAuthStateChanged(t,n,r)}($v(),(e=>{e?(n(!0),a(e.uid)):(n(!1),a(null)),i(!1)}));return()=>e()}),[]),{loggedIn:t,isPending:r,uid:s}},P_=t=>{let{handleClose:n,commentDetails:r}=t;const[i,s]=(0,e.useState)(""),[o,l]=(0,e.useState)([]),{uid:c}=N_(),[u,d]=(0,e.useState)(!1),[h,f]=(0,e.useState)(null),[p,m]=(0,e.useState)(!1),g={setError:f,setIsPending:d,setSuccess:m};return(0,e.useEffect)((()=>{p&&("function"===typeof n&&n(),s(""),l([]),m(!1))}),[p]),(0,a.jsxs)(Vh,{onSubmit:e=>{e.preventDefault(),c&&(""!==i||o.length>0)&&(d(!0),T_({postText:i,uid:c,media:o},g,r))},children:[h&&(0,a.jsx)(Zh,{variant:"danger",children:h}),(0,a.jsx)(Vh.Group,{children:(0,a.jsx)(Vh.Control,{as:"textarea",rows:3,placeholder:"What's on your mind?",value:i,onChange:e=>s(e.target.value),disabled:u})}),o.length>0&&(0,a.jsx)(ut,{interval:null,indicators:!1,children:o.map(((e,t)=>(0,a.jsx)(ut.Item,{children:(0,a.jsxs)("div",{className:"position-relative ",children:[e.type.startsWith("image/")?(0,a.jsx)("img",{src:URL.createObjectURL(e),alt:"Selected",className:"media-preview",style:{width:"100%",height:"250px",objectFit:"contain"}}):(0,a.jsx)("video",{src:URL.createObjectURL(e),controls:!0,className:"media-preview",style:{width:"100%",height:"250px",objectFit:"cover"}}),(0,a.jsx)("label",{htmlFor:"cover-photo-upload",className:"position-absolute top-50 start-50 translate-middle",style:{cursor:"pointer",backgroundColor:"rgba(255, 255, 255, 0.7)",borderRadius:"50%",padding:"10px",textAlign:"center",width:"50px",height:"50px"},onClick:()=>{return t=e.name,void l((e=>e.filter((e=>e.name!==t))));var t},children:(0,a.jsx)("i",{className:"bi bi-x-circle",style:{fontSize:"1.5rem"}})})]})},t)))}),(0,a.jsx)("input",{type:"file",onChange:e=>{const t=Array.from(e.target.files);l((e=>[...e,...t]))},className:"file-input",style:{display:"none"},id:"file-upload",accept:"image/*,video/*",multiple:!r,disabled:u}),(0,a.jsx)("label",{htmlFor:"file-upload",className:"file-upload-label",children:(0,a.jsx)("i",{className:"bi bi-image"})}),(0,a.jsx)("div",{className:"d-flex justify-content-end mt-3",children:(0,a.jsx)(ht,{variant:"success",type:"submit",disabled:u,children:"Post"})})]})},j_=e=>{let{show:t,handleClose:n}=e;return(0,a.jsxs)(Gd,{show:t,onHide:n,centered:!0,children:[(0,a.jsx)(Gd.Header,{closeButton:!0,children:(0,a.jsx)(Gd.Title,{children:"Create Post"})}),(0,a.jsx)(Gd.Body,{children:(0,a.jsx)(P_,{handleClose:n})})]})},R_=(e,t)=>{const n=e.uid,r=e.name,i=e.about,s=e.dob;let a=e.coverPhoto,o=e.profilePhoto;(async()=>{const l=await(async()=>{if(a)try{return(await I_([a],"CoverPhotos",n))[0]}catch(ws){return console.error("Upload failed:",ws),t.setError("Upload failed: "+ws.message),null}return null})(),c=await(async()=>{if(o)try{return(await I_([o],"ProfilePhotos",n))[0]}catch(ws){return console.error("Upload failed:",ws),t.setError("Upload failed: "+ws.message),null}return null})();await(async(a,o)=>{const l=`UsersDetails/${n}`,c={name:r,about:i,dob:s,...a&&{coverPhoto:a},...o&&{profilePhoto:o}};a&&(c.previousCoverPhotos=[...e.previousCoverPhotos||[],a]),o&&(c.previousProfilePhotos=[...e.previousProfilePhotos||[],o]),await zu(l,c),t.setSuccess(!0)})(l,c)})()},O_=t=>{let{show:n,handleClose:r,currentUserDetails:i}=t;const[s,o]=(0,e.useState)(""),[l,c]=(0,e.useState)(""),[u,d]=(0,e.useState)(""),[h,f]=(0,e.useState)(""),[p,m]=(0,e.useState)(""),[g,v]=(0,e.useState)(""),[y,_]=(0,e.useState)(""),[b,w]=(0,e.useState)(!1),[x,k]=(0,e.useState)(!1),[C,E]=(0,e.useState)(!1),[S,I]=(0,e.useState)(null),[T,N]=(0,e.useState)(!1),{uid:P}=N_();i||(i={coverPhoto:null,profilePhoto:null,name:"",about:"",dob:""});const j={setError:I,setIsPending:w,setSuccess:N};(0,e.useEffect)((()=>{T&&(r(),w(!1),N(!1))}),[T]),(0,e.useEffect)((()=>{n&&i&&(d(i.profilePhoto),f(i.coverPhoto),m(i.name),v(i.about),_(i.dob),E(!1),k(!1),I(null),N(!1),w(!1))}),[n,i]);return(0,a.jsxs)(Gd,{show:n,onHide:r,children:[S&&(0,a.jsx)(Zh,{variant:"danger",children:S}),(0,a.jsxs)(Gd.Header,{className:"d-flex justify-content-between",children:[(0,a.jsx)(ht,{variant:"close",onClick:r,className:"m-0",disabled:b}),(0,a.jsx)(Gd.Title,{children:"Edit Profile"}),(0,a.jsx)(ht,{variant:"primary",onClick:()=>{if(p&&y){const e={uid:P,name:p,about:g,dob:y,coverPhoto:s,profilePhoto:l};w(!0),k(!1),E(!1),I(null),R_(e,j)}else p||E(!0),y||k(!0)},disabled:b,children:"Save"})]}),(0,a.jsxs)(Gd.Body,{children:[(0,a.jsxs)("div",{className:"position-relative mb-4",children:[(0,a.jsx)(Q,{src:h||"/images/defaultCover.png",fluid:!0,style:{height:"200px",width:"100%",objectFit:"cover"},alt:"Cover"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];t&&(o(t),f(URL.createObjectURL(t)))},style:{display:"none"},id:"cover-photo-upload",disabled:b}),(0,a.jsx)("label",{htmlFor:"cover-photo-upload",className:"position-absolute top-50 start-50 translate-middle",style:{cursor:"pointer",backgroundColor:"rgba(255, 255, 255, 0.7)",borderRadius:"50%",padding:"10px",textAlign:"center",width:"50px",height:"50px"},children:(0,a.jsx)("i",{className:"bi bi-camera",style:{fontSize:"1.5rem"}})})]}),(0,a.jsx)("div",{className:"d-flex align-items-center mb-4 position-relative",children:(0,a.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,a.jsx)(Q,{src:u||"/images/defaultProfile.png",roundedCircle:!0,style:{height:"100px",width:"100px",marginRight:"20px",position:"relative"},alt:"Profile"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];t&&(c(t),d(URL.createObjectURL(t)))},style:{display:"none"},id:"profile-photo-upload",disabled:b}),(0,a.jsx)("label",{htmlFor:"profile-photo-upload",className:"d-flex align-items-center justify-content-center",style:{cursor:"pointer",backgroundColor:"rgba(255, 255, 255, 0.7)",borderRadius:"50%",padding:"10px",width:"40px",height:"40px",position:"absolute",top:"50%",left:"50%",transform:"translate(-75%, -50%)"},children:(0,a.jsx)("i",{className:"bi bi-camera",style:{fontSize:"1.5rem"}})})]})}),(0,a.jsxs)(Vh.Group,{controlId:"formName",className:"mb-3",children:[(0,a.jsx)(Vh.Label,{children:"Name"}),(0,a.jsx)(Vh.Control,{type:"text",value:p,onChange:e=>m(e.target.value),placeholder:"Enter your name",isInvalid:C,disabled:b}),(0,a.jsx)(Vh.Control.Feedback,{type:"invalid",children:"Please Enter Your Name"})]}),(0,a.jsxs)(Vh.Group,{controlId:"formAbout",className:"mb-3",children:[(0,a.jsx)(Vh.Label,{children:"About"}),(0,a.jsx)(Vh.Control,{as:"textarea",rows:3,value:g,onChange:e=>v(e.target.value),placeholder:"Tell us about yourself",disabled:b})]}),(0,a.jsxs)(Vh.Group,{controlId:"formDOB",className:"mb-3",children:[(0,a.jsx)(Vh.Label,{children:"Date of Birth"}),(0,a.jsx)(Vh.Control,{type:"date",value:y,onChange:e=>_(e.target.value),isInvalid:x,disabled:b}),(0,a.jsx)(Vh.Control.Feedback,{type:"invalid",children:"Please Select Your Date of Birth"})]})]})]})},D_=async e=>{const t=Eu(Uu(),e);try{const e=await ju(t);return e.exists()?e.val():(console.log("No data available at this node."),null)}catch(ws){return console.error("Error fetching data:",ws),null}},L_=async()=>{const e=$v();try{await function(e){return Or(e).signOut()}(e),console.log("User signed out successfully")}catch(ws){console.error("Error signing out:",ws.message)}},M_=(e,t)=>{const n=Eu(Uu(),e),r=Lu(n,(n=>{n.exists()?t(n.val()):(console.log(`No data available at ${e}`),t(null))}),(e=>{console.error("Error fetching data from node:",e),t(null,e)}));return()=>function(e,t,n){let r=null;const i=n?new bu(n):null;"value"===t?r=new Ru(i):t&&(r=new Ou(t,i)),tu(e._repo,e,r)}(n,"value",r)},A_=e=>new Promise(((t,n)=>{M_(`notifications/${e}`,(e=>{e&&t(e)}))})),F_=t=>{let{loggedIn:n,uid:r}=t;const[i,s]=(0,e.useState)(!1),[o,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)(!1),d=()=>u(!0),h=()=>{n?L_():l(!0)};(0,e.useEffect)((()=>{n&&f()}),[n]);const f=()=>{D_(`UsersDetails/${r}`).then((e=>{e&&(e.name||d())})).catch((e=>{console.error("Error:",e)})),A_(r)};return(0,a.jsxs)(w,{md:2,className:"d-none d-md-block bg-light vh-100 p-3",children:[(0,a.jsx)("h2",{className:"mb-4",children:"BuzzIt"}),(0,a.jsx)(Dn,{to:"/",className:"d-flex align-items-center mb-3",children:(0,a.jsxs)(ht,{variant:"link",className:"d-flex align-items-center",children:[(0,a.jsx)("i",{className:"bi bi-house-door-fill me-2"})," Home"]})}),(0,a.jsx)(Dn,{to:"/notifications",className:"d-flex align-items-center mb-3",children:(0,a.jsxs)(ht,{variant:"link",className:"d-flex align-items-center ",children:[(0,a.jsx)("i",{className:"bi bi-bell-fill me-2"})," Notification"]})}),(0,a.jsx)(Dn,{to:"/messages",className:"d-flex align-items-center mb-3",children:(0,a.jsxs)(ht,{variant:"link",className:"d-flex align-items-center ",children:[(0,a.jsx)("i",{className:"bi bi-envelope-fill me-2"})," Messages"]})}),n&&r?(0,a.jsx)(Dn,{to:`/${r}`,className:"d-flex align-items-center mb-3",children:(0,a.jsxs)(ht,{variant:"link",className:"d-flex align-items-center",children:[(0,a.jsx)("i",{className:"bi bi-person-fill me-2"})," Profile"]})}):(0,a.jsxs)(ht,{variant:"link",className:"d-flex align-items-center mb-3",onClick:h,children:[(0,a.jsx)("i",{className:"bi bi-person-fill me-2"})," Profile"]}),(0,a.jsx)(Dn,{to:"/Games",className:"d-flex align-items-center mb-3",children:(0,a.jsxs)(ht,{variant:"link",className:"d-flex align-items-center",children:[(0,a.jsx)("i",{className:"bi bi-controller me-2"})," Games"]})}),(0,a.jsxs)(ht,{variant:"link",className:"d-flex align-items-center mb-3",children:[(0,a.jsx)("i",{className:"bi bi-gear-fill me-2"})," Settings"]}),(0,a.jsxs)(ht,{variant:"primary",className:"d-flex align-items-center mb-3",onClick:()=>s(!0),children:[(0,a.jsx)("i",{className:"bi bi-plus-lg me-2"})," Post"]}),(0,a.jsxs)(ht,{variant:"link",className:"d-flex align-items-center mb-3",onClick:h,children:[(0,a.jsx)("i",{className:"bi bi-box-arrow-in-right me-2"})," ",n?"Logout":"Login/Sign-up"]}),o&&(0,a.jsx)(S_,{show:o,handleClose:()=>l(!1),handleProfileEdit:d}),i&&(0,a.jsx)(j_,{show:i,handleClose:()=>s(!1)}),(0,a.jsx)(O_,{show:c,handleClose:()=>u(!1)})]})};function $_(t,n,r){const i=(0,e.useRef)(void 0!==t),[s,a]=(0,e.useState)(n),o=void 0!==t,l=i.current;return i.current=o,!o&&l&&s!==n&&a(n),[o?t:s,(0,e.useCallback)((function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const[i,...s]=t;let o=null==r?void 0:r(i,...s);return a(i),o}),[r])]}const U_={prefix:String(Math.round(1e10*Math.random())),current:0},z_=e.createContext(U_),B_=e.createContext(!1);let W_=Boolean("undefined"!==typeof window&&window.document&&window.document.createElement),H_=new WeakMap;function q_(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,e.useContext)(z_),r=(0,e.useRef)(null);if(null===r.current&&!t){var i,s;let t=null===(s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)||void 0===s||null===(i=s.ReactCurrentOwner)||void 0===i?void 0:i.current;if(t){let e=H_.get(t);null==e?H_.set(t,{id:n.current,state:t.memoizedState}):t.memoizedState!==e.state&&(n.current=e.id,H_.delete(t))}r.current=++n.current}return r.current}const V_="function"===typeof e.useId?function(t){let n=e.useId(),[r]=(0,e.useState)("function"===typeof e.useSyncExternalStore?e.useSyncExternalStore(Y_,G_,K_):(0,e.useContext)(B_));return t||`${r?"react-aria":`react-aria${U_.prefix}`}-${n}`}:function(t){let n=(0,e.useContext)(z_);n!==U_||W_||console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let r=q_(!!t),i=`react-aria${n.prefix}`;return t||`${i}-${r}`};function G_(){return!1}function K_(){return!0}function Y_(e){return()=>{}}const Q_=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],X_=["activeKey","getControlledId","getControllerId"],J_=["as"];function Z_(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function eb(t){let{active:n,eventKey:r,mountOnEnter:i,transition:s,unmountOnExit:a,role:o="tabpanel",onEnter:l,onEntering:c,onEntered:u,onExit:d,onExiting:h,onExited:f}=t,p=Z_(t,Q_);const m=(0,e.useContext)(Jd);if(!m)return[Object.assign({},p,{role:o}),{eventKey:r,isActive:n,mountOnEnter:i,transition:s,unmountOnExit:a,onEnter:l,onEntering:c,onEntered:u,onExit:d,onExiting:h,onExited:f}];const{activeKey:g,getControlledId:v,getControllerId:y}=m,_=Z_(m,X_),b=Qd(r);return[Object.assign({},p,{role:o,id:v(r),"aria-labelledby":y(r)}),{eventKey:r,isActive:null==n&&null!=b?Qd(g)===b:n,transition:s||_.transition,mountOnEnter:null!=i?i:_.mountOnEnter,unmountOnExit:null!=a?a:_.unmountOnExit,onEnter:l,onEntering:c,onEntered:u,onExit:d,onExiting:h,onExited:f}]}const tb=e.forwardRef(((e,t)=>{let{as:n="div"}=e,r=Z_(e,J_);const[i,{isActive:s,onEnter:o,onEntering:l,onEntered:c,onExit:u,onExiting:d,onExited:h,mountOnEnter:f,unmountOnExit:p,transition:m=td}]=eb(r);return(0,a.jsx)(Jd.Provider,{value:null,children:(0,a.jsx)(Xd.Provider,{value:null,children:(0,a.jsx)(m,{in:s,onEnter:o,onEntering:l,onEntered:c,onExit:u,onExiting:d,onExited:h,mountOnEnter:f,unmountOnExit:p,children:(0,a.jsx)(n,Object.assign({},i,{ref:t,hidden:!s,"aria-hidden":!s}))})})})}));tb.displayName="TabPanel";const nb=t=>{const{id:n,generateChildId:r,onSelect:i,activeKey:s,defaultActiveKey:o,transition:l,mountOnEnter:c,unmountOnExit:u,children:d}=t,[h,f]=$_(s,o,i),p=V_(n),m=(0,e.useMemo)((()=>r||((e,t)=>p?`${p}-${t}-${e}`:null)),[p,r]),g=(0,e.useMemo)((()=>({onSelect:f,activeKey:h,transition:l,mountOnEnter:c||!1,unmountOnExit:u||!1,getControlledId:e=>m(e,"tabpane"),getControllerId:e=>m(e,"tab")})),[f,h,l,c,u,m]);return(0,a.jsx)(Jd.Provider,{value:g,children:(0,a.jsx)(Xd.Provider,{value:f||null,children:d})})};nb.Panel=tb;const rb=nb;function ib(e){return"boolean"===typeof e?e?Sd:td:e}const sb=e=>{let{transition:t,...n}=e;return(0,a.jsx)(rb,{...n,transition:ib(t)})};sb.displayName="TabContainer";const ab=sb,ob=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=h(r,"tab-content"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));ob.displayName="TabContent";const lb=ob,cb=e.forwardRef(((e,t)=>{let{bsPrefix:n,transition:r,...i}=e;const[{className:o,as:l="div",...c},{isActive:u,onEnter:d,onEntering:f,onEntered:p,onExit:m,onExiting:g,onExited:v,mountOnEnter:y,unmountOnExit:_,transition:b=Sd}]=eb({...i,transition:ib(r)}),w=h(n,"tab-pane");return(0,a.jsx)(Jd.Provider,{value:null,children:(0,a.jsx)(Xd.Provider,{value:null,children:(0,a.jsx)(b,{in:u,onEnter:d,onEntering:f,onEntered:p,onExit:m,onExiting:g,onExited:v,mountOnEnter:y,unmountOnExit:_,children:(0,a.jsx)(l,{...c,ref:t,className:s()(o,w,u&&"active")})})})})}));cb.displayName="TabPane";const ub=cb,db={eventKey:K().oneOfType([K().string,K().number]),title:K().node.isRequired,disabled:K().bool,tabClassName:K().string,tabAttrs:K().object},hb=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};hb.propTypes=db;const fb=Object.assign(hb,{Container:ab,Content:lb,Pane:ub}),pb=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i,...o}=e;n=h(n,"navbar-brand");const l=i||(o.href?"a":"span");return(0,a.jsx)(l,{...o,ref:t,className:s()(r,n)})}));pb.displayName="NavbarBrand";const mb=pb;const gb=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e=>null!=e)).reduce(((e,t)=>{if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),null)},vb={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function yb(e,t){const n=t[`offset${e[0].toUpperCase()}${e.slice(1)}`],r=vb[e];return n+parseInt(Oe(t,r[0]),10)+parseInt(Oe(t,r[1]),10)}const _b={[Je]:"collapse",[tt]:"collapsing",[Ze]:"collapsing",[et]:"collapse show"},bb=e.forwardRef(((t,n)=>{let{onEnter:r,onEntering:i,onEntered:o,onExit:l,onExiting:c,className:u,children:d,dimension:h="height",in:f=!1,timeout:p=300,mountOnEnter:m=!1,unmountOnExit:g=!1,appear:v=!1,getDimensionValue:y=yb,..._}=t;const b="function"===typeof h?h():h,w=(0,e.useMemo)((()=>gb((e=>{e.style[b]="0"}),r)),[b,r]),x=(0,e.useMemo)((()=>gb((e=>{const t=`scroll${b[0].toUpperCase()}${b.slice(1)}`;e.style[b]=`${e[t]}px`}),i)),[b,i]),k=(0,e.useMemo)((()=>gb((e=>{e.style[b]=null}),o)),[b,o]),C=(0,e.useMemo)((()=>gb((e=>{e.style[b]=`${y(b,e)}px`,qe(e)}),l)),[l,y,b]),E=(0,e.useMemo)((()=>gb((e=>{e.style[b]=null}),c)),[b,c]);return(0,a.jsx)(lt,{ref:n,addEndListener:He,..._,"aria-expanded":_.role?f:null,onEnter:w,onEntering:x,onEntered:k,onExit:C,onExiting:E,childRef:d.ref,in:f,timeout:p,mountOnEnter:m,unmountOnExit:g,appear:v,children:(t,n)=>e.cloneElement(d,{...n,className:s()(u,d.props.className,_b[t],"width"===b&&"collapse-horizontal")})})})),wb=bb,xb=e.forwardRef(((t,n)=>{let{children:r,bsPrefix:i,...s}=t;i=h(i,"navbar-collapse");const o=(0,e.useContext)(ch);return(0,a.jsx)(wb,{in:!(!o||!o.expanded),...s,children:(0,a.jsx)("div",{ref:n,className:i,children:r})})}));xb.displayName="NavbarCollapse";const kb=xb,Cb=e.forwardRef(((t,n)=>{let{bsPrefix:r,className:i,children:o,label:l="Toggle navigation",as:c="button",onClick:u,...d}=t;r=h(r,"navbar-toggler");const{onToggle:f,expanded:p}=(0,e.useContext)(ch)||{},m=J((e=>{u&&u(e),f&&f()}));return"button"===c&&(d.type="button"),(0,a.jsx)(c,{...d,ref:n,onClick:m,"aria-label":l,className:s()(i,r,!p&&"collapsed"),children:o||(0,a.jsx)("span",{className:`${r}-icon`})})}));Cb.displayName="NavbarToggle";const Eb=Cb,Sb=new WeakMap,Ib=(e,t)=>{if(!e||!t)return;const n=Sb.get(t)||new Map;Sb.set(t,n);let r=n.get(e);return r||(r=t.matchMedia(e),r.refCount=0,n.set(r.media,r)),r};function Tb(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined"===typeof window?void 0:window;const r=Ib(t,n),[i,s]=(0,e.useState)((()=>!!r&&r.matches));return ae((()=>{let e=Ib(t,n);if(!e)return s(!1);let r=Sb.get(n);const i=()=>{s(e.matches)};return e.refCount++,e.addListener(i),i(),()=>{e.removeListener(i),e.refCount--,e.refCount<=0&&(null==r||r.delete(e.media)),e=void 0}}),[t]),i}const Nb=function(t){const n=Object.keys(t);function r(e,t){return e===t?t:e?`${e} and ${t}`:t}function i(e){const r=function(e){return n[Math.min(n.indexOf(e)+1,n.length-1)]}(e);let i=t[r];return i="number"===typeof i?i-.2+"px":`calc(${i} - 0.2px)`,`(max-width: ${i})`}return function(n,s,a){let o;"object"===typeof n?(o=n,a=s,s=!0):(s=s||!0,o={[n]:s});let l=(0,e.useMemo)((()=>Object.entries(o).reduce(((e,n)=>{let[s,a]=n;return"up"!==a&&!0!==a||(e=r(e,function(e){let n=t[e];return"number"===typeof n&&(n=`${n}px`),`(min-width: ${n})`}(s))),"down"!==a&&!0!==a||(e=r(e,i(s))),e}),"")),[JSON.stringify(o)]);return Tb(l,a)}}({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),Pb=Nb,jb=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=h(r,"offcanvas-body"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));jb.displayName="OffcanvasBody";const Rb=jb,Ob={[Ze]:"show",[et]:"show"},Db=e.forwardRef(((t,n)=>{let{bsPrefix:r,className:i,children:o,in:l=!1,mountOnEnter:c=!1,unmountOnExit:u=!1,appear:d=!1,...f}=t;return r=h(r,"offcanvas"),(0,a.jsx)(lt,{ref:n,addEndListener:He,in:l,mountOnEnter:c,unmountOnExit:u,appear:d,...f,childRef:o.ref,children:(t,n)=>e.cloneElement(o,{...n,className:s()(i,o.props.className,(t===Ze||t===tt)&&`${r}-toggling`,Ob[t])})})}));Db.displayName="OffcanvasToggling";const Lb=Db,Mb=e.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,closeLabel:i="Close",closeButton:o=!1,...l}=e;return n=h(n,"offcanvas-header"),(0,a.jsx)(Fd,{ref:t,...l,className:s()(r,n),closeLabel:i,closeButton:o})}));Mb.displayName="OffcanvasHeader";const Ab=Mb,Fb=M("h5"),$b=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=Fb,...o}=e;return r=h(r,"offcanvas-title"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));$b.displayName="OffcanvasTitle";const Ub=$b;function zb(e){return(0,a.jsx)(Lb,{...e})}function Bb(e){return(0,a.jsx)(Sd,{...e})}const Wb=e.forwardRef(((t,n)=>{let{bsPrefix:r,className:i,children:o,"aria-labelledby":l,placement:c="start",responsive:u,show:d=!1,backdrop:f=!0,keyboard:p=!0,scroll:m=!1,onEscapeKeyDown:g,onShow:v,onHide:y,container:_,autoFocus:b=!0,enforceFocus:w=!0,restoreFocus:x=!0,restoreFocusOptions:k,onEntered:C,onExit:E,onExiting:S,onEnter:I,onEntering:T,onExited:N,backdropClassName:P,manager:j,renderStaticNode:R=!1,...O}=t;const D=(0,e.useRef)();r=h(r,"offcanvas");const[L,M]=(0,e.useState)(!1),A=J(y),F=Pb(u||"xs","up");(0,e.useEffect)((()=>{M(u?d&&!F:d)}),[d,u,F]);const $=(0,e.useMemo)((()=>({onHide:A})),[A]);const U=(0,e.useCallback)((e=>(0,a.jsx)("div",{...e,className:s()(`${r}-backdrop`,P)})),[P,r]),z=e=>(0,a.jsx)("div",{...e,...O,className:s()(i,u?`${r}-${u}`:r,`${r}-${c}`),"aria-labelledby":l,children:o});return(0,a.jsxs)(a.Fragment,{children:[!L&&(u||R)&&z({}),(0,a.jsx)(Nd.Provider,{value:$,children:(0,a.jsx)(fd,{show:L,ref:n,backdrop:f,container:_,keyboard:p,autoFocus:b,enforceFocus:w&&!m,restoreFocus:x,restoreFocusOptions:k,onEscapeKeyDown:g,onShow:v,onHide:A,onEnter:function(e){e&&(e.style.visibility="visible");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==I||I(e,...n)},onEntering:T,onEntered:C,onExit:E,onExiting:S,onExited:function(e){e&&(e.style.visibility="");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==N||N(...n)},manager:j||(m?(D.current||(D.current=new kd({handleContainerOverflow:!1})),D.current):xd()),transition:zb,backdropTransition:Bb,renderBackdrop:U,renderDialog:z})})]})}));Wb.displayName="Offcanvas";const Hb=Object.assign(Wb,{Body:Rb,Header:Ab,Title:Ub}),qb=e.forwardRef(((t,n)=>{let{onHide:r,...i}=t;const s=(0,e.useContext)(ch),o=J((()=>{null==s||null==s.onToggle||s.onToggle(),null==r||r()}));return(0,a.jsx)(Hb,{ref:n,show:!(null==s||!s.expanded),...i,renderStaticNode:!0,onHide:o})}));qb.displayName="NavbarOffcanvas";const Vb=qb,Gb=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="span",...o}=e;return r=h(r,"navbar-text"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));Gb.displayName="NavbarText";const Kb=Gb,Yb=e.forwardRef(((t,n)=>{const{bsPrefix:r,expand:i=!0,variant:o="light",bg:l,fixed:c,sticky:u,className:d,as:f="nav",expanded:p,onToggle:m,onSelect:g,collapseOnSelect:v=!1,...y}=ye(t,{expanded:"onToggle"}),_=h(r,"navbar"),b=(0,e.useCallback)((function(){null==g||g(...arguments),v&&p&&(null==m||m(!1))}),[g,v,p,m]);void 0===y.role&&"nav"!==f&&(y.role="navigation");let w=`${_}-expand`;"string"===typeof i&&(w=`${w}-${i}`);const x=(0,e.useMemo)((()=>({onToggle:()=>null==m?void 0:m(!p),bsPrefix:_,expanded:!!p,expand:i})),[_,p,i,m]);return(0,a.jsx)(ch.Provider,{value:x,children:(0,a.jsx)(Xd.Provider,{value:b,children:(0,a.jsx)(f,{ref:n,...y,className:s()(d,_,i&&w,o&&`${_}-${o}`,l&&`bg-${l}`,u&&`sticky-${u}`,c&&`fixed-${c}`)})})})}));Yb.displayName="Navbar";const Qb=Object.assign(Yb,{Brand:mb,Collapse:kb,Offcanvas:Vb,Text:Kb,Toggle:Eb}),Xb=e=>{let{uid:t}=e;return(0,a.jsx)(Qb,{fixed:"bottom",bg:"light",className:"d-md-none justify-content-between mx-auto px-0",style:{marginTop:"50px"},children:(0,a.jsx)(v,{children:(0,a.jsxs)(mh,{className:"d-flex w-100 justify-content-between",children:[(0,a.jsx)(mh.Link,{as:Dn,to:"/",children:(0,a.jsx)("i",{className:"bi bi-house-door-fill",style:{fontSize:"1.5rem"}})}),(0,a.jsx)(mh.Link,{as:Dn,to:"/search",children:(0,a.jsx)("i",{className:"bi bi-search",style:{fontSize:"1.5rem"}})}),(0,a.jsx)(mh.Link,{as:Dn,to:`/${t}`,children:(0,a.jsx)("i",{className:"bi bi-people-fill",style:{fontSize:"1.5rem"}})}),(0,a.jsx)(mh.Link,{as:Dn,to:"/messages/",children:(0,a.jsx)("i",{className:"bi bi-envelope-fill",style:{fontSize:"1.5rem"}})}),(0,a.jsx)(mh.Link,{as:Dn,to:"/Games",children:(0,a.jsx)("i",{className:"bi bi-controller",style:{fontSize:"1.5rem"}})}),(0,a.jsx)(mh.Link,{as:Dn,to:"#",children:(0,a.jsx)("i",{className:"bi bi-gear-fill",style:{fontSize:"1.5rem"}})})]})})})},Jb=()=>{const t=an(),{loggedIn:n,uid:r}=N_(),[i,s]=(0,e.useState)(""),[o,l]=(0,e.useState)("All"),[c,u]=(0,e.useState)({People:[],Posts:[]}),d=ln();(0,e.useEffect)((()=>{const e=new URLSearchParams(t.search).get("query");if(e&&(s(e),r)){const t=p(e);return()=>t}}),[t.search,r]);const h=(e,t)=>{if(t){return Object.keys(t).includes(e)}return!1},f=async(e,t)=>{try{const n=`UsersDetails/${t.uid}`,r=await D_(n);return{postId:e,...t,username:null===r||void 0===r?void 0:r.name,profilePic:null===r||void 0===r?void 0:r.profilePhoto}}catch(ws){return console.error("Error fetching user data:",ws),{postId:e,...t}}},p=async e=>{const t=M_("UsersDetails",(t=>{if(t){M_(`friend/${r}/Friends`,(n=>{const r=Object.values(t).filter((t=>t.name.toLowerCase().includes(e.toLowerCase()))).map((e=>({...e,isFriend:h(e.id,n)})));u((e=>({...e,People:r})))}))}})),n=M_("Posts",(async t=>{if(t){const n=Object.entries(t).filter((t=>{let[n,r]=t;return r.postText.toLowerCase().includes(e.toLowerCase())})),r=await(async e=>{if(e){const t=e.map((async e=>{let[t,n]=e;return await f(t,n)}));return await Promise.all(t)}return[]})(n);u((e=>({...e,Posts:r})))}}));return()=>{t(),n()}};return(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[(0,a.jsx)(F_,{loggedIn:n,uid:r}),(0,a.jsx)(w,{md:7,className:" mx-auto px-0 px-md-3 vh-100 pb-5 pb-md-0",style:{overflowY:"auto"},children:(0,a.jsxs)("div",{className:"pt-3",children:[(0,a.jsxs)(Vh,{className:"d-flex",onSubmit:e=>{e.preventDefault(),i&&d(`/search?query=${encodeURIComponent(i)}`)},children:[(0,a.jsx)(Ih,{type:"search",placeholder:"Search","aria-label":"Search",value:i,onChange:e=>s(e.target.value)}),(0,a.jsx)(ht,{variant:"outline-success",type:"submit",children:(0,a.jsx)("i",{className:"bi bi-search"})})]}),(0,a.jsxs)(fb.Container,{activeKey:o,onSelect:e=>l(e),children:[(0,a.jsxs)(mh,{variant:"tabs",className:"d-flex justify-content-between",children:[(0,a.jsx)(mh.Item,{className:"flex-fill text-center",children:(0,a.jsx)(mh.Link,{eventKey:"All",children:"All"})}),(0,a.jsx)(mh.Item,{className:"flex-fill text-center",children:(0,a.jsx)(mh.Link,{eventKey:"People",children:"People"})}),(0,a.jsx)(mh.Item,{className:"flex-fill text-center",children:(0,a.jsx)(mh.Link,{eventKey:"Posts",children:"Posts"})})]}),(0,a.jsxs)(fb.Content,{className:"mt-4",children:[(0,a.jsxs)(fb.Pane,{eventKey:"All",children:[c.People.length>0&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h5",{children:"People"}),c.People.slice(0,3).map(((e,t)=>(0,a.jsx)(Zb,{user:e},t)))]}),c.People.length>3&&(0,a.jsx)("div",{className:"text-end",children:(0,a.jsx)(ht,{variant:"link",style:{textDecoration:"none"},onClick:()=>l("People"),children:"View All"})}),c.Posts.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{children:"Posts"}),c.Posts.map(((e,t)=>(0,a.jsx)(Hu,{post:e,currentUserID:r},t)))]})]}),(0,a.jsx)(fb.Pane,{eventKey:"People",children:c.People.length>0&&c.People.map(((e,t)=>(0,a.jsx)(Zb,{user:e},t)))}),(0,a.jsx)(fb.Pane,{eventKey:"Posts",children:c.Posts.length>0&&c.Posts.map(((e,t)=>(0,a.jsx)(Hu,{post:e,currentUserID:r},t)))})]})]})]})}),(0,a.jsx)(w,{md:3,className:"d-none d-md-block bg-light vh-100 p-3"})]})}),(0,a.jsx)(Xb,{uid:r})]})},Zb=e=>{let{user:t}=e;return(0,a.jsx)(V,{style:{marginBottom:"12px"},children:(0,a.jsx)(V.Body,{children:(0,a.jsxs)(_,{className:"align-items-center",children:[(0,a.jsx)(w,{xs:3,md:2,className:"d-flex justify-content-center",children:(0,a.jsx)(Dn,{to:`/${t.id}`,children:(0,a.jsx)("img",{src:t.profilePhoto||"/images/defaultProfile.png",alt:`${t.name}'s profile`,style:{width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover"}})})}),(0,a.jsx)(w,{xs:6,md:8,children:(0,a.jsx)(Dn,{to:`/${t.id}`,style:{textDecoration:"none",color:"black"},children:(0,a.jsx)("h6",{className:"m-0",children:t.name})})}),(0,a.jsx)(w,{xs:3,md:2,className:"text-end",children:t.isFriend&&(0,a.jsx)(Dn,{to:`/messages/${t.id}`,children:(0,a.jsx)("i",{className:"bi bi-envelope-fill",style:{fontSize:"1.5rem"}})})})]})})})},ew=()=>{const t=(0,e.useRef)(),n=ln();return(0,a.jsx)(w,{md:3,className:"d-none d-md-block bg-light vh-100 p-3",children:(0,a.jsxs)(Vh,{className:"d-flex",onSubmit:e=>{e.preventDefault();const r=t.current.value;r&&n(`/search?query=${encodeURIComponent(r)}`)},children:[(0,a.jsx)(Ih,{type:"search",placeholder:"Search","aria-label":"Search",ref:t}),(0,a.jsx)(ht,{variant:"outline-success",type:"submit",children:(0,a.jsx)("i",{className:"bi bi-search"})})]})})},tw=()=>{const[t,n]=(0,e.useState)([]),{loggedIn:r,uid:i}=N_(),s=e=>{if(e){const t=Object.entries(e).map((async e=>{let[t,n]=e;return await o(t,n)}));Promise.all(t).then(n)}else n([])},o=async(e,t)=>{try{const n=`UsersDetails/${t.uid}`,r=await D_(n);return{postId:e,...t,username:r.name,profilePic:r.profilePhoto}}catch(ws){return console.error("Error fetching user data:",ws),{postId:e,...t}}};return(0,e.useEffect)((()=>{const e=M_("Posts/",s);return()=>e()}),[]),(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[(0,a.jsx)(F_,{loggedIn:r,uid:i}),(0,a.jsx)(w,{md:7,className:" mx-auto px-0 px-md-3 vh-100 pb-5 pb-md-0",style:{overflowY:"auto"},children:(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsx)("h3",{children:"Feed"}),(0,a.jsx)(V,{className:"create-post-feed mb-4",children:(0,a.jsx)(V.Body,{children:(0,a.jsx)(P_,{})})}),t.length>0&&t.map(((e,t)=>(0,a.jsx)(Hu,{post:e,currentUserID:i},t)))]})}),(0,a.jsx)(ew,{})]})}),(0,a.jsx)(Xb,{uid:i})]})},nw=t=>{let{isFriend:n,userDetails:r,friendsList:i,mutualFriends:s,friendRequests:o,renderFriendButton:l,uid:c,userID:u}=t;const[d,h]=(0,e.useState)(!1),f={coverPhoto:r.coverPhotoPhoto,profilePhoto:r.profilePhoto,name:r.name,about:r.about,dob:r.dob},p=e=>{let{aboutText:t}=e;const n=t.replace(/((https?:\/\/)?(www\.)?[a-zA-Z0-9-]+\.[a-z]{2,}(\.[a-z]{2,})?(\/\S*)?)/gi,(e=>`<a href="${e.startsWith("http")?e:`https://${e}`}" target="_blank" rel="noopener noreferrer">${e}</a>`));return(0,a.jsx)("p",{className:"mt-3",dangerouslySetInnerHTML:{__html:n}})};return(0,a.jsxs)(_,{className:"mb-4 align-items-start",children:[u===c&&(0,a.jsx)(w,{xs:12,className:"d-flex justify-content-md-end justify-content-start ",children:(0,a.jsx)(ht,{variant:"outline-primary",onClick:()=>h(!0),children:(0,a.jsx)("i",{className:"bi bi-pencil"})})}),(0,a.jsx)(w,{xs:12,md:6,className:"d-flex flex-column flex-md-row align-items-start",children:(0,a.jsxs)("div",{className:"profile-section d-flex align-items-center",children:[(0,a.jsx)(Q,{src:r.profilePhoto||"/images/defaultProfile.png",roundedCircle:!0,alt:"Profile",className:"me-3",width:"100",height:"100",style:{objectFit:"cover"}}),(0,a.jsxs)("div",{className:"user-details",children:[(0,a.jsx)("h4",{className:"mb-2",style:{whiteSpace:"nowrap"},children:r.name}),(0,a.jsxs)("div",{className:"user-info",children:[(0,a.jsxs)("div",{className:"d-flex",style:{gap:"10px"},children:[(0,a.jsxs)("p",{className:"mb-1",children:[i.length," friends"]}),c===u?(0,a.jsxs)("p",{className:"mb-1",children:[o.length," friend requests"]}):(0,a.jsxs)("p",{className:"mb-1",children:[s.length," mutual friends"]})]}),(0,a.jsxs)("p",{className:"mb-1",children:["Joined ",new Date(r.joinedDate).toLocaleDateString()]})]})]})]})}),u!==c&&(0,a.jsx)(w,{xs:12,className:"d-flex justify-content-end mt-3 mt-md-0",children:(0,a.jsxs)("div",{className:"d-flex flex-md-row-reverse",style:{gap:"10px"},children:[l(),n&&(0,a.jsx)(Dn,{to:`/messages/${u}`,className:"",children:(0,a.jsx)(ht,{variant:"secondary",children:"Message"})})]})}),(0,a.jsx)(w,{xs:12,children:(0,a.jsx)(p,{aboutText:r.about})}),(0,a.jsx)(O_,{show:d,handleClose:()=>h(!1),currentUserDetails:f})]})},rw=e=>{let{isFriend:t,friendRequestSent:n,friendRequestReceived:r,handleFriendToggle:i}=e;return t?(0,a.jsx)(ht,{variant:"danger",onClick:i,children:"Remove Friend"}):n?(0,a.jsx)(ht,{variant:"secondary",onClick:i,children:"Cancel Request"}):r?(0,a.jsx)(ht,{variant:"danger",onClick:i,children:"Reject Request"}):(0,a.jsx)(ht,{variant:"primary",onClick:i,children:"Add Friend"})},iw=e=>{let{posts:t,currentUserID:n}=e;return(0,a.jsx)(fb.Pane,{eventKey:"posts",children:t.length>0?t.map(((e,t)=>(0,a.jsx)(Hu,{post:e,currentUserID:n},t))):(0,a.jsx)("p",{children:"No posts available."})})},sw=async e=>{const t=Eu(Uu(),e);try{await function(e){return Lc("remove",e._path),Nu(e,null)}(t),console.log("Data deleted successfully.")}catch(ws){console.error("Error deleting data:",ws)}},aw=async(e,t)=>{try{await sw(`friend/${t}/Friends/${e}`),await sw(`friend/${e}/Friends/${t}`)}catch(ws){console.error("Error removing friend:",ws)}},ow=e=>{let{user:t,onRemoveFriend:n,isCurrentUser:r}=e;return(0,a.jsx)("div",{className:"friend-card p-3 mb-3 border rounded shadow-sm",children:(0,a.jsxs)("div",{className:"d-flex flex-wrap align-items-center",children:[(0,a.jsx)("img",{src:t.profilePhoto||"/images/defaultProfile.png",alt:t.name,className:"rounded-circle",style:{width:"50px",height:"50px",marginRight:"15px"}}),(0,a.jsx)("div",{className:"flex-grow-1",children:(0,a.jsx)(Dn,{to:`/${t.id}`,className:"text-dark fw-bold",children:t.name})}),r&&(0,a.jsxs)("div",{className:"d-flex justify-content-end mt-2",children:[(0,a.jsx)("button",{className:"btn btn-danger btn-sm me-2 mb-2 mb-md-0",onClick:n,children:"Remove Friend"}),(0,a.jsx)(Dn,{to:`/messages/${t.id}`,className:"",children:(0,a.jsx)("button",{className:"btn btn-primary btn-sm",children:"Message"})})]})]})})},lw=e=>{let{user:t,currentUser:n}=e;return(0,a.jsx)("div",{className:"friend-request-card p-3 mb-3 border rounded shadow-sm",children:(0,a.jsxs)("div",{className:"d-flex flex-wrap align-items-center",children:[(0,a.jsx)(Q,{src:t.profilePhoto||"/images/defaultProfile.png",roundedCircle:!0,style:{width:"50px",height:"50px",marginRight:"15px"}}),(0,a.jsx)("div",{className:"flex-grow-1",children:(0,a.jsx)("h5",{className:"fw-bold mb-0",children:t.name})}),(0,a.jsxs)("div",{className:"d-flex justify-content-end mt-2",children:[(0,a.jsx)(ht,{variant:"success",className:"me-2 mb-2 mb-md-0",onClick:()=>(async(e,t)=>{const n=Uu();try{const r=Eu(n,`friend/${t}/Friends/${e}`);await Nu(r,{dateAdded:Date.now()});const i=Eu(n,`friend/${e}/Friends/${t}`);await Nu(i,{dateAdded:Date.now()}),await sw(`friend/${t}/Friendrequest/${e}`),await sw(`friend/${e}/Friendrequest/${t}`),await sw(`notifications/${t}/Friendrequest/${e}`)}catch(ws){console.error("Error accepting friend request:",ws)}})(t.id,n),children:"Accept"}),(0,a.jsx)(ht,{variant:"danger",onClick:()=>(async(e,t)=>{try{await sw(`friend/${t}/Friendrequest/${e}`),await sw(`friend/${e}/Friendrequest/${t}`),await sw(`notifications/${t}/Friendrequest/${e}`)}catch(ws){console.error("Error rejecting friend request:",ws)}})(t.id,n),children:"Reject"})]})]})})},cw=t=>{let{friendsList:n,mutualFriends:r,friendRequests:i,isCurrentUser:s,currentUserID:o}=t;const[l,c]=(0,e.useState)([]),[u,d]=(0,e.useState)([]),[h,f]=(0,e.useState)([]);return(0,e.useEffect)((()=>{(async()=>{const e=await Promise.all(n.map((async e=>await D_(`UsersDetails/${e}`))));c(e)})(),(async()=>{const e=await Promise.all(i.map((async e=>await D_(`UsersDetails/${e.id}`))));d(e)})(),(async()=>{const e=await Promise.all(r.map((async e=>await D_(`UsersDetails/${e}`))));f(e)})()}),[n,i,r]),(0,a.jsx)(fb.Pane,{eventKey:"friends",children:(0,a.jsxs)(fb.Container,{defaultActiveKey:"friendsList",children:[(0,a.jsxs)(mh,{variant:"tabs",children:[(0,a.jsx)(mh.Item,{children:(0,a.jsx)(mh.Link,{eventKey:"friendsList",children:"Friends List"})}),s?(0,a.jsx)(mh.Item,{children:(0,a.jsx)(mh.Link,{eventKey:"friendRequests",children:"Friend Requests"})}):(0,a.jsx)(mh.Item,{children:(0,a.jsx)(mh.Link,{eventKey:"mutualFriends",children:"Mutual Friends"})})]}),(0,a.jsxs)(fb.Content,{className:"mt-4",children:[(0,a.jsx)(fb.Pane,{eventKey:"friendsList",children:(0,a.jsx)(_,{className:"gx-4 gy-3",children:l.length>0?l.map(((e,t)=>(0,a.jsx)(w,{xs:12,sm:6,lg:4,children:(0,a.jsx)(ow,{user:e,onRemoveFriend:()=>aw(e.id,o),isCurrentUser:s})},t))):(0,a.jsx)("p",{children:"No friends found."})})}),s?(0,a.jsx)(fb.Pane,{eventKey:"friendRequests",children:(0,a.jsx)(_,{className:"gx-4 gy-3",children:u.length>0?u.map(((e,t)=>(0,a.jsx)(w,{xs:12,sm:6,lg:4,children:(0,a.jsx)(lw,{user:e,currentUser:o})},t))):(0,a.jsx)("p",{children:"No friend requests found."})})}):(0,a.jsx)(fb.Pane,{eventKey:"mutualFriends",children:(0,a.jsx)(_,{className:"gx-4 gy-3",children:h.length>0?h.map(((e,t)=>(0,a.jsx)(w,{xs:12,sm:6,lg:4,children:(0,a.jsx)(ow,{user:e,onRemoveFriend:()=>aw(e.id,o)})},t))):(0,a.jsx)("p",{children:"No mutual friends found."})})})]})]})})},uw=e=>{const t=e.match(/\.([a-zA-Z0-9]+)(\?.*)?$/),n=t?t[1].toLowerCase():"";return["mp4","webm","ogg"].includes(n)},dw=e=>{let{posts:t,previousProfilePhotos:n,previousCoverPhotos:r}=e;const i=[];return t.forEach((e=>{e.media&&e.media.length>0&&i.push(...e.media)})),i.push(...n,...r),(0,a.jsx)(fb.Pane,{eventKey:"media",children:(0,a.jsx)(_,{children:i.length>0?i.map(((e,t)=>(0,a.jsx)(w,{xs:6,sm:6,md:4,lg:4,className:"mb-4 position-relative",children:uw(e)?(0,a.jsxs)("div",{className:"position-relative",children:[(0,a.jsx)("video",{src:e,className:"w-100",style:{objectFit:"cover",height:"auto"},controls:!1,muted:!0,preload:"metadata",children:"Your browser does not support the video tag."}),(0,a.jsx)("div",{className:"position-absolute bottom-0 start-0 p-2 text-light bg-dark bg-opacity-50 rounded-circle d-flex align-items-center justify-content-center",style:{width:"30px",height:"30px"},children:(0,a.jsx)("i",{className:"bi bi-play-fill"})})]}):(0,a.jsx)(Q,{src:e,alt:"Media",fluid:!0,style:{objectFit:"cover",width:"100%",height:"auto"}})},t))):(0,a.jsx)("p",{children:"No media available."})})})},hw=()=>{const[t,n]=(0,e.useState)(!1),[r,i]=(0,e.useState)(!1),[s,o]=(0,e.useState)(!1),{userId:l}=cn(),{uid:c,loggedIn:u}=N_(),[d,h]=(0,e.useState)(null),[f,p]=(0,e.useState)([]),[m,g]=(0,e.useState)([]),[y,b]=(0,e.useState)([]),[x,k]=(0,e.useState)([]),C=async()=>{if(t)await Promise.all([sw(`friend/${l}/Friends/${c}`),sw(`friend/${c}/Friends/${l}`)]),n(!1);else if(r)await Promise.all([sw(`friend/${l}/Friendrequest/${c}`),sw(`friend/${c}/Friendrequest/${l}`),sw(`notifications/${c}/Friendrequest/${l}`)]),i(!1);else if(s)await Promise.all([sw(`friend/${l}/Friendrequest/${c}`),sw(`friend/${c}/Friendrequest/${l}`)]),o(!1);else{const e={Date:Date.now(),Request:"sent",id:l},t={Date:Date.now(),Request:"received",id:c};await Promise.all([zu(`friend/${l}/Friendrequest/${c}`,t),zu(`friend/${c}/Friendrequest/${l}`,e),zu(`notifications/${l}/Friendrequest/${c}`,t),zu(`notifications/${l}`,{viewed:!1})]),i(!0)}};(0,e.useEffect)((()=>{const e=M_(`UsersDetails/${l}`,(e=>{e&&h({name:e.name,profilePhoto:e.profilePhoto,coverPhoto:e.coverPhoto,dob:e.dob,about:e.about,joinedDate:e.date,posts:e.posts||[],previousCoverPhotos:e.previousCoverPhotos||[],previousProfilePhotos:e.previousProfilePhotos||[]})}));return()=>e()}),[l]),(0,e.useEffect)((()=>{E(),d&&S()}),[d,c]);const E=async()=>{let e;try{const t=`friend/${l}/Friends`,r=(await M_(t,(t=>{e=t?Object.keys(t):[],g(e),e&&n(e.includes(c))})),`friend/${c}/Friendrequest`);if(await M_(r,(e=>{var t,n;const r=e?Object.values(e).filter((e=>"received"===e.Request)):[];b(r),o(r.includes(l)&&"received"===(null===(t=e[l])||void 0===t?void 0:t.Request)),i(r.includes(l)&&"sent"===(null===(n=e[l])||void 0===n?void 0:n.Request))})),l!==c&&e){M_(`friend/${c}/Friends`,(t=>{const n=t?Object.keys(t).filter((t=>e.includes(t))):[];k(n)}))}}catch(ws){console.error("Error fetching friends and requests:",ws)}},S=async()=>{try{M_("Posts/",(e=>{if(e){const t=Object.entries(e).filter((e=>{let[t,n]=e;return n.uid===l})).map((e=>{let[t,n]=e;return{postId:t,...n,username:d.name,profilePic:d.profilePhoto}}));p(t)}}))}catch(ws){console.error("Error fetching posts:",ws)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[(0,a.jsx)(F_,{loggedIn:u,uid:c}),(0,a.jsx)(w,{md:7,className:"vh-100 pb-5 pb-md-0",style:{overflowY:"auto"},children:d&&(0,a.jsxs)("div",{children:[(0,a.jsx)(_,{children:(0,a.jsx)(w,{children:(0,a.jsx)(Q,{src:d.coverPhoto||"/images/defaultCover.png",fluid:!0,className:"mb-3",style:{height:"150px"},alt:"Cover"})})}),(0,a.jsx)(nw,{userDetails:d,friendsList:m,mutualFriends:x,friendRequests:y,isFriend:t,renderFriendButton:()=>(0,a.jsx)(rw,{isFriend:t,friendRequestSent:r,friendRequestReceived:s,handleFriendToggle:C}),uid:c,userID:l}),(0,a.jsx)(_,{children:(0,a.jsx)(w,{children:(0,a.jsxs)(fb.Container,{defaultActiveKey:"posts",children:[(0,a.jsxs)(mh,{variant:"tabs",className:"d-flex justify-content-between",children:[(0,a.jsx)(mh.Item,{className:"flex-fill text-center",children:(0,a.jsx)(mh.Link,{eventKey:"posts",children:"Posts"})}),(0,a.jsx)(mh.Item,{className:"flex-fill text-center",children:(0,a.jsx)(mh.Link,{eventKey:"friends",children:"Friends"})}),(0,a.jsx)(mh.Item,{className:"flex-fill text-center",children:(0,a.jsx)(mh.Link,{eventKey:"media",children:"Media"})})]}),(0,a.jsxs)(fb.Content,{className:"mt-4",children:[(0,a.jsx)(iw,{posts:f,currentUserID:c}),(0,a.jsx)(cw,{friendsList:m,mutualFriends:x,friendRequests:y,isCurrentUser:l===c,currentUserID:l}),(0,a.jsx)(dw,{posts:f,previousProfilePhotos:d.previousProfilePhotos,previousCoverPhotos:d.previousCoverPhotos})]})]})})})]})}),(0,a.jsx)(ew,{})]})}),(0,a.jsx)(Xb,{uid:c})]})},fw=e=>{const t=e.match(/\.([a-zA-Z0-9]+)(\?.*)?$/),n=t?t[1].toLowerCase():"";return["mp4","webm","ogg"].includes(n)},pw=e=>{switch(e.split(".").pop().toLowerCase()){case"mp4":default:return"video/mp4";case"webm":return"video/webm";case"ogg":return"video/ogg"}},mw=t=>{let{commentIndex:n,comment:r,postID:i,currentUserID:s}=t;const{uid:o,date:l,postText:c,media:u,likes:d=[]}=r,[h,f]=(0,e.useState)(d),[p,m]=(0,e.useState)({profilePic:"",username:""}),g=h.includes(s);(0,e.useEffect)((()=>{(async()=>{try{const e=`UsersDetails/${o}`,t=await D_(e);t&&m({profilePic:t.profilePhoto,username:t.name})}catch(ws){console.error("Error fetching user details:",ws)}})()}),[o]);return(0,a.jsxs)(V,{className:"mb-3 comment-card",children:[(0,a.jsxs)(V.Header,{className:"d-flex align-items-center",children:[(0,a.jsx)(Dn,{to:`/${o}`,children:(0,a.jsx)(Q,{src:p.profilePic||"/images/defaultProfile.png",roundedCircle:!0,width:"30",height:"30",alt:`${p.username}'s profile picture`,className:"me-2",style:{cursor:"pointer"}})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(Dn,{to:`/${o}`,style:{textDecoration:"none",color:"inherit"},children:(0,a.jsx)("h6",{className:"mb-0",style:{cursor:"pointer"},children:p.username})}),(0,a.jsx)("small",{className:"text-muted",children:new Date(l).toLocaleString()})]})]}),(0,a.jsxs)(V.Body,{children:[c&&(0,a.jsx)(V.Text,{children:c}),u&&(0,a.jsx)("div",{style:{height:"150px",overflow:"hidden"},children:fw(u)?(0,a.jsxs)("video",{controls:!0,width:"100%",height:"100%",className:"d-block w-100",children:[(0,a.jsx)("source",{src:u,type:pw(u)}),"Your browser does not support the video tag."]}):(0,a.jsx)(V.Img,{variant:"top",src:u,alt:"Comment media",style:{objectFit:"contain"}})})]}),(0,a.jsx)(V.Footer,{className:"d-flex justify-content-end",children:(0,a.jsxs)(ht,{variant:"outline-primary",size:"sm",onClick:async()=>{const e=g?h.filter((e=>e!==s)):[...h,s];await zu(`Posts/${i}/comments/${n}`,{likes:e}),f(e)},children:[(0,a.jsx)("i",{className:"bi bi-heart"+(g?"-fill":"")})," ",h.length," Like"]})})]})},gw=()=>{const{userId:t,postId:n}=cn(),r=ln(),[i,s]=(0,e.useState)(null),[o,l]=(0,e.useState)([]),[c,u]=(0,e.useState)(null),{uid:d,loggedIn:h}=N_(),f=async e=>{if(e){const t=await(async(e,t)=>{try{const n=`UsersDetails/${t.uid}`,r=await D_(n);return{postId:e,...t,username:r.name,profilePic:r.profilePhoto}}catch(c){return console.error("Error fetching user data:",c),{postId:e,...t}}})(n,e);s(t),l(t.comments||[])}else s(null),l([])};return(0,e.useEffect)((()=>{const e=M_(`Posts/${n}`,f);return()=>e()}),[n]),(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[(0,a.jsx)(F_,{loggedIn:h,uid:d}),(0,a.jsx)(w,{md:7,className:" mx-auto px-0 px-md-3 vh-100 pb-5 pb-md-0",style:{overflowY:"auto"},children:(0,a.jsxs)(v,{className:"mt-4",children:[(0,a.jsxs)(_,{className:"mb-4",children:[(0,a.jsx)(w,{xs:"auto",children:(0,a.jsxs)(ht,{onClick:()=>r(-1),variant:"outline-primary",children:[(0,a.jsx)("i",{className:"bi bi-arrow-left"})," Back"]})}),(0,a.jsx)(w,{children:(0,a.jsx)("h2",{className:"text-left",children:"Post"})})]}),i?(0,a.jsx)(Hu,{post:i,currentUserID:d}):(0,a.jsx)("p",{children:"Loading post..."}),c&&(0,a.jsx)("p",{className:"text-danger",children:c}),(0,a.jsx)(V,{className:"create-post-feed",children:(0,a.jsx)(V.Body,{children:(0,a.jsx)(P_,{commentDetails:{comments:o,postId:n,userId:t}})})}),(0,a.jsxs)(_,{className:"mt-2 mx-auto px-0 ",children:[(0,a.jsx)("h4",{children:"Comments"}),o.length>0?o.map(((e,t)=>(0,a.jsx)(mw,{commentIndex:t,comment:e,postID:n,currentUserID:d},t))):(0,a.jsx)("p",{children:"No comments yet. Be the first to comment!"})]})]})}),(0,a.jsx)(ew,{})]})}),(0,a.jsx)(Xb,{uid:d})]})},vw=e.createContext(null);vw.displayName="InputGroupContext";const yw=vw,_w=e.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="span",...o}=e;return r=h(r,"input-group-text"),(0,a.jsx)(i,{ref:t,className:s()(n,r),...o})}));_w.displayName="InputGroupText";const bw=_w,ww=e.forwardRef(((t,n)=>{let{bsPrefix:r,size:i,hasValidation:o,className:l,as:c="div",...u}=t;r=h(r,"input-group");const d=(0,e.useMemo)((()=>({})),[]);return(0,a.jsx)(yw.Provider,{value:d,children:(0,a.jsx)(c,{ref:n,...u,className:s()(l,r,i&&`${r}-${i}`,o&&"has-validation")})})}));ww.displayName="InputGroup";const xw=Object.assign(ww,{Text:bw,Radio:e=>(0,a.jsx)(bw,{children:(0,a.jsx)(wh,{type:"radio",...e})}),Checkbox:e=>(0,a.jsx)(bw,{children:(0,a.jsx)(wh,{type:"checkbox",...e})})}),kw=async e=>{let{currentUserId:t,recipientUserId:n,chatId:r,messageContent:i,mediaUrl:s,messageType:a,isGroupChat:o=!1,groupParticipants:l=[],room:c}=e,u=r;const d=Uu();let h;if(l&&(h=Object.keys(l)),!u){u=Tu(Eu(d,"Message")).key}const f=Date.now(),p=`-MSG${f}`,m={};o?h.forEach((e=>{m[e]=e===t})):(m[t]=!0,m[n]=!1);const g={sender:t,message:i,timestamp:f,readBy:m,messageType:a};c&&(g.room=c),s&&(g.media=s);const v=`Messages/${u}/${p}`;await zu(v,g);const y={lastMessage:i,lastMessageTimestamp:f},_=`Chats/${u}`;await zu(_,y);const b=o?h:[t,n],w=e=>o?h.filter((t=>t!==e)):e===n?t:n;for(const x of b){const e=w(x),t=`UserChats/${x}/${o?u:e}`,n={lastMessage:i,lastMessageTimestamp:f,isGroupChat:o,chatWith:e,id:u};await zu(t,n)}},Cw=async(e,t,n,r,i)=>{const s=`Messages/${e}/${n}`,a={requestStatus:r};await zu(s,a),r&&(window.location.href=`/Games/${t}/${i}`)},Ew=t=>{let{message:n,currentUser:r,isGroupChat:i,chatId:s}=t;const[o,l]=(0,e.useState)(!1),c=n.sender===r,u="GameRequest"===n.messageType,d=e=>{const t=`-MSG${n.timestamp}`;Cw(s,n.message,t,e,n.room)};(0,e.useEffect)((()=>{if(u&&void 0===n.requestStatus){(new Date).getTime()-new Date(n.timestamp).getTime()>6e5&&d(!1)}}),[u,n,s]);const h=e=>{const t=e.match(/\.([a-zA-Z0-9]+)(\?.*)?$/),n=t?t[1].toLowerCase():"";return["mp4","webm","ogg"].includes(n)},f=e=>{let{messageText:t}=e;const n=t.replace(/((https?:\/\/)?(www\.)?[a-zA-Z0-9-]+\.[a-z]{2,}(\.[a-z]{2,})?(\/\S*)?)/gi,(e=>`<a href="${e.startsWith("http")?e:`https://${e}`}" target="_blank" rel="noopener noreferrer">${e}</a>`));return(0,a.jsx)(V.Text,{dangerouslySetInnerHTML:{__html:n}})};return(0,a.jsxs)("div",{className:"chat-message "+(c?"sent":"received"),children:[!c&&i&&(0,a.jsx)(Dn,{to:`/${n.sender}`,className:"profile-photo-container",children:(0,a.jsx)("img",{src:n.senderProfilePhoto||"/images/defaultProfile.png",alt:"sender profile",className:"sender-profile-photo"})}),(0,a.jsx)(V,{className:"message-bubble "+(c?"sender":"receiver"),children:(0,a.jsxs)(V.Body,{children:[!c&&i&&(0,a.jsx)(Dn,{to:`/${n.sender}`,className:"sender-name",children:n.senderName}),u?(0,a.jsxs)("div",{children:[(0,a.jsxs)(V.Text,{children:[c?"You":"User"," sent a ",(0,a.jsx)("b",{children:n.message})," game request"]}),void 0===n.requestStatus&&!c&&(0,a.jsxs)("div",{className:"d-flex gap-2 mt-2",children:[(0,a.jsx)(ht,{variant:"success",onClick:()=>d(!0),children:"Accept"}),(0,a.jsx)(ht,{variant:"danger",onClick:()=>d(!1),children:"Reject"})]})]}):(0,a.jsxs)("div",{children:[n.media&&(0,a.jsx)("div",{onClick:()=>l(!0),className:"image-message",children:h(n.media)?(0,a.jsxs)("div",{className:"position-relative",children:[(0,a.jsx)("video",{src:n.media,className:"w-100",style:{objectFit:"cover",height:"auto"},controls:!1,muted:!0,preload:"metadata",children:"Your browser does not support the video tag."}),(0,a.jsx)("div",{className:"position-absolute bottom-0 start-0 p-2 text-light bg-dark bg-opacity-50 rounded-circle d-flex align-items-center justify-content-center",style:{width:"30px",height:"30px"},children:(0,a.jsx)("i",{className:"bi bi-play-fill"})})]}):(0,a.jsx)("img",{src:n.media,alt:"sent image",className:"message-image-thumbnail"})}),(0,a.jsx)(f,{messageText:n.message})]}),(0,a.jsx)(V.Footer,{className:"message-timestamp",children:(0,a.jsx)("small",{className:"text-muted",children:new Date(n.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})})})]})}),n.media&&(0,a.jsx)(Gd,{show:o,onHide:()=>l(!1),centered:!0,children:(0,a.jsx)(Gd.Body,{className:"image-modal-body",children:h(n.media)?(0,a.jsxs)("video",{controls:!0,width:"100%",height:"100%",className:"d-block w-100",style:{objectFit:"contain",margin:"auto"},children:[(0,a.jsx)("source",{src:n.media,type:(e=>{switch(e.split(".").pop().toLowerCase()){case"mp4":default:return"video/mp4";case"webm":return"video/webm";case"ogg":return"video/ogg"}})(n.media)}),"Your browser does not support the video tag."]}):(0,a.jsx)("img",{src:n.media,alt:"full image",className:"full-image"})})})]})},Sw={SinglePlayer:[{name:"Brick Break",imgSrc:"/images/game1.jpg",path:"BrickBreak"},{name:"Image Slide Puzzle",imgSrc:"/images/game2.jpg",path:"ImageSlidePuzzle"},{name:"Ball Fall",imgSrc:"/images/game3.jpg",path:"BallFall"},{name:"TicTacToe",imgSrc:"/images/game3.jpg",path:"TicTacToe"},{name:"Super TicTacToe",imgSrc:"/images/game3.jpg",path:"SuperTicTacToe"}],MultiPlayer:[{name:"Chess",imgSrc:"/images/game1.jpg",path:"Chess",maxPlayers:2},{name:"Whot",imgSrc:"/images/game2.jpg",path:"Whot",maxPlayers:4},{name:"TicTacToe",imgSrc:"/images/game2.jpg",path:"TicTacToe",maxPlayers:2},{name:"Super TicTacToe",imgSrc:"/images/game3.jpg",path:"SuperTicTacToe",maxPlayers:2}]},Iw=async(e,t,n)=>{let r={};r[n]={id:n,player:"Player1",online:!0},t.forEach(((e,t)=>{e!==n&&(r[e]={id:e,player:`Player${t+2}`,online:!1})}));const i=Tu(Eu(b_,`Games/${e}/`)),s=i.key;return await Nu(i,{id:s,players:r}),s},Tw=async(e,t,n,r)=>{const i=`UserChats/${e}/${t}/id`;try{const s=await D_(i);await kw({currentUserId:e,recipientUserId:t,chatId:s,messageContent:n,messageType:"GameRequest",room:r})}catch(ws){console.error("Error sending game request:",ws)}},Nw=e=>{let{show:t,handleClose:n,uid:r,friendId:i}=e;return(0,a.jsxs)(Gd,{show:t,onHide:n,centered:!0,children:[(0,a.jsx)(Gd.Header,{closeButton:!0,className:"d-flex justify-content-between",children:(0,a.jsx)(Gd.Title,{children:"Select Game"})}),(0,a.jsx)(Gd.Body,{children:Sw.MultiPlayer.map((e=>(0,a.jsx)("div",{onClick:()=>(async e=>{const t=await Iw(e.name,[i],r);await Tw(r,i,e.name,t),window.location.href=`/Games/${e.path}/${t}`,n()})(e),className:"game-card w-100 mb-3",style:{cursor:"pointer"},children:(0,a.jsx)(V,{className:" bg-light w-100",children:(0,a.jsx)(V.Body,{children:(0,a.jsx)(V.Title,{children:e.name})})})},e.name)))})]})},Pw=t=>{let{chatId:n,uid:r,messages:i,recipientDetails:s,handleGroupModalOpen:o}=t;const[l,c]=(0,e.useState)(""),[u,d]=(0,e.useState)([]),[h,f]=(0,e.useState)(!1),[p,m]=(0,e.useState)(0),g=(0,e.useRef)(null);let v="/images/defaultProfile.png",y=!1;const[_,b]=(0,e.useState)(!1),[w,x]=(0,e.useState)(!1);s&&(y=s.isGroupChat,v=s.profilePhoto?s.profilePhoto:y?"/images/defaultGroup.png":"/images/defaultProfile.png");const k=e=>{const t=e.type;return["video/mp4","video/webm","video/ogg","video/mov"].some((e=>e.includes(t)))};(0,e.useEffect)((()=>{g.current&&g.current.scrollIntoView()}),[i]);const C=(e=>e.reduce(((e,t)=>{const n=new Date(t.timestamp).toLocaleDateString();return e[n]||(e[n]=[]),e[n].push(t),e}),{}))(i);return(0,a.jsx)(a.Fragment,{children:s&&(0,a.jsxs)("div",{className:"chat-container",children:[(0,a.jsxs)("div",{className:"chat-header d-flex align-items-center",children:[(0,a.jsx)("button",{className:"back-button me-2",children:(0,a.jsx)("i",{className:"bi bi-arrow-left"})}),y?(0,a.jsxs)("div",{children:[(0,a.jsx)("img",{src:v,alt:"Recipient Profile",className:"recipient-photo me-2"}),(0,a.jsx)("span",{className:"recipient-username",children:s.name})]}):(0,a.jsxs)(Dn,{to:`/${s.id}`,style:{textDecoration:"none",color:"inherit"},children:[(0,a.jsx)("img",{src:v,alt:"Recipient Profile",className:"recipient-photo me-2"}),(0,a.jsx)("span",{className:"recipient-username",children:s.name})]}),(0,a.jsx)("button",{className:"btn ms-auto",onClick:()=>y?o():b(!0),children:(0,a.jsx)("i",{className:y?"bi bi-info-circle":"bi bi-controller",style:{fontSize:"1.5rem"}})})]}),(0,a.jsxs)("div",{className:"chat-body d-flex flex-column h-100 ",children:[(0,a.jsxs)("div",{className:"recipient-info",children:[(0,a.jsx)("img",{src:v,alt:"Recipient Profile",className:"recipient-photo-large"}),(0,a.jsx)("h5",{className:"recipient-username-large",children:s.name}),(0,a.jsxs)("p",{className:"recipient-joined-date",children:[s.isGroupChat?"Created:":"Joined:"," ",new Date(s.date).toLocaleDateString()]})]}),(0,a.jsx)("div",{className:"messages-container flex-grow-1",children:Object.entries(C).map((e=>{let[t,i]=e;return(0,a.jsxs)("div",{className:"message-group",children:[(0,a.jsx)("div",{className:"date-label",style:{textAlign:"center",margin:"10px 0"},children:(0,a.jsx)("strong",{children:t})}),i.map((e=>(0,a.jsx)(Ew,{message:e,currentUser:r,isGroupChat:y,chatId:n},e.id)))]},t)}))}),h&&u.map(((e,t)=>(0,a.jsx)("div",{className:"chat-message sent",children:(0,a.jsx)(V,{className:"message-bubble sender",children:(0,a.jsxs)(V.Body,{children:[(0,a.jsxs)("div",{className:"image-message",children:[k(e)?(0,a.jsx)("div",{className:"position-relative",children:(0,a.jsx)("video",{src:URL.createObjectURL(e),className:"w-100",style:{objectFit:"cover",height:"auto"},controls:!1,muted:!0,preload:"metadata",children:"Your browser does not support the video tag."})}):(0,a.jsx)("img",{src:URL.createObjectURL(e),alt:"preview",className:"message-image-thumbnail"}),(0,a.jsxs)("div",{className:"progress-circle",children:[(0,a.jsxs)("svg",{className:"progress-circle-svg",children:[(0,a.jsx)("circle",{cx:"30",cy:"30",r:"28"}),(0,a.jsx)("circle",{cx:"30",cy:"30",r:"28",style:{strokeDashoffset:`calc(176 - (176 * ${p}) / 100)`}})]}),(0,a.jsxs)("div",{className:"progress-text",children:[Math.round(p),"%"]})]})]}),(0,a.jsx)(V.Footer,{className:"message-timestamp",children:(0,a.jsx)("small",{className:"text-muted",children:new Date(Date.now()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0})})})]})})},t))),(0,a.jsx)("div",{ref:g})]}),(0,a.jsx)(Vh,{onSubmit:async e=>{if(e.preventDefault(),l.trim()||0!==u.length){x(!0);try{let e=l.trim(),t="text",i=null;if(u.length>0){f(!0);i=(await I_(u,"chat_files",r,((e,t)=>{m(t)})))[0],t="media",f(!1),m(0),d([])}await kw({currentUserId:r,recipientUserId:s.id,chatId:n,messageContent:e,messageType:t,mediaUrl:i,isGroupChat:y,groupParticipants:s.members}),c(""),x(!1)}catch(ws){console.error("Error sending message:",ws)}}},className:"message-form pb-md-2",disabled:w,children:(0,a.jsxs)(Vh.Group,{className:"message-input-group",children:[(0,a.jsxs)("div",{className:"input-wrapper",children:[(0,a.jsx)(Vh.Control,{type:"text",placeholder:"Type a message...",value:l,onChange:e=>c(e.target.value),className:"message-input",disabled:w}),u.map(((e,t)=>(0,a.jsxs)("div",{className:"image-preview-container",children:[e.type.startsWith("image/")?(0,a.jsx)("img",{src:URL.createObjectURL(e),alt:"Selected Image",className:"image-preview"}):e.type.startsWith("video/")?(0,a.jsx)("video",{src:URL.createObjectURL(e),alt:"Selected Video",className:"image-preview",controls:!1,muted:!0,preload:"metadata"}):null,(0,a.jsx)(ht,{variant:"danger",onClick:()=>(e=>{d((t=>t.splice(e))),m(0)})(t),className:"remove-image-button",children:"\xd7"})]},t))),(0,a.jsx)("input",{type:"file",multiple:!0,accept:"image/*,video/*",onChange:e=>{const t=Array.from(e.target.files).filter((e=>["image/jpeg","image/png","image/gif","video/mp4","video/webm","video/ogg","video/mov"].includes(e.type)));d(t)},className:"file-input",style:{display:"none"},id:"file-upload",disabled:w}),(0,a.jsx)("label",{htmlFor:"file-upload",className:"file-upload-label",children:(0,a.jsx)("i",{className:"bi bi-paperclip"})})]}),(0,a.jsx)(ht,{variant:"primary",type:"submit",className:"send-button",disabled:w,children:(0,a.jsx)("i",{className:"bi bi-send"})})]})}),(0,a.jsx)(Nw,{show:_,handleClose:()=>b(!1),uid:r,friendId:s.id})]})})},jw=e.forwardRef(((e,t)=>{let{bsPrefix:n,active:r,disabled:i,eventKey:o,className:l,variant:c,action:u,as:d,...f}=e;n=h(n,"list-group-item");const[p,m]=eh({key:Qd(o,f.href),active:r,...f}),g=J((e=>{if(i)return e.preventDefault(),void e.stopPropagation();p.onClick(e)}));i&&void 0===f.tabIndex&&(f.tabIndex=-1,f["aria-disabled"]=!0);const v=d||(u?f.href?"a":"button":"div");return(0,a.jsx)(v,{ref:t,...f,...p,onClick:g,className:s()(l,n,m.isActive&&"active",i&&"disabled",c&&`${n}-${c}`,u&&`${n}-action`)})}));jw.displayName="ListGroupItem";const Rw=jw,Ow=e.forwardRef(((e,t)=>{const{className:n,bsPrefix:r,variant:i,horizontal:o,numbered:l,as:c="div",...u}=ye(e,{activeKey:"onSelect"}),d=h(r,"list-group");let f;return o&&(f=!0===o?"horizontal":`horizontal-${o}`),(0,a.jsx)(oh,{ref:t,...u,as:c,className:s()(n,d,i&&`${d}-${i}`,f&&`${d}-${f}`,l&&`${d}-numbered`)})}));Ow.displayName="ListGroup";const Dw=Object.assign(Ow,{Item:Rw}),Lw=e=>{let{chat:t}=e;const n=t.isGroupChat?t.id:t.chatWith;let r="/images/defaultProfile.png";return t&&(r=t.profilePhoto?t.profilePhoto:t.isGroupChat?"/images/defaultGroup.png":"/images/defaultProfile.png"),(0,a.jsx)(Dn,{to:`/messages/${n}`,className:"chat-link",children:(0,a.jsxs)(Dw.Item,{className:"chat-list-item",children:[(0,a.jsxs)(_,{children:[(0,a.jsx)(w,{xs:2,className:"text-center",children:(0,a.jsx)("img",{src:r,alt:t.name,className:"chat-profile-pic"})}),(0,a.jsxs)(w,{xs:8,children:[(0,a.jsx)("strong",{className:"chat-name",children:t.name}),(0,a.jsx)("br",{}),(0,a.jsxs)("span",{className:"chat-preview",children:["image"===t.lastMessageType?(0,a.jsx)("span",{className:"message-icon",children:"\ud83d\uddbc\ufe0f"}):"video"===t.lastMessageType?(0,a.jsx)("span",{className:"message-icon",children:"\ud83c\udfa5"}):null,t.lastMessage]})]})]}),(0,a.jsx)(w,{className:"text-right",children:(0,a.jsx)("span",{className:"chat-time",children:new Date(t.lastMessageTimestamp).toLocaleString()})})]},t.id)},t.id)},Mw=t=>{var n;let{uid:r,show:i,onClose:s,friendsList:o,groupDetails:l}=t;l&&(l.isGroupChat||(l=null));const[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(""),[f,p]=(0,e.useState)(""),[m,g]=(0,e.useState)([]),v=(null===(n=l)||void 0===n?void 0:n.createdBy)===r;(0,e.useEffect)((()=>{l?(h(l.profilePhoto),p(l.name),g(Object.keys(l.members||{}))):(h(),p(),g([]))}),[l]);return(0,a.jsxs)(Gd,{show:i,onHide:s,centered:!0,children:[(0,a.jsxs)(Gd.Header,{className:"d-flex justify-content-between",children:[(0,a.jsx)(ht,{variant:"close",onClick:s,className:"m-0"}),(v||!l)&&(0,a.jsx)(ht,{variant:"primary",onClick:async()=>{await(async e=>{let{groupName:t,selectedFriends:n,groupIcon:r,groupIconUrl:i,uid:s,groupDetails:a,onClose:o}=e;if(!(n.length<1))try{let e=i;r&&(e=(await I_([r],"GroupIcons",t))[0]);const l=Uu();let c=a?a.id:null;if(!a){const e=Tu(Eu(l,"Group"));c=e.key}const u={groupName:t,groupIcon:e,members:{[s]:!0,...n.reduce(((e,t)=>(e[t]=!0,e)),{})},createdBy:a?a.createdBy:s,createdAt:a?a.date:Date.now(),id:a?a.createdBy:c},d=`Groups/${c}`;await zu(d,u);const h=a?[...Object.keys(a.members),...n,s]:[...n,s];await Promise.all(h.map((async e=>{const t={lastMessage:"Group updated",lastMessageTimestamp:Date.now(),isGroupChat:!0,chatWith:c,id:c};await zu(`UserChats/${e}/${c}`,t)}))),o()}catch(ws){console.error("Error updating group:",ws)}})({groupName:f,selectedFriends:m,groupIcon:c,groupIconUrl:d,uid:r,groupDetails:l,onClose:s})},className:"ms-auto",children:"Save"})]}),(0,a.jsxs)(Gd.Body,{className:"text-center",children:[(0,a.jsx)("div",{className:"d-flex justify-content-center mb-4 position-relative",children:(0,a.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,a.jsx)(Q,{src:d||"/images/defaultGroup.png",roundedCircle:!0,style:{height:"100px",width:"100px",marginRight:"20px",position:"relative"},alt:"Group Icon"}),(v||!l)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){u(t);const e=URL.createObjectURL(t);h(e)}},style:{display:"none"},id:"group-icon-upload"}),(0,a.jsx)("label",{htmlFor:"group-icon-upload",className:"d-flex align-items-center justify-content-center",style:{cursor:"pointer",backgroundColor:"rgba(255, 255, 255, 0.7)",borderRadius:"50%",padding:"10px",width:"40px",height:"40px",position:"absolute",top:"50%",left:"50%",transform:"translate(-75%, -50%)"},children:(0,a.jsx)("i",{className:"bi bi-camera",style:{fontSize:"1.5rem"}})})]})]})}),(0,a.jsxs)(Vh.Group,{controlId:"groupNameInput",className:"mb-3 text-start",children:[(0,a.jsx)(Vh.Label,{children:"Group Name"}),(0,a.jsx)(Vh.Control,{type:"text",placeholder:"Enter group name",value:f,onChange:e=>p(e.target.value),disabled:!v&&l})]}),(0,a.jsxs)(Vh.Group,{controlId:"friendSearchInput",className:"mb-3 text-start",children:[(0,a.jsx)(Vh.Label,{children:v||!l?"Add Friends":"Members"}),(0,a.jsx)(xw,{children:(0,a.jsx)(Vh.Control,{type:"text",placeholder:"Search friends"})})]}),(0,a.jsx)("div",{className:"friend-list",children:o.map((e=>{const t=m.includes(e.id);return(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)(Q,{src:e.profilePhoto||"/images/defaultGroup.png",roundedCircle:!0,style:{height:"40px",width:"40px",marginRight:"10px"}}),(0,a.jsx)("span",{children:e.name})]}),(v||!l)&&(0,a.jsx)(ht,{variant:t?"danger":"success",onClick:()=>{return t=e.id,void g((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t]));var t},children:t?"Remove":"Add"})]},e.id)}))})]})]})},Aw=t=>{let{show:n,handleClose:r,friendsList:i}=t;const[s,o]=(0,e.useState)(""),[l,c]=(0,e.useState)(i);return(0,e.useEffect)((()=>{const e=i.filter((e=>e.name.toLowerCase().includes(s.toLowerCase())));c(e)}),[s,i]),(0,a.jsxs)(Gd,{show:n,onHide:r,centered:!0,children:[(0,a.jsx)(Gd.Header,{closeButton:!0,className:"d-flex justify-content-between",children:(0,a.jsx)(Gd.Title,{children:"NewChat"})}),(0,a.jsxs)(Gd.Body,{children:[(0,a.jsx)(xw,{className:"mb-3",children:(0,a.jsx)(Vh.Control,{type:"text",placeholder:"Search friends...",value:s,onChange:e=>o(e.target.value)})}),(0,a.jsx)(Dw,{variant:"flush",children:l.map((e=>(0,a.jsxs)(Dw.Item,{className:"d-flex align-items-center",children:[(0,a.jsx)("img",{src:e.profilePhoto||"/images/defaultProfile.png",alt:e.name,className:"rounded-circle",style:{width:"40px",height:"40px",marginRight:"10px"}}),(0,a.jsx)(Dn,{to:`/messages/${e.id}`,className:"text-decoration-none",children:e.name})]},e.id)))})]})]})},Fw=()=>{const{userId:t}=cn(),[n,r]=(0,e.useState)(""),[i,s]=(0,e.useState)([]),[o,l]=(0,e.useState)(null),[c,u]=(0,e.useState)([]),{uid:d,loggedIn:h,isPending:f}=N_(),[p,m]=(0,e.useState)(null),[g,y]=(0,e.useState)([]),[b,x]=(0,e.useState)(!1),[k,C]=(0,e.useState)(!1),[E,S]=(0,e.useState)(!1),[I,T]=(0,e.useState)(!1),N=()=>x(!0),P=()=>C(!0),j=async(e,t,n)=>{const r=e?`Groups/${t}`:`UsersDetails/${n}`,i=await D_(r);return i?{name:e?i.groupName:i.name,profilePhoto:e?i.groupIcon:i.profilePhoto,date:i.createdAt||i.date,id:i.id,...e&&{members:i.members,createdBy:i.createdBy},isGroupChat:e}:null};return(0,e.useEffect)((()=>{const e=M_(`UserChats/${d}`,(async e=>{if(e){const n=(await Promise.all(Object.keys(e).map((async t=>{const{chatWith:n,isGroupChat:r}=e[t],i={...e[t]},s=await j(r,e[t].id,n);return s?{...i,name:s.name,profilePhoto:s.profilePhoto}:i})))).sort(((e,t)=>t.lastMessageTimestamp-e.lastMessageTimestamp));s(n),t&&e[t]&&l(e[t].id)}}));return()=>e()}),[d,t]),(0,e.useEffect)((()=>{d&&(async()=>{y(await(async e=>{const t=await D_(`friend/${e}/Friends`);return t?(await Promise.all(Object.keys(t).map((async e=>{const t=await D_(`UsersDetails/${e}`);return t?{id:e,name:t.name,profilePhoto:t.profilePhoto}:null})))).filter(Boolean):[]})(d))})()}),[d]),(0,e.useEffect)((()=>{if(!o)return;const e=M_(`Messages/${o}`,(async e=>{if(!e)return u([]);const t=await D_(`UserChats/${d}/${o}`),n=(null===t||void 0===t?void 0:t.isGroupChat)||!1,r=await Promise.all(Object.keys(e).map((async t=>{const r={id:t,...e[t]};if(n){const e=await D_(`UsersDetails/${r.sender}`);e&&(r.senderName=e.name,r.senderProfilePhoto=e.profilePhoto||"/images/defaultProfile.png")}return r})));u(r)}));return()=>e()}),[o]),(0,e.useEffect)((()=>{if(!t||!o)return;const e=M_(`UserChats/${d}/${t}`,(async e=>{if(e){const n=await j(e.isGroupChat,o,t);m(n||null)}}));return()=>e()}),[t,o]),(0,e.useEffect)((()=>{f||h||S(!0)}),[f]),(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[(0,a.jsx)(F_,{uid:d,loggedIn:h}),(0,a.jsxs)(w,{md:10,lg:4,className:`d-flex flex-column vh-100 pb-5 pb-lg-0 ${t?"d-none d-lg-flex":""} `,children:[(0,a.jsxs)(Qb,{bg:"light",className:"justify-content-between",children:[(0,a.jsx)(Qb.Brand,{children:"Messages"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{className:"btn btn-outline-secondary me-2",title:"Create New Group",onClick:N,children:(0,a.jsx)("i",{className:"bi bi-people-fill"})}),(0,a.jsx)("button",{className:"btn btn-outline-secondary",title:"Start New Chat",onClick:P,children:(0,a.jsx)("i",{className:"bi bi-chat-dots-fill"})})]})]}),(0,a.jsx)(xw,{className:"mb-3",children:(0,a.jsx)(Vh.Control,{placeholder:"Search friends or groups",value:n,onChange:e=>r(e.target.value)})}),(0,a.jsx)("div",{className:"overflow-auto",style:{maxHeight:"calc(100vh - 120px)"},children:i.filter((e=>e.name.toLowerCase().includes(n.toLowerCase()))).map(((e,t)=>(0,a.jsx)(Lw,{chat:e},t)))})]}),(0,a.jsx)(w,{lg:6,className:"d-none d-lg-flex bg-light vh-100 justify-content-center align-items-center",children:t?(0,a.jsx)(Pw,{chatId:o,uid:d,messages:c,recipientDetails:p,handleGroupModalOpen:N}):(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h5",{children:"Select a new message"}),(0,a.jsx)(ht,{variant:"primary",onClick:P,children:"Start a new chat"})]})}),t&&(0,a.jsx)(w,{xs:12,className:"d-lg-none ",children:(0,a.jsx)(Pw,{chatId:o,uid:d,messages:c,recipientDetails:p,handleGroupModalOpen:N})}),(0,a.jsx)(Mw,{uid:d,show:b,onClose:()=>x(!1),friendsList:g,groupDetails:t?p:null,userId:t}),(0,a.jsx)(Aw,{friendsList:g,show:k,handleClose:()=>C(!1),purpose:"NewChat"}),(0,a.jsx)(S_,{show:E,handleClose:()=>S(!1),handleProfileEdit:()=>T(!0),returnOnClose:!0}),(0,a.jsx)(O_,{show:I,handleClose:()=>T(!1)})]})}),(0,a.jsx)(Xb,{uid:d})]})},$w=t=>{let{}=t;const[n,r]=(0,e.useState)("Activities"),[i,s]=(0,e.useState)([]),[o,l]=(0,e.useState)([]),[c,u]=(0,e.useState)({}),{uid:d,loggedIn:h,isPending:f}=N_(),[p,m]=(0,e.useState)(!1),[g,y]=(0,e.useState)(!1);(0,e.useEffect)((()=>{d&&(async e=>{try{const t=await A_(e);u(t)}catch(ws){console.error("Error fetching notifications:",ws)}})(d)}),[d]),(0,e.useEffect)((()=>{f||h||m(!0)}),[f]),(0,e.useEffect)((()=>{const e=async e=>{const t=await D_(`UsersDetails/${e}`);return{uid:e,name:null===t||void 0===t?void 0:t.name,profilePhoto:null===t||void 0===t?void 0:t.profilePhoto}};(async()=>{if(null===c||void 0===c||!c.Friendrequest)return;const t=await Promise.all(Object.values(c.Friendrequest).map((t=>e(t.uid).then((e=>({...t,...e}))))));l(t)})(),(async()=>{if(null===c||void 0===c||!c.Activities)return;const t=await Promise.all(Object.entries(c.Activities).map((async t=>{let[n,r]=t;return{postId:n,comments:r.comments?await Promise.all(r.comments.map((async t=>{const n=await e(t.uid);return{...t,user:n}}))):[],likes:r.likes?await Promise.all(r.likes.map((async t=>{const n=await e(t.uid);return{...t,user:n}}))):[],reposts:r.reposts?await Promise.all(r.reposts.map((async t=>{const n=await e(t.uid);return{...t,user:n}}))):[]}})));s(t)})()}),[c]);return(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[(0,a.jsx)(F_,{loggedIn:h,uid:d}),(0,a.jsx)(w,{md:7,className:" mx-auto px-0 px-md-3 vh-100 pb-5 pb-md-0",style:{overflowY:"auto"},children:(0,a.jsxs)(fb.Container,{defaultActiveKey:"Activities",children:[(0,a.jsxs)(mh,{variant:"tabs",className:"d-flex justify-content-between",children:[(0,a.jsx)(mh.Item,{className:"flex-fill text-center",children:(0,a.jsx)(mh.Link,{eventKey:"Activities",children:"Activities"})}),(0,a.jsx)(mh.Item,{className:"flex-fill text-center",children:(0,a.jsx)(mh.Link,{eventKey:"FriendRequests",children:"FriendRequests"})})]}),(0,a.jsxs)(fb.Content,{className:"mt-4",children:[(0,a.jsx)(fb.Pane,{eventKey:"Activities",children:(()=>{const e=(e=>e.reduce(((e,t)=>([...t.comments.map((e=>({type:"comment",...e,postId:t.postId}))),...t.likes.map((e=>({type:"like",...e,postId:t.postId}))),...t.reposts.map((e=>({type:"repost",...e,postId:t.postId})))].forEach((t=>{const n=new Date(t.date).toLocaleDateString();e[n]||(e[n]={});const r=`${t.postId}-${t.type}`;e[n][r]||(e[n][r]={activities:[],lastUser:null,lastActivityTime:t.date,count:0}),e[n][r].activities.push(t),e[n][r].lastUser=t.user,e[n][r].lastActivityTime=t.date,e[n][r].count++})),e)),{}))(i);return Object.keys(e).sort(((e,t)=>new Date(t)-new Date(e))).map((t=>{const n=e[t],r=Object.values(n).sort(((e,t)=>t.lastActivityTime-e.lastActivityTime));return(0,a.jsxs)("div",{children:[(0,a.jsx)("h6",{className:"text-muted",children:t}),r.map((e=>{const{activities:t,lastUser:n,count:r}=e;let i="";switch(t[0].type){case"comment":i=1===r?`${n.name} commented on your post.`:`${n.name} and ${r-1} others commented on your post.`;break;case"like":i=1===r?`${n.name} liked your post.`:`${n.name} and ${r-1} others liked your post.`;break;case"repost":i=1===r?`${n.name} reposted your post.`:`${n.name} and ${r-1} others reposted your post.`}return(0,a.jsx)(V,{className:"mb-3",children:(0,a.jsxs)(V.Body,{className:"d-flex align-items-center",children:[(0,a.jsx)(Dn,{to:`/${n.uid}/${t[0].postId}`,children:(0,a.jsx)(Q,{src:n.profilePhoto||"/images/defaultProfile.png",roundedCircle:!0,width:"50",height:"50",alt:`${n.name}'s profile`,className:"me-3"})}),(0,a.jsx)(Dn,{to:`/${n.uid}/${t[0].postId}`,children:(0,a.jsx)(V.Text,{children:i})})]})},e.lastActivityTime)}))]},t)}))})()}),(0,a.jsx)(fb.Pane,{eventKey:"FriendRequests",children:(0,a.jsx)(_,{xs:1,sm:2,md:2,className:"g-3",children:o.map(((e,t)=>(0,a.jsx)(w,{children:(0,a.jsx)(lw,{user:e,currentUser:d})},t)))})})]})]})}),(0,a.jsx)(ew,{}),(0,a.jsx)(S_,{show:p,handleClose:()=>m(!1),handleProfileEdit:()=>y(!0),returnOnClose:!0}),(0,a.jsx)(O_,{show:g,handleClose:()=>y(!1)})]})}),(0,a.jsx)(Xb,{uid:d})]})};let Uw;const zw={RUNNING:0,GAMEOVER:1,STARTED:2,MENU:3};class Bw{constructor(e){this.gameManager=e,this.gamestate=zw.MENU,this.gameMode=null,this.room="",this.displayText=""}restart(){if(![zw.GAMEOVER,zw.MENU].includes(this.gamestate))return;var e,t;document.getElementById("displayText").innerText=3,e=3,t=this.gameManager,Uw=setInterval((()=>{--e>0&&(document.getElementById("displayText").innerText=e),0===e&&(clearInterval(Uw),t.gameControl.gamestate=zw.RUNNING,document.getElementById("displayText").style.display="none",document.getElementById("displayText").style.backgroundColor="transparent")}),1e3),this.gameManager.Pieces.Restart(),this.gameManager.playerTurn="Player1",this.gamestate=zw.STARTED,Ww(this.gameManager,this.playerId)}}const Ww=(e,t)=>{var n;const r=null===e||void 0===e||null===(n=e.gameControl)||void 0===n?void 0:n.room;M_(`Games/Chess/${r}/players`,(function(){var n;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((null===e||void 0===e||null===(n=e.gameControl)||void 0===n?void 0:n.gamestate)===zw.RUNNING)for(const i of Object.values(r))if(i.id!==t&&i.player===(null===e||void 0===e?void 0:e.playerTurn)){const t=e.Pieces.playerPieces[i.player],n=i.pieces.findIndex(((e,n)=>e.row!==t[n].row||e.column!==t[n].column));if(-1!==n){const t=i.pieces[n].row,r=i.pieces[n].column;e.Pieces.movePiece(n,t,r);break}}}))};class Hw{constructor(e){this.GameManager=e,this.ctx=e.ctx,this.lightImage=new Image,this.darkImage=new Image,this.highlightedImage=new Image,this.lightImage.src="/assets/Chess/square brown light_2x.png",this.darkImage.src="/assets/Chess/square brown dark_2x.png",this.highlightedImage.src="/assets/Chess/square gray light _2x.png",this.tiles=[];for(let t=0;t<8;t++)for(let e=0;e<8;e++)this.tiles.push({row:t,column:e,highlighted:!1,check:!1})}animate(){const e=this.GameManager.gameDimensions;this.ctx.fillStyle="#eee",this.ctx.fillRect(0,0,e,e);const t=(e-10)/8;this.tiles.forEach((e=>{let n=(e.row+e.column)%2===0?this.lightImage:this.darkImage;if(this.ctx.drawImage(n,e.column*t+5,e.row*t+5,t,t),e.highlighted||e.check){const n=this.ctx.getImageData(e.column*t+5,e.row*t+5,t,t),r=n.data;for(let t=0;t<r.length;t+=4)if(e.check)r[t]=255,r[t+1]=0,r[t+2]=0;else{const e=(r[t]+r[t+1]+r[t+2])/3;r[t]=e,r[t+1]=e,r[t+2]=e}this.ctx.putImageData(n,e.column*t+5,e.row*t+5)}}))}}let qw;const Vw=(e,t,n,r,i)=>{switch(n){case"Rook":return Yw(e,t,[[-1,0],[1,0],[0,-1],[0,1]]);case"Bishop":return Yw(e,t,[[-1,-1],[-1,1],[1,-1],[1,1]]);case"Pawn":return Xw(e,t,r,i);case"Knight":return Jw(e,t,r,i);case"Queen":return Yw(e,t,[[-1,0],[1,0],[0,-1],[0,1],[-1,-1],[-1,1],[1,-1],[1,1]]);case"King":return Yw(e,t,[[-1,0],[1,0],[0,-1],[0,1],[-1,-1],[-1,1],[1,-1],[1,1]],1);default:return[]}},Gw=(e,t,n,r)=>{0===r.length&&t.playerPieces[n].forEach((e=>e.selected=!1)),r.forEach((t=>{const n=e.findIndex((e=>e.row===t.row&&e.column===t.column));-1!==n&&(e[n].highlighted=!0)}))},Kw=(e,t,n,r)=>{r.forEach((r=>{if(t.playerPieces[n].some((e=>e.row===r.row&&e.column===r.column&&"King"===e.piece))){const t=e.findIndex((e=>e.row===r.row&&e.column===r.column));-1!==t&&(e[t].check=!0,e[t].highlighted=!1)}}))},Yw=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;const i=[],{Pieces:s,playerTurn:a}=qw,o=s.playerPieces[a],l=s.playerPieces["Player1"===a?"Player2":"Player1"];return n.forEach((n=>{let a=e,c=t,u=!1;for(let e=0;e<r&&(a+=n[0],c+=n[1],ex(a,c,o));e++){const e=Qw(a,c,s);if(e){if(l.includes(e)&&("Pawn"!==e.piece||0!==n[0])){i.push({row:a,column:c}),u=!0;break}break}i.push({row:a,column:c})}})),i},Qw=(e,t,n)=>Object.values(n.playerPieces).flat().find((n=>n.row===e&&n.column===t&&n.visible))||null,Xw=(e,t,n,r)=>{const i="Player1"===n?-1:1,s=r.playerPieces[n].some((n=>n.row===e&&n.column===t&&n.moved))?1:2;return[...Yw(e,t,[[i,0]],s),...[[i,-1],[i,1]].filter((i=>Zw(e+i[0],t+i[1],r,n))).map((n=>({row:e+n[0],column:t+n[1]})))]},Jw=(e,t,n,r)=>[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]].filter((i=>ex(e+i[0],t+i[1],r.playerPieces[n]))).map((n=>({row:e+n[0],column:t+n[1]}))),Zw=(e,t,n,r)=>n.playerPieces["Player1"===r?"Player2":"Player1"].includes(Qw(e,t,n)),ex=(e,t,n)=>e>=0&&e<8&&t>=0&&t<8&&!n.some((n=>n.row===e&&n.column===t&&n.visible)),tx=e=>{const{GameBody:t,Pieces:n,playerTurn:r}=e,i=t.tiles,s=n;qw=e,i.forEach((e=>e.highlighted=!1));const a="Player1"===r?"Player2":"Player1";Object.keys(s.playerPieces).forEach((e=>{s.playerPieces[e].forEach((t=>{const{row:n,column:o,piece:l,selected:c}=t,u=Vw(n,o,l,r,s);c?Gw(i,s,r,u):e===a&&Kw(i,s,r,u)}))}))};class nx{constructor(e){this.canvas=e.canvas,this.gameDimensions=e.gameDimensions,this.gameManager=e,this.clickX=0,this.clickY=0,this.canvas.addEventListener("mousedown",(e=>this.handleMouseDown(e)))}handleMouseDown(e){const t=this.gameManager.gameControl.gamestate,n=this.gameManager.player,r=this.gameManager.playerTurn;if(t===zw.RUNNING&&n===r){const t=e.offsetX,n=e.offsetY;this.clickX=t,this.clickY=n;const r=this.gameManager.GameBody.tiles,i=this.gameManager.Pieces.playerPieces;r.every((e=>!e.highlighted))?this.selectPiece(i):this.movePiece(i,r)}}selectPiece(e){e[this.gameManager.playerTurn].forEach((e=>{const t=this.gameDimensions/8-4;if(e.visible){const n=e.column*(this.gameDimensions/8)+5,r=e.row*(this.gameDimensions/8)+5;this.isclickInsidePiece(n,r,t)&&(e.selected=!0)}}))}movePiece(e,t){const n=this.gameManager.playerTurn,r=(this.gameDimensions-10)/8,i=e[n].findIndex((e=>e.selected));if(i>=0){const s=e[n][i],a=t.find((e=>this.isclickInsideTile(e,r)));a&&a.highlighted?this.gameManager.Pieces.movePiece(i,a.row,a.column):s.selected=!1}}isclickInsidePiece(e,t,n){return this.clickX>=e&&this.clickX<=e+n&&this.clickY>=t&&this.clickY<=t+n}isclickInsideTile(e,t){const n=e.column*(this.gameDimensions/8)+5,r=e.row*(this.gameDimensions/8)+5;return this.clickX>=n&&this.clickX<=n+t&&this.clickY>=r&&this.clickY<=r+t}}const rx={Player1:{Rook:new Image,Knight:new Image,Bishop:new Image,Queen:new Image,King:new Image,Pawn:new Image},Player2:{Rook:new Image,Knight:new Image,Bishop:new Image,Queen:new Image,King:new Image,Pawn:new Image}};rx.Player1.Bishop.src="./assets/Chess/b_bishop_1x.png",rx.Player1.King.src="./assets/Chess/b_king_1x.png",rx.Player1.Knight.src="./assets/Chess/b_knight_1x.png",rx.Player1.Pawn.src="./assets/Chess/b_pawn_1x.png",rx.Player1.Queen.src="./assets/Chess/b_queen_1x.png",rx.Player1.Rook.src="./assets/Chess/b_rook_1x.png",rx.Player2.Bishop.src="./assets/Chess/w_bishop_1x.png",rx.Player2.King.src="./assets/Chess/w_king_1x.png",rx.Player2.Knight.src="./assets/Chess//w_knight_1x.png",rx.Player2.Pawn.src="./assets/Chess/w_Pawn_1x.png",rx.Player2.Queen.src="./assets/Chess/w_queen_1x.png",rx.Player2.Rook.src="./assets/Chess/w_rook_1x.png";class ix{constructor(e){this.gameManager=e,this.ctx=e.ctx,this.pieceImages=rx,this.selectedPiece=null,this.Restart()}animate(){const e=this.gameManager.gameDimensions,t=e/8-4;Object.keys(this.playerPieces).forEach((n=>{this.playerPieces[n].forEach((r=>{r.visible&&this.ctx.drawImage(this.pieceImages[n][r.piece],r.column*(e/8)+5,r.row*(e/8)+5,t,t)}))}))}Restart(){const e=["Rook","Knight","Bishop","Queen","King","Bishop","Knight","Rook"];this.playerPieces={Player1:[],Player2:[]};for(let t=0;t<8;t++)for(let n=0;n<8;n++)switch(t){case 0:this.playerPieces.Player2.push({row:t,column:n,piece:e[n],visible:!0,selected:!1});break;case 7:this.playerPieces.Player1.push({row:t,column:n,piece:e[n],visible:!0,selected:!1});break;case 1:this.playerPieces.Player2.push({row:t,column:n,piece:"Pawn",visible:!0,moved:!1,selected:!1});break;case 6:this.playerPieces.Player1.push({row:t,column:n,piece:"Pawn",visible:!0,selected:!1})}}movePiece(e,t,n){this.gameManager.GameBody.tiles.forEach((e=>{e.highlighted&&(e.highlighted=!1),e.check&&(e.check=!1)}));const r=this.gameManager.playerTurn;if(this.playerPieces[r][e].row=t,this.playerPieces[r][e].column=n,this.playerPieces[r][e].selected=!1,"Pawn"===this.playerPieces[r][e].piece&&(this.playerPieces[r][e].moved=!0),this.gameManager.playerTurn="Player1"===r?"Player2":"Player1","local"===this.gameManager.gameControl.gameMode)this.gameManager.player="Player1"===r?"Player2":"Player1";else if(this.gameManager.player===r){const e=this.gameManager.gameControl.room,t=this.gameManager.gameControl.playerId;zu(`Games/Chess/${e}/players/${t}/`,{pieces:this.playerPieces[r]})}const i="Player1"===r?"Player2":"Player1",s=this.playerPieces[i],a=s.findIndex((e=>e.row===t&&e.column===n));if(a>=0){this.playerPieces[i][a].visible=!1;if("King"===s[a].piece)return document.getElementById("displayText").innerText=r+"wins",document.getElementById("displayText").style.display="flex",void setTimeout((()=>{this.gameManager.gameControl.gamestate=zw.GAMEOVER,this.gameManager.gameControl.restart()}),3e3)}}}class sx{constructor(e,t,n){this.ctx=e,this.canvas=t,this.gameDimensions=n,this.GameBody=new Hw(this),this.Pieces=new ix(this),this.mouseListener=new nx(this),this.gameControl=new Bw(this),this.playerTurn="Player1"}animate(){this.ctx.clearRect(0,0,this.gameDimensions,this.gameDimensions),this.GameBody.animate(),this.gameControl.gamestate===zw.RUNNING&&(this.Pieces.animate(),this.GameBody&&tx(this))}}const ax=async(e,t,n,r,i)=>{const s=await D_(`Games/${r}/${t}`);let a=[];s&&(a=Object.keys(s.players));const o={online:!0,pieces:n.current.Pieces.playerPieces[s.players[e].player]};if(a.includes(e)){const i=`Games/${r}/${t}/players/${e}`;await zu(i,o),n.current.player=s.players[e].player,n.current.gameControl.playerId=e,n.current.gameControl.room=t}Iu(Eu(b_,`Games/${r}/${t}/players/${e}`)).update({online:!1});const l=await M_(`Games/${r}/${t}/players`,(e=>{i(Object.values(e).every((e=>e.online)))}));return l},ox={body:{width:"100%",height:"100vh",backgroundColor:"#7c4c3e",display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",fontFamily:"CustomFont, sans-serif",position:"relative"},menu:{display:"flex",alignItems:"center",flexDirection:"column"},optionsBody:{display:"flex"},fullscreen:{position:"absolute",bottom:"10px",right:"10px",fontSize:"24px",cursor:"pointer",zIndex:1e3,color:"grey"},roomName:{fontSize:"2vmax",marginBottom:"0.5vmax",display:"block",fontStyle:"inherit"},options:{fontSize:"1.2vmax",fontFamily:"CustomFont, sans-serif"},displayText:{position:"absolute",color:"white",alignItems:"center",justifyContent:"center",top:0,left:0,right:0,bottom:0,display:"flex"},parent:{position:"relative",display:"inline-block"}},lx=()=>{const t=(0,e.useRef)(null),n=(0,e.useRef)(null),r=(0,e.useRef)(null),[i,s]=(0,e.useState)(null),{uid:o,loggedIn:l}=N_(),{roomKey:c}=cn(),[u,d]=(0,e.useState)(!1),[h,f]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{u&&n.current.gameControl.restart()}),[u]),(0,e.useEffect)((()=>{const e=new FontFace("CustomFont","url(/assets/Chess/PressStart2P-Regular.ttf)"),n=(t.current,()=>{if(!r.current)return;const e=r.current.offsetWidth,t=r.current.offsetHeight;let n=e-10;t-30<n&&(n=t-40),s(n)});return e.load().then((()=>{document.fonts.add(e),n()})),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}}),[]),(0,e.useEffect)((()=>{if(i&&t.current){const e=t.current;e.width=i,e.height=i;const r=e.getContext("2d");n.current||(n.current=new sx(r,e,i));const s=()=>{n.current&&n.current.animate(),requestAnimationFrame(s)};if(s(),c&&o&&n.current){let e=null;return ax(o,c,n,"Chess",d).then((t=>e=t)),()=>{if(e&&e(),o&&c){zu(`Games/Chess/${c}/players/${o}`,{option:!1})}}}return()=>{cancelAnimationFrame(s)}}}),[i,c,o]),(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[!h&&(0,a.jsx)(F_,{loggedIn:l,uid:o}),(0,a.jsx)(w,{md:h?12:7,className:" mx-auto px-0 vh-100 "+(h?"":"pb-md-0 px-md-3 pb-5"),style:{overflowY:"auto"},children:(0,a.jsxs)("div",{style:ox.body,ref:r,children:[(0,a.jsxs)("div",{style:ox.parent,children:[(0,a.jsx)("div",{id:"displayText",style:ox.displayText}),(0,a.jsx)("canvas",{ref:t,id:"gameScreen"})]}),(0,a.jsx)("i",{className:`bi ${h?"bi-fullscreen-exit":"bi-fullscreen"} `,style:ox.fullscreen,onClick:()=>{f((e=>!e))}})]})}),!h&&(0,a.jsx)(ew,{})]})}),!h&&(0,a.jsx)(Xb,{uid:o})]})};class cx{constructor(e){this.GameManager=e}animate(){const e=this.GameManager.gameWidth,t=this.GameManager.gameHeight;this.GameManager.ctx.fillStyle="#0d6efd",this.GameManager.ctx.fillRect(0,0,e,t),this.GameManager.ctx.fillStyle="#eee",this.GameManager.ctx.fillRect(5,5,e-10,t-10),this.GameManager.ctx.fillStyle="#0d6efd",this.GameManager.ctx.fillRect((e-10)/4+5,0,(e-10)/4*3+5,(t-10)/7+5)}}class ux{constructor(e){this.canvas=e.canvas,this.gameManager=e;var t=0,n=0;this.canvas.addEventListener("mousedown",(e=>{if(this.gameManager.Tiles){const r=e.offsetX,i=e.offsetY;this.gameManager.Tiles.tileData.forEach((e=>{n=i,(t=r)>=e.position.x&&t<=e.position.x+e.width&&n>=e.position.y&&n<=e.position.y+e.height&&(e.selected=!0,e.dragOffset.x=t-e.position.x,e.dragOffset.y=n-e.position.y)}))}})),this.canvas.addEventListener("mousemove",(e=>{if(this.gameManager.Tiles){const r=this.gameManager.Tiles.tileData.find((e=>e.selected));if(void 0!==r){const i=this.gameManager.Tiles.tileData.indexOf(r),s=e.offsetX,a=e.offsetY,o=s-t,l=a-n;Math.abs(o)>Math.abs(l)?o<0?this.gameManager.Tiles.moveSelectedTile("left",i):o>0&&this.gameManager.Tiles.moveSelectedTile("right",i):Math.abs(l)>Math.abs(o)&&(l<0?this.gameManager.Tiles.moveSelectedTile("up",i):l>0&&this.gameManager.Tiles.moveSelectedTile("down",i)),t=s,n=a}}})),this.canvas.addEventListener("mouseup",(e=>{if(this.gameManager.Tiles){if(void 0!==this.gameManager.Tiles.tileData.find((e=>e.selected))){t=0,n=0;const e=this.gameManager.Tiles.tileData.find((e=>e.selected)),r=this.gameManager.Tiles.tileData.indexOf(e);this.gameManager.Tiles.tileData[r].selected=!1}}}))}}class dx{constructor(e){this.canvas=e.canvas,this.gameManager=e;var t=0,n=0;this.canvas.addEventListener("touchstart",(e=>{if(this.gameManager.Tiles){const r=e.touches[0].clientX,i=e.touches[0].clientY;this.gameManager.Tiles.tileData.forEach((e=>{const s=this.canvas.getBoundingClientRect();t=r-s.left,n=i-s.top,t>=e.position.x&&t<=e.position.x+e.width&&n>=e.position.y&&n<=e.position.y+e.height&&(e.selected=!0,e.dragOffset.x=t-e.position.x,e.dragOffset.y=n-e.position.y)}))}})),this.canvas.addEventListener("touchmove",(e=>{if(this.gameManager.Tiles){const r=e.touches[0].clientX,i=e.touches[0].clientY,s=this.canvas.getBoundingClientRect(),a=this.gameManager.Tiles.tileData.find((e=>e.selected)),o=this.gameManager.Tiles.tileData.indexOf(a),l=r-s.left,c=i-s.top,u=l-t,d=c-n;Math.abs(u)>Math.abs(d)?u<0?this.gameManager.Tiles.moveSelectedTile("left",o):u>0&&this.gameManager.Tiles.moveSelectedTile("right",o):Math.abs(d)>Math.abs(u)&&(d<0?this.gameManager.Tiles.moveSelectedTile("up",o):d>0&&this.gameManager.Tiles.moveSelectedTile("down",o)),t=l,n=c}})),this.canvas.addEventListener("touchend",(e=>{if(this.gameManager.Tiles){t=0,n=0;const e=this.gameManager.Tiles.tileData.find((e=>e.selected));if(e){const t=this.gameManager.Tiles.tileData.indexOf(e);this.gameManager.Tiles.tileData[t].selected=!1}}}))}}class hx{constructor(e){let{ctx:t,canvas:n,gameImage:r,gameWidth:i,gameHeight:s}=e;this.ctx=t,this.canvas=n,this.gameWidth=i,this.gameHeight=s,this.gameImage=r,this.GameBody=new cx(this),this.touchListener=new dx(this),this.mouseListener=new ux(this)}animate(){this.ctx.clearRect(0,0,this.gameWidth,this.gameHeight),this.GameBody.animate(),this.Tiles&&this.Tiles.animate()}}class fx{constructor(e,t){this.tileData=[],this.gameManager=e,this.gameImage=t;const n=this.gameImage.width,r=this.gameImage.height,i=this.gameManager.gameWidth,s=this.gameManager.gameHeight;for(let o=0;o<4;o++)for(let e=1;e<=6;e++)this.tileData.push({offset:{x:o*(n/4),y:r/6*(e-1)},position:{x:o*((i-10)/4)+5,y:e*((s-10)/7)+5},selected:!1,width:(i-10)/4,height:(s-10)/7,row:o,column:e,dragOffset:{x:0,y:0}});this.initialTileData=Array.from(this.tileData);const a=[];for(let o=0;o<24;o++){let e,t;do{e=Math.floor(4*Math.random()),t=Math.floor(6*Math.random())+1}while(a.some((n=>n.positionX===e&&n.positionY===t)));this.tileData[o].position={x:e*((i-10)/4)+5,y:t*((s-10)/7)+5},this.tileData[o].row=e,this.tileData[o].column=t,a.push({positionX:e,positionY:t})}}animate(){const e=this.gameManager.gameWidth,t=this.gameManager.gameHeight,n=this.gameImage;this.tileData.forEach((e=>{this.gameManager.ctx.drawImage(n,e.offset.x,e.offset.y,n.width/4,n.height/6,e.position.x,e.position.y,e.width,e.height)})),this.gameManager.ctx.drawImage(n,(e-10)/4*3+5,5,(e-10)/4,(t-10)/7-5)}moveSelectedTile(e,t){const n=this.gameManager.gameWidth,r=this.gameManager.gameHeight,i=this.tileData[t];if(!i)return;let s=i.row,a=i.column;switch(e){case"up":a=Math.max(i.column-1,0);break;case"down":a=Math.min(i.column+1,6);break;case"left":s=Math.max(i.row-1,0);break;case"right":s=Math.min(i.row+1,3)}(0===s&&0===a||this.isValidPosition(s,a))&&!this.tileData.some((e=>e.row===s&&e.column===a))&&(this.tileData[t].row=s,this.tileData[t].column=a,this.tileData[t].position={x:s*((n-10)/4)+5,y:a*((r-10)/7)+5})}isValidPosition(e,t){return e>=0&&e<=3&&t>=1&&t<=6}}const px=()=>{const{uid:t,loggedIn:n}=N_(),r=(0,e.useRef)(null),[i,s]=(0,e.useState)(null),[o,l]=(0,e.useState)(360),[c,u]=(0,e.useState)(0),d=(0,e.useRef)(null);(0,e.useEffect)((()=>{const e=r.current,t=e.getContext("2d");d.current=new hx({ctx:t,canvas:e,gameImage:i,gameWidth:o,gameHeight:c});const n=()=>{let t=window.innerWidth<371?window.innerWidth-10:360,n=(t-10)/4*7+10;window.innerHeight-30<n&&(n=window.innerHeight-40,t=n/7*4-10),t===o&&n===c||(l(t),u(n)),e&&(e.width=t,e.height=n)};return n(),window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}}),[o,c]),(0,e.useEffect)((()=>{if(i){const e=new Image;e.src=i,e.onload=()=>{d.current.Tiles=new fx(d.current,e)}}}),[i]),(0,e.useEffect)((()=>{const e=()=>{r&&d.current.animate(),requestAnimationFrame(e)};return e(),()=>{cancelAnimationFrame(e)}}),[]);return(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[(0,a.jsx)(F_,{loggedIn:n,uid:t}),(0,a.jsx)(w,{md:7,className:" mx-auto px-0 px-md-3 vh-100 pb-5 pb-md-0",style:{overflowY:"scroll"},children:(0,a.jsxs)(v,{className:"text-center",children:[!i&&(0,a.jsx)(_,{className:"justify-content-center mb-3",children:(0,a.jsx)(w,{md:8,children:(0,a.jsx)(V,{children:(0,a.jsxs)(V.Body,{children:[(0,a.jsx)("h2",{children:"Image Slide Puzzle"}),(0,a.jsx)(Vh,{children:(0,a.jsxs)(Vh.Group,{controlId:"imagePicker",children:[(0,a.jsx)(Vh.Label,{children:"Select an Image:"}),(0,a.jsx)(Vh.Control,{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t&&t.type.includes("image")){const e=URL.createObjectURL(t);s(e)}}})]})})]})})})}),(0,a.jsx)(_,{className:"justify-content-center",children:(0,a.jsx)(w,{md:8,children:(0,a.jsx)("canvas",{ref:r,style:{border:"1px solid #ccc",display:"block",margin:"auto"}})})})]})}),(0,a.jsx)(ew,{})]})}),(0,a.jsx)(Xb,{uid:t})]})};class mx{constructor(e,t,n,r){this.myGamepad=null,this.connected=!1,this.gamepadIndex=r,this.Paddle=e,this.game=t,this.ball=n,window.addEventListener("gamepadconnected",(e=>{this.connected||this.gamepadIndex!==e.gamepad.index||(this.connected=!0)})),window.addEventListener("gamepaddisconnected",(e=>{this.gamepadIndex===e.gamepad.index&&(this.connected=!1)}))}update(){this.myGamepad=navigator.getGamepads()[this.gamepadIndex],this.myGamepad.buttons.map((e=>e.pressed)).forEach(((e,t)=>{if(e)switch(t){case 2:0!==this.game.gamestate&&2!==this.game.gamestate&&3!==this.game.gamestate&&(this.ball.speed={x:8,y:-8},this.game.gamestate=1);break;case 9:this.game.togglePause()}}));var e=this.applyDeadzone(this.myGamepad.axes[0],.25);this.applyDeadzone(this.myGamepad.axes[2],.25),this.applyDeadzone(this.myGamepad.axes[1],.25),this.applyDeadzone(void 0===this.myGamepad.axes[5]?this.myGamepad.axes[3]:this.myGamepad.axes[5],.25);0===e&&(this.Paddle.speed<0&&this.Paddle.stop(),this.Paddle.speed>0&&this.Paddle.stop()),e<0?this.Paddle.moveLeft():e>0&&this.Paddle.moveRight()}applyDeadzone(e,t,n){return(n=(Math.abs(e)-t)/(1-t))<0&&(n=0),n*(e>0?1:-1)}}class gx{constructor(e,t,n){document.addEventListener("keydown",(r=>{switch(r.keyCode){case 37:case 65:e.moveLeft();break;case 39:case 68:e.moveRight();break;case 27:t.togglePause();break;case 32:t.start();break;case 13:0!==t.gamestate&&2!==t.gamestate&&3!==t.gamestate&&(n.speed={x:6,y:-6},t.gamestate=1)}})),document.addEventListener("keyup",(t=>{switch(t.keyCode){case 37:case 65:e.speed<0&&e.stop();break;case 39:case 68:e.speed>0&&e.stop()}}))}}class vx{constructor(e){this.gameWidth=e.gameWidth,this.width=150,this.height=20,this.game=e,this.maxSpeed=10,this.speed=0,this.position={x:e.gameWidth/2-this.width/2,y:e.gameHeight-this.height-10}}moveLeft(){this.speed=-this.maxSpeed}moveRight(){this.speed=this.maxSpeed}draw(e){e.fillStyle="#0ff",e.fillRect(this.position.x,this.position.y,this.width,this.height)}stop(){this.speed=0}update(e){this.position.x+=this.speed,5===this.game.gamestate&&(this.game.ball.position.x=this.position.x+this.width/2-this.game.ball.size/2),this.position.x<0&&(this.position.x=0),this.position.x+this.width>this.gameWidth&&(this.position.x=this.gameWidth-this.width)}}function yx(e,t){let n=e.position.y+e.size,r=e.position.y,i=t.position.y,s=t.position.y+t.height,a=t.position.x,o=t.position.x+t.width;return n>=i&&r<=s&&e.position.x>=a&&e.position.x+e.size<=o}class _x{constructor(e){this.image=new Image,this.image.src="/assets/BrickBreak/PngItem_2373133.png",this.size=16,this.gameWidth=e.gameWidth,this.gameHeight=e.gameHeight,this.game=e,this.reset()}reset(){this.position={x:this.game.paddle.position.x+this.game.paddle.width/2-this.size/2,y:this.gameHeight-this.size-this.game.paddle.height-10},this.speed={x:0,y:0}}draw(e){e.drawImage(this.image,this.position.x,this.position.y,this.size,this.size)}update(e){this.position.x+=this.speed.x,this.position.y+=this.speed.y,(this.position.x+this.size>this.gameWidth||this.position.x<0)&&(this.speed.x=-this.speed.x),this.position.y<0&&(this.speed.y=-this.speed.y),this.position.y+this.size>this.gameHeight&&(this.game.lives--,document.getElementById("lives").innerText=this.game.lives,this.reset(),this.game.gamestate=5);this.position.y,this.size,this.game.paddle.position.y,this.game.paddle.position.x,this.game.paddle.position.x,this.game.paddle.width;yx(this,this.game.paddle)&&(this.speed.y=-this.speed.y,this.position.y=this.game.paddle.position.y-this.size)}}class bx{constructor(e,t,n){document.getElementById("left_touch").addEventListener("touchstart",(function(){e.moveLeft()})),document.getElementById("right_touch").addEventListener("touchstart",(function(){e.moveRight()})),document.getElementById("left_touch").addEventListener("touchend",(t=>{e.speed<0&&e.stop()})),document.getElementById("right_touch").addEventListener("touchend",(t=>{e.speed>0&&e.stop()})),document.getElementById("center_touch").addEventListener("touchstart",(function(){5===t.gamestate?(n.speed={x:3,y:-3},t.gamestate=1):2!==t.gamestate&&3!==t.gamestate||t.start()})),document.getElementById("pause_img").addEventListener("click",(function(){t.togglePause()}))}}class wx{constructor(e,t,n){this.image=new Image,this.image.src="/assets/BrickBreak/bricksx64.png",this.position=t,this.width=n,this.height=24,this.game=e,this.markedForDeletion=!1}update(){yx(this.game.ball,this)&&(this.game.ball.speed.y=-this.game.ball.speed.y,this.markedForDeletion=!0)}draw(e){e.drawImage(this.image,this.position.x,this.position.y,this.width,this.height)}}const xx={1:[[1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1,1,1],[0,1,1,1,1,1,1,1,1,1,1,0],[0,0,1,1,1,1,1,1,1,1,0,0]],2:[[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1]],3:[[1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,1,1,1,1,1,1,1,0,0,1],[1,0,1,0,0,0,0,0,1,0,0,1],[1,0,1,1,1,1,1,1,1,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1]],4:[[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0]],5:[[1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,1,0,0,0,0,0,1,0,0,1],[1,0,0,1,0,0,0,1,0,0,0,1],[1,0,0,0,1,0,1,0,0,0,0,1],[1,0,0,0,0,1,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1]],6:[[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0]],7:[[1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,1,1,1,1,1,1,1,0,0,1],[1,0,1,0,0,0,0,0,1,0,0,1],[1,0,1,1,1,1,1,1,1,0,0,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1]],8:[[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0]],9:[[1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,0,0,0,1],[1,0,1,0,0,0,0,0,1,0,0,1],[1,0,0,1,0,0,0,1,0,0,0,1],[1,0,0,0,1,0,1,0,0,0,0,1],[1,0,0,0,0,1,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1,1,1]],10:[[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0,1,0]]},kx=0,Cx=1,Ex=2,Sx=3,Ix=4,Tx=5,Nx=6;class Px{constructor(e,t,n){n&&t>e?(this.gameWidth=t,this.gameHeight=e):(this.gameWidth=e,this.gameHeight=t),this.gamestate=Ex,this.paddle=new vx(this),this.ball=new _x(this),this.gameObjects=[],this.bricks=[],this.lives=3,this.levels=xx,this.currentLevel=1,new gx(this.paddle,this,this.ball),new bx(this.paddle,this,this.ball),this.gamepad=new mx(this.paddle,this,this.ball,1)}start(){this.gamestate!==Ex&&this.gamestate!==Ix&&this.gamestate!==Sx||(this.gamestate===Sx&&(this.lives=3),document.getElementById("lives").innerText=this.lives,this.bricks=function(e,t,n){let r=[];return t.forEach(((t,i)=>{t.forEach(((t,s)=>{if(1===t){let t={x:n/12*s,y:75+24*i};r.push(new wx(e,t,n/12))}}))})),r}(this,this.levels[this.currentLevel],this.gameWidth),this.gameObjects=[this.ball,this.paddle],this.ball.reset(),this.gamestate=Tx,document.getElementById("pause_img").style.zIndex=10)}update(e){0===this.lives&&(this.gamestate=Sx),this.gamestate!==kx&&this.gamestate!==Nx&&this.gamestate!==Ex&&this.gamestate!==Sx&&(0===this.bricks.length&&(this.currentLevel=(this.currentLevel,1),this.gamestate=Ix,this.start()),[...this.gameObjects,...this.bricks].forEach((t=>t.update(e))),this.bricks=this.bricks.filter((e=>!e.markedForDeletion)),this.gamepad.connected&&this.gamepad.update())}draw(e){[...this.gameObjects,...this.bricks].forEach((t=>t.draw(e))),this.gamestate!=kx&&this.gamestate!=Nx||(e.rect(0,0,this.gameWidth,this.gameHeight),e.fillStyle="rgba(0,0,0,0.5)",e.fill(),e.font="30px Arial",e.fillStyle="white",e.textAlign="center",e.fillText("Paused",this.gameWidth/2,this.gameHeight/2)),this.gamestate==Ex&&(e.rect(0,0,this.gameWidth,this.gameHeight),e.fillStyle="rgba(0,0,0,1)",e.fill(),e.font="30px Arial",e.fillStyle="white",e.textAlign="center",e.fillText("Press Spacebar or Tap the Screen to Start",this.gameWidth/2,this.gameHeight/2),document.getElementById("pause_img").style.zIndex=0),this.gamestate==Sx&&(e.rect(0,0,this.gameWidth,this.gameHeight),e.fillStyle="rgba(0,0,0,1)",e.fill(),e.font="30px Arial",e.fillStyle="white",e.textAlign="center",e.fillText("Game Over",this.gameWidth/2,this.gameHeight/2),document.getElementById("pause_img").style.zIndex=0)}togglePause(){switch(this.gamestate){case kx:this.gamestate=Cx;break;case Cx:this.gamestate=kx;break;case Tx:this.gamestate=Nx;break;case Nx:this.gamestate=Tx}}}const jx={gameBody:{position:"relative",height:"100vh"},gameScreen:{display:"block",position:"absolute",top:0,left:0,width:"100%",height:"100%",margin:0,padding:0},fullscreen:{position:"absolute",bottom:"10px",right:"10px",fontSize:"24px",cursor:"pointer",zIndex:1e3,color:"grey"},touchArea:{flexGrow:1,height:"100%",zIndex:10,marginTop:60},pauseImage:{width:40,height:40,margin:8,zIndex:8},livesImage:{width:40,height:40,margin:8},header:{display:"flex",justifyContent:"space-between",padding:0,position:"absolute",top:0,left:0,width:"100%",zIndex:10}},Rx=()=>{const t=(0,e.useRef)(null),n=(0,e.useRef)(null),r=(0,e.useRef)(0),[i,s]=(0,e.useState)(window.innerWidth),[o,l]=(0,e.useState)(window.innerHeight),[c,u]=(0,e.useState)(!1),{uid:d,loggedIn:h}=N_(),[f,p]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{u(/Mobi|Android/i.test(navigator.userAgent))}),[]),(0,e.useEffect)((()=>{const e=()=>{const e=window.innerWidth,r=window.innerHeight;if(s(e),l(r),n.current&&(c&&o>i?(n.current.gameWidth=r,n.current.gameHeight=e):(n.current.gameWidth=e,n.current.gameHeight=r)),t.current){const n=t.current,s=n.getContext("2d");n.width=e,n.height=r,c&&o>i?(s.save(),s.translate(e,0),s.rotate(Math.PI/2)):s.restore()}};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}}),[c]),(0,e.useEffect)((()=>{const e=t.current.getContext("2d");if(!n.current){n.current=new Px(i,o,c);const s=a=>{const l=a-r.current;r.current=a,o>i&&c?e.clearRect(0,0,o,i):e.clearRect(0,0,i,o),t.current&&n.current.update(l),t.current&&n.current.draw(e),requestAnimationFrame(s)};return requestAnimationFrame(s),()=>{cancelAnimationFrame(s)}}}),[i,o]),(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[!f&&(0,a.jsx)(F_,{loggedIn:h,uid:d}),(0,a.jsx)(w,{md:f?12:7,className:" mx-auto px-0 vh-100 "+(f?"":"pb-md-0 px-md-3 pb-5"),style:{overflowY:"auto"},children:(0,a.jsx)(v,{fluid:!0,className:"p-0",children:(0,a.jsxs)("div",{id:"game-body",style:jx.gameBody,children:[(0,a.jsxs)("div",{id:"head",style:jx.header,children:[(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)("img",{src:"/assets/BrickBreak/pngwing.com.png",alt:"Lives",id:"lives_img",style:jx.livesImage}),(0,a.jsx)("p",{id:"lives",className:"m-0",children:"3"})]}),(0,a.jsx)("img",{src:"/assets/BrickBreak/windows-media-player-pause-button.png",alt:"Pause",id:"pause_img",style:jx.pauseImage})]}),(0,a.jsxs)("div",{className:"d-flex h-100",style:{overflowY:"hidden"},children:[(0,a.jsx)("div",{id:"left_touch",style:jx.touchArea}),(0,a.jsx)("div",{id:"center_touch",style:jx.touchArea}),(0,a.jsx)("div",{id:"right_touch",style:jx.touchArea})]}),(0,a.jsx)("canvas",{id:"gameScreen",ref:t,style:jx.gameScreen}),(0,a.jsx)("i",{className:`bi ${f?"bi-fullscreen-exit":"bi-fullscreen"} `,style:jx.fullscreen,onClick:()=>{p((e=>!e))}})]})})}),!f&&(0,a.jsx)(ew,{})]})}),!f&&(0,a.jsx)(Xb,{uid:d})]})};class Ox{constructor(e,t){this.myGamepad=null,this.connected=!1,this.game=e,this.ball=t,window.addEventListener("gamepadconnected",(e=>{this.connected||this.gamepadIndex!==e.gamepad.index&&this.gamepadIndex||(this.connected=!0,this.gamepadIndex=e.gamepad.index)})),window.addEventListener("gamepaddisconnected",(e=>{this.gamepadIndex===e.gamepad.index&&(this.connected=!1)}))}update(){this.myGamepad=navigator.getGamepads()[this.gamepadIndex],this.myGamepad.buttons.map((e=>e.pressed)).forEach(((e,t)=>{if(e)switch(t){case 2:0!==this.game.gamestate&&2!==this.game.gamestate&&3!==this.game.gamestate&&(this.game.gamestate=1);break;case 9:this.game.togglePause()}}));var e=this.applyDeadzone(this.myGamepad.axes[0],.25);0===e&&(this.ball.speed.x<0&&this.ball.stop(),this.ball.speed.x>0&&this.ball.stop()),e<0?this.ball.moveLeft():e>0&&this.ball.moveRight()}applyDeadzone(e,t,n){return(n=(Math.abs(e)-t)/(1-t))<0&&(n=0),n*(e>0?1:-1)}}class Dx{constructor(e){const t=new Image;t.src="/assets/BallFall/PngItem_2373133.png",this.image=t,this.gameWidth=e.gameWidth,this.gameHeight=e.gameHeight,this.height=.03*this.gameHeight,this.width=.03*this.gameWidth,this.game=e,this.maxSpeed=10,this.reset()}reset(){this.position={x:this.gameWidth/2-this.width/2,y:this.gameHeight/2-this.height/2},this.speed={x:0,y:0}}draw(e){e.drawImage(this.image,this.position.x,this.position.y,this.width,this.height)}moveLeft(){this.speed.x=-this.maxSpeed}moveRight(){this.speed.x=this.maxSpeed}stop(){this.speed.x=0}update(e){this.position.x+=this.speed.x,this.position.y+=this.speed.y,this.position.y<0&&(this.game.lives-=1,document.getElementById("lives").innerText=this.game.lives,this.reset(),this.game.gamestate=5),this.position.y+this.height>this.gameHeight&&(this.game.lives-=1,document.getElementById("lives").innerText=this.game.lives,this.reset(),this.game.gamestate=5),this.position.x<0&&(this.position.x=0),this.position.x+this.width>this.gameWidth&&(this.position.x=this.gameWidth-this.width)}}function Lx(e,t){let n=e.position.y+e.height+e.speed.y,r=e.position.y,i=t.position.y,s=e.position.x-e.speed.x,a=e.position.x+e.width+e.speed.x,o=t.position.y+t.height,l=t.position.x,c=t.position.x+t.width;return n>=i&&s>=l&&a<=c&&r<=o}class Mx{constructor(e,t){const n=new Image;n.src="/assets/BallFall/pngwing.com.png",this.image=n,this.gameWidth=e.gameWidth,this.gameHeight=e.gameHeight,this.height=.03*this.gameHeight,this.width=.03*this.gameWidth,this.game=e,this.speed=-4,this.position={x:t,y:e.gameHeight-this.height}}draw(e){e.drawImage(this.image,this.position.x,this.position.y,this.width,this.height)}update(e){this.position.y+=this.speed,Lx(this.game.ball,this)&&this.game.lives<5&&(this.markedForDeletion=!0,this.game.lives+=1,document.getElementById("lives").innerText=this.game.lives),this.position.y+this.height<0&&(this.markedForDeletion=!0)}}class Ax{constructor(e,t){this.gameWidth=e.gameWidth,this.width=this.gameWidth>480?120:this.gameWidth/4,this.height=10,this.game=e,this.speed=-4,this.position={x:t,y:e.gameHeight}}draw(e){e.fillStyle="#0ff",e.fillRect(this.position.x,this.position.y,this.width,this.height)}update(){this.position.y+=this.speed,Lx(this.game.ball,this)?(this.game.ball.speed.y=0,this.game.ball.position.y=this.position.y-this.game.ball.height):this.game.ball.speed.y=2,this.position.y+this.height<0&&(this.markedForDeletion=!0)}}class Fx{constructor(e,t){document.addEventListener("keydown",(n=>{switch(n.keyCode){case 37:t.moveLeft();break;case 39:t.moveRight();break;case 27:e.togglePause();break;case 32:e.start();break;case 13:0!==e.gamestate&&2!==e.gamestate&&3!==e.gamestate&&(e.gamestate=1)}})),document.addEventListener("keyup",(e=>{switch(e.keyCode){case 37:t.speed.x<0&&t.stop();break;case 39:t.speed.x>0&&t.stop()}}))}}class $x{constructor(e,t){document.getElementById("left_touch").addEventListener("touchstart",(function(){t.moveLeft()})),document.getElementById("right_touch").addEventListener("touchstart",(function(){t.moveRight()})),document.getElementById("left_touch").addEventListener("touchend",(e=>{t.speed.x<0&&t.stop()})),document.getElementById("right_touch").addEventListener("touchend",(e=>{t.speed.x>0&&t.stop()})),document.getElementById("center_touch").addEventListener("touchstart",(function(){5===e.gamestate?e.gamestate=1:2!==e.gamestate&&3!==e.gamestate||e.start()})),document.getElementById("pause_img").addEventListener("click",(function(){e.togglePause()}))}}const Ux=0,zx=1,Bx=2,Wx=3,Hx=4,qx=5,Vx=6;class Gx{constructor(e,t){this.gameWidth=e,this.gameHeight=t,this.gamestate=Bx,this.ball=new Dx(this),this.lives=3,this.gameObjects=[],this.newPaddle=0,this.paddles=[],this.extraHealths=[],this.score=0,this.gamepad=new Ox(this,this.ball),new Fx(this,this.ball),new $x(this,this.ball)}start(){this.gamestate!==Bx&&this.gamestate!==Hx&&this.gamestate!==Wx||(this.gamestate===Wx&&(this.lives=3),document.getElementById("lives").innerText=this.lives,this.ball.reset(),this.paddles=[],this.extraHealths=[],this.score=0,this.gamestate=qx,document.getElementById("pause_img").style.zIndex=10)}update(e){0===this.lives&&(this.gamestate=Wx),this.gamestate!==Ux&&this.gamestate!==Vx&&this.gamestate!==Bx&&this.gamestate!==Wx&&(this.paddles=function(e,t,n,r){if(t.newPaddle++,t.newPaddle===Math.round(e/(e/24))){var i=0,s=e-(e>480?120:e/4),a=Math.floor(Math.random()*(s-i+1)+i);i=1,s=10,3===Math.floor(Math.random()*(s-i+1)+i)&&r.push(new Mx(t,a)),n.push(new Ax(t,a)),t.newPaddle=0}return n}(this.gameWidth,this,this.paddles,this.extraHealths),[this.ball,...this.extraHealths,...this.paddles].forEach((t=>t.update(e))),this.paddles=this.paddles.filter((e=>!e.markedForDeletion)),this.extraHealths=this.extraHealths.filter((e=>!e.markedForDeletion)),this.score+=1,document.getElementById("score").innerText=Math.round(this.score/5),this.gamepad.connected&&this.gamepad.update())}draw(e){[this.ball,...this.extraHealths,...this.paddles].forEach((t=>t.draw(e))),this.gamestate!=Ux&&this.gamestate!=Vx||(e.rect(0,0,this.gameWidth,this.gameHeight),e.fillStyle="rgba(0,0,0,0.5)",e.fill(),e.font="30px Arial",e.fillStyle="white",e.textAlign="center",e.fillText("Paused",this.gameWidth/2,this.gameHeight/2)),this.gamestate==Bx&&(e.rect(0,0,this.gameWidth,this.gameHeight),e.fillStyle="rgba(0,0,0,1)",e.fill(),e.font="30px Arial",e.fillStyle="white",e.textAlign="center",e.fillText("Press Spacebar or Tap the Screen to Start",this.gameWidth/2,this.gameHeight/2),document.getElementById("pause_img").style.zIndex=0),this.gamestate==Wx&&(e.rect(0,0,this.gameWidth,this.gameHeight),e.fillStyle="rgba(0,0,0,1)",e.fill(),e.font="30px Arial",e.fillStyle="white",e.textAlign="center",e.fillText("Game Over",this.gameWidth/2,this.gameHeight/2),document.getElementById("pause_img").style.zIndex=0)}togglePause(){switch(this.gamestate){case Ux:this.gamestate=zx;break;case zx:this.gamestate=Ux;break;case qx:this.gamestate=Vx;break;case Vx:this.gamestate=qx}}}const Kx={gameBody:{position:"relative",height:"100vh"},gameScreen:{display:"block",position:"absolute",top:0,left:0,width:"100%",height:"100%"},fullscreen:{position:"absolute",bottom:"10px",right:"10px",fontSize:"24px",cursor:"pointer",zIndex:1e3,color:"grey"},touchArea:{flexGrow:1,height:"100%",zIndex:10,marginTop:60},pauseImage:{width:40,height:40,margin:8,zIndex:8},livesText:{marginRight:10},livesImage:{width:40,height:40,margin:8},header:{display:"flex",justifyContent:"space-between",padding:0,position:"absolute",top:0,left:0,width:"100%",zIndex:10},scoreLabel:{marginLeft:15,fontSize:"1.2rem",color:"black"},score:{fontSize:"1.2rem",color:"black"}},Yx=()=>{const{uid:t,loggedIn:n}=N_(),r=(0,e.useRef)(null),i=(0,e.useRef)(null),s=(0,e.useRef)(0),[o,l]=(0,e.useState)(window.innerWidth),[c,u]=(0,e.useState)(window.innerHeight),[d,h]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{const e=()=>{l(window.innerWidth),u(window.innerHeight),i.current&&(i.current.gameWidth=window.innerWidth,i.current.gameHeight=window.innerHeight),r.current&&(r.current.width=window.innerWidth,r.current.height=window.innerHeight)};return window.addEventListener("resize",e),e(),()=>{window.removeEventListener("resize",e)}}),[]),(0,e.useEffect)((()=>{const e=r.current.getContext("2d");if(!i.current){i.current=new Gx(o,c);const t=n=>{const a=n-s.current;s.current=n,e.clearRect(0,0,o,c),r.current&&(i.current.update(a),i.current.draw(e)),requestAnimationFrame(t)};return requestAnimationFrame(t),()=>{cancelAnimationFrame(t)}}}),[o,c]),(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[!d&&(0,a.jsx)(F_,{loggedIn:n,uid:t}),(0,a.jsx)(w,{md:d?12:7,className:" mx-auto px-0 vh-100 "+(d?"":"pb-md-0 px-md-3 pb-5"),style:{overflowY:"auto"},children:(0,a.jsx)(v,{fluid:!0,className:"p-0",children:(0,a.jsxs)("div",{id:"game-body",style:Kx.gameBody,children:[(0,a.jsxs)("div",{id:"head",style:Kx.header,children:[(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)("img",{src:"/assets/BallFall/pngwing.com.png",alt:"Lives",id:"lives_img",style:Kx.livesImage}),(0,a.jsx)("p",{id:"lives",style:Kx.livesText,children:"3"})]}),(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)("img",{src:"/assets/Ballfall/windows-media-player-pause-button.png",alt:"Pause",id:"pause_img",style:Kx.pauseImage}),(0,a.jsxs)("p",{id:"score-label",style:Kx.scoreLabel,children:["Score:"," ",(0,a.jsx)("span",{id:"score",style:Kx.score,children:"0"})]})]})]}),(0,a.jsxs)("div",{className:"d-flex h-100",style:{overflowY:"hidden"},children:[(0,a.jsx)("div",{id:"left_touch",style:Kx.touchArea}),(0,a.jsx)("div",{id:"center_touch",style:Kx.touchArea}),(0,a.jsx)("div",{id:"right_touch",style:Kx.touchArea})]}),(0,a.jsx)("canvas",{id:"gameScreen",ref:r,style:Kx.gameScreen}),(0,a.jsx)("i",{className:`bi ${d?"bi-fullscreen-exit":"bi-fullscreen"} `,style:Kx.fullscreen,onClick:()=>{h((e=>!e))}})]})})}),!d&&(0,a.jsx)(ew,{})]})}),!d&&(0,a.jsx)(Xb,{uid:t})]})},Qx=(e,t,n,r)=>[[1,2,3],[4,5,6],[7,8,9],[1,4,7],[2,5,8],[3,6,9],[1,5,9],[3,5,7]].filter((t=>t.includes(e))).some((e=>e.every((e=>t[`${n}${e}`].value===r)))),Xx=(e,t,n,r,i,s,a,o)=>{e((e=>{let l=e;const c=t+1;n||(n=c);const u=l[`Stile${n}`].tiles;if(""!==u[`tile${c}`].value)return l;l[`Stile${n}`].tiles[`tile${c}`].value=i,Object.values(u).every((e=>""!==e.value))&&(l[`Stile${n}`].value="-"),Qx(c,u,"tile",i)&&(l[`Stile${n}`].value=i,Qx(c,l,"Stile",i)&&console.log("win"));let d=""===l[`Stile${c}`].value?c:null;return r(d),s((e=>"Player1"===e?"Player2":"Player1")),a&&zu(`Games/SuperTicTacToe/${a}/players/${o}`,{tiles:l,curSuperTile:d}),l}))},Jx=e=>{let{dimensions:t,tilesValue:n,setDisplayHint:r}=e;return(0,a.jsx)("div",{className:"floatingBody",children:(0,a.jsxs)("div",{className:"hintBody",style:{width:t.tilesBody,height:t.tilesBody},children:[(0,a.jsx)("div",{className:"floatingClose",onClick:()=>r(!1),children:"\u2716"}),Object.values(n).map(((e,n)=>(0,a.jsx)("div",{className:"STile",style:{width:`${t.tile}px`,height:`${t.tile}px`,display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(3, 1fr)"},children:Object.values(e.tiles).map(((e,n)=>(0,a.jsx)("div",{className:"hintTile",style:{width:t.titleTile-1+"px",height:t.titleTile-1+"px"},children:e.value},n)))},n)))]})})},Zx=(e,t,n,r,i,s,a,o)=>{if(!s)return;const l=i+1,c=t[`Stile${l}`].value;null===n&&""===c?(r(i+1),a&&zu(`Games/SuperTicTacToe/${a}/players/${o}`,{curSuperTile:l})):e(!0)},ek=(e,t,n)=>{const r="O"===n?"X":"O",i=(e,t)=>{const{tile1:n,tile2:r,tile3:i,tile4:s,tile5:a,tile6:o,tile7:l,tile8:c,tile9:u}=e.tiles;return[[n.value,r.value,i.value],[s.value,a.value,o.value],[l.value,c.value,u.value],[n.value,s.value,l.value],[r.value,a.value,c.value],[i.value,o.value,u.value],[n.value,a.value,u.value],[i.value,a.value,l.value]].some((e=>e.every((e=>e===t))))},s=e=>Object.keys(e.tiles).filter((t=>""===e.tiles[t].value)),a=e=>parseInt(e.replace("tile",""))-1,o=(e,t)=>{const n=s(e);for(const r of n){if(e.tiles[r].value=t,i(e,t))return e.tiles[r].value="",a(r);e.tiles[r].value=""}return null},l=e[`Stile${t}`];if(null!==t&&void 0!==t&&0!==s(l).length){let e=o(l,n);if(null!==e)return e;let t=o(l,r);if(null!==t)return t;const i=s(l);if(i.length>0){const e=i[Math.floor(Math.random()*i.length)];return a(e)}}else{for(let t=1;t<=9;t++){const i=e[`Stile${t}`];let s=o(i,n);if(null!==s)return s;let a=o(i,r);if(null!==a)return a}for(let t=1;t<=9;t++){const n=e[`Stile${t}`],r=s(n);if(r.length>0){const e=r[Math.floor(Math.random()*r.length)];return a(e)}}}return null},tk=async(e,t,n,r,i,s)=>{const a=await D_(`Games/${r}/${t}`);let o=[];a&&(o=Object.keys(a.players));const l={online:!0,tiles:n,curSuperTile:""};if(o.includes(e)){const n=`Games/${r}/${t}/players/${e}`;await zu(n,l),s(a.players[e].player)}Iu(Eu(b_,`Games/${r}/${t}/players/${e}`)).update({online:!1});const c=await M_(`Games/${r}/${t}/players`,(e=>{i(Object.values(e).every((e=>e.online)))}));return c},nk=(e,t,n,r,i,s)=>{M_(`Games/SuperTicTacToe/${e}/players/${t}/`,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.current,a=n.current;if(e&&e.player===a){let n=null;if(t){var o,l;const i=`Stile${t}`,s=null===(o=r.current[i])||void 0===o?void 0:o.tiles,a=null===(l=e.tiles[i])||void 0===l?void 0:l.tiles;n=Object.keys(a).findIndex((e=>a[e].value!==s[e].value))}(n||t!==e.curSuperTile)&&s(n,e.curSuperTile,t,a)}}))},rk=()=>{const{uid:t,loggedIn:n}=N_(),{roomKey:r}=cn(),[i,s]=(0,e.useState)(null),[o,l]=(0,e.useState)("Player1"),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(!1),[f,p]=(0,e.useState)(null),[m,g]=(0,e.useState)(!1),y=(0,e.useRef)(i),b=(0,e.useRef)(o),[x,k]=(0,e.useState)((()=>({gameWidth:0,gameHeight:0,tilesBody:0,tile:0,titleWidth:0,titleHeight:0,titleTileBody:0,titleTile:0}))),[C,E]=(0,e.useState)((e=>{const t={};for(let n=1;n<=9;n++){t[`Stile${n}`]={value:"",tiles:{}};for(let e=1;e<=9;e++)t[`Stile${n}`].tiles[`tile${e}`]={value:""}}return t})),S=(0,e.useRef)(C),I={Player1:"X",Player2:"O"},T=()=>{let e,t;t=window.innerWidth<371?window.innerWidth-10:372,e=(t-12)/3*4+15,window.innerHeight-30<e&&(e=window.innerHeight-40,t=3*(e/4-15)+12),k({gameWidth:`${t}px`,gameHeight:`${e}px`,tilesBody:`${t}px`,tile:(t-12)/3,titleWidth:`${t}px`,titleHeight:(e-15)/4+3+"px",titleTileBody:(e-15)/4+3+"px",titleTile:(e-15)/4/3})};0===x.gameWidth&&0===x.gameHeight&&T(),window.addEventListener("resize",T),(0,e.useEffect)((()=>{if("Player2"===o&&"COMPUTER"===f){const e=ek(C,i,I[o]);setTimeout((()=>{Xx(E,e,i,s,I[o],l)}),1e3)}}),[o]),(0,e.useEffect)((()=>{let e=null;if(r&&t)return"Single"===r?p("COMPUTER"):tk(t,r,C,"SuperTicTacToe",g,u).then((t=>e=t)),()=>{if(e&&e(),t&&r){zu(`Games/SuperTicTacToe/${r}/players/${t}`,{option:!1})}}}),[t,r]);const N=(e,t,n,r)=>{null===e||-1===e?s(t):Xx(E,e,n,s,I[r],l)};return(0,e.useEffect)((()=>{y.current=i,S.current=C,b.current=o}),[i,C,o]),(0,e.useEffect)((()=>{m&&(p("PVP"),nk(r,r,b,S,y,N))}),[m]),(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[(0,a.jsx)(F_,{loggedIn:n,uid:t}),(0,a.jsx)(w,{md:7,className:"d-flex mx-auto px-0 px-md-3 vh-100 pb-5 pb-md-0  justify-content-center align-content-center overflow-auto",children:(0,a.jsx)(V,{style:{width:"min-content",height:"fit-content"},children:(0,a.jsx)(V.Body,{className:"body",children:(0,a.jsxs)("div",{className:"gamebody",style:{width:x.gameWidth,height:x.gameHeight},children:[(0,a.jsxs)("div",{className:"title",style:{width:x.titleWidth,height:x.titleHeight},children:[(0,a.jsx)("div",{className:"titleTiles",style:{width:x.titleTileBody,height:x.titleTileBody},children:Object.values(C).map(((e,n)=>(0,a.jsx)("div",{className:"titleTile",style:{backgroundColor:i-1===n?"red":"#eee",width:x.titleTile,height:x.titleTile},onClick:()=>Zx(h,C,i,s,n,f,r,t),children:e.value},n)))}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{style:{display:"flex"},children:[(0,a.jsx)("div",{children:"Turn: "}),(0,a.jsx)("div",{children:"Player1"===o?"Player 1":"COMPUTER"===f?"Computer":"Player 2"})]}),!i&&(0,a.jsx)("div",{children:"Select a Super Tile to Play"})]})]}),(0,a.jsx)("div",{className:"tiles",style:{width:x.tilesBody,height:x.tilesBody},children:i&&Object.values(C[`Stile${i}`].tiles).map(((e,n)=>(0,a.jsx)("div",{className:"tile",style:{width:`${x.tile}px`,height:`${x.tile}px`,fontSize:`${x.tile}px`},onClick:()=>{"COMPUTER"===f&&"Player2"===o||"PVP"===f&&o!==c||Xx(E,n,i,s,I[o],l,r,t)},children:e.value},n)))}),d&&(0,a.jsx)(Jx,{dimensions:x,tilesValue:C,setDisplayHint:h})]})})})}),(0,a.jsx)(ew,{})]})}),(0,a.jsx)(Xb,{uid:t})]})},ik=(e,t,n,r)=>[[1,2,3],[4,5,6],[7,8,9],[1,4,7],[2,5,8],[3,6,9],[1,5,9],[3,5,7]].filter((t=>t.includes(e))).some((e=>e.every((e=>t[`tile${e}`].value===r)))),sk=(e,t,n,r,i,s)=>{e((e=>{let a={...e};const o=t+1;return""!==a[`tile${o}`].value||(a[`tile${o}`].value=n,ik(o,a,"tile",n)&&console.log(`${n} wins!`),r((e=>"Player1"===e?"Player2":"Player1")),i&&zu(`Games/TicTacToe/${i}/players/${s}`,{tiles:a})),a}))},ak=(e,t)=>{const n="O"===t?"X":"O",r=(e,t)=>[[1,2,3],[4,5,6],[7,8,9],[1,4,7],[2,5,8],[3,6,9],[1,5,9],[3,5,7]].some((n=>n.every((n=>e[`tile${n}`].value===t)))),i=e=>Object.keys(e).filter((t=>""===e[t].value)),s=(e,t)=>{const n=i(e);for(const i of n){if(e[i].value=t,r(e,t))return e[i].value="",parseInt(i.replace("tile",""))-1;e[i].value=""}return null};let a=s(e,t);if(null!==a)return a;let o=s(e,n);if(null!==o)return o;const l=i(e);if(l.length>0){const e=l[Math.floor(Math.random()*l.length)];return parseInt(e.replace("tile",""))-1}return null},ok=async(e,t,n,r,i,s)=>{const a=await D_(`Games/${r}/${t}`);let o=[];a&&(o=Object.keys(a.players));const l={online:!0,tiles:n};if(o.includes(e)){const n=`Games/${r}/${t}/players/${e}`;await zu(n,l),s(a.players[e].player)}Iu(Eu(b_,`Games/${r}/${t}/players/${e}`)).update({online:!1});const c=await M_(`Games/${r}/${t}/players`,(e=>{i(Object.values(e).every((e=>e.online)))}));return c},lk=(e,t,n,r,i)=>{M_(`Games/TicTacToe/${t}/players/`,(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=Object.values(t).find((t=>t.id!==e)),a=n.current;if(s&&s.player===a){let e=null;const t=r.current,n=s.tiles;e=Object.keys(n).findIndex((e=>n[e].value!==t[e].value)),e&&i(e,a)}}))},ck=()=>{const{uid:t,loggedIn:n}=N_(),{roomKey:r}=cn(),[i,s]=(0,e.useState)("Player1"),[o,l]=(0,e.useState)(null),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(!1),f=(0,e.useRef)(i),[p,m]=(0,e.useState)({gameWidth:0,gameHeight:0,tileSize:0}),[g,y]=(0,e.useState)((()=>{const e={};for(let t=1;t<=9;t++)e[`tile${t}`]={value:""};return e})),b=(0,e.useRef)(g),x={Player1:"X",Player2:"O"},k=()=>{let e=window.innerWidth<371?window.innerWidth-10:372,t=e;window.innerHeight-30<t&&(t=window.innerHeight-40,e=t),m({gameWidth:`${e}px`,gameHeight:`${t}px`,tileSize:(e-12)/3})};0===p.gameWidth&&0===p.gameHeight&&k(),window.addEventListener("resize",k),(0,e.useEffect)((()=>{if("Player2"===i&&"COMPUTER"===o){const e=ak(g,x[i]);setTimeout((()=>{sk(y,e,x[i],s)}),1e3)}}),[i]),(0,e.useEffect)((()=>{let e=null;if(r&&t)return"Single"===r?l("COMPUTER"):ok(t,r,g,"TicTacToe",h,u).then((t=>e=t)),()=>{if(e&&e(),t&&r){zu(`Games/TicTacToe/${r}/players/${t}`,{option:!1})}}}),[t,r]);const C=(e,t)=>{null!==e&&-1!==e&&sk(y,e,x[t],s)};return(0,e.useEffect)((()=>{b.current=g,f.current=i}),[g,i]),(0,e.useEffect)((()=>{d&&(l("PVP"),lk(t,r,f,b,C))}),[d]),(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[(0,a.jsx)(F_,{loggedIn:n,uid:t}),(0,a.jsx)(w,{md:7,className:"d-flex mx-auto px-0 px-md-3 vh-100 pb-5 pb-md-0  justify-content-center align-content-center overflow-auto",children:(0,a.jsx)(V,{style:{width:"min-content",height:"fit-content"},children:(0,a.jsx)(V.Body,{className:"body",children:(0,a.jsxs)("div",{className:"gamebody",style:{width:p.gameWidth},children:[(0,a.jsx)("div",{className:"title",children:(0,a.jsxs)("div",{children:["Turn: ","Player1"===i?"Player 1":"Player 2"]})}),(0,a.jsx)("div",{className:"tiles",style:{width:p.gameWidth,height:p.gameHeight},children:Object.values(g).map(((e,n)=>(0,a.jsx)("div",{className:"tile",style:{width:`${p.tileSize}px`,height:`${p.tileSize}px`,fontSize:`${p.tileSize}px`},onClick:()=>{"COMPUTER"===o&&"Player2"===i||"PVP"===o&&i!==c||!o||sk(y,n,x[i],s,r,t)},children:e.value},n)))})]})})})}),(0,a.jsx)(ew,{})]})}),(0,a.jsx)(Xb,{uid:t})]})},uk=t=>{let{friendsList:n,show:r,handleClose:i,Game:s,UID:o}=t;const[l,c]=(0,e.useState)([]);return(0,a.jsxs)(Gd,{show:r,onHide:i,centered:!0,children:[(0,a.jsxs)(Gd.Header,{className:"d-flex justify-content-between",children:[(0,a.jsx)(ht,{variant:"close",onClick:i,className:"m-0"}),l.length>0&&(0,a.jsx)(ht,{variant:"primary",onClick:async()=>{const e=await Iw(s.name,l,o);await Promise.all(l.map((t=>Tw(o,t,s.name,e)))),window.location.href=`/Games/${s.path}/${e}`,i()},children:"Send Request"})]}),(0,a.jsxs)(Gd.Body,{className:"text-center",children:[(0,a.jsxs)(Vh.Group,{controlId:"friendSearchInput",className:"mb-3 text-start",children:[(0,a.jsx)(Vh.Label,{children:"Select Friends"}),(0,a.jsx)(xw,{children:(0,a.jsx)(Vh.Control,{type:"text",placeholder:"Search friends"})})]}),(0,a.jsx)("div",{className:"friend-list",children:n.map((e=>{const t=l.includes(e.id);return(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center",children:[(0,a.jsx)(Q,{src:e.profilePhoto||"/images/defaultGroup.png",roundedCircle:!0,style:{height:"40px",width:"40px",marginRight:"10px"}}),(0,a.jsx)("span",{children:e.name})]}),(0,a.jsx)(ht,{variant:t?"danger":"success",onClick:()=>{return t=e.id,void c((e=>e.includes(t)?e.filter((e=>e!==t)):l.length<s.maxPlayers-1?[...e,t]:void 0));var t},children:t?"Remove":"Add"})]},e.id)}))})]})]})},dk=()=>{const{uid:t,loggedIn:n,isPending:r}=N_(),[i,s]=(0,e.useState)([]),[o,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)(null),[d,h]=(0,e.useState)(!1),[f,p]=(0,e.useState)(!1),m=()=>p(!0);(0,e.useEffect)((()=>{n&&g()}),[n]);const g=()=>{D_(`UsersDetails/${t}`).then((e=>{e&&(e.name||m())})).catch((e=>{console.error("Error:",e)}))};return(0,e.useEffect)((()=>{t&&(async()=>{s(await(async()=>{const e=await D_(`friend/${t}/Friends`);return e?(await Promise.all(Object.keys(e).map((async e=>{const t=await D_(`UsersDetails/${e}`);return t?{id:e,name:t.name,profilePhoto:t.profilePhoto}:null})))).filter(Boolean):[]})())})()}),[t]),(0,e.useEffect)((()=>{!r&&c&&(n?l(!0):h(!0))}),[c,r]),(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[(0,a.jsx)(F_,{loggedIn:n,uid:t}),(0,a.jsx)(w,{md:7,className:"vh-100 mx-auto px-0 px-md-3 vh-100 pb-5 pb-md-0",style:{overflowY:"auto"},children:(0,a.jsx)("div",{className:"pt-3",children:(0,a.jsxs)(fb.Container,{defaultActiveKey:"Single-Player",children:[(0,a.jsxs)(mh,{variant:"tabs",className:"d-flex justify-content-between",children:[(0,a.jsx)(mh.Item,{className:"flex-fill text-center",children:(0,a.jsx)(mh.Link,{eventKey:"Single-Player",children:"Single-Player"})}),(0,a.jsx)(mh.Item,{className:"flex-fill text-center",children:(0,a.jsx)(mh.Link,{eventKey:"Multi-Player",children:"Multi-Player"})})]}),(0,a.jsxs)(fb.Content,{children:[(0,a.jsx)(fb.Pane,{eventKey:"Single-Player",children:(0,a.jsx)("div",{className:"d-flex flex-column w-100",children:Sw.SinglePlayer.map((e=>(0,a.jsx)(Dn,{to:`/Games/${e.path}/Single`,className:"game-card w-100 mb-3",style:{textDecoration:"none"},children:(0,a.jsx)(V,{className:" bg-light w-100",children:(0,a.jsx)(V.Body,{children:(0,a.jsx)(V.Title,{children:e.name})})})},e.name)))})}),(0,a.jsx)(fb.Pane,{eventKey:"Multi-Player",children:(0,a.jsx)("div",{className:"d-flex flex-column w-100",children:Sw.MultiPlayer.map((e=>(0,a.jsx)("div",{onClick:()=>u(e),className:"game-card w-100 mb-3",style:{cursor:"pointer"},children:(0,a.jsx)(V,{className:" bg-light w-100",children:(0,a.jsx)(V.Body,{children:(0,a.jsx)(V.Title,{children:e.name})})})},e.name)))})})]})]})})}),(0,a.jsx)(ew,{})]})}),(0,a.jsx)(Xb,{uid:t}),(0,a.jsx)(uk,{friendsList:i,show:o,handleClose:()=>l(!1),Game:c,UID:t}),(0,a.jsx)(S_,{show:d,handleClose:()=>h(!1),handleProfileEdit:m,returnOnClose:!0}),(0,a.jsx)(O_,{show:f,handleClose:()=>p(!1)})]})};class hk{constructor(e){this.GameManager=e,this.ctx=e.ctx,this.background=new Image,this.background.src="/assets/Whot/TableBackground.jpeg"}animate(){const e=this.GameManager.gameDimensions;this.ctx.fillStyle="#eee",this.ctx.fillRect(0,0,e.width,e.height),this.ctx.drawImage(this.background,0,0,e.width,e.height)}}const fk=async(e,t)=>{const n=t.room;await zu(`Games/Whot/${n}/data/`,e)},pk=e=>{for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e},mk=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=t.indexOf(e);return t[(r+(n?2:1))%t.length]};class gk{constructor(e){this.canvas=e.canvas,this.gameManager=e,this.touchX=0,this.touchY=0,this.cardSelected=null,this.canvas.addEventListener("mousedown",(e=>{const{Cards:t}=this.gameManager;if(t){const n=e.offsetX,r=e.offsetY;if(!t.stacks)return;Object.keys(t.stacks).forEach((e=>{let i=null;t.stacks[e].cards.forEach((e=>{n>=e.x&&n<=e.x+e.width&&r>=e.y&&r<=e.y+e.height&&(this.touchX=n,this.touchY=r,i=e)})),i&&(i.selected=!0,i.dragOffset={x:n-i.x,y:r-i.y},this.cardSelected=i)}))}})),this.canvas.addEventListener("mousemove",(e=>{if(this.gameManager.player!==this.gameManager.playerTurn||!this.cardSelected)return;const{Cards:t}=this.gameManager,n=this.cardSelected,r=e.offsetX,i=e.offsetY,s=r-this.touchX,a=i-this.touchY,o=this.getCardStack(n);if("market"===o&&s<0){t.getCards(this.gameManager.playerTurn,1),this.deselectCard();const e=mk(this.gameManager.playerTurn,this.gameManager.Cards.roundTurns);return this.gameManager.playerTurn=e,void fk({stacks:JSON.stringify(this.gameManager.Cards.stacks),playerTurn:this.gameManager.playerTurn},this.gameManager)}("player2"===o&&a>0||("player1"===o||this.gameManager.player===o)&&a<0)&&(t.playCard(o,n),this.deselectCard()),this.touchX=r,this.touchY=i})),this.canvas.addEventListener("mouseup",(()=>{if(this.gameManager.Cards&&this.cardSelected){const e=this.getCardStack(this.cardSelected);"market"!==e&&"played"!==e&&this.rearrangeCardsInStack(e),this.deselectCard()}}))}getCardStack(e){return Object.keys(this.gameManager.Cards.stacks).find((t=>this.gameManager.Cards.stacks[t].cards.includes(e)))}deselectCard(){this.cardSelected&&(this.cardSelected.selected=!1,this.cardSelected=null)}rearrangeCardsInStack(e){const t=this.gameManager.Cards.stacks[e].cards,n=t.findIndex((e=>e===this.cardSelected));if(-1!==n){const e=6,r=n-Math.floor(n/e)*e,i=t[n];for(let s=n;s>r;s-=e)t[s]=t[s-e];t[r]=i}}}const vk=e=>{if(e.market.cards.length<3){const t=e.played.cards;if(t.length>1){const n=t.slice(0,-1),r=t[t.length-1],i=pk(n);e.market.cards.push(...i),e.played.cards=[r]}}},yk={box:[1,2,3,5,7,10,11,13,14],circle:[1,2,3,4,5,7,8,10,11,12,13,14],cross:[1,2,3,5,7,10,11,13,14],star:[1,2,3,4,5,7,8],Triangle:[1,2,3,4,5,7,8,10,11,12,13,14]},_k={},bk={};Object.keys(yk).forEach((e=>{yk[e].forEach((t=>{_k[`${e}${t}`]=new Image,bk[`${e}${t}`]={name:`${e}${t}`,shape:e,number:t},_k[`${e}${t}`].src=`./assets/Whot/${e}${t}.png`}))}));class wk{constructor(e){this.gameManager=e,this.ctx=e.ctx,this.cardImages=_k,this.cardData=bk,this.selectedPiece=null,this.roundTurns=[]}setupListeners(){(async(e,t)=>{const n=e.room;await M_(`Games/Whot/${n}/data/`,(e=>t(e)))})(this.gameManager,this.updateGameStacks.bind(this))}animate(){const e=this.gameManager.gameDimensions.width,t=this.gameManager.gameDimensions.height,n={width:(t-40)/5,height:(t-40)/3};Object.keys(this.stacks).forEach((r=>{this.stacks[r].cards.forEach(((i,s)=>{let a,o;i.image=this.cardImages[i.name],i.width=n.width,i.height=n.height,[a,o]=this.calculateCardPosition(r,s,n,e,t,6,3),i.targetPosition={x:a,y:o},i.offset={position:{x:"market"===r?i.image.width/2:0,y:0},size:{width:i.image.width/2,height:i.image.height}},(e=>{e.x?(e.x+=.1*(e.targetPosition.x-e.x),e.y+=.1*(e.targetPosition.y-e.y)):(e.x=e.targetPosition.x,e.y=e.targetPosition.y)})(i),this.ctx.drawImage(i.image,i.offset.position.x,i.offset.position.y,i.offset.size.width,i.offset.size.height,i.x,i.y,n.width,n.height)}))}))}calculateCardPosition(e,t,n,r,i,s,a){let o,l,c,u;switch(e){case"market":c=r-(n.width+n.width/2)-.3*t,u=i/2+(n.height-i/2);break;case"played":c=(r-n.width)/2-.3*t,u=(i-n.height)/2;break;case this.gameManager.player:o=Math.floor(t/s),l=t%s,c=n.width/2+l*(n.width-10),u=i-n.height-20-o*a}return[c,u]}Restart(){const e=pk(Object.values(this.cardData));this.roundTurns=this.roundTurns.length<2?this.gameManager.players:this.roundTurns;const t=this.roundTurns;this.gameManager.player===t[0]&&(this.stacks={market:{cards:[]},played:{cards:e}},t.forEach((e=>{this.stacks[e]={cards:[]}})),fk({stacks:JSON.stringify(this.stacks),playerTurn:this.gameManager.playerTurn},this.gameManager),setTimeout((()=>{vk(this.stacks),t.forEach((e=>{this.getCards(e,5)})),fk({stacks:JSON.stringify(this.stacks),playerTurn:this.gameManager.playerTurn},this.gameManager)}),3e3))}getCards(e,t){const n=this.stacks.market.cards.slice(0,t);this.stacks[e].cards.push(...n),this.stacks.market.cards=this.stacks.market.cards.slice(t),vk(this.stacks)}playCard(e,t){const n=this.roundTurns,r=this.stacks[e].cards.findIndex((e=>e===t));if(-1===r||e!==this.gameManager.playerTurn)return;const i=this.stacks.played.cards,s=i[i.length-1];if(s&&!this.isValidMove(s,t))return;this.stacks.played.cards.push(t),this.stacks[e].cards.splice(r,1),this.stacks[e].cards.length<1&&this.playerWins(e);const a=mk(this.gameManager.playerTurn,n);this.updateGameStatus(t,a)}updateGameStatus(e,t){switch(e.number){case 2:this.getCards(t,2);break;case 14:this.getCards(t,1)}const n=1===e.number||8===e.number||2===e.number||14===e.number;this.gameManager.playerTurn=mk(this.gameManager.playerTurn,this.roundTurns,n),fk({stacks:JSON.stringify(this.stacks),playerTurn:this.gameManager.playerTurn},this.gameManager)}updateGameStacks(e){e&&(this.stacks=JSON.parse(e.stacks),this.gameManager.playerTurn=e.playerTurn)}isValidMove(e,t){return e.shape===t.shape||e.number===t.number}playerWins(e){if(this.roundTurns.length>2){const t={};this.roundTurns.forEach((e=>{t[e]=0,this.stacks[e].cards.forEach((n=>{let r=n.number;"star"===n.shape&&(r*=2),t[e]+=r}))})),this.remainingCardsCount=t[this.gameManager.player],this.gameManager.win=e;const n=Object.keys(t).reduce(((e,n)=>t[e]>t[n]?e:n)),r=this.roundTurns.filter((e=>e!==n));this.roundTurns=r}else this.roundTurns=this.gameManager.players;this.setIsWinner(!0)}}class xk{constructor(e){this.canvas=e.canvas,this.gameManager=e,this.touchX=0,this.touchY=0,this.cardSelected=null,this.canvas.addEventListener("touchstart",(e=>{const{Cards:t}=this.gameManager;if(t){const n=e.touches[0],r=n.clientX,i=n.clientY;if(this.touchX=r,this.touchY=i,!t.stacks)return;Object.keys(t.stacks).forEach((e=>{let n=null;t.stacks[e].cards.forEach((e=>{r>=e.x&&r<=e.x+e.width&&i>=e.y&&i<=e.y+e.height&&(n=e)})),n&&(n.selected=!0,n.dragOffset={x:r-n.x,y:i-n.y},this.cardSelected=n)}))}})),this.canvas.addEventListener("touchmove",(e=>{if(this.gameManager.player!==this.gameManager.playerTurn||!this.cardSelected)return;const{Cards:t}=this.gameManager,n=this.cardSelected,r=e.touches[0],i=r.clientX,s=r.clientY,a=i-this.touchX,o=s-this.touchY,l=this.getCardStack(n);if("market"===l&&a<0){t.getCards(this.gameManager.playerTurn,1),this.deselectCard();const e=mk(this.gameManager.playerTurn,this.gameManager.Cards.roundTurns);return this.gameManager.playerTurn=e,void fk({stacks:JSON.stringify(this.gameManager.Cards.stacks),playerTurn:this.gameManager.playerTurn},this.gameManager)}("player2"===l&&o>0||("player1"===l||this.gameManager.player===l)&&o<0)&&(t.playCard(l,n),this.deselectCard()),this.touchX=i,this.touchY=s})),this.canvas.addEventListener("touchend",(()=>{if(this.gameManager.Cards&&this.cardSelected){const e=this.getCardStack(this.cardSelected);"market"!==e&&"played"!==e&&this.rearrangeCardsInStack(e),this.deselectCard()}}))}getCardStack(e){return Object.keys(this.gameManager.Cards.stacks).find((t=>this.gameManager.Cards.stacks[t].cards.includes(e)))}deselectCard(){this.cardSelected&&(this.cardSelected.selected=!1,this.cardSelected=null)}rearrangeCardsInStack(e){const t=this.gameManager.Cards.stacks[e].cards,n=t.findIndex((e=>e===this.cardSelected));if(-1!==n){const e=6,r=n-Math.floor(n/e)*e,i=t[n];for(let s=n;s>r;s-=e)t[s]=t[s-e];t[r]=i}}}class kk{constructor(e,t,n){this.ctx=e,this.canvas=t,this.gameDimensions=n,this.win=null,this.players=[],this.GameBody=new hk(this),this.Cards=new wk(this),this.touchListener=new xk(this),this.mouseListener=new gk(this),this.Cards.roundTurns=this.players,this.playerTurn=null}Start(e,t,n){this.players=e,this.room=t,this.player=n,this.Cards.roundTurns=this.players,this.playerTurn=this.players[0],this.Cards.setupListeners(),this.Cards.Restart()}animate(){this.ctx.clearRect(0,0,this.gameDimensions,this.gameDimensions),this.GameBody.animate(),this.Cards.stacks&&this.Cards.animate()}}const Ck=t=>{let{gameRef:n}=t;const[r,i]=(0,e.useState)(!1);return(0,a.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center"},children:n.current?r?(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{children:[n.current.win," wins!"]}),n.current.Cards.roundTurns.length>2&&(0,a.jsxs)("p",{children:["Remaining cards: ",n.current.Cards.remainingCardsCount]}),(0,a.jsx)(ht,{onClick:()=>{n.current.Cards.Restart()},children:n.current.Cards.roundTurns.length>2?"Next Round":"New Game"})]}):(n.current.Cards.setIWinner=i,null):null})},Ek=async(e,t,n,r,i)=>{const s=await D_(`Games/${n}/${t}`);let a=[];s&&(a=Object.keys(s.players));const o={online:!0};if(a.includes(e)){const r=`Games/${n}/${t}/players/${e}`;await zu(r,o)}Iu(Eu(b_,`Games/${n}/${t}/players/${e}`)).update({online:!1});const l=await M_(`Games/${n}/${t}/players`,(e=>{r(Object.keys(e).filter((t=>e[t].online))),i(Object.values(e).every((e=>e.online)))}));return l},Sk=()=>{const t=(0,e.useRef)(null),n=(0,e.useRef)(null),r=(0,e.useRef)(null),i=(0,e.useRef)(0),[s,o]=(0,e.useState)(window.innerWidth),[l,c]=(0,e.useState)(window.innerHeight),[u,d]=(0,e.useState)(null),{uid:h,loggedIn:f}=N_(),{roomKey:p}=cn(),[m,g]=(0,e.useState)(!1),[y,b]=(0,e.useState)(!1),[x,k]=(0,e.useState)(!1);return(0,e.useEffect)((()=>{d(/Mobi|Android/i.test(navigator.userAgent))}),[]),(0,e.useEffect)((()=>{if(p&&h){let e=null;return Ek(h,p,"Whot",g,b).then((t=>e=t)),()=>{if(e&&e(),h&&p){zu(`Games/Whot/${p}/players/${h}`,{true:!1})}}}}),[h,p]),(0,e.useEffect)((()=>{if(!n.current||null===u)return;const e=()=>((e,t,n,r,i,s)=>{let a=n.current.clientWidth,o=n.current.clientHeight;const l=t.current.getContext("2d");a<(o-40)/5*7+40&&!s&&(o=(a-40)/7*5+40),r(a),i(o),e.current&&(e.current.gameDimensions={width:a,height:o}),t.current&&(t.current.width=a,t.current.height=o,s?(l.save(),l.translate(a,0),l.rotate(Math.PI/2)):l.restore())})(r,t,n,o,c,u);return n.current.addEventListener("resize",e),e(),()=>{n.current&&n.current.removeEventListener("resize",e)}}),[n,u]),(0,e.useEffect)((()=>{if(y){const e=t.current,n=e.getContext("2d"),a={width:u?l:s,height:u?s:l};if(!r.current){r.current=new kk(n,e,a,u),r.current.Start(m,p,h);const t=e=>{const a=e-i.current;i.current=e,u?n.clearRect(0,0,l,s):n.clearRect(0,0,s,l),r.current.animate(a),requestAnimationFrame(t)};return requestAnimationFrame(t),()=>cancelAnimationFrame(t)}}}),[s,l,m,y]),(0,a.jsxs)("div",{children:[(0,a.jsx)(v,{fluid:!0,children:(0,a.jsxs)(_,{children:[!x&&(0,a.jsx)(F_,{loggedIn:f,uid:h}),(0,a.jsx)(w,{md:x?12:7,className:" mx-auto px-0 vh-100 "+(x?"":"pb-md-0 px-md-3 pb-5"),style:{overflowY:"auto"},children:(0,a.jsx)(v,{fluid:!0,className:"p-0",ref:n,children:(0,a.jsxs)("div",{id:"game-body",className:"position-relative d-flex flex-column vh-100 justify-content-center align-content-center ",children:[(0,a.jsx)(Ck,{gameRef:r}),(0,a.jsx)("canvas",{id:"gameScreen",ref:t}),(0,a.jsx)("i",{className:`bi ${x?"bi-fullscreen-exit":"bi-fullscreen"} `,style:Ik.fullscreen,onClick:()=>{k((e=>!e))}})]})})}),!x&&(0,a.jsx)(ew,{})]})}),!x&&(0,a.jsx)(Xb,{uid:h})]})},Ik={fullscreen:{position:"absolute",bottom:"10px",right:"10px",fontSize:"24px",cursor:"pointer",zIndex:1e3,color:"grey"}},Tk=()=>(0,a.jsx)(jn,{children:(0,a.jsxs)(En,{children:[(0,a.jsx)(kn,{path:"/",element:(0,a.jsx)(tw,{})}),(0,a.jsx)(kn,{path:"/:userId",element:(0,a.jsx)(hw,{})}),(0,a.jsx)(kn,{path:"/:userId/:postId",element:(0,a.jsx)(gw,{})}),(0,a.jsx)(kn,{path:"/search",element:(0,a.jsx)(Jb,{})}),(0,a.jsx)(kn,{path:"/messages",element:(0,a.jsx)(Fw,{})}),(0,a.jsx)(kn,{path:"/messages/:userId",element:(0,a.jsx)(Fw,{})}),(0,a.jsx)(kn,{path:"/notifications",element:(0,a.jsx)($w,{})}),(0,a.jsx)(kn,{path:"/games",element:(0,a.jsx)(dk,{})}),(0,a.jsx)(kn,{path:"/Games/Chess/:roomKey",element:(0,a.jsx)(lx,{})}),(0,a.jsx)(kn,{path:"/Games/ImageSlidePuzzle/:roomKey",element:(0,a.jsx)(px,{})}),(0,a.jsx)(kn,{path:"/Games/BrickBreak/:roomKey",element:(0,a.jsx)(Rx,{})}),(0,a.jsx)(kn,{path:"/Games/BallFall/:roomKey",element:(0,a.jsx)(Yx,{})}),(0,a.jsx)(kn,{path:"/Games/SuperTicTacToe/:roomKey",element:(0,a.jsx)(rk,{})}),(0,a.jsx)(kn,{path:"/Games/TicTacToe/:roomKey",element:(0,a.jsx)(ck,{})}),(0,a.jsx)(kn,{path:"/Games/Whot/:roomKey",element:(0,a.jsx)(Sk,{})})]})});r.createRoot(document.getElementById("root")).render((0,a.jsx)(a.Fragment,{children:(0,a.jsx)(Tk,{})}))})()})();
//# sourceMappingURL=main.600832ca.js.map